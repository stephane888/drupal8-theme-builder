window.lazySizesConfig={lazyClass:'k4-lazyload',loadingClass:'k4-lazyloading',loadedClass:'k4-lazyloaded',expFactor:window.matchMedia&&window.matchMedia('all and (max-width: 780px)').matches?8:4};;if(!Array.prototype.find){Array.prototype.find=function(predicate){'use strict';if(this==null){throw new TypeError('Array.prototype.find a été appelé sur null ou undefined');}
if(typeof predicate!=='function'){throw new TypeError('predicate doit être une fonction');}
var list=Object(this);var length=list.length>>>0;var thisArg=arguments[1];var value;for(var i=0;i<length;i++){value=list[i];if(predicate.call(thisArg,value,i,list)){return value;}}
return undefined;};};;(function(window,document,undefined){var tests=[];var ModernizrProto={_version:'3.6.0',_config:{'classPrefix':'','enableClasses':true,'enableJSClass':true,'usePrefixes':true},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test]);},0);},addTest:function(name,fn,options){tests.push({name:name,fn:fn,options:options});},addAsyncTest:function(fn){tests.push({name:null,fn:fn});}};var Modernizr=function(){};Modernizr.prototype=ModernizrProto;Modernizr=new Modernizr();var classes=[];function is(obj,type){return typeof obj===type;};function testRunner(){var featureNames;var feature;var aliasIdx;var result;var nameIdx;var featureName;var featureNameSplit;for(var featureIdx in tests){if(tests.hasOwnProperty(featureIdx)){featureNames=[];feature=tests[featureIdx];if(feature.name){featureNames.push(feature.name.toLowerCase());if(feature.options&&feature.options.aliases&&feature.options.aliases.length){for(aliasIdx=0;aliasIdx<feature.options.aliases.length;aliasIdx++){featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());}}}
result=is(feature.fn,'function')?feature.fn():feature.fn;for(nameIdx=0;nameIdx<featureNames.length;nameIdx++){featureName=featureNames[nameIdx];featureNameSplit=featureName.split('.');if(featureNameSplit.length===1){Modernizr[featureNameSplit[0]]=result;}else{if(Modernizr[featureNameSplit[0]]&&!(Modernizr[featureNameSplit[0]]instanceof Boolean)){Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]]);}
Modernizr[featureNameSplit[0]][featureNameSplit[1]]=result;}
classes.push((result?'':'no-')+featureNameSplit.join('-'));}}}};var prefixes=(ModernizrProto._config.usePrefixes?' -webkit- -moz- -o- -ms- '.split(' '):['','']);ModernizrProto._prefixes=prefixes;var docElement=document.documentElement;var isSVG=docElement.nodeName.toLowerCase()==='svg';function createElement(){if(typeof document.createElement!=='function'){return document.createElement(arguments[0]);}else if(isSVG){return document.createElementNS.call(document,'http://www.w3.org/2000/svg',arguments[0]);}else{return document.createElement.apply(document,arguments);}};function getBody(){var body=document.body;if(!body){body=createElement(isSVG?'svg':'body');body.fake=true;}
return body;};function injectElementWithStyles(rule,callback,nodes,testnames){var mod='modernizr';var style;var ret;var node;var docOverflow;var div=createElement('div');var body=getBody();if(parseInt(nodes,10)){while(nodes--){node=createElement('div');node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node);}}
style=createElement('style');style.type='text/css';style.id='s'+mod;(!body.fake?div:body).appendChild(style);body.appendChild(div);if(style.styleSheet){style.styleSheet.cssText=rule;}else{style.appendChild(document.createTextNode(rule));}
div.id=mod;if(body.fake){body.style.background='';body.style.overflow='hidden';docOverflow=docElement.style.overflow;docElement.style.overflow='hidden';docElement.appendChild(body);}
ret=callback(div,rule);if(body.fake){body.parentNode.removeChild(body);docElement.style.overflow=docOverflow;docElement.offsetHeight;}else{div.parentNode.removeChild(div);}
return!!ret;};var testStyles=ModernizrProto.testStyles=injectElementWithStyles;Modernizr.addTest('touchevents',function(){var bool;if(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch){bool=true;}else{var query=['@media (',prefixes.join('touch-enabled),('),'heartz',')','{#modernizr{top:9px;position:absolute}}'].join('');testStyles(query,function(node){bool=node.offsetTop===9;});}
return bool;});testRunner();delete ModernizrProto.addTest;delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++){Modernizr._q[i]();}
window.Modernizr=Modernizr;;})(window,document);;(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory((typeof(jQuery)!='undefined')?jQuery:window.Zepto);}}
(function($){"use strict";var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp){return this.attr.apply(this,arguments);}
var val=this.prop.apply(this,arguments);if((val&&val.jquery)||typeof val==='string'){return val;}
return this.attr.apply(this,arguments);};$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
else if(options===undefined){options={};}
method=options.type||this.attr2('method');action=options.url||this.attr2('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form]);};}
if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form]);};}
var fileInputs=$('input[type=file]:enabled',this).filter(function(){return $(this).val()!=='';});var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++){elements[k]=null;}
this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split('&');var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g,' ');part=serialized[i].split('=');result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++){if(serializedData[i]){formdata.append(serializedData[i][0],serializedData[i][1]);}}}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100);}
options.uploadProgress(event,position,total,percent);},false);}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){if(options.formData){o.data=options.formData;}
else{o.data=formdata;}
if(beforeSend){beforeSend.call(this,xhr,o);}};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var deferred=$.Deferred();deferred.abort=function(status){xhr.abort(status);};if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp){el.prop('disabled',false);}
else{el.removeAttr('disabled');}}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2('name');if(!n){$io.attr2('name',id);}
else{id=n;}}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;try{if(io.contentWindow.document.execCommand){io.contentWindow.document.execCommand('Stop');}}
catch(ignore){}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error){s.error.call(s.context,xhr,e,status);}
if(g){$.event.trigger("ajaxError",[xhr,s,e]);}
if(s.complete){s.complete.call(s.context,xhr,e);}}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow){doc=frame.contentWindow.document;}}catch(err){log('cannot get iframe.contentWindow document: '+err);}
if(doc){return doc;}
try{doc=frame.contentDocument?frame.contentDocument:frame.document;}catch(err){log('cannot get iframe.contentDocument: '+err);doc=frame.document;}
return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr2('target'),a=$form.attr2('action'),mp='multipart/form-data',et=$form.attr('enctype')||$form.attr('encoding')||mp;form.setAttribute('target',id);if(!method||/post/i.test(method)){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized'){setTimeout(checkState,50);}}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle){clearTimeout(timeoutHandle);}
timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');}
if(io.attachEvent){io.attachEvent('onload',cb);}
else{io.addEventListener('load',cb,false);}
setTimeout(checkState,15);try{form.submit();}catch(err){var submitFn=document.createElement('form').submit;submitFn.apply(form);}}
finally{form.setAttribute('action',a);form.setAttribute('enctype',et);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
doc=getDoc(io);if(!doc){log('cannot access response document');e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut){return;}}
if(io.detachEvent){io.detachEvent('onload',cb);}
else{io.removeEventListener('load',cb,false);}
var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml){s.dataType='xml';}
xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header.toLowerCase()];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(err){status='parsererror';xhr.error=errMsg=(err||status);}}
catch(err){log('error caught: ',err);status='error';xhr.error=errMsg=(err||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success){s.success.call(s.context,data,'success',xhr);}
deferred.resolve(xhr.responseText,'success',xhr);if(g){$.event.trigger("ajaxSuccess",[xhr,s]);}}
else if(status){if(errMsg===undefined){errMsg=xhr.statusText;}
if(s.error){s.error.call(s.context,xhr,status,errMsg);}
deferred.reject(xhr,'error',errMsg);if(g){$.event.trigger("ajaxError",[xhr,s,errMsg]);}}
if(g){$.event.trigger("ajaxComplete",[xhr,s]);}
if(g&&! --$.active){$.event.trigger("ajaxStop");}
if(s.complete){s.complete.call(s.context,xhr,status);}
callbackProcessed=true;if(s.timeout){clearTimeout(timeoutHandle);}
setTimeout(function(){if(!s.iframeTarget){$io.remove();}
else{$io.attr('src',s.iframeSrc);}
xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error){$.error('parsererror');}}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(e.target).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest('[type=submit]');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var formId=this.attr('id');var els=semantic?form.getElementsByTagName('*'):form.elements;var els2;if(els&&!/MSIE [678]/.test(navigator.userAgent)){els=$(els).get();}
if(formId){els2=$(':input[form='+formId+']').get();if(els2.length){els=(els||[]).concat(els2);}}
if(!els||!els.length){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled){continue;}
if(semantic&&form.clk&&el.type=="image"){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements){elements.push(el);}
for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'){if(elements){elements.push(el);}
var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements){elements.push(el);}
a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array){$.merge(val,v);}
else{val.push(v);}}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes.value&&!(op.attributes.value.specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(t=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true));}else{$(this).val('');}}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden))){this.value='';}}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug){return;}
var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}}));;(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){$.ui=$.ui||{};$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}
return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;},uniqueId:(function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img);}
return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),disableSelection:(function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault();});};})(),enableSelection:function(){return this.unbind(".ui-disableSelection");},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;}});$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}
if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};}));;(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){var dataSpace="ui-effects-",jQuery=$;$.effects={effect:{}};(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}
value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}
if(type.mod){return(value+type.mod)%type.mod;}
return 0>value?0:type.max<value?type.max:value;}
function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}
return inst;}
return colors[string];}
color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}
if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}
var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}
if(type==="string"){return this.parse(stringParse(red)||colors._default);}
if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}
if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}
inst[cache]=space.to(inst._rgba);}
inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}
return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}
return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}
if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else if(startValue-endValue>type.mod/2){startValue-=type.mod;}}
result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}
var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}
return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}
if(i&&i<3){v=Math.round(v*100)+"%";}
return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}
return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}
return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}
if(h*2<1){return q;}
if(h*3<2){return p+(q-p)*((2/3)-h)*6;}
return p;}
spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}
var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else if(r===max){h=(60*(g-b)/diff)+360;}else if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}
if(diff===0){s=0;}else if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}
return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}
var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}
if(value===undefined){return this[cache].slice();}
var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}
local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}
color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}
if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}
if(value==null&&prop.empty){return this;}
if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}
local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}
value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}
value=value.toRgbaString();}
try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}
jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}
return diff;}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){$.extend($.effects,{version:"1.11.4",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i;for(i=0;i<set.length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);if(val===undefined){val="";}
element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}
return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}
switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}
return{x:x,y:y};},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}
element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}
wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}
element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}}
return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}
effect={effect:effect};if(options==null){options={};}
if($.isFunction(options)){callback=options;speed=null;options={};}
if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}
if($.isFunction(speed)){callback=speed;speed=null;}
if(options){$.extend(effect,options);}
speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}
function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}
if(typeof option==="string"&&!$.effects.effect[option]){return true;}
if($.isFunction(option)){return true;}
if(typeof option==="object"&&!option.effect){return true;}
return false;}
$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,args.complete);}else{return this.each(function(){if(args.complete){args.complete.call(this);}});}}
function run(next){var elem=$(this),complete=args.complete,mode=args.mode;function done(){if($.isFunction(complete)){complete.call(elem[0]);}
if($.isFunction(next)){next();}}
if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}
return queue===false?this.each(run):this.queue(queue||"fx",run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;}});})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}
return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2;};});})();return $.effects;}));;(function(factory){if(typeof define==="function"&&define.amd){define(["jquery","./core"],factory);}else{factory(jQuery);}}(function($){$.extend($.ui,{datepicker:{version:"1.11.4"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}
return 0;}
function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}
$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}
inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}
this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}
if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}
input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}
showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.focus(this._showDatepicker);}
if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}
return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}
inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}
divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}
inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst);}
datepicker_extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}
this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}
$.data(this._dialogInput[0],"datepicker",inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp);}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}
if(datepicker_instActive===inst){datepicker_instActive=null;}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}
return false;},_getInst:function(target){try{return $.data(target,"datepicker");}
catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));}
settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}
if(inst){if(this._curInst===inst){this._hideDatepicker();}
date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}
if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}
if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}
this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}
return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}
onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}
return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}
break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}
handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}
break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}
handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}
catch(err){}}
return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}
if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}
var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}
beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}
datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}
if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}
isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}
if($.datepicker._shouldFocusInput(inst)){inst.input.focus();}
$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0));}
inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}
inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus();}
if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}
origyearshtml=inst.yearshtml=null;},0);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}
position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,"datepicker"))){return;}
if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}
if(!showAnim){postProcess();}
this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}
this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}
var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}
this._adjustInstDate(inst,offset+(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}
this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}
inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}
this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else if(inst.input){inst.input.trigger("change");}
if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.focus();}
this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}
value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}
var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),minSize=(match==="y"?size:1),digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}
iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}
iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}
break;default:checkLiteral();}}}
if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}
if(year===-1){year=new Date().getFullYear();}else if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100);}
if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}
month++;day-=dim;}while(true);}
date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}
return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}
var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}
return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}}
return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}
break;default:chars+=format.charAt(iFormat);}}}
return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}
var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}
inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}
catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}
return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}
date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}
this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls=(!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>":"");buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}
calender+="'>";}
calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}
calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}
leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
calender+=tbody+"</tr>";}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender;}
html+=group;}
html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";}}
monthHtml+="</select>";}
if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}
if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";}
inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}
html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}
html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}
return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}
if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}
return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}
var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).delegate(selector,"mouseover",datepicker_handleMouseover);}
function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}}
function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}
return target;}
$.fn.datepicker=function(options){if(!this.length){return this;}
if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true;}
if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.11.4";return $.datepicker;}));;(function(factory){if(typeof define==="function"&&define.amd){define(["../datepicker"],factory);}else{factory(jQuery.datepicker);}}(function(datepicker){datepicker.regional['fr']={closeText:'Fermer',prevText:'Précédent',nextText:'Suivant',currentText:'Aujourd\'hui',monthNames:['janvier','février','mars','avril','mai','juin','juillet','août','septembre','octobre','novembre','décembre'],monthNamesShort:['janv.','févr.','mars','avr.','mai','juin','juil.','août','sept.','oct.','nov.','déc.'],dayNames:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi'],dayNamesShort:['dim.','lun.','mar.','mer.','jeu.','ven.','sam.'],dayNamesMin:['D','L','M','M','J','V','S'],weekHeader:'Sem.',dateFormat:'dd/mm/yy',firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:''};datepicker.setDefaults(datepicker.regional['fr']);return datepicker.regional['fr'];}));;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports!=='undefined'){module.exports=factory(require('jquery'));}else{factory(jQuery);}}(function($){'use strict';var Slick=window.Slick||{};Slick=(function(){var instanceUid=0;function Slick(element,settings){var _=this,dataSettings;_.defaults={accessibility:true,adaptiveHeight:false,appendArrows:$(element),appendDots:$(element),arrows:true,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:false,autoplaySpeed:3000,centerMode:false,centerPadding:'50px',cssEase:'ease',customPaging:function(slider,i){return $('<button type="button" data-role="none" role="button" tabindex="0" />').text(i+1);},dots:false,dotsClass:'slick-dots',draggable:true,easing:'linear',edgeFriction:0.35,fade:false,focusOnSelect:false,infinite:true,initialSlide:0,lazyLoad:'ondemand',mobileFirst:false,pauseOnHover:true,pauseOnFocus:true,pauseOnDotsHover:false,respondTo:'window',responsive:null,rows:1,rtl:false,slide:'',slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:true,swipeToSlide:false,touchMove:true,touchThreshold:5,useCSS:true,useTransform:true,variableWidth:false,vertical:false,verticalSwiping:false,waitForAnimate:true,zIndex:1000};_.initials={animating:false,dragging:false,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:false,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:false,unslicked:false};$.extend(_,_.initials);_.activeBreakpoint=null;_.animType=null;_.animProp=null;_.breakpoints=[];_.breakpointSettings=[];_.cssTransitions=false;_.focussed=false;_.interrupted=false;_.hidden='hidden';_.paused=true;_.positionProp=null;_.respondTo=null;_.rowCount=1;_.shouldClick=true;_.$slider=$(element);_.$slidesCache=null;_.transformType=null;_.transitionType=null;_.visibilityChange='visibilitychange';_.windowWidth=0;_.windowTimer=null;dataSettings=$(element).data('slick')||{};_.options=$.extend({},_.defaults,settings,dataSettings);_.currentSlide=_.options.initialSlide;_.originalSettings=_.options;if(typeof document.mozHidden!=='undefined'){_.hidden='mozHidden';_.visibilityChange='mozvisibilitychange';}else if(typeof document.webkitHidden!=='undefined'){_.hidden='webkitHidden';_.visibilityChange='webkitvisibilitychange';}
_.autoPlay=$.proxy(_.autoPlay,_);_.autoPlayClear=$.proxy(_.autoPlayClear,_);_.autoPlayIterator=$.proxy(_.autoPlayIterator,_);_.changeSlide=$.proxy(_.changeSlide,_);_.clickHandler=$.proxy(_.clickHandler,_);_.selectHandler=$.proxy(_.selectHandler,_);_.setPosition=$.proxy(_.setPosition,_);_.swipeHandler=$.proxy(_.swipeHandler,_);_.dragHandler=$.proxy(_.dragHandler,_);_.keyHandler=$.proxy(_.keyHandler,_);_.instanceUid=instanceUid++;_.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;_.registerBreakpoints();_.init(true);}
return Slick;}());Slick.prototype.activateADA=function(){var _=this;_.$slideTrack.find('.slick-active').attr({'aria-hidden':'false'}).find('a, input, button, select').attr({'tabindex':'0'});};Slick.prototype.addSlide=Slick.prototype.slickAdd=function(markup,index,addBefore){var _=this;if(typeof(index)==='boolean'){addBefore=index;index=null;}else if(index<0||(index>=_.slideCount)){return false;}
_.unload();if(typeof(index)==='number'){if(index===0&&_.$slides.length===0){$(markup).appendTo(_.$slideTrack);}else if(addBefore){$(markup).insertBefore(_.$slides.eq(index));}else{$(markup).insertAfter(_.$slides.eq(index));}}else{if(addBefore===true){$(markup).prependTo(_.$slideTrack);}else{$(markup).appendTo(_.$slideTrack);}}
_.$slides=_.$slideTrack.children(this.options.slide);_.$slideTrack.children(this.options.slide).detach();_.$slideTrack.append(_.$slides);_.$slides.each(function(index,element){$(element).attr('data-slick-index',index);});_.$slidesCache=_.$slides;_.reinit();};Slick.prototype.animateHeight=function(){var _=this;if(_.options.slidesToShow===1&&_.options.adaptiveHeight===true&&_.options.vertical===false){var targetHeight=_.$slides.eq(_.currentSlide).outerHeight(true);_.$list.animate({height:targetHeight},_.options.speed);}};Slick.prototype.animateSlide=function(targetLeft,callback){var animProps={},_=this;_.animateHeight();if(_.options.rtl===true&&_.options.vertical===false){targetLeft=-targetLeft;}
if(_.transformsEnabled===false){if(_.options.vertical===false){_.$slideTrack.animate({left:targetLeft},_.options.speed,_.options.easing,callback);}else{_.$slideTrack.animate({top:targetLeft},_.options.speed,_.options.easing,callback);}}else{if(_.cssTransitions===false){if(_.options.rtl===true){_.currentLeft=-(_.currentLeft);}
$({animStart:_.currentLeft}).animate({animStart:targetLeft},{duration:_.options.speed,easing:_.options.easing,step:function(now){now=Math.ceil(now);if(_.options.vertical===false){animProps[_.animType]='translate('+now+'px, 0px)';_.$slideTrack.css(animProps);}else{animProps[_.animType]='translate(0px,'+now+'px)';_.$slideTrack.css(animProps);}},complete:function(){if(callback){callback.call();}}});}else{_.applyTransition();targetLeft=Math.ceil(targetLeft);if(_.options.vertical===false){animProps[_.animType]='translate3d('+targetLeft+'px, 0px, 0px)';}else{animProps[_.animType]='translate3d(0px,'+targetLeft+'px, 0px)';}
_.$slideTrack.css(animProps);if(callback){setTimeout(function(){_.disableTransition();callback.call();},_.options.speed);}}}};Slick.prototype.getNavTarget=function(){var _=this,asNavFor=_.options.asNavFor;if(asNavFor&&asNavFor!==null){asNavFor=$(asNavFor).not(_.$slider);}
return asNavFor;};Slick.prototype.asNavFor=function(index){var _=this,asNavFor=_.getNavTarget();if(asNavFor!==null&&typeof asNavFor==='object'){asNavFor.each(function(){var target=$(this).slick('getSlick');if(!target.unslicked){target.slideHandler(index,true);}});}};Slick.prototype.applyTransition=function(slide){var _=this,transition={};if(_.options.fade===false){transition[_.transitionType]=_.transformType+' '+_.options.speed+'ms '+_.options.cssEase;}else{transition[_.transitionType]='opacity '+_.options.speed+'ms '+_.options.cssEase;}
if(_.options.fade===false){_.$slideTrack.css(transition);}else{_.$slides.eq(slide).css(transition);}};Slick.prototype.autoPlay=function(){var _=this;_.autoPlayClear();if(_.slideCount>_.options.slidesToShow){_.autoPlayTimer=setInterval(_.autoPlayIterator,_.options.autoplaySpeed);}};Slick.prototype.autoPlayClear=function(){var _=this;if(_.autoPlayTimer){clearInterval(_.autoPlayTimer);}};Slick.prototype.autoPlayIterator=function(){var _=this,slideTo=_.currentSlide+_.options.slidesToScroll;if(!_.paused&&!_.interrupted&&!_.focussed){if(_.options.infinite===false){if(_.direction===1&&(_.currentSlide+1)===(_.slideCount-1)){_.direction=0;}
else if(_.direction===0){slideTo=_.currentSlide-_.options.slidesToScroll;if(_.currentSlide-1===0){_.direction=1;}}}
_.slideHandler(slideTo);}};Slick.prototype.buildArrows=function(){var _=this;if(_.options.arrows===true){_.$prevArrow=$(_.options.prevArrow).addClass('slick-arrow');_.$nextArrow=$(_.options.nextArrow).addClass('slick-arrow');if(_.slideCount>_.options.slidesToShow){_.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');_.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');if(_.htmlExpr.test(_.options.prevArrow)){_.$prevArrow.prependTo(_.options.appendArrows);}
if(_.htmlExpr.test(_.options.nextArrow)){_.$nextArrow.appendTo(_.options.appendArrows);}
if(_.options.infinite!==true){_.$prevArrow.addClass('slick-disabled').attr('aria-disabled','true');}}else{_.$prevArrow.add(_.$nextArrow).addClass('slick-hidden').attr({'aria-disabled':'true','tabindex':'-1'});}}};Slick.prototype.buildDots=function(){var _=this,i,dot;if(_.options.dots===true&&_.slideCount>_.options.slidesToShow){_.$slider.addClass('slick-dotted');dot=$('<ul />').addClass(_.options.dotsClass);for(i=0;i<=_.getDotCount();i+=1){dot.append($('<li />').append(_.options.customPaging.call(this,_,i)));}
_.$dots=dot.appendTo(_.options.appendDots);_.$dots.find('li').first().addClass('slick-active').attr('aria-hidden','false');}};Slick.prototype.buildOut=function(){var _=this;_.$slides=_.$slider.children(_.options.slide+':not(.slick-cloned)').addClass('slick-slide');_.slideCount=_.$slides.length;_.$slides.each(function(index,element){$(element).attr('data-slick-index',index).data('originalStyling',$(element).attr('style')||'');});_.$slider.addClass('slick-slider');_.$slideTrack=(_.slideCount===0)?$('<div class="slick-track"/>').appendTo(_.$slider):_.$slides.wrapAll('<div class="slick-track"/>').parent();_.$list=_.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent();_.$slideTrack.css('opacity',0);if(_.options.centerMode===true||_.options.swipeToSlide===true){_.options.slidesToScroll=1;}
$('img[data-lazy]',_.$slider).not('[src]').addClass('slick-loading');_.setupInfinite();_.buildArrows();_.buildDots();_.updateDots();_.setSlideClasses(typeof _.currentSlide==='number'?_.currentSlide:0);if(_.options.draggable===true){_.$list.addClass('draggable');}};Slick.prototype.buildRows=function(){var _=this,a,b,c,newSlides,numOfSlides,originalSlides,slidesPerSection;newSlides=document.createDocumentFragment();originalSlides=_.$slider.children();if(_.options.rows>1){slidesPerSection=_.options.slidesPerRow*_.options.rows;numOfSlides=Math.ceil(originalSlides.length/slidesPerSection);for(a=0;a<numOfSlides;a++){var slide=document.createElement('div');for(b=0;b<_.options.rows;b++){var row=document.createElement('div');for(c=0;c<_.options.slidesPerRow;c++){var target=(a*slidesPerSection+((b*_.options.slidesPerRow)+c));if(originalSlides.get(target)){row.appendChild(originalSlides.get(target));}}
slide.appendChild(row);}
newSlides.appendChild(slide);}
_.$slider.empty().append(newSlides);_.$slider.children().children().children().css({'width':(100/_.options.slidesPerRow)+'%','display':'inline-block'});}};Slick.prototype.checkResponsive=function(initial,forceUpdate){var _=this,breakpoint,targetBreakpoint,respondToWidth,triggerBreakpoint=false;var sliderWidth=_.$slider.width();var windowWidth=window.innerWidth||$(window).width();if(_.respondTo==='window'){respondToWidth=windowWidth;}else if(_.respondTo==='slider'){respondToWidth=sliderWidth;}else if(_.respondTo==='min'){respondToWidth=Math.min(windowWidth,sliderWidth);}
if(_.options.responsive&&_.options.responsive.length&&_.options.responsive!==null){targetBreakpoint=null;for(breakpoint in _.breakpoints){if(_.breakpoints.hasOwnProperty(breakpoint)){if(_.originalSettings.mobileFirst===false){if(respondToWidth<_.breakpoints[breakpoint]){targetBreakpoint=_.breakpoints[breakpoint];}}else{if(respondToWidth>_.breakpoints[breakpoint]){targetBreakpoint=_.breakpoints[breakpoint];}}}}
if(targetBreakpoint!==null){if(_.activeBreakpoint!==null){if(targetBreakpoint!==_.activeBreakpoint||forceUpdate){_.activeBreakpoint=targetBreakpoint;if(_.breakpointSettings[targetBreakpoint]==='unslick'){_.unslick(targetBreakpoint);}else{_.options=$.extend({},_.originalSettings,_.breakpointSettings[targetBreakpoint]);if(initial===true){_.currentSlide=_.options.initialSlide;}
_.refresh(initial);}
triggerBreakpoint=targetBreakpoint;}}else{_.activeBreakpoint=targetBreakpoint;if(_.breakpointSettings[targetBreakpoint]==='unslick'){_.unslick(targetBreakpoint);}else{_.options=$.extend({},_.originalSettings,_.breakpointSettings[targetBreakpoint]);if(initial===true){_.currentSlide=_.options.initialSlide;}
_.refresh(initial);}
triggerBreakpoint=targetBreakpoint;}}else{if(_.activeBreakpoint!==null){_.activeBreakpoint=null;_.options=_.originalSettings;if(initial===true){_.currentSlide=_.options.initialSlide;}
_.refresh(initial);triggerBreakpoint=targetBreakpoint;}}
if(!initial&&triggerBreakpoint!==false){_.$slider.trigger('breakpoint',[_,triggerBreakpoint]);}}};Slick.prototype.changeSlide=function(event,dontAnimate){var _=this,$target=$(event.currentTarget),indexOffset,slideOffset,unevenOffset;if($target.is('a')){event.preventDefault();}
if(!$target.is('li')){$target=$target.closest('li');}
unevenOffset=(_.slideCount%_.options.slidesToScroll!==0);indexOffset=unevenOffset?0:(_.slideCount-_.currentSlide)%_.options.slidesToScroll;switch(event.data.message){case'previous':slideOffset=indexOffset===0?_.options.slidesToScroll:_.options.slidesToShow-indexOffset;if(_.slideCount>_.options.slidesToShow){_.slideHandler(_.currentSlide-slideOffset,false,dontAnimate);}
break;case'next':slideOffset=indexOffset===0?_.options.slidesToScroll:indexOffset;if(_.slideCount>_.options.slidesToShow){_.slideHandler(_.currentSlide+slideOffset,false,dontAnimate);}
break;case'index':var index=event.data.index===0?0:event.data.index||$target.index()*_.options.slidesToScroll;_.slideHandler(_.checkNavigable(index),false,dontAnimate);$target.children().trigger('focus');break;default:return;}};Slick.prototype.checkNavigable=function(index){var _=this,navigables,prevNavigable;navigables=_.getNavigableIndexes();prevNavigable=0;if(index>navigables[navigables.length-1]){index=navigables[navigables.length-1];}else{for(var n in navigables){if(index<navigables[n]){index=prevNavigable;break;}
prevNavigable=navigables[n];}}
return index;};Slick.prototype.cleanUpEvents=function(){var _=this;if(_.options.dots&&_.$dots!==null){$('li',_.$dots).off('click.slick',_.changeSlide).off('mouseenter.slick',$.proxy(_.interrupt,_,true)).off('mouseleave.slick',$.proxy(_.interrupt,_,false));}
_.$slider.off('focus.slick blur.slick');if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow){_.$prevArrow&&_.$prevArrow.off('click.slick',_.changeSlide);_.$nextArrow&&_.$nextArrow.off('click.slick',_.changeSlide);}
_.$list.off('touchstart.slick mousedown.slick',_.swipeHandler);_.$list.off('touchmove.slick mousemove.slick',_.swipeHandler);_.$list.off('touchend.slick mouseup.slick',_.swipeHandler);_.$list.off('touchcancel.slick mouseleave.slick',_.swipeHandler);_.$list.off('click.slick',_.clickHandler);$(document).off(_.visibilityChange,_.visibility);_.cleanUpSlideEvents();if(_.options.accessibility===true){_.$list.off('keydown.slick',_.keyHandler);}
if(_.options.focusOnSelect===true){$(_.$slideTrack).children().off('click.slick',_.selectHandler);}
$(window).off('orientationchange.slick.slick-'+_.instanceUid,_.orientationChange);$(window).off('resize.slick.slick-'+_.instanceUid,_.resize);$('[draggable!=true]',_.$slideTrack).off('dragstart',_.preventDefault);$(window).off('load.slick.slick-'+_.instanceUid,_.setPosition);$(document).off('ready.slick.slick-'+_.instanceUid,_.setPosition);};Slick.prototype.cleanUpSlideEvents=function(){var _=this;_.$list.off('mouseenter.slick',$.proxy(_.interrupt,_,true));_.$list.off('mouseleave.slick',$.proxy(_.interrupt,_,false));};Slick.prototype.cleanUpRows=function(){var _=this,originalSlides;if(_.options.rows>1){originalSlides=_.$slides.children().children();originalSlides.removeAttr('style');_.$slider.empty().append(originalSlides);}};Slick.prototype.clickHandler=function(event){var _=this;if(_.shouldClick===false){event.stopImmediatePropagation();event.stopPropagation();event.preventDefault();}};Slick.prototype.destroy=function(refresh){var _=this;_.autoPlayClear();_.touchObject={};_.cleanUpEvents();$('.slick-cloned',_.$slider).detach();if(_.$dots){_.$dots.remove();}
if(_.$prevArrow&&_.$prevArrow.length){_.$prevArrow.removeClass('slick-disabled slick-arrow slick-hidden').removeAttr('aria-hidden aria-disabled tabindex').css('display','');if(_.htmlExpr.test(_.options.prevArrow)){_.$prevArrow.remove();}}
if(_.$nextArrow&&_.$nextArrow.length){_.$nextArrow.removeClass('slick-disabled slick-arrow slick-hidden').removeAttr('aria-hidden aria-disabled tabindex').css('display','');if(_.htmlExpr.test(_.options.nextArrow)){_.$nextArrow.remove();}}
if(_.$slides){_.$slides.removeClass('slick-slide slick-active slick-center slick-visible slick-current').removeAttr('aria-hidden').removeAttr('data-slick-index').each(function(){$(this).attr('style',$(this).data('originalStyling'));});_.$slideTrack.children(this.options.slide).detach();_.$slideTrack.detach();_.$list.detach();_.$slider.append(_.$slides);}
_.cleanUpRows();_.$slider.removeClass('slick-slider');_.$slider.removeClass('slick-initialized');_.$slider.removeClass('slick-dotted');_.unslicked=true;if(!refresh){_.$slider.trigger('destroy',[_]);}};Slick.prototype.disableTransition=function(slide){var _=this,transition={};transition[_.transitionType]='';if(_.options.fade===false){_.$slideTrack.css(transition);}else{_.$slides.eq(slide).css(transition);}};Slick.prototype.fadeSlide=function(slideIndex,callback){var _=this;if(_.cssTransitions===false){_.$slides.eq(slideIndex).css({zIndex:_.options.zIndex});_.$slides.eq(slideIndex).animate({opacity:1},_.options.speed,_.options.easing,callback);}else{_.applyTransition(slideIndex);_.$slides.eq(slideIndex).css({opacity:1,zIndex:_.options.zIndex});if(callback){setTimeout(function(){_.disableTransition(slideIndex);callback.call();},_.options.speed);}}};Slick.prototype.fadeSlideOut=function(slideIndex){var _=this;if(_.cssTransitions===false){_.$slides.eq(slideIndex).animate({opacity:0,zIndex:_.options.zIndex-2},_.options.speed,_.options.easing);}else{_.applyTransition(slideIndex);_.$slides.eq(slideIndex).css({opacity:0,zIndex:_.options.zIndex-2});}};Slick.prototype.filterSlides=Slick.prototype.slickFilter=function(filter){var _=this;if(filter!==null){_.$slidesCache=_.$slides;_.unload();_.$slideTrack.children(this.options.slide).detach();_.$slidesCache.filter(filter).appendTo(_.$slideTrack);_.reinit();}};Slick.prototype.focusHandler=function(){var _=this;_.$slider.off('focus.slick blur.slick').on('focus.slick blur.slick','*:not(.slick-arrow)',function(event){event.stopImmediatePropagation();var $sf=$(this);setTimeout(function(){if(_.options.pauseOnFocus){_.focussed=$sf.is(':focus');_.autoPlay();}},0);});};Slick.prototype.getCurrent=Slick.prototype.slickCurrentSlide=function(){var _=this;return _.currentSlide;};Slick.prototype.getDotCount=function(){var _=this;var breakPoint=0;var counter=0;var pagerQty=0;if(_.options.infinite===true){while(breakPoint<_.slideCount){++pagerQty;breakPoint=counter+_.options.slidesToScroll;counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow;}}else if(_.options.centerMode===true){pagerQty=_.slideCount;}else if(!_.options.asNavFor){pagerQty=1+Math.ceil((_.slideCount-_.options.slidesToShow)/_.options.slidesToScroll);}else{while(breakPoint<_.slideCount){++pagerQty;breakPoint=counter+_.options.slidesToScroll;counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow;}}
return pagerQty-1;};Slick.prototype.getLeft=function(slideIndex){var _=this,targetLeft,verticalHeight,verticalOffset=0,targetSlide;_.slideOffset=0;verticalHeight=_.$slides.first().outerHeight(true);if(_.options.infinite===true){if(_.slideCount>_.options.slidesToShow){_.slideOffset=(_.slideWidth*_.options.slidesToShow)*-1;verticalOffset=(verticalHeight*_.options.slidesToShow)*-1;}
if(_.slideCount%_.options.slidesToScroll!==0){if(slideIndex+_.options.slidesToScroll>_.slideCount&&_.slideCount>_.options.slidesToShow){if(slideIndex>_.slideCount){_.slideOffset=((_.options.slidesToShow-(slideIndex-_.slideCount))*_.slideWidth)*-1;verticalOffset=((_.options.slidesToShow-(slideIndex-_.slideCount))*verticalHeight)*-1;}else{_.slideOffset=((_.slideCount%_.options.slidesToScroll)*_.slideWidth)*-1;verticalOffset=((_.slideCount%_.options.slidesToScroll)*verticalHeight)*-1;}}}}else{if(slideIndex+_.options.slidesToShow>_.slideCount){_.slideOffset=((slideIndex+_.options.slidesToShow)-_.slideCount)*_.slideWidth;verticalOffset=((slideIndex+_.options.slidesToShow)-_.slideCount)*verticalHeight;}}
if(_.slideCount<=_.options.slidesToShow){_.slideOffset=0;verticalOffset=0;}
if(_.options.centerMode===true&&_.options.infinite===true){_.slideOffset+=_.slideWidth*Math.floor(_.options.slidesToShow/2)-_.slideWidth;}else if(_.options.centerMode===true){_.slideOffset=0;_.slideOffset+=_.slideWidth*Math.floor(_.options.slidesToShow/2);}
if(_.options.vertical===false){targetLeft=((slideIndex*_.slideWidth)*-1)+_.slideOffset;}else{targetLeft=((slideIndex*verticalHeight)*-1)+verticalOffset;}
if(_.options.variableWidth===true){if(_.slideCount<=_.options.slidesToShow||_.options.infinite===false){targetSlide=_.$slideTrack.children('.slick-slide').eq(slideIndex);}else{targetSlide=_.$slideTrack.children('.slick-slide').eq(slideIndex+_.options.slidesToShow);}
if(_.options.rtl===true){if(targetSlide[0]){targetLeft=(_.$slideTrack.width()-targetSlide[0].offsetLeft-targetSlide.width())*-1;}else{targetLeft=0;}}else{targetLeft=targetSlide[0]?targetSlide[0].offsetLeft*-1:0;}
if(_.options.centerMode===true){if(_.slideCount<=_.options.slidesToShow||_.options.infinite===false){targetSlide=_.$slideTrack.children('.slick-slide').eq(slideIndex);}else{targetSlide=_.$slideTrack.children('.slick-slide').eq(slideIndex+_.options.slidesToShow+1);}
if(_.options.rtl===true){if(targetSlide[0]){targetLeft=(_.$slideTrack.width()-targetSlide[0].offsetLeft-targetSlide.width())*-1;}else{targetLeft=0;}}else{targetLeft=targetSlide[0]?targetSlide[0].offsetLeft*-1:0;}
targetLeft+=(_.$list.width()-targetSlide.outerWidth())/2;}}
return targetLeft;};Slick.prototype.getOption=Slick.prototype.slickGetOption=function(option){var _=this;return _.options[option];};Slick.prototype.getNavigableIndexes=function(){var _=this,breakPoint=0,counter=0,indexes=[],max;if(_.options.infinite===false){max=_.slideCount;}else{breakPoint=_.options.slidesToScroll*-1;counter=_.options.slidesToScroll*-1;max=_.slideCount*2;}
while(breakPoint<max){indexes.push(breakPoint);breakPoint=counter+_.options.slidesToScroll;counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow;}
return indexes;};Slick.prototype.getSlick=function(){return this;};Slick.prototype.getSlideCount=function(){var _=this,slidesTraversed,swipedSlide,centerOffset;centerOffset=_.options.centerMode===true?_.slideWidth*Math.floor(_.options.slidesToShow/2):0;if(_.options.swipeToSlide===true){_.$slideTrack.find('.slick-slide').each(function(index,slide){if(slide.offsetLeft-centerOffset+($(slide).outerWidth()/2)>(_.swipeLeft*-1)){swipedSlide=slide;return false;}});slidesTraversed=Math.abs($(swipedSlide).attr('data-slick-index')-_.currentSlide)||1;return slidesTraversed;}else{return _.options.slidesToScroll;}};Slick.prototype.goTo=Slick.prototype.slickGoTo=function(slide,dontAnimate){var _=this;_.changeSlide({data:{message:'index',index:parseInt(slide)}},dontAnimate);};Slick.prototype.init=function(creation){var _=this;if(!$(_.$slider).hasClass('slick-initialized')){$(_.$slider).addClass('slick-initialized');_.buildRows();_.buildOut();_.setProps();_.startLoad();_.loadSlider();_.initializeEvents();_.updateArrows();_.updateDots();_.checkResponsive(true);_.focusHandler();}
if(creation){_.$slider.trigger('init',[_]);}
if(_.options.accessibility===true){_.initADA();}
if(_.options.autoplay){_.paused=false;_.autoPlay();}};Slick.prototype.initADA=function(){var _=this;_.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({'aria-hidden':'true','tabindex':'-1'}).find('a, input, button, select').attr({'tabindex':'-1'});_.$slideTrack.attr('role','listbox');_.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function(i){$(this).attr({'role':'option','aria-describedby':'slick-slide'+_.instanceUid+i+''});});if(_.$dots!==null){_.$dots.attr('role','tablist').find('li').each(function(i){$(this).attr({'role':'presentation','aria-selected':'false','aria-controls':'navigation'+_.instanceUid+i+'','id':'slick-slide'+_.instanceUid+i+''});}).first().attr('aria-selected','true').end().find('button').attr('role','button').end().closest('div').attr('role','toolbar');}
_.activateADA();};Slick.prototype.initArrowEvents=function(){var _=this;if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow){_.$prevArrow.off('click.slick').on('click.slick',{message:'previous'},_.changeSlide);_.$nextArrow.off('click.slick').on('click.slick',{message:'next'},_.changeSlide);}};Slick.prototype.initDotEvents=function(){var _=this;if(_.options.dots===true&&_.slideCount>_.options.slidesToShow){$('li',_.$dots).on('click.slick',{message:'index'},_.changeSlide);}
if(_.options.dots===true&&_.options.pauseOnDotsHover===true){$('li',_.$dots).on('mouseenter.slick',$.proxy(_.interrupt,_,true)).on('mouseleave.slick',$.proxy(_.interrupt,_,false));}};Slick.prototype.initSlideEvents=function(){var _=this;if(_.options.pauseOnHover){_.$list.on('mouseenter.slick',$.proxy(_.interrupt,_,true));_.$list.on('mouseleave.slick',$.proxy(_.interrupt,_,false));}};Slick.prototype.initializeEvents=function(){var _=this;_.initArrowEvents();_.initDotEvents();_.initSlideEvents();_.$list.on('touchstart.slick mousedown.slick',{action:'start'},_.swipeHandler);_.$list.on('touchmove.slick mousemove.slick',{action:'move'},_.swipeHandler);_.$list.on('touchend.slick mouseup.slick',{action:'end'},_.swipeHandler);_.$list.on('touchcancel.slick mouseleave.slick',{action:'end'},_.swipeHandler);_.$list.on('click.slick',_.clickHandler);$(document).on(_.visibilityChange,$.proxy(_.visibility,_));if(_.options.accessibility===true){_.$list.on('keydown.slick',_.keyHandler);}
if(_.options.focusOnSelect===true){$(_.$slideTrack).children().on('click.slick',_.selectHandler);}
$(window).on('orientationchange.slick.slick-'+_.instanceUid,$.proxy(_.orientationChange,_));$(window).on('resize.slick.slick-'+_.instanceUid,$.proxy(_.resize,_));$('[draggable!=true]',_.$slideTrack).on('dragstart',_.preventDefault);$(window).on('load.slick.slick-'+_.instanceUid,_.setPosition);$(document).on('ready.slick.slick-'+_.instanceUid,_.setPosition);};Slick.prototype.initUI=function(){var _=this;if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow){_.$prevArrow.show();_.$nextArrow.show();}
if(_.options.dots===true&&_.slideCount>_.options.slidesToShow){_.$dots.show();}};Slick.prototype.keyHandler=function(event){var _=this;if(!event.target.tagName.match('TEXTAREA|INPUT|SELECT')){if(event.keyCode===37&&_.options.accessibility===true){_.changeSlide({data:{message:_.options.rtl===true?'next':'previous'}});}else if(event.keyCode===39&&_.options.accessibility===true){_.changeSlide({data:{message:_.options.rtl===true?'previous':'next'}});}}};Slick.prototype.lazyLoad=function(){var _=this,loadRange,cloneRange,rangeStart,rangeEnd;function loadImages(imagesScope){$('img[data-lazy]',imagesScope).each(function(){var image=$(this),imageSource=$(this).attr('data-lazy'),imageToLoad=document.createElement('img');imageToLoad.onload=function(){image.animate({opacity:0},100,function(){image.attr('src',imageSource).animate({opacity:1},200,function(){image.removeAttr('data-lazy').removeClass('slick-loading');});_.$slider.trigger('lazyLoaded',[_,image,imageSource]);});};imageToLoad.onerror=function(){image.removeAttr('data-lazy').removeClass('slick-loading').addClass('slick-lazyload-error');_.$slider.trigger('lazyLoadError',[_,image,imageSource]);};imageToLoad.src=imageSource;});}
if(_.options.centerMode===true){if(_.options.infinite===true){rangeStart=_.currentSlide+(_.options.slidesToShow/2+1);rangeEnd=rangeStart+_.options.slidesToShow+2;}else{rangeStart=Math.max(0,_.currentSlide-(_.options.slidesToShow/2+1));rangeEnd=2+(_.options.slidesToShow/2+1)+_.currentSlide;}}else{rangeStart=_.options.infinite?_.options.slidesToShow+_.currentSlide:_.currentSlide;rangeEnd=Math.ceil(rangeStart+_.options.slidesToShow);if(_.options.fade===true){if(rangeStart>0)rangeStart--;if(rangeEnd<=_.slideCount)rangeEnd++;}}
loadRange=_.$slider.find('.slick-slide').slice(rangeStart,rangeEnd);loadImages(loadRange);if(_.slideCount<=_.options.slidesToShow){cloneRange=_.$slider.find('.slick-slide');loadImages(cloneRange);}else
if(_.currentSlide>=_.slideCount-_.options.slidesToShow){cloneRange=_.$slider.find('.slick-cloned').slice(0,_.options.slidesToShow);loadImages(cloneRange);}else if(_.currentSlide===0){cloneRange=_.$slider.find('.slick-cloned').slice(_.options.slidesToShow*-1);loadImages(cloneRange);}};Slick.prototype.loadSlider=function(){var _=this;_.setPosition();_.$slideTrack.css({opacity:1});_.$slider.removeClass('slick-loading');_.initUI();if(_.options.lazyLoad==='progressive'){_.progressiveLazyLoad();}};Slick.prototype.next=Slick.prototype.slickNext=function(){var _=this;_.changeSlide({data:{message:'next'}});};Slick.prototype.orientationChange=function(){var _=this;_.checkResponsive();_.setPosition();};Slick.prototype.pause=Slick.prototype.slickPause=function(){var _=this;_.autoPlayClear();_.paused=true;};Slick.prototype.play=Slick.prototype.slickPlay=function(){var _=this;_.autoPlay();_.options.autoplay=true;_.paused=false;_.focussed=false;_.interrupted=false;};Slick.prototype.postSlide=function(index){var _=this;if(!_.unslicked){_.$slider.trigger('afterChange',[_,index]);_.animating=false;_.setPosition();_.swipeLeft=null;if(_.options.autoplay){_.autoPlay();}
if(_.options.accessibility===true){_.initADA();}}};Slick.prototype.prev=Slick.prototype.slickPrev=function(){var _=this;_.changeSlide({data:{message:'previous'}});};Slick.prototype.preventDefault=function(event){event.preventDefault();};Slick.prototype.progressiveLazyLoad=function(tryCount){tryCount=tryCount||1;var _=this,$imgsToLoad=$('img[data-lazy]',_.$slider),image,imageSource,imageToLoad;if($imgsToLoad.length){image=$imgsToLoad.first();imageSource=image.attr('data-lazy');imageToLoad=document.createElement('img');imageToLoad.onload=function(){image.attr('src',imageSource).removeAttr('data-lazy').removeClass('slick-loading');if(_.options.adaptiveHeight===true){_.setPosition();}
_.$slider.trigger('lazyLoaded',[_,image,imageSource]);_.progressiveLazyLoad();};imageToLoad.onerror=function(){if(tryCount<3){setTimeout(function(){_.progressiveLazyLoad(tryCount+1);},500);}else{image.removeAttr('data-lazy').removeClass('slick-loading').addClass('slick-lazyload-error');_.$slider.trigger('lazyLoadError',[_,image,imageSource]);_.progressiveLazyLoad();}};imageToLoad.src=imageSource;}else{_.$slider.trigger('allImagesLoaded',[_]);}};Slick.prototype.refresh=function(initializing){var _=this,currentSlide,lastVisibleIndex;lastVisibleIndex=_.slideCount-_.options.slidesToShow;if(!_.options.infinite&&(_.currentSlide>lastVisibleIndex)){_.currentSlide=lastVisibleIndex;}
if(_.slideCount<=_.options.slidesToShow){_.currentSlide=0;}
currentSlide=_.currentSlide;_.destroy(true);$.extend(_,_.initials,{currentSlide:currentSlide});_.init();if(!initializing){_.changeSlide({data:{message:'index',index:currentSlide}},false);}};Slick.prototype.registerBreakpoints=function(){var _=this,breakpoint,currentBreakpoint,l,responsiveSettings=_.options.responsive||null;if($.type(responsiveSettings)==='array'&&responsiveSettings.length){_.respondTo=_.options.respondTo||'window';for(breakpoint in responsiveSettings){l=_.breakpoints.length-1;currentBreakpoint=responsiveSettings[breakpoint].breakpoint;if(responsiveSettings.hasOwnProperty(breakpoint)){while(l>=0){if(_.breakpoints[l]&&_.breakpoints[l]===currentBreakpoint){_.breakpoints.splice(l,1);}
l--;}
_.breakpoints.push(currentBreakpoint);_.breakpointSettings[currentBreakpoint]=responsiveSettings[breakpoint].settings;}}
_.breakpoints.sort(function(a,b){return(_.options.mobileFirst)?a-b:b-a;});}};Slick.prototype.reinit=function(){var _=this;_.$slides=_.$slideTrack.children(_.options.slide).addClass('slick-slide');_.slideCount=_.$slides.length;if(_.currentSlide>=_.slideCount&&_.currentSlide!==0){_.currentSlide=_.currentSlide-_.options.slidesToScroll;}
if(_.slideCount<=_.options.slidesToShow){_.currentSlide=0;}
_.registerBreakpoints();_.setProps();_.setupInfinite();_.buildArrows();_.updateArrows();_.initArrowEvents();_.buildDots();_.updateDots();_.initDotEvents();_.cleanUpSlideEvents();_.initSlideEvents();_.checkResponsive(false,true);if(_.options.focusOnSelect===true){$(_.$slideTrack).children().on('click.slick',_.selectHandler);}
_.setSlideClasses(typeof _.currentSlide==='number'?_.currentSlide:0);_.setPosition();_.focusHandler();_.paused=!_.options.autoplay;_.autoPlay();_.$slider.trigger('reInit',[_]);};Slick.prototype.resize=function(){var _=this;if($(window).width()!==_.windowWidth){clearTimeout(_.windowDelay);_.windowDelay=window.setTimeout(function(){_.windowWidth=$(window).width();_.checkResponsive();if(!_.unslicked){_.setPosition();}},50);}};Slick.prototype.removeSlide=Slick.prototype.slickRemove=function(index,removeBefore,removeAll){var _=this;if(typeof(index)==='boolean'){removeBefore=index;index=removeBefore===true?0:_.slideCount-1;}else{index=removeBefore===true?--index:index;}
if(_.slideCount<1||index<0||index>_.slideCount-1){return false;}
_.unload();if(removeAll===true){_.$slideTrack.children().remove();}else{_.$slideTrack.children(this.options.slide).eq(index).remove();}
_.$slides=_.$slideTrack.children(this.options.slide);_.$slideTrack.children(this.options.slide).detach();_.$slideTrack.append(_.$slides);_.$slidesCache=_.$slides;_.reinit();};Slick.prototype.setCSS=function(position){var _=this,positionProps={},x,y;if(_.options.rtl===true){position=-position;}
x=_.positionProp=='left'?Math.ceil(position)+'px':'0px';y=_.positionProp=='top'?Math.ceil(position)+'px':'0px';positionProps[_.positionProp]=position;if(_.transformsEnabled===false){_.$slideTrack.css(positionProps);}else{positionProps={};if(_.cssTransitions===false){positionProps[_.animType]='translate('+x+', '+y+')';_.$slideTrack.css(positionProps);}else{positionProps[_.animType]='translate3d('+x+', '+y+', 0px)';_.$slideTrack.css(positionProps);}}};Slick.prototype.setDimensions=function(){var _=this;if(_.options.vertical===false){if(_.options.centerMode===true){_.$list.css({padding:('0px '+_.options.centerPadding)});}}else{_.$list.height(_.$slides.first().outerHeight(true)*_.options.slidesToShow);if(_.options.centerMode===true){_.$list.css({padding:(_.options.centerPadding+' 0px')});}}
_.listWidth=_.$list.width();_.listHeight=_.$list.height();if(_.options.vertical===false&&_.options.variableWidth===false){_.slideWidth=Math.ceil(_.listWidth/_.options.slidesToShow);_.$slideTrack.width(Math.ceil((_.slideWidth*_.$slideTrack.children('.slick-slide').length)));}else if(_.options.variableWidth===true){_.$slideTrack.width(5000*_.slideCount);}else{_.slideWidth=Math.ceil(_.listWidth);_.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true)*_.$slideTrack.children('.slick-slide').length)));}
var offset=_.$slides.first().outerWidth(true)-_.$slides.first().width();if(_.options.variableWidth===false)_.$slideTrack.children('.slick-slide').width(_.slideWidth-offset);};Slick.prototype.setFade=function(){var _=this,targetLeft;_.$slides.each(function(index,element){targetLeft=(_.slideWidth*index)*-1;if(_.options.rtl===true){$(element).css({position:'relative',right:targetLeft,top:0,zIndex:_.options.zIndex-2,opacity:0});}else{$(element).css({position:'relative',left:targetLeft,top:0,zIndex:_.options.zIndex-2,opacity:0});}});_.$slides.eq(_.currentSlide).css({zIndex:_.options.zIndex-1,opacity:1});};Slick.prototype.setHeight=function(){var _=this;if(_.options.slidesToShow===1&&_.options.adaptiveHeight===true&&_.options.vertical===false){var targetHeight=_.$slides.eq(_.currentSlide).outerHeight(true);_.$list.css('height',targetHeight);}};Slick.prototype.setOption=Slick.prototype.slickSetOption=function(){var _=this,l,item,option,value,refresh=false,type;if($.type(arguments[0])==='object'){option=arguments[0];refresh=arguments[1];type='multiple';}else if($.type(arguments[0])==='string'){option=arguments[0];value=arguments[1];refresh=arguments[2];if(arguments[0]==='responsive'&&$.type(arguments[1])==='array'){type='responsive';}else if(typeof arguments[1]!=='undefined'){type='single';}}
if(type==='single'){_.options[option]=value;}else if(type==='multiple'){$.each(option,function(opt,val){_.options[opt]=val;});}else if(type==='responsive'){for(item in value){if($.type(_.options.responsive)!=='array'){_.options.responsive=[value[item]];}else{l=_.options.responsive.length-1;while(l>=0){if(_.options.responsive[l].breakpoint===value[item].breakpoint){_.options.responsive.splice(l,1);}
l--;}
_.options.responsive.push(value[item]);}}}
if(refresh){_.unload();_.reinit();}};Slick.prototype.setPosition=function(){var _=this;_.setDimensions();_.setHeight();if(_.options.fade===false){_.setCSS(_.getLeft(_.currentSlide));}else{_.setFade();}
_.$slider.trigger('setPosition',[_]);};Slick.prototype.setProps=function(){var _=this,bodyStyle=document.body.style;_.positionProp=_.options.vertical===true?'top':'left';if(_.positionProp==='top'){_.$slider.addClass('slick-vertical');}else{_.$slider.removeClass('slick-vertical');}
if(bodyStyle.WebkitTransition!==undefined||bodyStyle.MozTransition!==undefined||bodyStyle.msTransition!==undefined){if(_.options.useCSS===true){_.cssTransitions=true;}}
if(_.options.fade){if(typeof _.options.zIndex==='number'){if(_.options.zIndex<3){_.options.zIndex=3;}}else{_.options.zIndex=_.defaults.zIndex;}}
if(bodyStyle.OTransform!==undefined){_.animType='OTransform';_.transformType='-o-transform';_.transitionType='OTransition';if(bodyStyle.perspectiveProperty===undefined&&bodyStyle.webkitPerspective===undefined)_.animType=false;}
if(bodyStyle.MozTransform!==undefined){_.animType='MozTransform';_.transformType='-moz-transform';_.transitionType='MozTransition';if(bodyStyle.perspectiveProperty===undefined&&bodyStyle.MozPerspective===undefined)_.animType=false;}
if(bodyStyle.webkitTransform!==undefined){_.animType='webkitTransform';_.transformType='-webkit-transform';_.transitionType='webkitTransition';if(bodyStyle.perspectiveProperty===undefined&&bodyStyle.webkitPerspective===undefined)_.animType=false;}
if(bodyStyle.msTransform!==undefined){_.animType='msTransform';_.transformType='-ms-transform';_.transitionType='msTransition';if(bodyStyle.msTransform===undefined)_.animType=false;}
if(bodyStyle.transform!==undefined&&_.animType!==false){_.animType='transform';_.transformType='transform';_.transitionType='transition';}
_.transformsEnabled=_.options.useTransform&&(_.animType!==null&&_.animType!==false);};Slick.prototype.setSlideClasses=function(index){var _=this,centerOffset,allSlides,indexOffset,remainder;allSlides=_.$slider.find('.slick-slide').removeClass('slick-active slick-center slick-current').attr('aria-hidden','true');_.$slides.eq(index).addClass('slick-current');if(_.options.centerMode===true){centerOffset=Math.floor(_.options.slidesToShow/2);if(_.options.infinite===true){if(index>=centerOffset&&index<=(_.slideCount-1)-centerOffset){_.$slides.slice(index-centerOffset,index+centerOffset+1).addClass('slick-active').attr('aria-hidden','false');}else{indexOffset=_.options.slidesToShow+index;allSlides.slice(indexOffset-centerOffset+1,indexOffset+centerOffset+2).addClass('slick-active').attr('aria-hidden','false');}
if(index===0){allSlides.eq(allSlides.length-1-_.options.slidesToShow).addClass('slick-center');}else if(index===_.slideCount-1){allSlides.eq(_.options.slidesToShow).addClass('slick-center');}}
_.$slides.eq(index).addClass('slick-center');}else{if(index>=0&&index<=(_.slideCount-_.options.slidesToShow)){_.$slides.slice(index,index+_.options.slidesToShow).addClass('slick-active').attr('aria-hidden','false');}else if(allSlides.length<=_.options.slidesToShow){allSlides.addClass('slick-active').attr('aria-hidden','false');}else{remainder=_.slideCount%_.options.slidesToShow;indexOffset=_.options.infinite===true?_.options.slidesToShow+index:index;if(_.options.slidesToShow==_.options.slidesToScroll&&(_.slideCount-index)<_.options.slidesToShow){allSlides.slice(indexOffset-(_.options.slidesToShow-remainder),indexOffset+remainder).addClass('slick-active').attr('aria-hidden','false');}else{allSlides.slice(indexOffset,indexOffset+_.options.slidesToShow).addClass('slick-active').attr('aria-hidden','false');}}}
if(_.options.lazyLoad==='ondemand'){_.lazyLoad();}};Slick.prototype.setupInfinite=function(){var _=this,i,slideIndex,infiniteCount;if(_.options.fade===true){_.options.centerMode=false;}
if(_.options.infinite===true&&_.options.fade===false){slideIndex=null;if(_.slideCount>_.options.slidesToShow){if(_.options.centerMode===true){infiniteCount=_.options.slidesToShow+1;}else{infiniteCount=_.options.slidesToShow;}
for(i=_.slideCount;i>(_.slideCount-infiniteCount);i-=1){slideIndex=i-1;$(_.$slides[slideIndex]).clone(true).attr('id','').attr('data-slick-index',slideIndex-_.slideCount).prependTo(_.$slideTrack).addClass('slick-cloned');}
for(i=0;i<infiniteCount;i+=1){slideIndex=i;$(_.$slides[slideIndex]).clone(true).attr('id','').attr('data-slick-index',slideIndex+_.slideCount).appendTo(_.$slideTrack).addClass('slick-cloned');}
_.$slideTrack.find('.slick-cloned').find('[id]').each(function(){$(this).attr('id','');});}}};Slick.prototype.interrupt=function(toggle){var _=this;if(!toggle){_.autoPlay();}
_.interrupted=toggle;};Slick.prototype.selectHandler=function(event){var _=this;var targetElement=$(event.target).is('.slick-slide')?$(event.target):$(event.target).parents('.slick-slide');var index=parseInt(targetElement.attr('data-slick-index'));if(!index)index=0;if(_.slideCount<=_.options.slidesToShow){_.setSlideClasses(index);_.asNavFor(index);return;}
_.slideHandler(index);};Slick.prototype.slideHandler=function(index,sync,dontAnimate){var targetSlide,animSlide,oldSlide,slideLeft,targetLeft=null,_=this,navTarget;sync=sync||false;if(_.animating===true&&_.options.waitForAnimate===true){return;}
if(_.options.fade===true&&_.currentSlide===index){return;}
if(_.slideCount<=_.options.slidesToShow){return;}
if(sync===false){_.asNavFor(index);}
targetSlide=index;targetLeft=_.getLeft(targetSlide);slideLeft=_.getLeft(_.currentSlide);_.currentLeft=_.swipeLeft===null?slideLeft:_.swipeLeft;if(_.options.infinite===false&&_.options.centerMode===false&&(index<0||index>_.getDotCount()*_.options.slidesToScroll)){if(_.options.fade===false){targetSlide=_.currentSlide;if(dontAnimate!==true){_.animateSlide(slideLeft,function(){_.postSlide(targetSlide);});}else{_.postSlide(targetSlide);}}
return;}else if(_.options.infinite===false&&_.options.centerMode===true&&(index<0||index>(_.slideCount-_.options.slidesToScroll))){if(_.options.fade===false){targetSlide=_.currentSlide;if(dontAnimate!==true){_.animateSlide(slideLeft,function(){_.postSlide(targetSlide);});}else{_.postSlide(targetSlide);}}
return;}
if(_.options.autoplay){clearInterval(_.autoPlayTimer);}
if(targetSlide<0){if(_.slideCount%_.options.slidesToScroll!==0){animSlide=_.slideCount-(_.slideCount%_.options.slidesToScroll);}else{animSlide=_.slideCount+targetSlide;}}else if(targetSlide>=_.slideCount){if(_.slideCount%_.options.slidesToScroll!==0){animSlide=0;}else{animSlide=targetSlide-_.slideCount;}}else{animSlide=targetSlide;}
_.animating=true;_.$slider.trigger('beforeChange',[_,_.currentSlide,animSlide]);oldSlide=_.currentSlide;_.currentSlide=animSlide;_.setSlideClasses(_.currentSlide);if(_.options.asNavFor){navTarget=_.getNavTarget();navTarget=navTarget.slick('getSlick');if(navTarget.slideCount<=navTarget.options.slidesToShow){navTarget.setSlideClasses(_.currentSlide);}}
_.updateDots();_.updateArrows();if(_.options.fade===true){if(dontAnimate!==true){_.fadeSlideOut(oldSlide);_.fadeSlide(animSlide,function(){_.postSlide(animSlide);});}else{_.postSlide(animSlide);}
_.animateHeight();return;}
if(dontAnimate!==true){_.animateSlide(targetLeft,function(){_.postSlide(animSlide);});}else{_.postSlide(animSlide);}};Slick.prototype.startLoad=function(){var _=this;if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow){_.$prevArrow.hide();_.$nextArrow.hide();}
if(_.options.dots===true&&_.slideCount>_.options.slidesToShow){_.$dots.hide();}
_.$slider.addClass('slick-loading');};Slick.prototype.swipeDirection=function(){var xDist,yDist,r,swipeAngle,_=this;xDist=_.touchObject.startX-_.touchObject.curX;yDist=_.touchObject.startY-_.touchObject.curY;r=Math.atan2(yDist,xDist);swipeAngle=Math.round(r*180/Math.PI);if(swipeAngle<0){swipeAngle=360-Math.abs(swipeAngle);}
if((swipeAngle<=45)&&(swipeAngle>=0)){return(_.options.rtl===false?'left':'right');}
if((swipeAngle<=360)&&(swipeAngle>=315)){return(_.options.rtl===false?'left':'right');}
if((swipeAngle>=135)&&(swipeAngle<=225)){return(_.options.rtl===false?'right':'left');}
if(_.options.verticalSwiping===true){if((swipeAngle>=35)&&(swipeAngle<=135)){return'down';}else{return'up';}}
return'vertical';};Slick.prototype.swipeEnd=function(event){var _=this,slideCount,direction;_.dragging=false;_.interrupted=false;_.shouldClick=(_.touchObject.swipeLength>10)?false:true;if(_.touchObject.curX===undefined){return false;}
if(_.touchObject.edgeHit===true){_.$slider.trigger('edge',[_,_.swipeDirection()]);}
if(_.touchObject.swipeLength>=_.touchObject.minSwipe){direction=_.swipeDirection();switch(direction){case'left':case'down':slideCount=_.options.swipeToSlide?_.checkNavigable(_.currentSlide+_.getSlideCount()):_.currentSlide+_.getSlideCount();_.currentDirection=0;break;case'right':case'up':slideCount=_.options.swipeToSlide?_.checkNavigable(_.currentSlide-_.getSlideCount()):_.currentSlide-_.getSlideCount();_.currentDirection=1;break;default:}
if(direction!='vertical'){_.slideHandler(slideCount);_.touchObject={};_.$slider.trigger('swipe',[_,direction]);}}else{if(_.touchObject.startX!==_.touchObject.curX){_.slideHandler(_.currentSlide);_.touchObject={};}}};Slick.prototype.swipeHandler=function(event){var _=this;if((_.options.swipe===false)||('ontouchend'in document&&_.options.swipe===false)){return;}else if(_.options.draggable===false&&event.type.indexOf('mouse')!==-1){return;}
_.touchObject.fingerCount=event.originalEvent&&event.originalEvent.touches!==undefined?event.originalEvent.touches.length:1;_.touchObject.minSwipe=_.listWidth/_.options.touchThreshold;if(_.options.verticalSwiping===true){_.touchObject.minSwipe=_.listHeight/_.options.touchThreshold;}
switch(event.data.action){case'start':_.swipeStart(event);break;case'move':_.swipeMove(event);break;case'end':_.swipeEnd(event);break;}};Slick.prototype.swipeMove=function(event){var _=this,edgeWasHit=false,curLeft,swipeDirection,swipeLength,positionOffset,touches;touches=event.originalEvent!==undefined?event.originalEvent.touches:null;if(!_.dragging||touches&&touches.length!==1){return false;}
curLeft=_.getLeft(_.currentSlide);_.touchObject.curX=touches!==undefined?touches[0].pageX:event.clientX;_.touchObject.curY=touches!==undefined?touches[0].pageY:event.clientY;_.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(_.touchObject.curX-_.touchObject.startX,2)));if(_.options.verticalSwiping===true){_.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(_.touchObject.curY-_.touchObject.startY,2)));}
swipeDirection=_.swipeDirection();if(swipeDirection==='vertical'){return;}
if(event.originalEvent!==undefined&&_.touchObject.swipeLength>4){event.preventDefault();}
positionOffset=(_.options.rtl===false?1:-1)*(_.touchObject.curX>_.touchObject.startX?1:-1);if(_.options.verticalSwiping===true){positionOffset=_.touchObject.curY>_.touchObject.startY?1:-1;}
swipeLength=_.touchObject.swipeLength;_.touchObject.edgeHit=false;if(_.options.infinite===false){if((_.currentSlide===0&&swipeDirection==='right')||(_.currentSlide>=_.getDotCount()&&swipeDirection==='left')){swipeLength=_.touchObject.swipeLength*_.options.edgeFriction;_.touchObject.edgeHit=true;}}
if(_.options.vertical===false){_.swipeLeft=curLeft+swipeLength*positionOffset;}else{_.swipeLeft=curLeft+(swipeLength*(_.$list.height()/_.listWidth))*positionOffset;}
if(_.options.verticalSwiping===true){_.swipeLeft=curLeft+swipeLength*positionOffset;}
if(_.options.fade===true||_.options.touchMove===false){return false;}
if(_.animating===true){_.swipeLeft=null;return false;}
_.setCSS(_.swipeLeft);};Slick.prototype.swipeStart=function(event){var _=this,touches;_.interrupted=true;if(_.touchObject.fingerCount!==1||_.slideCount<=_.options.slidesToShow){_.touchObject={};return false;}
if(event.originalEvent!==undefined&&event.originalEvent.touches!==undefined){touches=event.originalEvent.touches[0];}
_.touchObject.startX=_.touchObject.curX=touches!==undefined?touches.pageX:event.clientX;_.touchObject.startY=_.touchObject.curY=touches!==undefined?touches.pageY:event.clientY;_.dragging=true;};Slick.prototype.unfilterSlides=Slick.prototype.slickUnfilter=function(){var _=this;if(_.$slidesCache!==null){_.unload();_.$slideTrack.children(this.options.slide).detach();_.$slidesCache.appendTo(_.$slideTrack);_.reinit();}};Slick.prototype.unload=function(){var _=this;$('.slick-cloned',_.$slider).remove();if(_.$dots){_.$dots.remove();}
if(_.$prevArrow&&_.htmlExpr.test(_.options.prevArrow)){_.$prevArrow.remove();}
if(_.$nextArrow&&_.htmlExpr.test(_.options.nextArrow)){_.$nextArrow.remove();}
_.$slides.removeClass('slick-slide slick-active slick-visible slick-current').attr('aria-hidden','true').css('width','');};Slick.prototype.unslick=function(fromBreakpoint){var _=this;_.$slider.trigger('unslick',[_,fromBreakpoint]);_.destroy();};Slick.prototype.updateArrows=function(){var _=this,centerOffset;centerOffset=Math.floor(_.options.slidesToShow/2);if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow&&!_.options.infinite){_.$prevArrow.removeClass('slick-disabled').attr('aria-disabled','false');_.$nextArrow.removeClass('slick-disabled').attr('aria-disabled','false');if(_.currentSlide===0){_.$prevArrow.addClass('slick-disabled').attr('aria-disabled','true');_.$nextArrow.removeClass('slick-disabled').attr('aria-disabled','false');}else if(_.currentSlide>=_.slideCount-_.options.slidesToShow&&_.options.centerMode===false){_.$nextArrow.addClass('slick-disabled').attr('aria-disabled','true');_.$prevArrow.removeClass('slick-disabled').attr('aria-disabled','false');}else if(_.currentSlide>=_.slideCount-1&&_.options.centerMode===true){_.$nextArrow.addClass('slick-disabled').attr('aria-disabled','true');_.$prevArrow.removeClass('slick-disabled').attr('aria-disabled','false');}}};Slick.prototype.updateDots=function(){var _=this;if(_.$dots!==null){_.$dots.find('li').removeClass('slick-active').attr('aria-hidden','true');_.$dots.find('li').eq(Math.floor(_.currentSlide/_.options.slidesToScroll)).addClass('slick-active').attr('aria-hidden','false');}};Slick.prototype.visibility=function(){var _=this;if(_.options.autoplay){if(document[_.hidden]){_.interrupted=true;}else{_.interrupted=false;}}};$.fn.slick=function(){var _=this,opt=arguments[0],args=Array.prototype.slice.call(arguments,1),l=_.length,i,ret;for(i=0;i<l;i++){if(typeof opt=='object'||typeof opt=='undefined')
_[i].slick=new Slick(_[i],opt);else
ret=_[i].slick[opt].apply(_[i].slick,args);if(typeof ret!='undefined')return ret;}
return _;};}));;;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof module!=='undefined'&&module.exports){module.exports=factory(require('jquery'));}else{factory(jQuery);}})(function($){var _previousResizeWidth=-1,_updateTimeout=-1;var _parse=function(value){return parseFloat(value)||0;};var _rows=function(elements){var tolerance=1,$elements=$(elements),lastTop=null,rows=[];$elements.each(function(){var $that=$(this),top=$that.offset().top-_parse($that.css('margin-top')),lastRow=rows.length>0?rows[rows.length-1]:null;if(lastRow===null){rows.push($that);}else{if(Math.floor(Math.abs(lastTop-top))<=tolerance){rows[rows.length-1]=lastRow.add($that);}else{rows.push($that);}}
lastTop=top;});return rows;};var _parseOptions=function(options){var opts={byRow:true,property:'height',target:null,remove:false};if(typeof options==='object'){return $.extend(opts,options);}
if(typeof options==='boolean'){opts.byRow=options;}else if(options==='remove'){opts.remove=true;}
return opts;};var matchHeight=$.fn.matchHeight=function(options){var opts=_parseOptions(options);if(opts.remove){var that=this;this.css(opts.property,'');$.each(matchHeight._groups,function(key,group){group.elements=group.elements.not(that);});return this;}
if(this.length<=1&&!opts.target){return this;}
matchHeight._groups.push({elements:this,options:opts});matchHeight._apply(this,opts);return this;};matchHeight.version='master';matchHeight._groups=[];matchHeight._throttle=80;matchHeight._maintainScroll=false;matchHeight._beforeUpdate=null;matchHeight._afterUpdate=null;matchHeight._rows=_rows;matchHeight._parse=_parse;matchHeight._parseOptions=_parseOptions;matchHeight._apply=function(elements,options){var opts=_parseOptions(options),$elements=$(elements),rows=[$elements];var scrollTop=$(window).scrollTop(),htmlHeight=$('html').outerHeight(true);var $hiddenParents=$elements.parents().filter(':hidden');$hiddenParents.each(function(){var $that=$(this);$that.data('style-cache',$that.attr('style'));});$hiddenParents.css('display','block');if(opts.byRow&&!opts.target){$elements.each(function(){var $that=$(this),display=$that.css('display');if(display!=='inline-block'&&display!=='flex'&&display!=='inline-flex'){display='block';}
$that.data('style-cache',$that.attr('style'));$that.css({'display':display,'padding-top':'0','padding-bottom':'0','margin-top':'0','margin-bottom':'0','border-top-width':'0','border-bottom-width':'0','height':'100px','overflow':'hidden'});});rows=_rows($elements);$elements.each(function(){var $that=$(this);$that.attr('style',$that.data('style-cache')||'');});}
$.each(rows,function(key,row){var $row=$(row),targetHeight=0;if(!opts.target){if(opts.byRow&&$row.length<=1){$row.css(opts.property,'');return;}
$row.each(function(){var $that=$(this),style=$that.attr('style'),display=$that.css('display');if(display!=='inline-block'&&display!=='flex'&&display!=='inline-flex'){display='block';}
var css={'display':display};css[opts.property]='';$that.css(css);if($that.outerHeight(false)>targetHeight){targetHeight=$that.outerHeight(false);}
if(style){$that.attr('style',style);}else{$that.css('display','');}});}else{targetHeight=opts.target.outerHeight(false);}
$row.each(function(){var $that=$(this),verticalPadding=0;if(opts.target&&$that.is(opts.target)){return;}
if($that.css('box-sizing')!=='border-box'){verticalPadding+=_parse($that.css('border-top-width'))+_parse($that.css('border-bottom-width'));verticalPadding+=_parse($that.css('padding-top'))+_parse($that.css('padding-bottom'));}
$that.css(opts.property,(targetHeight-verticalPadding)+'px');});});$hiddenParents.each(function(){var $that=$(this);$that.attr('style',$that.data('style-cache')||null);});if(matchHeight._maintainScroll){$(window).scrollTop((scrollTop/htmlHeight)*$('html').outerHeight(true));}
return this;};matchHeight._applyDataApi=function(){var groups={};$('[data-match-height], [data-mh]').each(function(){var $this=$(this),groupId=$this.attr('data-mh')||$this.attr('data-match-height');if(groupId in groups){groups[groupId]=groups[groupId].add($this);}else{groups[groupId]=$this;}});$.each(groups,function(){this.matchHeight(true);});};var _update=function(event){if(matchHeight._beforeUpdate){matchHeight._beforeUpdate(event,matchHeight._groups);}
$.each(matchHeight._groups,function(){matchHeight._apply(this.elements,this.options);});if(matchHeight._afterUpdate){matchHeight._afterUpdate(event,matchHeight._groups);}};matchHeight._update=function(throttle,event){if(event&&event.type==='resize'){var windowWidth=$(window).width();if(windowWidth===_previousResizeWidth){return;}
_previousResizeWidth=windowWidth;}
if(!throttle){_update(event);}else if(_updateTimeout===-1){_updateTimeout=setTimeout(function(){_update(event);_updateTimeout=-1;},matchHeight._throttle);}};$(matchHeight._applyDataApi);$(window).bind('load',function(event){matchHeight._update(false,event);});$(window).bind('resize orientationchange',function(event){matchHeight._update(true,event);});});;(function($){$.fn.onScreen=function(options){var params={container:window,direction:'vertical',toggleClass:null,doIn:null,doOut:null,tolerance:0,throttle:null,lazyAttr:null,lazyPlaceholder:'data:image/gif;base64,R0lGODlhEAAFAIAAAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAAACwAAAAAEAAFAAACCIyPqcvtD00BACH5BAkJAAIALAAAAAAQAAUAgfT29Pz6/P///wAAAAIQTGCiywKPmjxUNhjtMlWrAgAh+QQJCQAFACwAAAAAEAAFAIK8urzc2tzEwsS8vrzc3tz///8AAAAAAAADFEiyUf6wCEBHvLPemIHdTzCMDegkACH5BAkJAAYALAAAAAAQAAUAgoSChLS2tIyKjLy+vIyOjMTCxP///wAAAAMUWCQ09jAaAiqQmFosdeXRUAkBCCUAIfkECQkACAAsAAAAABAABQCDvLq83N7c3Nrc9Pb0xMLE/P78vL68/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCEwkCnKGbegvQn4RjGMx8F1HxBi5Il4oEiap2DcVYlpZwQAIfkECQkACAAsAAAAABAABQCDvLq85OLkxMLE9Pb0vL685ObkxMbE/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCDwnCGHEcIMxPn4VAGMQNBx0zQEZHkiYNiap5RaBKG9EQAh+QQJCQAJACwAAAAAEAAFAIOEgoTMysyMjozs6uyUlpSMiozMzsyUkpTs7uz///8AAAAAAAAAAAAAAAAAAAAAAAAEGTBJiYgoBM09DfhAwHEeKI4dGKLTIHzCwEUAIfkECQkACAAsAAAAABAABQCDvLq85OLkxMLE9Pb0vL685ObkxMbE/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCAQSTmMEGaco8+UBSACwWBqHxKOJYd+q1iaXFoRRMbtEQAh+QQJCQAIACwAAAAAEAAFAIO8urzc3tzc2tz09vTEwsT8/vy8vrz8+vz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAEIhBJWc6wJZAtJh3gcRBAaXiIZV2kiRbgNZbA6VXiUAhGL0QAIfkECQkABgAsAAAAABAABQCChIKEtLa0jIqMvL68jI6MxMLE////AAAAAxRoumxFgoxGCbiANos145e3DJcQJAAh+QQJCQAFACwAAAAAEAAFAIK8urzc2tzEwsS8vrzc3tz///8AAAAAAAADFFi6XCQwtCmAHbPVm9kGWKcEQxkkACH5BAkJAAIALAAAAAAQAAUAgfT29Pz6/P///wAAAAIRlI8SAZsPYnuJMUCRnNksWwAAOw==',debug:false};if(options!=='remove'){$.extend(params,options);}
return this.each(function(){var self=this;var isOnScreen=false;var scrollTop;var scrollLeft;var $el=$(this);var $container;var containerHeight;var containerWidth;var containerBottom;var containerRight;var elHeight;var elWidth;var elTop;var elLeft;var containerIsWindow=$.isWindow(params.container);function remove(){$(self).off('scroll.onScreen resize.onScreen');$(window).off('resize.onScreen');};function verticalIn(){if(containerIsWindow){return elTop<containerBottom-params.tolerance&&scrollTop<(elTop+elHeight)-params.tolerance;}else{return elTop<containerHeight-params.tolerance&&elTop>(-elHeight)+params.tolerance;}}
function verticalOut(){if(containerIsWindow){return elTop+(elHeight-params.tolerance)<scrollTop||elTop>containerBottom-params.tolerance;}else{return elTop>containerHeight-params.tolerance||-elHeight+params.tolerance>elTop;}}
function horizontalIn(){if(containerIsWindow){return elLeft<containerRight-params.tolerance&&scrollLeft<(elLeft+elWidth)-params.tolerance;}else{return elLeft<containerWidth-params.tolerance&&elLeft>(-elWidth)+params.tolerance;}}
function horizontalOut(){if(containerIsWindow){return elLeft+(elWidth-params.tolerance)<scrollLeft||elLeft>containerRight-params.tolerance;}else{return elLeft>containerWidth-params.tolerance||-elWidth+params.tolerance>elLeft;}}
function directionIn(){if(isOnScreen){return false;}
if(params.direction==='horizontal'){return horizontalIn();}else{return verticalIn();}}
function directionOut(){if(!isOnScreen){return false;}
if(params.direction==='horizontal'){return horizontalOut();}else{return verticalOut();}}
function throttle(fn,timeout,ctx){var timer,args,needInvoke;return function(){args=arguments;needInvoke=true;ctx=ctx||this;if(!timer){(function(){if(needInvoke){fn.apply(ctx,args);needInvoke=false;timer=setTimeout(arguments.callee,timeout);}else{timer=null;}})();}};}
if(options==='remove'){remove();return;}
var checkPos=function(){if(!containerIsWindow&&$(params.container).css('position')==='static'){$(params.container).css('position','relative');}
$container=$(params.container);containerHeight=$container.height();containerWidth=$container.width();containerBottom=$container.scrollTop()+containerHeight;containerRight=$container.scrollLeft()+containerWidth;elHeight=$el.outerHeight(true);elWidth=$el.outerWidth(true);if(containerIsWindow){var offset=$el.offset();elTop=offset.top;elLeft=offset.left;}else{var position=$el.position();elTop=position.top;elLeft=position.left;}
scrollTop=$container.scrollTop();scrollLeft=$container.scrollLeft();if(params.debug){console.log('Container: '+params.container+'\n'+'Width: '+containerHeight+'\n'+'Height: '+containerWidth+'\n'+'Bottom: '+containerBottom+'\n'+'Right: '+containerRight);console.log('Matched element: '+($el.attr('class')!==undefined?$el.prop('tagName').toLowerCase()+'.'+$el.attr('class'):$el.prop('tagName').toLowerCase())+'\n'+'Left: '+elLeft+'\n'+'Top: '+elTop+'\n'+'Width: '+elWidth+'\n'+'Height: '+elHeight);}
if(directionIn()){if(params.toggleClass){$el.addClass(params.toggleClass);}
if($.isFunction(params.doIn)){params.doIn.call($el[0]);}
if(params.lazyAttr&&$el.prop('tagName')==='IMG'){var lazyImg=$el.attr(params.lazyAttr);if(lazyImg!==$el.prop('src')){$el.css({background:'url('+params.lazyPlaceholder+') 50% 50% no-repeat',minHeight:'5px',minWidth:'16px'});$el.prop('src',lazyImg).load(function(){$(this).css({background:'none'});});}}
isOnScreen=true;}else if(directionOut()){if(params.toggleClass){$el.removeClass(params.toggleClass);}
if($.isFunction(params.doOut)){params.doOut.call($el[0]);}
isOnScreen=false;}};if(window.location.hash){throttle(checkPos,50);}else{checkPos();}
if(params.throttle){checkPos=throttle(checkPos,params.throttle);}
$(params.container).on('scroll.onScreen resize.onScreen',checkPos);if(!containerIsWindow){$(window).on('resize.onScreen',checkPos);}
if(typeof module==='object'&&module&&typeof module.exports==='object'){module.exports=jQuery;}else{if(typeof define==='function'&&define.amd){define('jquery-onscreen',[],function(){return jQuery;});}}});};})(jQuery);;(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}
$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));;(function(window,undefined){'$:nomunge';var $=window.jQuery||window.Cowboy||(window.Cowboy={}),jq_throttle;$.throttle=jq_throttle=function(delay,no_trailing,callback,debounce_mode){var timeout_id,last_exec=0;if(typeof no_trailing!=='boolean'){debounce_mode=callback;callback=no_trailing;no_trailing=undefined;}
function wrapper(){var that=this,elapsed=+new Date()-last_exec,args=arguments;function exec(){last_exec=+new Date();callback.apply(that,args);};function clear(){timeout_id=undefined;};if(debounce_mode&&!timeout_id){exec();}
timeout_id&&clearTimeout(timeout_id);if(debounce_mode===undefined&&elapsed>delay){exec();}else if(no_trailing!==true){timeout_id=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-elapsed:delay);}};if($.guid){wrapper.guid=callback.guid=callback.guid||$.guid++;}
return wrapper;};$.debounce=function(delay,at_begin,callback){return callback===undefined?jq_throttle(delay,at_begin,false):jq_throttle(delay,callback,at_begin!==false);};})(this);;(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')
module.exports=factory();else if(typeof define==='function'&&define.amd)
define(factory);else if(typeof exports==='object')
exports["Handlebars"]=factory();else
root["Handlebars"]=factory();})(this,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])
return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})([function(module,exports,__webpack_require__){'use strict';var _interopRequireWildcard=__webpack_require__(7)['default'];exports.__esModule=true;var _import=__webpack_require__(1);var base=_interopRequireWildcard(_import);var _SafeString=__webpack_require__(2);var _SafeString2=_interopRequireWildcard(_SafeString);var _Exception=__webpack_require__(3);var _Exception2=_interopRequireWildcard(_Exception);var _import2=__webpack_require__(4);var Utils=_interopRequireWildcard(_import2);var _import3=__webpack_require__(5);var runtime=_interopRequireWildcard(_import3);var _noConflict=__webpack_require__(6);var _noConflict2=_interopRequireWildcard(_noConflict);function create(){var hb=new base.HandlebarsEnvironment();Utils.extend(hb,base);hb.SafeString=_SafeString2['default'];hb.Exception=_Exception2['default'];hb.Utils=Utils;hb.escapeExpression=Utils.escapeExpression;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb);};return hb;}
var inst=create();inst.create=create;_noConflict2['default'](inst);inst['default']=inst;exports['default']=inst;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';var _interopRequireWildcard=__webpack_require__(7)['default'];exports.__esModule=true;exports.HandlebarsEnvironment=HandlebarsEnvironment;exports.createFrame=createFrame;var _import=__webpack_require__(4);var Utils=_interopRequireWildcard(_import);var _Exception=__webpack_require__(3);var _Exception2=_interopRequireWildcard(_Exception);var VERSION='3.0.1';exports.VERSION=VERSION;var COMPILER_REVISION=6;exports.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:'<= 1.0.rc.2',2:'== 1.0.0-rc.3',3:'== 1.0.0-rc.4',4:'== 1.x.x',5:'== 2.0.0-alpha.x',6:'>= 2.0.0-beta.1'};exports.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType='[object Object]';function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{};this.partials=partials||{};registerDefaultHelpers(this);}
HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function registerHelper(name,fn){if(toString.call(name)===objectType){if(fn){throw new _Exception2['default']('Arg not supported with multiple helpers');}
Utils.extend(this.helpers,name);}else{this.helpers[name]=fn;}},unregisterHelper:function unregisterHelper(name){delete this.helpers[name];},registerPartial:function registerPartial(name,partial){if(toString.call(name)===objectType){Utils.extend(this.partials,name);}else{if(typeof partial==='undefined'){throw new _Exception2['default']('Attempting to register a partial as undefined');}
this.partials[name]=partial;}},unregisterPartial:function unregisterPartial(name){delete this.partials[name];}};function registerDefaultHelpers(instance){instance.registerHelper('helperMissing',function(){if(arguments.length===1){return undefined;}else{throw new _Exception2['default']('Missing helper: "'+arguments[arguments.length-1].name+'"');}});instance.registerHelper('blockHelperMissing',function(context,options){var inverse=options.inverse,fn=options.fn;if(context===true){return fn(this);}else if(context===false||context==null){return inverse(this);}else if(isArray(context)){if(context.length>0){if(options.ids){options.ids=[options.name];}
return instance.helpers.each(context,options);}else{return inverse(this);}}else{if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.name);options={data:data};}
return fn(context,options);}});instance.registerHelper('each',function(context,options){if(!options){throw new _Exception2['default']('Must pass iterator to #each');}
var fn=options.fn,inverse=options.inverse,i=0,ret='',data=undefined,contextPath=undefined;if(options.data&&options.ids){contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0])+'.';}
if(isFunction(context)){context=context.call(this);}
if(options.data){data=createFrame(options.data);}
function execIteration(field,index,last){if(data){data.key=field;data.index=index;data.first=index===0;data.last=!!last;if(contextPath){data.contextPath=contextPath+field;}}
ret=ret+fn(context[field],{data:data,blockParams:Utils.blockParams([context[field],field],[contextPath+field,null])});}
if(context&&typeof context==='object'){if(isArray(context)){for(var j=context.length;i<j;i++){execIteration(i,i,i===context.length-1);}}else{var priorKey=undefined;for(var key in context){if(context.hasOwnProperty(key)){if(priorKey){execIteration(priorKey,i-1);}
priorKey=key;i++;}}
if(priorKey){execIteration(priorKey,i-1,true);}}}
if(i===0){ret=inverse(this);}
return ret;});instance.registerHelper('if',function(conditional,options){if(isFunction(conditional)){conditional=conditional.call(this);}
if(!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)){return options.inverse(this);}else{return options.fn(this);}});instance.registerHelper('unless',function(conditional,options){return instance.helpers['if'].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash});});instance.registerHelper('with',function(context,options){if(isFunction(context)){context=context.call(this);}
var fn=options.fn;if(!Utils.isEmpty(context)){if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0]);options={data:data};}
return fn(context,options);}else{return options.inverse(this);}});instance.registerHelper('log',function(message,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,message);});instance.registerHelper('lookup',function(obj,field){return obj&&obj[field];});}
var logger={methodMap:{0:'debug',1:'info',2:'warn',3:'error'},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function log(level,message){if(typeof console!=='undefined'&&logger.level<=level){var method=logger.methodMap[level];(console[method]||console.log).call(console,message);}}};exports.logger=logger;var log=logger.log;exports.log=log;function createFrame(object){var frame=Utils.extend({},object);frame._parent=object;return frame;}},function(module,exports,__webpack_require__){'use strict';exports.__esModule=true;function SafeString(string){this.string=string;}
SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return''+this.string;};exports['default']=SafeString;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';exports.__esModule=true;var errorProps=['description','fileName','lineNumber','message','name','number','stack'];function Exception(message,node){var loc=node&&node.loc,line=undefined,column=undefined;if(loc){line=loc.start.line;column=loc.start.column;message+=' - '+line+':'+column;}
var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]];}
if(Error.captureStackTrace){Error.captureStackTrace(this,Exception);}
if(loc){this.lineNumber=line;this.column=column;}}
Exception.prototype=new Error();exports['default']=Exception;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';exports.__esModule=true;exports.extend=extend;exports.indexOf=indexOf;exports.escapeExpression=escapeExpression;exports.isEmpty=isEmpty;exports.blockParams=blockParams;exports.appendContextPath=appendContextPath;var escape={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#x27;','`':'&#x60;'};var badChars=/[&<>"'`]/g,possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr];}
function extend(obj){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(Object.prototype.hasOwnProperty.call(arguments[i],key)){obj[key]=arguments[i][key];}}}
return obj;}
var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function isFunction(value){return typeof value==='function';};if(isFunction(/x/)){exports.isFunction=isFunction=function(value){return typeof value==='function'&&toString.call(value)==='[object Function]';};}
var isFunction;exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==='object'?toString.call(value)==='[object Array]':false;};exports.isArray=isArray;function indexOf(array,value){for(var i=0,len=array.length;i<len;i++){if(array[i]===value){return i;}}
return-1;}
function escapeExpression(string){if(typeof string!=='string'){if(string&&string.toHTML){return string.toHTML();}else if(string==null){return'';}else if(!string){return string+'';}
string=''+string;}
if(!possible.test(string)){return string;}
return string.replace(badChars,escapeChar);}
function isEmpty(value){if(!value&&value!==0){return true;}else if(isArray(value)&&value.length===0){return true;}else{return false;}}
function blockParams(params,ids){params.path=ids;return params;}
function appendContextPath(contextPath,id){return(contextPath?contextPath+'.':'')+id;}},function(module,exports,__webpack_require__){'use strict';var _interopRequireWildcard=__webpack_require__(7)['default'];exports.__esModule=true;exports.checkRevision=checkRevision;exports.template=template;exports.wrapProgram=wrapProgram;exports.resolvePartial=resolvePartial;exports.invokePartial=invokePartial;exports.noop=noop;var _import=__webpack_require__(4);var Utils=_interopRequireWildcard(_import);var _Exception=__webpack_require__(3);var _Exception2=_interopRequireWildcard(_Exception);var _COMPILER_REVISION$REVISION_CHANGES$createFrame=__webpack_require__(1);function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=_COMPILER_REVISION$REVISION_CHANGES$createFrame.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=_COMPILER_REVISION$REVISION_CHANGES$createFrame.REVISION_CHANGES[currentRevision],compilerVersions=_COMPILER_REVISION$REVISION_CHANGES$createFrame.REVISION_CHANGES[compilerRevision];throw new _Exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. '+'Please update your precompiler to a newer version ('+runtimeVersions+') or downgrade your runtime to an older version ('+compilerVersions+').');}else{throw new _Exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. '+'Please update your runtime to a newer version ('+compilerInfo[1]+').');}}}
function template(templateSpec,env){if(!env){throw new _Exception2['default']('No environment passed to template');}
if(!templateSpec||!templateSpec.main){throw new _Exception2['default']('Unknown template object: '+typeof templateSpec);}
env.VM.checkRevision(templateSpec.compiler);function invokePartialWrapper(partial,context,options){if(options.hash){context=Utils.extend({},context,options.hash);}
partial=env.VM.resolvePartial.call(this,partial,context,options);var result=env.VM.invokePartial.call(this,partial,context,options);if(result==null&&env.compile){options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env);result=options.partials[options.name](context,options);}
if(result!=null){if(options.indent){var lines=result.split('\n');for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l){break;}
lines[i]=options.indent+lines[i];}
result=lines.join('\n');}
return result;}else{throw new _Exception2['default']('The partial '+options.name+' could not be compiled when running in runtime-only mode');}}
var container={strict:function strict(obj,name){if(!(name in obj)){throw new _Exception2['default']('"'+name+'" not defined in '+obj);}
return obj[name];},lookup:function lookup(depths,name){var len=depths.length;for(var i=0;i<len;i++){if(depths[i]&&depths[i][name]!=null){return depths[i][name];}}},lambda:function lambda(current,context){return typeof current==='function'?current.call(context):current;},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function fn(i){return templateSpec[i];},programs:[],program:function program(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);if(data||depths||blockParams||declaredBlockParams){programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths);}else if(!programWrapper){programWrapper=this.programs[i]=wrapProgram(this,i,fn);}
return programWrapper;},data:function data(value,depth){while(value&&depth--){value=value._parent;}
return value;},merge:function merge(param,common){var obj=param||common;if(param&&common&&param!==common){obj=Utils.extend({},common,param);}
return obj;},noop:env.VM.noop,compilerInfo:templateSpec.compiler};function ret(context){var options=arguments[1]===undefined?{}:arguments[1];var data=options.data;ret._setup(options);if(!options.partial&&templateSpec.useData){data=initData(context,data);}
var depths=undefined,blockParams=templateSpec.useBlockParams?[]:undefined;if(templateSpec.useDepths){depths=options.depths?[context].concat(options.depths):[context];}
return templateSpec.main.call(container,context,container.helpers,container.partials,data,blockParams,depths);}
ret.isTop=true;ret._setup=function(options){if(!options.partial){container.helpers=container.merge(options.helpers,env.helpers);if(templateSpec.usePartial){container.partials=container.merge(options.partials,env.partials);}}else{container.helpers=options.helpers;container.partials=options.partials;}};ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams){throw new _Exception2['default']('must pass block params');}
if(templateSpec.useDepths&&!depths){throw new _Exception2['default']('must pass parent depths');}
return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths);};return ret;}
function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments[1]===undefined?{}:arguments[1];return fn.call(container,context,container.helpers,container.partials,options.data||data,blockParams&&[options.blockParams].concat(blockParams),depths&&[context].concat(depths));}
prog.program=i;prog.depth=depths?depths.length:0;prog.blockParams=declaredBlockParams||0;return prog;}
function resolvePartial(partial,context,options){if(!partial){partial=options.partials[options.name];}else if(!partial.call&&!options.name){options.name=partial;partial=options.partials[partial];}
return partial;}
function invokePartial(partial,context,options){options.partial=true;if(partial===undefined){throw new _Exception2['default']('The partial '+options.name+' could not be found');}else if(partial instanceof Function){return partial(context,options);}}
function noop(){return'';}
function initData(context,data){if(!data||!('root'in data)){data=data?_COMPILER_REVISION$REVISION_CHANGES$createFrame.createFrame(data):{};data.root=context;}
return data;}},function(module,exports,__webpack_require__){(function(global){'use strict';exports.__esModule=true;exports['default']=function(Handlebars){var root=typeof global!=='undefined'?global:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){if(root.Handlebars===Handlebars){root.Handlebars=$Handlebars;}};};module.exports=exports['default'];}.call(exports,(function(){return this;}())))},function(module,exports,__webpack_require__){"use strict";exports["default"]=function(obj){return obj&&obj.__esModule?obj:{"default":obj};};exports.__esModule=true;}])});;;(function(global,factory){if(typeof define=='function'&&define.amd){define(factory);}else if(typeof module=='object'&&module.exports){module.exports=factory();}else{global.EvEmitter=factory();}}(typeof window!='undefined'?window:this,function(){"use strict";function EvEmitter(){}
var proto=EvEmitter.prototype;proto.on=function(eventName,listener){if(!eventName||!listener){return;}
var events=this._events=this._events||{};var listeners=events[eventName]=events[eventName]||[];if(listeners.indexOf(listener)==-1){listeners.push(listener);}
return this;};proto.once=function(eventName,listener){if(!eventName||!listener){return;}
this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};var onceListeners=onceEvents[eventName]=onceEvents[eventName]||{};onceListeners[listener]=true;return this;};proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
var index=listeners.indexOf(listener);if(index!=-1){listeners.splice(index,1);}
return this;};proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
var i=0;var listener=listeners[i];args=args||[];var onceListeners=this._onceEvents&&this._onceEvents[eventName];while(listener){var isOnce=onceListeners&&onceListeners[listener];if(isOnce){this.off(eventName,listener);delete onceListeners[listener];}
listener.apply(this,args);i+=isOnce?0:1;listener=listeners[i];}
return this;};return EvEmitter;}));;(function(window,factory){'use strict';if(typeof define=='function'&&define.amd){define(['ev-emitter/ev-emitter'],function(EvEmitter){return factory(window,EvEmitter);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('ev-emitter'));}else{window.imagesLoaded=factory(window,window.EvEmitter);}})(window,function factory(window,EvEmitter){'use strict';var $=window.jQuery;var console=window.console;function extend(a,b){for(var prop in b){a[prop]=b[prop];}
return a;}
function makeArray(obj){var ary=[];if(Array.isArray(obj)){ary=obj;}else if(typeof obj.length=='number'){for(var i=0;i<obj.length;i++){ary.push(obj[i]);}}else{ary.push(obj);}
return ary;}
function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded)){return new ImagesLoaded(elem,options,onAlways);}
if(typeof elem=='string'){elem=document.querySelectorAll(elem);}
this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options=='function'){onAlways=options;}else{extend(this.options,options);}
if(onAlways){this.on('always',onAlways);}
this.getImages();if($){this.jqDeferred=new $.Deferred();}
setTimeout(function(){this.check();}.bind(this));}
ImagesLoaded.prototype=Object.create(EvEmitter.prototype);ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this);};ImagesLoaded.prototype.addElementImages=function(elem){if(elem.nodeName=='IMG'){this.addImage(elem);}
if(this.options.background===true){this.addElementBackgroundImages(elem);}
var nodeType=elem.nodeType;if(!nodeType||!elementNodeTypes[nodeType]){return;}
var childImgs=elem.querySelectorAll('img');for(var i=0;i<childImgs.length;i++){var img=childImgs[i];this.addImage(img);}
if(typeof this.options.background=='string'){var children=elem.querySelectorAll(this.options.background);for(i=0;i<children.length;i++){var child=children[i];this.addElementBackgroundImages(child);}}};var elementNodeTypes={1:true,9:true,11:true};ImagesLoaded.prototype.addElementBackgroundImages=function(elem){var style=getComputedStyle(elem);if(!style){return;}
var reURL=/url\((['"])?(.*?)\1\)/gi;var matches=reURL.exec(style.backgroundImage);while(matches!==null){var url=matches&&matches[2];if(url){this.addBackground(url,elem);}
matches=reURL.exec(style.backgroundImage);}};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage);};ImagesLoaded.prototype.addBackground=function(url,elem){var background=new Background(url,elem);this.images.push(background);};ImagesLoaded.prototype.check=function(){var _this=this;this.progressedCount=0;this.hasAnyBroken=false;if(!this.images.length){this.complete();return;}
function onProgress(image,elem,message){setTimeout(function(){_this.progress(image,elem,message);});}
this.images.forEach(function(loadingImage){loadingImage.once('progress',onProgress);loadingImage.check();});};ImagesLoaded.prototype.progress=function(image,elem,message){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;this.emitEvent('progress',[this,image,elem]);if(this.jqDeferred&&this.jqDeferred.notify){this.jqDeferred.notify(this,image);}
if(this.progressedCount==this.images.length){this.complete();}
if(this.options.debug&&console){console.log('progress: '+message,image,elem);}};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=true;this.emitEvent(eventName,[this]);this.emitEvent('always',[this]);if(this.jqDeferred){var jqMethod=this.hasAnyBroken?'reject':'resolve';this.jqDeferred[jqMethod](this);}};function LoadingImage(img){this.img=img;}
LoadingImage.prototype=Object.create(EvEmitter.prototype);LoadingImage.prototype.check=function(){var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return;}
this.proxyImage=new Image();this.proxyImage.addEventListener('load',this);this.proxyImage.addEventListener('error',this);this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.proxyImage.src=this.img.src;};LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth!==undefined;};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.img,message]);};LoadingImage.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};LoadingImage.prototype.onload=function(){this.confirm(true,'onload');this.unbindEvents();};LoadingImage.prototype.onerror=function(){this.confirm(false,'onerror');this.unbindEvents();};LoadingImage.prototype.unbindEvents=function(){this.proxyImage.removeEventListener('load',this);this.proxyImage.removeEventListener('error',this);this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);};function Background(url,element){this.url=url;this.element=element;this.img=new Image();}
Background.prototype=Object.create(LoadingImage.prototype);Background.prototype.check=function(){this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.img.src=this.url;var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');this.unbindEvents();}};Background.prototype.unbindEvents=function(){this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);};Background.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.element,message]);};ImagesLoaded.makeJQueryPlugin=function(jQuery){jQuery=jQuery||window.jQuery;if(!jQuery){return;}
$=jQuery;$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this));};};ImagesLoaded.makeJQueryPlugin();return ImagesLoaded;});;var _slice=Array.prototype.slice;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2;}else{return Array.from(arr);}}
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory(require('jquery')):typeof define==='function'&&define.amd?define(['jquery'],factory):global.parsley=factory(global.jQuery);})(this,function($){'use strict';var globalID=1;var pastWarnings={};var ParsleyUtils__ParsleyUtils={attr:function attr($element,namespace,obj){var i;var attribute;var attributes;var regex=new RegExp('^'+namespace,'i');if('undefined'===typeof obj)obj={};else{for(i in obj){if(obj.hasOwnProperty(i))delete obj[i];}}
if('undefined'===typeof $element||'undefined'===typeof $element[0])return obj;attributes=$element[0].attributes;for(i=attributes.length;i--;){attribute=attributes[i];if(attribute&&attribute.specified&&regex.test(attribute.name)){obj[this.camelize(attribute.name.slice(namespace.length))]=this.deserializeValue(attribute.value);}}
return obj;},checkAttr:function checkAttr($element,namespace,_checkAttr){return $element.is('['+namespace+_checkAttr+']');},setAttr:function setAttr($element,namespace,attr,value){$element[0].setAttribute(this.dasherize(namespace+attr),String(value));},generateID:function generateID(){return''+globalID++;},deserializeValue:function deserializeValue(value){var num;try{return value?value=="true"||(value=="false"?false:value=="null"?null:!isNaN(num=Number(value))?num:/^[\[\{]/.test(value)?$.parseJSON(value):value):value;}catch(e){return value;}},camelize:function camelize(str){return str.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():'';});},dasherize:function dasherize(str){return str.replace(/::/g,'/').replace(/([A-Z]+)([A-Z][a-z])/g,'$1_$2').replace(/([a-z\d])([A-Z])/g,'$1_$2').replace(/_/g,'-').toLowerCase();},warn:function warn(){var _window$console;if(window.console&&'function'===typeof window.console.warn)(_window$console=window.console).warn.apply(_window$console,arguments);},warnOnce:function warnOnce(msg){if(!pastWarnings[msg]){pastWarnings[msg]=true;this.warn.apply(this,arguments);}},_resetWarnings:function _resetWarnings(){pastWarnings={};},trimString:function trimString(string){return string.replace(/^\s+|\s+$/g,'');},namespaceEvents:function namespaceEvents(events,namespace){events=this.trimString(events||'').split(/\s+/);if(!events[0])return'';return $.map(events,function(evt){return evt+'.'+namespace;}).join(' ');},difference:function difference(array,remove){var result=[];$.each(array,function(_,elem){if(remove.indexOf(elem)==-1)result.push(elem);});return result;},all:function all(promises){return $.when.apply($,_toConsumableArray(promises).concat([42,42]));},objectCreate:Object.create||(function(){var Object=function Object(){};return function(prototype){if(arguments.length>1){throw Error('Second argument not supported');}
if(typeof prototype!='object'){throw TypeError('Argument must be an object');}
Object.prototype=prototype;var result=new Object();Object.prototype=null;return result;};})(),_SubmitSelector:'input[type="submit"], button:submit'};var ParsleyUtils__default=ParsleyUtils__ParsleyUtils;var ParsleyDefaults={namespace:'data-parsley-',inputs:'input, textarea, select',excluded:'input[type=button], input[type=submit], input[type=reset], input[type=hidden]',priorityEnabled:true,multiple:null,group:null,uiEnabled:true,validationThreshold:3,focus:'first',trigger:false,triggerAfterFailure:'input',errorClass:'parsley-error',successClass:'parsley-success',classHandler:function classHandler(ParsleyField){},errorsContainer:function errorsContainer(ParsleyField){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:'<li></li>'};var ParsleyAbstract=function ParsleyAbstract(){this.__id__=ParsleyUtils__default.generateID();};ParsleyAbstract.prototype={asyncSupport:true,_pipeAccordingToValidationResult:function _pipeAccordingToValidationResult(){var _this=this;var pipe=function pipe(){var r=$.Deferred();if(true!==_this.validationResult)r.reject();return r.resolve().promise();};return[pipe,pipe];},actualizeOptions:function actualizeOptions(){ParsleyUtils__default.attr(this.$element,this.options.namespace,this.domOptions);if(this.parent&&this.parent.actualizeOptions)this.parent.actualizeOptions();return this;},_resetOptions:function _resetOptions(initOptions){this.domOptions=ParsleyUtils__default.objectCreate(this.parent.options);this.options=ParsleyUtils__default.objectCreate(this.domOptions);for(var i in initOptions){if(initOptions.hasOwnProperty(i))this.options[i]=initOptions[i];}
this.actualizeOptions();},_listeners:null,on:function on(name,fn){this._listeners=this._listeners||{};var queue=this._listeners[name]=this._listeners[name]||[];queue.push(fn);return this;},subscribe:function subscribe(name,fn){$.listenTo(this,name.toLowerCase(),fn);},off:function off(name,fn){var queue=this._listeners&&this._listeners[name];if(queue){if(!fn){delete this._listeners[name];}else{for(var i=queue.length;i--;)if(queue[i]===fn)queue.splice(i,1);}}
return this;},unsubscribe:function unsubscribe(name,fn){$.unsubscribeTo(this,name.toLowerCase());},trigger:function trigger(name,target,extraArg){target=target||this;var queue=this._listeners&&this._listeners[name];var result;var parentResult;if(queue){for(var i=queue.length;i--;){result=queue[i].call(target,target,extraArg);if(result===false)return result;}}
if(this.parent){return this.parent.trigger(name,target,extraArg);}
return true;},reset:function reset(){if('ParsleyForm'!==this.__class__){this._resetUI();return this._trigger('reset');}
for(var i=0;i<this.fields.length;i++)this.fields[i].reset();this._trigger('reset');},destroy:function destroy(){this._destroyUI();if('ParsleyForm'!==this.__class__){this.$element.removeData('Parsley');this.$element.removeData('ParsleyFieldMultiple');this._trigger('destroy');return;}
for(var i=0;i<this.fields.length;i++)this.fields[i].destroy();this.$element.removeData('Parsley');this._trigger('destroy');},asyncIsValid:function asyncIsValid(group,force){ParsleyUtils__default.warnOnce("asyncIsValid is deprecated; please use whenValid instead");return this.whenValid({group:group,force:force});},_findRelated:function _findRelated(){return this.options.multiple?this.parent.$element.find('['+this.options.namespace+'multiple="'+this.options.multiple+'"]'):this.$element;}};var requirementConverters={string:function string(_string){return _string;},integer:function integer(string){if(isNaN(string))throw'Requirement is not an integer: "'+string+'"';return parseInt(string,10);},number:function number(string){if(isNaN(string))throw'Requirement is not a number: "'+string+'"';return parseFloat(string);},reference:function reference(string){var result=$(string);if(result.length===0)throw'No such reference: "'+string+'"';return result;},boolean:function boolean(string){return string!=='false';},object:function object(string){return ParsleyUtils__default.deserializeValue(string);},regexp:function regexp(_regexp){var flags='';if(/^\/.*\/(?:[gimy]*)$/.test(_regexp)){flags=_regexp.replace(/.*\/([gimy]*)$/,'$1');_regexp=_regexp.replace(new RegExp('^/(.*?)/'+flags+'$'),'$1');}else{_regexp='^'+_regexp+'$';}
return new RegExp(_regexp,flags);}};var convertArrayRequirement=function convertArrayRequirement(string,length){var m=string.match(/^\s*\[(.*)\]\s*$/);if(!m)throw'Requirement is not an array: "'+string+'"';var values=m[1].split(',').map(ParsleyUtils__default.trimString);if(values.length!==length)throw'Requirement has '+values.length+' values when '+length+' are needed';return values;};var convertRequirement=function convertRequirement(requirementType,string){var converter=requirementConverters[requirementType||'string'];if(!converter)throw'Unknown requirement specification: "'+requirementType+'"';return converter(string);};var convertExtraOptionRequirement=function convertExtraOptionRequirement(requirementSpec,string,extraOptionReader){var main=null;var extra={};for(var key in requirementSpec){if(key){var value=extraOptionReader(key);if('string'===typeof value)value=convertRequirement(requirementSpec[key],value);extra[key]=value;}else{main=convertRequirement(requirementSpec[key],string);}}
return[main,extra];};var ParsleyValidator=function ParsleyValidator(spec){$.extend(true,this,spec);};ParsleyValidator.prototype={validate:function validate(value,requirementFirstArg){if(this.fn){if(arguments.length>3)
requirementFirstArg=[].slice.call(arguments,1,-1);return this.fn.call(this,value,requirementFirstArg);}
if($.isArray(value)){if(!this.validateMultiple)throw'Validator `'+this.name+'` does not handle multiple values';return this.validateMultiple.apply(this,arguments);}else{if(this.validateNumber){if(isNaN(value))return false;arguments[0]=parseFloat(arguments[0]);return this.validateNumber.apply(this,arguments);}
if(this.validateString){return this.validateString.apply(this,arguments);}
throw'Validator `'+this.name+'` only handles multiple values';}},parseRequirements:function parseRequirements(requirements,extraOptionReader){if('string'!==typeof requirements){return $.isArray(requirements)?requirements:[requirements];}
var type=this.requirementType;if($.isArray(type)){var values=convertArrayRequirement(requirements,type.length);for(var i=0;i<values.length;i++)values[i]=convertRequirement(type[i],values[i]);return values;}else if($.isPlainObject(type)){return convertExtraOptionRequirement(type,requirements,extraOptionReader);}else{return[convertRequirement(type,requirements)];}},requirementType:'string',priority:2};var ParsleyValidatorRegistry=function ParsleyValidatorRegistry(validators,catalog){this.__class__='ParsleyValidatorRegistry';this.locale='en';this.init(validators||{},catalog||{});};var typeRegexes={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i,integer:/^-?\d+$/,digits:/^\d+$/,alphanum:/^\w+$/i,url:new RegExp("^"+"(?:(?:https?|ftp)://)?"+"(?:\\S+(?::\\S*)?@)?"+"(?:"+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])"+"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}"+"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))"+"|"+'(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)'+'(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*'+'(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))'+")"+"(?::\\d{2,5})?"+"(?:/\\S*)?"+"$",'i')};typeRegexes.range=typeRegexes.number;var decimalPlaces=function decimalPlaces(num){var match=(''+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!match){return 0;}
return Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0));};ParsleyValidatorRegistry.prototype={init:function init(validators,catalog){this.catalog=catalog;this.validators=$.extend({},this.validators);for(var name in validators)this.addValidator(name,validators[name].fn,validators[name].priority);window.Parsley.trigger('parsley:validator:init');},setLocale:function setLocale(locale){if('undefined'===typeof this.catalog[locale])throw new Error(locale+' is not available in the catalog');this.locale=locale;return this;},addCatalog:function addCatalog(locale,messages,set){if('object'===typeof messages)this.catalog[locale]=messages;if(true===set)return this.setLocale(locale);return this;},addMessage:function addMessage(locale,name,message){if('undefined'===typeof this.catalog[locale])this.catalog[locale]={};this.catalog[locale][name]=message;return this;},addMessages:function addMessages(locale,nameMessageObject){for(var name in nameMessageObject)this.addMessage(locale,name,nameMessageObject[name]);return this;},addValidator:function addValidator(name,arg1,arg2){if(this.validators[name])ParsleyUtils__default.warn('Validator "'+name+'" is already defined.');else if(ParsleyDefaults.hasOwnProperty(name)){ParsleyUtils__default.warn('"'+name+'" is a restricted keyword and is not a valid validator name.');return;}
return this._setValidator.apply(this,arguments);},updateValidator:function updateValidator(name,arg1,arg2){if(!this.validators[name]){ParsleyUtils__default.warn('Validator "'+name+'" is not already defined.');return this.addValidator.apply(this,arguments);}
return this._setValidator.apply(this,arguments);},removeValidator:function removeValidator(name){if(!this.validators[name])ParsleyUtils__default.warn('Validator "'+name+'" is not defined.');delete this.validators[name];return this;},_setValidator:function _setValidator(name,validator,priority){if('object'!==typeof validator){validator={fn:validator,priority:priority};}
if(!validator.validate){validator=new ParsleyValidator(validator);}
this.validators[name]=validator;for(var locale in validator.messages||{})this.addMessage(locale,name,validator.messages[locale]);return this;},getErrorMessage:function getErrorMessage(constraint){var message;if('type'===constraint.name){var typeMessages=this.catalog[this.locale][constraint.name]||{};message=typeMessages[constraint.requirements];}else message=this.formatMessage(this.catalog[this.locale][constraint.name],constraint.requirements);return message||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage;},formatMessage:function formatMessage(string,parameters){if('object'===typeof parameters){for(var i in parameters)string=this.formatMessage(string,parameters[i]);return string;}
return'string'===typeof string?string.replace(/%s/i,parameters):'';},validators:{notblank:{validateString:function validateString(value){return(/\S/.test(value));},priority:2},required:{validateMultiple:function validateMultiple(values){return values.length>0;},validateString:function validateString(value){return(/\S/.test(value));},priority:512},type:{validateString:function validateString(value,type){var _ref=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var _ref$step=_ref.step;var step=_ref$step===undefined?'any':_ref$step;var _ref$base=_ref.base;var base=_ref$base===undefined?0:_ref$base;var regex=typeRegexes[type];if(!regex){throw new Error('validator type `'+type+'` is not supported');}
if(!regex.test(value))return false;if('number'===type){if(!/^any$/i.test(step||'')){var nb=Number(value);var decimals=Math.max(decimalPlaces(step),decimalPlaces(base));if(decimalPlaces(nb)>decimals)
return false;var toInt=function toInt(f){return Math.round(f*Math.pow(10,decimals));};if((toInt(nb)-toInt(base))%toInt(step)!=0)return false;}}
return true;},requirementType:{'':'string',step:'string',base:'number'},priority:256},pattern:{validateString:function validateString(value,regexp){return regexp.test(value);},requirementType:'regexp',priority:64},minlength:{validateString:function validateString(value,requirement){return value.length>=requirement;},requirementType:'integer',priority:30},maxlength:{validateString:function validateString(value,requirement){return value.length<=requirement;},requirementType:'integer',priority:30},length:{validateString:function validateString(value,min,max){return value.length>=min&&value.length<=max;},requirementType:['integer','integer'],priority:30},mincheck:{validateMultiple:function validateMultiple(values,requirement){return values.length>=requirement;},requirementType:'integer',priority:30},maxcheck:{validateMultiple:function validateMultiple(values,requirement){return values.length<=requirement;},requirementType:'integer',priority:30},check:{validateMultiple:function validateMultiple(values,min,max){return values.length>=min&&values.length<=max;},requirementType:['integer','integer'],priority:30},min:{validateNumber:function validateNumber(value,requirement){return value>=requirement;},requirementType:'number',priority:30},max:{validateNumber:function validateNumber(value,requirement){return value<=requirement;},requirementType:'number',priority:30},range:{validateNumber:function validateNumber(value,min,max){return value>=min&&value<=max;},requirementType:['number','number'],priority:30},equalto:{validateString:function validateString(value,refOrValue){var $reference=$(refOrValue);if($reference.length)return value===$reference.val();else return value===refOrValue;},priority:256}}};var ParsleyUI={};var diffResults=function diffResults(newResult,oldResult,deep){var added=[];var kept=[];for(var i=0;i<newResult.length;i++){var found=false;for(var j=0;j<oldResult.length;j++)if(newResult[i].assert.name===oldResult[j].assert.name){found=true;break;}
if(found)kept.push(newResult[i]);else added.push(newResult[i]);}
return{kept:kept,added:added,removed:!deep?diffResults(oldResult,newResult,true).added:[]};};ParsleyUI.Form={_actualizeTriggers:function _actualizeTriggers(){var _this2=this;this.$element.on('submit.Parsley',function(evt){_this2.onSubmitValidate(evt);});this.$element.on('click.Parsley',ParsleyUtils__default._SubmitSelector,function(evt){_this2.onSubmitButton(evt);});if(false===this.options.uiEnabled)return;this.$element.attr('novalidate','');},focus:function focus(){this._focusedField=null;if(true===this.validationResult||'none'===this.options.focus)return null;for(var i=0;i<this.fields.length;i++){var field=this.fields[i];if(true!==field.validationResult&&field.validationResult.length>0&&'undefined'===typeof field.options.noFocus){this._focusedField=field.$element;if('first'===this.options.focus)break;}}
if(null===this._focusedField)return null;return this._focusedField.focus();},_destroyUI:function _destroyUI(){this.$element.off('.Parsley');}};ParsleyUI.Field={_reflowUI:function _reflowUI(){this._buildUI();if(!this._ui)return;var diff=diffResults(this.validationResult,this._ui.lastValidationResult);this._ui.lastValidationResult=this.validationResult;this._manageStatusClass();this._manageErrorsMessages(diff);this._actualizeTriggers();if((diff.kept.length||diff.added.length)&&!this._failedOnce){this._failedOnce=true;this._actualizeTriggers();}},getErrorsMessages:function getErrorsMessages(){if(true===this.validationResult)return[];var messages=[];for(var i=0;i<this.validationResult.length;i++)messages.push(this.validationResult[i].errorMessage||this._getErrorMessage(this.validationResult[i].assert));return messages;},addError:function addError(name){var _ref2=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var message=_ref2.message;var assert=_ref2.assert;var _ref2$updateClass=_ref2.updateClass;var updateClass=_ref2$updateClass===undefined?true:_ref2$updateClass;this._buildUI();this._addError(name,{message:message,assert:assert});if(updateClass)this._errorClass();},updateError:function updateError(name){var _ref3=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var message=_ref3.message;var assert=_ref3.assert;var _ref3$updateClass=_ref3.updateClass;var updateClass=_ref3$updateClass===undefined?true:_ref3$updateClass;this._buildUI();this._updateError(name,{message:message,assert:assert});if(updateClass)this._errorClass();},removeError:function removeError(name){var _ref4=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var _ref4$updateClass=_ref4.updateClass;var updateClass=_ref4$updateClass===undefined?true:_ref4$updateClass;this._buildUI();this._removeError(name);if(updateClass)this._manageStatusClass();},_manageStatusClass:function _manageStatusClass(){if(this.hasConstraints()&&this.needsValidation()&&true===this.validationResult)this._successClass();else if(this.validationResult.length>0)this._errorClass();else this._resetClass();},_manageErrorsMessages:function _manageErrorsMessages(diff){if('undefined'!==typeof this.options.errorsMessagesDisabled)return;if('undefined'!==typeof this.options.errorMessage){if(diff.added.length||diff.kept.length){this._insertErrorWrapper();if(0===this._ui.$errorsWrapper.find('.parsley-custom-error-message').length)this._ui.$errorsWrapper.append($(this.options.errorTemplate).addClass('parsley-custom-error-message'));return this._ui.$errorsWrapper.addClass('filled').find('.parsley-custom-error-message').html(this.options.errorMessage);}
return this._ui.$errorsWrapper.removeClass('filled').find('.parsley-custom-error-message').remove();}
for(var i=0;i<diff.removed.length;i++)this._removeError(diff.removed[i].assert.name);for(i=0;i<diff.added.length;i++)this._addError(diff.added[i].assert.name,{message:diff.added[i].errorMessage,assert:diff.added[i].assert});for(i=0;i<diff.kept.length;i++)this._updateError(diff.kept[i].assert.name,{message:diff.kept[i].errorMessage,assert:diff.kept[i].assert});},_addError:function _addError(name,_ref5){var message=_ref5.message;var assert=_ref5.assert;this._insertErrorWrapper();this._ui.$errorsWrapper.addClass('filled').append($(this.options.errorTemplate).addClass('parsley-'+name).html(message||this._getErrorMessage(assert)));},_updateError:function _updateError(name,_ref6){var message=_ref6.message;var assert=_ref6.assert;this._ui.$errorsWrapper.addClass('filled').find('.parsley-'+name).html(message||this._getErrorMessage(assert));},_removeError:function _removeError(name){this._ui.$errorsWrapper.removeClass('filled').find('.parsley-'+name).remove();},_getErrorMessage:function _getErrorMessage(constraint){var customConstraintErrorMessage=constraint.name+'Message';if('undefined'!==typeof this.options[customConstraintErrorMessage])return window.Parsley.formatMessage(this.options[customConstraintErrorMessage],constraint.requirements);return window.Parsley.getErrorMessage(constraint);},_buildUI:function _buildUI(){if(this._ui||false===this.options.uiEnabled)return;var _ui={};this.$element.attr(this.options.namespace+'id',this.__id__);_ui.$errorClassHandler=this._manageClassHandler();_ui.errorsWrapperId='parsley-id-'+(this.options.multiple?'multiple-'+this.options.multiple:this.__id__);_ui.$errorsWrapper=$(this.options.errorsWrapper).attr('id',_ui.errorsWrapperId);_ui.lastValidationResult=[];_ui.validationInformationVisible=false;this._ui=_ui;},_manageClassHandler:function _manageClassHandler(){if('string'===typeof this.options.classHandler&&$(this.options.classHandler).length)return $(this.options.classHandler);var $handler=this.options.classHandler.call(this,this);if('undefined'!==typeof $handler&&$handler.length)return $handler;return this._inputHolder();},_inputHolder:function _inputHolder(){if(!this.options.multiple||this.$element.is('select'))return this.$element;return this.$element.parent();},_insertErrorWrapper:function _insertErrorWrapper(){var $errorsContainer;if(0!==this._ui.$errorsWrapper.parent().length)return this._ui.$errorsWrapper.parent();if('string'===typeof this.options.errorsContainer){if($(this.options.errorsContainer).length)return $(this.options.errorsContainer).append(this._ui.$errorsWrapper);else ParsleyUtils__default.warn('The errors container `'+this.options.errorsContainer+'` does not exist in DOM');}else if('function'===typeof this.options.errorsContainer)$errorsContainer=this.options.errorsContainer.call(this,this);if('undefined'!==typeof $errorsContainer&&$errorsContainer.length)return $errorsContainer.append(this._ui.$errorsWrapper);return this._inputHolder().after(this._ui.$errorsWrapper);},_actualizeTriggers:function _actualizeTriggers(){var _this3=this;var $toBind=this._findRelated();var trigger;$toBind.off('.Parsley');if(this._failedOnce)$toBind.on(ParsleyUtils__default.namespaceEvents(this.options.triggerAfterFailure,'Parsley'),function(){_this3._validateIfNeeded();});else if(trigger=ParsleyUtils__default.namespaceEvents(this.options.trigger,'Parsley')){$toBind.on(trigger,function(event){_this3._validateIfNeeded(event);});}},_validateIfNeeded:function _validateIfNeeded(event){var _this4=this;if(event&&/key|input/.test(event.type))if(!(this._ui&&this._ui.validationInformationVisible)&&this.getValue().length<=this.options.validationThreshold)return;if(this.options.debounce){window.clearTimeout(this._debounced);this._debounced=window.setTimeout(function(){return _this4.validate();},this.options.debounce);}else this.validate();},_resetUI:function _resetUI(){this._failedOnce=false;this._actualizeTriggers();if('undefined'===typeof this._ui)return;this._ui.$errorsWrapper.removeClass('filled').children().remove();this._resetClass();this._ui.lastValidationResult=[];this._ui.validationInformationVisible=false;},_destroyUI:function _destroyUI(){this._resetUI();if('undefined'!==typeof this._ui)this._ui.$errorsWrapper.remove();delete this._ui;},_successClass:function _successClass(){this._ui.validationInformationVisible=true;this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);},_errorClass:function _errorClass(){this._ui.validationInformationVisible=true;this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);},_resetClass:function _resetClass(){this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);}};var ParsleyForm=function ParsleyForm(element,domOptions,options){this.__class__='ParsleyForm';this.$element=$(element);this.domOptions=domOptions;this.options=options;this.parent=window.Parsley;this.fields=[];this.validationResult=null;};var ParsleyForm__statusMapping={pending:null,resolved:true,rejected:false};ParsleyForm.prototype={onSubmitValidate:function onSubmitValidate(event){var _this5=this;if(true===event.parsley)return;var $submitSource=this._$submitSource||this.$element.find(ParsleyUtils__default._SubmitSelector).first();this._$submitSource=null;this.$element.find('.parsley-synthetic-submit-button').prop('disabled',true);if($submitSource.is('[formnovalidate]'))return;var promise=this.whenValidate({event:event});if('resolved'===promise.state()&&false!==this._trigger('submit')){}else{event.stopImmediatePropagation();event.preventDefault();if('pending'===promise.state())promise.done(function(){_this5._submit($submitSource);});}},onSubmitButton:function onSubmitButton(event){this._$submitSource=$(event.currentTarget);},_submit:function _submit($submitSource){if(false===this._trigger('submit'))return;if($submitSource){var $synthetic=this.$element.find('.parsley-synthetic-submit-button').prop('disabled',false);if(0===$synthetic.length)$synthetic=$('<input class="parsley-synthetic-submit-button" type="hidden">').appendTo(this.$element);$synthetic.attr({name:$submitSource.attr('name'),value:$submitSource.attr('value')});}
this.$element.trigger($.extend($.Event('submit'),{parsley:true}));},validate:function validate(options){if(arguments.length>=1&&!$.isPlainObject(options)){ParsleyUtils__default.warnOnce('Calling validate on a parsley form without passing arguments as an object is deprecated.');var _arguments=_slice.call(arguments);var group=_arguments[0];var force=_arguments[1];var event=_arguments[2];options={group:group,force:force,event:event};}
return ParsleyForm__statusMapping[this.whenValidate(options).state()];},whenValidate:function whenValidate(){var _ParsleyUtils__default$all$done$fail$always,_this6=this;var _ref7=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var group=_ref7.group;var force=_ref7.force;var event=_ref7.event;this.submitEvent=event;if(event){this.submitEvent=$.extend({},event,{preventDefault:function preventDefault(){ParsleyUtils__default.warnOnce("Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`");_this6.validationResult=false;}});}
this.validationResult=true;this._trigger('validate');this._refreshFields();var promises=this._withoutReactualizingFormOptions(function(){return $.map(_this6.fields,function(field){return field.whenValidate({force:force,group:group});});});return(_ParsleyUtils__default$all$done$fail$always=ParsleyUtils__default.all(promises).done(function(){_this6._trigger('success');}).fail(function(){_this6.validationResult=false;_this6.focus();_this6._trigger('error');}).always(function(){_this6._trigger('validated');})).pipe.apply(_ParsleyUtils__default$all$done$fail$always,_toConsumableArray(this._pipeAccordingToValidationResult()));},isValid:function isValid(options){if(arguments.length>=1&&!$.isPlainObject(options)){ParsleyUtils__default.warnOnce('Calling isValid on a parsley form without passing arguments as an object is deprecated.');var _arguments2=_slice.call(arguments);var group=_arguments2[0];var force=_arguments2[1];options={group:group,force:force};}
return ParsleyForm__statusMapping[this.whenValid(options).state()];},whenValid:function whenValid(){var _this7=this;var _ref8=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var group=_ref8.group;var force=_ref8.force;this._refreshFields();var promises=this._withoutReactualizingFormOptions(function(){return $.map(_this7.fields,function(field){return field.whenValid({group:group,force:force});});});return ParsleyUtils__default.all(promises);},_refreshFields:function _refreshFields(){return this.actualizeOptions()._bindFields();},_bindFields:function _bindFields(){var _this8=this;var oldFields=this.fields;this.fields=[];this.fieldsMappedById={};this._withoutReactualizingFormOptions(function(){_this8.$element.find(_this8.options.inputs).not(_this8.options.excluded).each(function(_,element){var fieldInstance=new window.Parsley.Factory(element,{},_this8);if(('ParsleyField'===fieldInstance.__class__||'ParsleyFieldMultiple'===fieldInstance.__class__)&&true!==fieldInstance.options.excluded)if('undefined'===typeof _this8.fieldsMappedById[fieldInstance.__class__+'-'+fieldInstance.__id__]){_this8.fieldsMappedById[fieldInstance.__class__+'-'+fieldInstance.__id__]=fieldInstance;_this8.fields.push(fieldInstance);}});$.each(ParsleyUtils__default.difference(oldFields,_this8.fields),function(_,field){field._trigger('reset');});});return this;},_withoutReactualizingFormOptions:function _withoutReactualizingFormOptions(fn){var oldActualizeOptions=this.actualizeOptions;this.actualizeOptions=function(){return this;};var result=fn();this.actualizeOptions=oldActualizeOptions;return result;},_trigger:function _trigger(eventName){return this.trigger('form:'+eventName);}};var ConstraintFactory=function ConstraintFactory(parsleyField,name,requirements,priority,isDomConstraint){if(!/ParsleyField/.test(parsleyField.__class__))throw new Error('ParsleyField or ParsleyFieldMultiple instance expected');var validatorSpec=window.Parsley._validatorRegistry.validators[name];var validator=new ParsleyValidator(validatorSpec);$.extend(this,{validator:validator,name:name,requirements:requirements,priority:priority||parsleyField.options[name+'Priority']||validator.priority,isDomConstraint:true===isDomConstraint});this._parseRequirements(parsleyField.options);};var capitalize=function capitalize(str){var cap=str[0].toUpperCase();return cap+str.slice(1);};ConstraintFactory.prototype={validate:function validate(value,instance){var _validator;return(_validator=this.validator).validate.apply(_validator,[value].concat(_toConsumableArray(this.requirementList),[instance]));},_parseRequirements:function _parseRequirements(options){var _this9=this;this.requirementList=this.validator.parseRequirements(this.requirements,function(key){return options[_this9.name+capitalize(key)];});}};var ParsleyField=function ParsleyField(field,domOptions,options,parsleyFormInstance){this.__class__='ParsleyField';this.$element=$(field);if('undefined'!==typeof parsleyFormInstance){this.parent=parsleyFormInstance;}
this.options=options;this.domOptions=domOptions;this.constraints=[];this.constraintsByName={};this.validationResult=true;this._bindConstraints();};var parsley_field__statusMapping={pending:null,resolved:true,rejected:false};ParsleyField.prototype={validate:function validate(options){if(arguments.length>=1&&!$.isPlainObject(options)){ParsleyUtils__default.warnOnce('Calling validate on a parsley field without passing arguments as an object is deprecated.');options={options:options};}
var promise=this.whenValidate(options);if(!promise)
return true;switch(promise.state()){case'pending':return null;case'resolved':return true;case'rejected':return this.validationResult;}},whenValidate:function whenValidate(){var _whenValid$always$done$fail$always,_this10=this;var _ref9=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var force=_ref9.force;var group=_ref9.group;this.refreshConstraints();if(group&&!this._isInGroup(group))return;this.value=this.getValue();this._trigger('validate');return(_whenValid$always$done$fail$always=this.whenValid({force:force,value:this.value,_refreshed:true}).always(function(){_this10._reflowUI();}).done(function(){_this10._trigger('success');}).fail(function(){_this10._trigger('error');}).always(function(){_this10._trigger('validated');})).pipe.apply(_whenValid$always$done$fail$always,_toConsumableArray(this._pipeAccordingToValidationResult()));},hasConstraints:function hasConstraints(){return 0!==this.constraints.length;},needsValidation:function needsValidation(value){if('undefined'===typeof value)value=this.getValue();if(!value.length&&!this._isRequired()&&'undefined'===typeof this.options.validateIfEmpty)return false;return true;},_isInGroup:function _isInGroup(group){if($.isArray(this.options.group))return-1!==$.inArray(group,this.options.group);return this.options.group===group;},isValid:function isValid(options){if(arguments.length>=1&&!$.isPlainObject(options)){ParsleyUtils__default.warnOnce('Calling isValid on a parsley field without passing arguments as an object is deprecated.');var _arguments3=_slice.call(arguments);var force=_arguments3[0];var value=_arguments3[1];options={force:force,value:value};}
var promise=this.whenValid(options);if(!promise)
return true;return parsley_field__statusMapping[promise.state()];},whenValid:function whenValid(){var _this11=this;var _ref10=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref10$force=_ref10.force;var force=_ref10$force===undefined?false:_ref10$force;var value=_ref10.value;var group=_ref10.group;var _refreshed=_ref10._refreshed;if(!_refreshed)this.refreshConstraints();if(group&&!this._isInGroup(group))return;this.validationResult=true;if(!this.hasConstraints())return $.when();if('undefined'===typeof value||null===value)value=this.getValue();if(!this.needsValidation(value)&&true!==force)return $.when();var groupedConstraints=this._getGroupedConstraints();var promises=[];$.each(groupedConstraints,function(_,constraints){var promise=ParsleyUtils__default.all($.map(constraints,function(constraint){return _this11._validateConstraint(value,constraint);}));promises.push(promise);if(promise.state()==='rejected')return false;});return ParsleyUtils__default.all(promises);},_validateConstraint:function _validateConstraint(value,constraint){var _this12=this;var result=constraint.validate(value,this);if(false===result)result=$.Deferred().reject();return ParsleyUtils__default.all([result]).fail(function(errorMessage){if(!(_this12.validationResult instanceof Array))_this12.validationResult=[];_this12.validationResult.push({assert:constraint,errorMessage:'string'===typeof errorMessage&&errorMessage});});},getValue:function getValue(){var value;if('function'===typeof this.options.value)value=this.options.value(this);else if('undefined'!==typeof this.options.value)value=this.options.value;else value=this.$element.val();if('undefined'===typeof value||null===value)return'';return this._handleWhitespace(value);},refreshConstraints:function refreshConstraints(){return this.actualizeOptions()._bindConstraints();},addConstraint:function addConstraint(name,requirements,priority,isDomConstraint){if(window.Parsley._validatorRegistry.validators[name]){var constraint=new ConstraintFactory(this,name,requirements,priority,isDomConstraint);if('undefined'!==this.constraintsByName[constraint.name])this.removeConstraint(constraint.name);this.constraints.push(constraint);this.constraintsByName[constraint.name]=constraint;}
return this;},removeConstraint:function removeConstraint(name){for(var i=0;i<this.constraints.length;i++)if(name===this.constraints[i].name){this.constraints.splice(i,1);break;}
delete this.constraintsByName[name];return this;},updateConstraint:function updateConstraint(name,parameters,priority){return this.removeConstraint(name).addConstraint(name,parameters,priority);},_bindConstraints:function _bindConstraints(){var constraints=[];var constraintsByName={};for(var i=0;i<this.constraints.length;i++)if(false===this.constraints[i].isDomConstraint){constraints.push(this.constraints[i]);constraintsByName[this.constraints[i].name]=this.constraints[i];}
this.constraints=constraints;this.constraintsByName=constraintsByName;for(var name in this.options)this.addConstraint(name,this.options[name],undefined,true);return this._bindHtml5Constraints();},_bindHtml5Constraints:function _bindHtml5Constraints(){if(this.$element.attr('required'))this.addConstraint('required',true,undefined,true);if('string'===typeof this.$element.attr('pattern'))this.addConstraint('pattern',this.$element.attr('pattern'),undefined,true);if(this.$element.attr('type')!=='date'&&'undefined'!==typeof this.$element.attr('min')&&'undefined'!==typeof this.$element.attr('max'))this.addConstraint('range',[this.$element.attr('min'),this.$element.attr('max')],undefined,true);else if(this.$element.attr('type')!=='date'&&'undefined'!==typeof this.$element.attr('min'))this.addConstraint('min',this.$element.attr('min'),undefined,true);else if(this.$element.attr('type')!=='date'&&'undefined'!==typeof this.$element.attr('max'))this.addConstraint('max',this.$element.attr('max'),undefined,true);if('undefined'!==typeof this.$element.attr('minlength')&&'undefined'!==typeof this.$element.attr('maxlength'))this.addConstraint('length',[this.$element.attr('minlength'),this.$element.attr('maxlength')],undefined,true);else if('undefined'!==typeof this.$element.attr('minlength'))this.addConstraint('minlength',this.$element.attr('minlength'),undefined,true);else if('undefined'!==typeof this.$element.attr('maxlength'))this.addConstraint('maxlength',this.$element.attr('maxlength'),undefined,true);var type=this.$element.attr('type');if('undefined'===typeof type)return this;if('number'===type){return this.addConstraint('type',['number',{step:this.$element.attr('step')||'1',base:this.$element.attr('min')||this.$element.attr('value')}],undefined,true);}else if(/^(email|url|range)$/i.test(type)){return this.addConstraint('type',type,undefined,true);}
return this;},_isRequired:function _isRequired(){if('undefined'===typeof this.constraintsByName.required)return false;return false!==this.constraintsByName.required.requirements;},_trigger:function _trigger(eventName){return this.trigger('field:'+eventName);},_handleWhitespace:function _handleWhitespace(value){if(true===this.options.trimValue)ParsleyUtils__default.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"');if('squish'===this.options.whitespace)value=value.replace(/\s{2,}/g,' ');if('trim'===this.options.whitespace||'squish'===this.options.whitespace||true===this.options.trimValue)value=ParsleyUtils__default.trimString(value);return value;},_getGroupedConstraints:function _getGroupedConstraints(){if(false===this.options.priorityEnabled)return[this.constraints];var groupedConstraints=[];var index={};for(var i=0;i<this.constraints.length;i++){var p=this.constraints[i].priority;if(!index[p])groupedConstraints.push(index[p]=[]);index[p].push(this.constraints[i]);}
groupedConstraints.sort(function(a,b){return b[0].priority-a[0].priority;});return groupedConstraints;}};var parsley_field=ParsleyField;var ParsleyMultiple=function ParsleyMultiple(){this.__class__='ParsleyFieldMultiple';};ParsleyMultiple.prototype={addElement:function addElement($element){this.$elements.push($element);return this;},refreshConstraints:function refreshConstraints(){var fieldConstraints;this.constraints=[];if(this.$element.is('select')){this.actualizeOptions()._bindConstraints();return this;}
for(var i=0;i<this.$elements.length;i++){if(!$('html').has(this.$elements[i]).length){this.$elements.splice(i,1);continue;}
fieldConstraints=this.$elements[i].data('ParsleyFieldMultiple').refreshConstraints().constraints;for(var j=0;j<fieldConstraints.length;j++)this.addConstraint(fieldConstraints[j].name,fieldConstraints[j].requirements,fieldConstraints[j].priority,fieldConstraints[j].isDomConstraint);}
return this;},getValue:function getValue(){if('function'===typeof this.options.value)return this.options.value(this);else if('undefined'!==typeof this.options.value)return this.options.value;if(this.$element.is('input[type=radio]'))return this._findRelated().filter(':checked').val()||'';if(this.$element.is('input[type=checkbox]')){var values=[];this._findRelated().filter(':checked').each(function(){values.push($(this).val());});return values;}
if(this.$element.is('select')&&null===this.$element.val())return[];return this.$element.val();},_init:function _init(){this.$elements=[this.$element];return this;}};var ParsleyFactory=function ParsleyFactory(element,options,parsleyFormInstance){this.$element=$(element);var savedparsleyFormInstance=this.$element.data('Parsley');if(savedparsleyFormInstance){if('undefined'!==typeof parsleyFormInstance&&savedparsleyFormInstance.parent===window.Parsley){savedparsleyFormInstance.parent=parsleyFormInstance;savedparsleyFormInstance._resetOptions(savedparsleyFormInstance.options);}
if('object'===typeof options){$.extend(savedparsleyFormInstance.options,options);}
return savedparsleyFormInstance;}
if(!this.$element.length)throw new Error('You must bind Parsley on an existing element.');if('undefined'!==typeof parsleyFormInstance&&'ParsleyForm'!==parsleyFormInstance.__class__)throw new Error('Parent instance must be a ParsleyForm instance');this.parent=parsleyFormInstance||window.Parsley;return this.init(options);};ParsleyFactory.prototype={init:function init(options){this.__class__='Parsley';this.__version__='2.6.2';this.__id__=ParsleyUtils__default.generateID();this._resetOptions(options);if(this.$element.is('form')||ParsleyUtils__default.checkAttr(this.$element,this.options.namespace,'validate')&&!this.$element.is(this.options.inputs))return this.bind('parsleyForm');return this.isMultiple()?this.handleMultiple():this.bind('parsleyField');},isMultiple:function isMultiple(){return this.$element.is('input[type=radio], input[type=checkbox]')||this.$element.is('select')&&'undefined'!==typeof this.$element.attr('multiple');},handleMultiple:function handleMultiple(){var _this13=this;var name;var multiple;var parsleyMultipleInstance;if(this.options.multiple);else if('undefined'!==typeof this.$element.attr('name')&&this.$element.attr('name').length)this.options.multiple=name=this.$element.attr('name');else if('undefined'!==typeof this.$element.attr('id')&&this.$element.attr('id').length)this.options.multiple=this.$element.attr('id');if(this.$element.is('select')&&'undefined'!==typeof this.$element.attr('multiple')){this.options.multiple=this.options.multiple||this.__id__;return this.bind('parsleyFieldMultiple');}else if(!this.options.multiple){ParsleyUtils__default.warn('To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.',this.$element);return this;}
this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,'');if('undefined'!==typeof name){$('input[name="'+name+'"]').each(function(i,input){if($(input).is('input[type=radio], input[type=checkbox]'))$(input).attr(_this13.options.namespace+'multiple',_this13.options.multiple);});}
var $previouslyRelated=this._findRelated();for(var i=0;i<$previouslyRelated.length;i++){parsleyMultipleInstance=$($previouslyRelated.get(i)).data('Parsley');if('undefined'!==typeof parsleyMultipleInstance){if(!this.$element.data('ParsleyFieldMultiple')){parsleyMultipleInstance.addElement(this.$element);}
break;}}
this.bind('parsleyField',true);return parsleyMultipleInstance||this.bind('parsleyFieldMultiple');},bind:function bind(type,doNotStore){var parsleyInstance;switch(type){case'parsleyForm':parsleyInstance=$.extend(new ParsleyForm(this.$element,this.domOptions,this.options),new ParsleyAbstract(),window.ParsleyExtend)._bindFields();break;case'parsleyField':parsleyInstance=$.extend(new parsley_field(this.$element,this.domOptions,this.options,this.parent),new ParsleyAbstract(),window.ParsleyExtend);break;case'parsleyFieldMultiple':parsleyInstance=$.extend(new parsley_field(this.$element,this.domOptions,this.options,this.parent),new ParsleyMultiple(),new ParsleyAbstract(),window.ParsleyExtend)._init();break;default:throw new Error(type+'is not a supported Parsley type');}
if(this.options.multiple)ParsleyUtils__default.setAttr(this.$element,this.options.namespace,'multiple',this.options.multiple);if('undefined'!==typeof doNotStore){this.$element.data('ParsleyFieldMultiple',parsleyInstance);return parsleyInstance;}
this.$element.data('Parsley',parsleyInstance);parsleyInstance._actualizeTriggers();parsleyInstance._trigger('init');return parsleyInstance;}};var vernums=$.fn.jquery.split('.');if(parseInt(vernums[0])<=1&&parseInt(vernums[1])<8){throw"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.";}
if(!vernums.forEach){ParsleyUtils__default.warn('Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim');}
var Parsley=$.extend(new ParsleyAbstract(),{$element:$(document),actualizeOptions:null,_resetOptions:null,Factory:ParsleyFactory,version:'2.6.2'});$.extend(parsley_field.prototype,ParsleyUI.Field,ParsleyAbstract.prototype);$.extend(ParsleyForm.prototype,ParsleyUI.Form,ParsleyAbstract.prototype);$.extend(ParsleyFactory.prototype,ParsleyAbstract.prototype);$.fn.parsley=$.fn.psly=function(options){if(this.length>1){var instances=[];this.each(function(){instances.push($(this).parsley(options));});return instances;}
if(!$(this).length){ParsleyUtils__default.warn('You must bind Parsley on an existing element.');return;}
return new ParsleyFactory(this,options);};if('undefined'===typeof window.ParsleyExtend)window.ParsleyExtend={};Parsley.options=$.extend(ParsleyUtils__default.objectCreate(ParsleyDefaults),window.ParsleyConfig);window.ParsleyConfig=Parsley.options;window.Parsley=window.psly=Parsley;window.ParsleyUtils=ParsleyUtils__default;var registry=window.Parsley._validatorRegistry=new ParsleyValidatorRegistry(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);window.ParsleyValidator={};$.each('setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator'.split(' '),function(i,method){window.Parsley[method]=$.proxy(registry,method);window.ParsleyValidator[method]=function(){var _window$Parsley;ParsleyUtils__default.warnOnce('Accessing the method \''+method+'\' through ParsleyValidator is deprecated. Simply call \'window.Parsley.'+method+'(...)\'');return(_window$Parsley=window.Parsley)[method].apply(_window$Parsley,arguments);};});window.Parsley.UI=ParsleyUI;window.ParsleyUI={removeError:function removeError(instance,name,doNotUpdateClass){var updateClass=true!==doNotUpdateClass;ParsleyUtils__default.warnOnce('Accessing ParsleyUI is deprecated. Call \'removeError\' on the instance directly. Please comment in issue 1073 as to your need to call this method.');return instance.removeError(name,{updateClass:updateClass});},getErrorsMessages:function getErrorsMessages(instance){ParsleyUtils__default.warnOnce('Accessing ParsleyUI is deprecated. Call \'getErrorsMessages\' on the instance directly.');return instance.getErrorsMessages();}};$.each('addError updateError'.split(' '),function(i,method){window.ParsleyUI[method]=function(instance,name,message,assert,doNotUpdateClass){var updateClass=true!==doNotUpdateClass;ParsleyUtils__default.warnOnce('Accessing ParsleyUI is deprecated. Call \''+method+'\' on the instance directly. Please comment in issue 1073 as to your need to call this method.');return instance[method](name,{message:message,assert:assert,updateClass:updateClass});};});if(false!==window.ParsleyConfig.autoBind){$(function(){if($('[data-parsley-validate]').length)$('[data-parsley-validate]').parsley();});}
var o=$({});var deprecated=function deprecated(){ParsleyUtils__default.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley");};function adapt(fn,context){if(!fn.parsleyAdaptedCallback){fn.parsleyAdaptedCallback=function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(this);fn.apply(context||o,args);};}
return fn.parsleyAdaptedCallback;}
var eventPrefix='parsley:';function eventName(name){if(name.lastIndexOf(eventPrefix,0)===0)return name.substr(eventPrefix.length);return name;}
$.listen=function(name,callback){var context;deprecated();if('object'===typeof arguments[1]&&'function'===typeof arguments[2]){context=arguments[1];callback=arguments[2];}
if('function'!==typeof callback)throw new Error('Wrong parameters');window.Parsley.on(eventName(name),adapt(callback,context));};$.listenTo=function(instance,name,fn){deprecated();if(!(instance instanceof parsley_field)&&!(instance instanceof ParsleyForm))throw new Error('Must give Parsley instance');if('string'!==typeof name||'function'!==typeof fn)throw new Error('Wrong parameters');instance.on(eventName(name),adapt(fn));};$.unsubscribe=function(name,fn){deprecated();if('string'!==typeof name||'function'!==typeof fn)throw new Error('Wrong arguments');window.Parsley.off(eventName(name),fn.parsleyAdaptedCallback);};$.unsubscribeTo=function(instance,name){deprecated();if(!(instance instanceof parsley_field)&&!(instance instanceof ParsleyForm))throw new Error('Must give Parsley instance');instance.off(eventName(name));};$.unsubscribeAll=function(name){deprecated();window.Parsley.off(eventName(name));$('form,input,textarea,select').each(function(){var instance=$(this).data('Parsley');if(instance){instance.off(eventName(name));}});};$.emit=function(name,instance){var _instance;deprecated();var instanceGiven=instance instanceof parsley_field||instance instanceof ParsleyForm;var args=Array.prototype.slice.call(arguments,instanceGiven?2:1);args.unshift(eventName(name));if(!instanceGiven){instance=window.Parsley;}
(_instance=instance).trigger.apply(_instance,_toConsumableArray(args));};var pubsub={};$.extend(true,Parsley,{asyncValidators:{'default':{fn:function fn(xhr){return xhr.status>=200&&xhr.status<300;},url:false},reverse:{fn:function fn(xhr){return xhr.status<200||xhr.status>=300;},url:false}},addAsyncValidator:function addAsyncValidator(name,fn,url,options){Parsley.asyncValidators[name]={fn:fn,url:url||false,options:options||{}};return this;}});Parsley.addValidator('remote',{requirementType:{'':'string','validator':'string','reverse':'boolean','options':'object'},validateString:function validateString(value,url,options,instance){var data={};var ajaxOptions;var csr;var validator=options.validator||(true===options.reverse?'reverse':'default');if('undefined'===typeof Parsley.asyncValidators[validator])throw new Error('Calling an undefined async validator: `'+validator+'`');url=Parsley.asyncValidators[validator].url||url;if(url.indexOf('{value}')>-1){url=url.replace('{value}',encodeURIComponent(value));}else{data[instance.$element.attr('name')||instance.$element.attr('id')]=value;}
var remoteOptions=$.extend(true,options.options||{},Parsley.asyncValidators[validator].options);ajaxOptions=$.extend(true,{},{url:url,data:data,type:'GET'},remoteOptions);instance.trigger('field:ajaxoptions',instance,ajaxOptions);csr=$.param(ajaxOptions);if('undefined'===typeof Parsley._remoteCache)Parsley._remoteCache={};var xhr=Parsley._remoteCache[csr]=Parsley._remoteCache[csr]||$.ajax(ajaxOptions);var handleXhr=function handleXhr(){var result=Parsley.asyncValidators[validator].fn.call(instance,xhr,url,options);if(!result)
result=$.Deferred().reject();return $.when(result);};return xhr.then(handleXhr,handleXhr);},priority:-1});Parsley.on('form:submit',function(){Parsley._remoteCache={};});window.ParsleyExtend.addAsyncValidator=function(){ParsleyUtils.warnOnce('Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`');return Parsley.addAsyncValidator.apply(Parsley,arguments);};Parsley.addMessages('en',{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."});Parsley.setLocale('en');function InputEvent(){var _this14=this;var globals=window||global;$.extend(this,{isNativeEvent:function isNativeEvent(evt){return evt.originalEvent&&evt.originalEvent.isTrusted!==false;},fakeInputEvent:function fakeInputEvent(evt){if(_this14.isNativeEvent(evt)){$(evt.target).trigger('input');}},misbehaves:function misbehaves(evt){if(_this14.isNativeEvent(evt)){_this14.behavesOk(evt);$(document).on('change.inputevent',evt.data.selector,_this14.fakeInputEvent);_this14.fakeInputEvent(evt);}},behavesOk:function behavesOk(evt){if(_this14.isNativeEvent(evt)){$(document).off('input.inputevent',evt.data.selector,_this14.behavesOk).off('change.inputevent',evt.data.selector,_this14.misbehaves);}},install:function install(){if(globals.inputEventPatched){return;}
globals.inputEventPatched='0.0.3';var _arr=['select','input[type="checkbox"]','input[type="radio"]','input[type="file"]'];for(var _i=0;_i<_arr.length;_i++){var selector=_arr[_i];$(document).on('input.inputevent',selector,{selector:selector},_this14.behavesOk).on('change.inputevent',selector,{selector:selector},_this14.misbehaves);}},uninstall:function uninstall(){delete globals.inputEventPatched;$(document).off('.inputevent');}});};var inputevent=new InputEvent();inputevent.install();var parsley=Parsley;return parsley;});;(function(global){"use strict";var Logger={};Logger.VERSION="1.2.0";var logHandler;var contextualLoggersByNameMap={};var bind=function(scope,func){return function(){return func.apply(scope,arguments);};};var merge=function(){var args=arguments,target=args[0],key,i;for(i=1;i<args.length;i++){for(key in args[i]){if(!(key in target)&&args[i].hasOwnProperty(key)){target[key]=args[i][key];}}}
return target;};var defineLogLevel=function(value,name){return{value:value,name:name};};Logger.DEBUG=defineLogLevel(1,'DEBUG');Logger.INFO=defineLogLevel(2,'INFO');Logger.TIME=defineLogLevel(3,'TIME');Logger.WARN=defineLogLevel(4,'WARN');Logger.ERROR=defineLogLevel(8,'ERROR');Logger.OFF=defineLogLevel(99,'OFF');var ContextualLogger=function(defaultContext){this.context=defaultContext;this.setLevel(defaultContext.filterLevel);this.log=this.info;};ContextualLogger.prototype={setLevel:function(newLevel){if(newLevel&&"value"in newLevel){this.context.filterLevel=newLevel;}},enabledFor:function(lvl){var filterLevel=this.context.filterLevel;return lvl.value>=filterLevel.value;},debug:function(){this.invoke(Logger.DEBUG,arguments);},info:function(){this.invoke(Logger.INFO,arguments);},warn:function(){this.invoke(Logger.WARN,arguments);},error:function(){this.invoke(Logger.ERROR,arguments);},time:function(label){if(typeof label==='string'&&label.length>0){this.invoke(Logger.TIME,[label,'start']);}},timeEnd:function(label){if(typeof label==='string'&&label.length>0){this.invoke(Logger.TIME,[label,'end']);}},invoke:function(level,msgArgs){if(logHandler&&this.enabledFor(level)){logHandler(msgArgs,merge({level:level},this.context));}}};var globalLogger=new ContextualLogger({filterLevel:Logger.OFF});(function(){var L=Logger;L.enabledFor=bind(globalLogger,globalLogger.enabledFor);L.debug=bind(globalLogger,globalLogger.debug);L.time=bind(globalLogger,globalLogger.time);L.timeEnd=bind(globalLogger,globalLogger.timeEnd);L.info=bind(globalLogger,globalLogger.info);L.warn=bind(globalLogger,globalLogger.warn);L.error=bind(globalLogger,globalLogger.error);L.log=L.info;}());Logger.setHandler=function(func){logHandler=func;};Logger.setLevel=function(level){globalLogger.setLevel(level);for(var key in contextualLoggersByNameMap){if(contextualLoggersByNameMap.hasOwnProperty(key)){contextualLoggersByNameMap[key].setLevel(level);}}};Logger.get=function(name){return contextualLoggersByNameMap[name]||(contextualLoggersByNameMap[name]=new ContextualLogger(merge({name:name},globalLogger.context)));};Logger.useDefaults=function(options){options=options||{};options.formatter=options.formatter||function defaultMessageFormatter(messages,context){if(context.name){messages.unshift("["+context.name+"]");}};if(typeof console==="undefined"){return;}
var timerStartTimeByLabelMap={};var invokeConsoleMethod=function(hdlr,messages){Function.prototype.apply.call(hdlr,console,messages);};Logger.setLevel(options.defaultLevel||Logger.DEBUG);Logger.setHandler(function(messages,context){messages=Array.prototype.slice.call(messages);var hdlr=console.log;var timerLabel;if(context.level===Logger.TIME){timerLabel=(context.name?'['+context.name+'] ':'')+messages[0];if(messages[1]==='start'){if(console.time){console.time(timerLabel);}
else{timerStartTimeByLabelMap[timerLabel]=new Date().getTime();}}
else{if(console.timeEnd){console.timeEnd(timerLabel);}
else{invokeConsoleMethod(hdlr,[timerLabel+': '+(new Date().getTime()-timerStartTimeByLabelMap[timerLabel])+'ms']);}}}
else{if(context.level===Logger.WARN&&console.warn){hdlr=console.warn;}else if(context.level===Logger.ERROR&&console.error){hdlr=console.error;}else if(context.level===Logger.INFO&&console.info){hdlr=console.info;}
options.formatter(messages,context);invokeConsoleMethod(hdlr,messages);}});};if(typeof define==='function'&&define.amd){define(Logger);}
else if(typeof module!=='undefined'&&module.exports){module.exports=Logger;}
else{Logger._prevLogger=global.Logger;Logger.noConflict=function(){global.Logger=Logger._prevLogger;return Logger;};global.Logger=Logger;}}(this));;(function(window){var ua=navigator.userAgent;if(window.HTMLPictureElement&&((/ecko/).test(ua)&&ua.match(/rv\:(\d+)/)&&RegExp.$1<45)){addEventListener("resize",(function(){var timer;var dummySrc=document.createElement("source");var fixRespimg=function(img){var source,sizes;var picture=img.parentNode;if(picture.nodeName.toUpperCase()==="PICTURE"){source=dummySrc.cloneNode();picture.insertBefore(source,picture.firstElementChild);setTimeout(function(){picture.removeChild(source);});}else if(!img._pfLastSize||img.offsetWidth>img._pfLastSize){img._pfLastSize=img.offsetWidth;sizes=img.sizes;img.sizes+=",100vw";setTimeout(function(){img.sizes=sizes;});}};var findPictureImgs=function(){var i;var imgs=document.querySelectorAll("picture > img, img[srcset][sizes]");for(i=0;i<imgs.length;i++){fixRespimg(imgs[i]);}};var onResize=function(){clearTimeout(timer);timer=setTimeout(findPictureImgs,99);};var mq=window.matchMedia&&matchMedia("(orientation: landscape)");var init=function(){onResize();if(mq&&mq.addListener){mq.addListener(onResize);}};dummySrc.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(/^[c|i]|d$/.test(document.readyState||"")){init();}else{document.addEventListener("DOMContentLoaded",init);}
return onResize;})());}})(window);(function(window,document,undefined){"use strict";document.createElement("picture");var warn,eminpx,alwaysCheckWDescriptor,evalId;var pf={};var isSupportTestReady=false;var noop=function(){};var image=document.createElement("img");var getImgAttr=image.getAttribute;var setImgAttr=image.setAttribute;var removeImgAttr=image.removeAttribute;var docElem=document.documentElement;var types={};var cfg={algorithm:""};var srcAttr="data-pfsrc";var srcsetAttr=srcAttr+"set";var ua=navigator.userAgent;var supportAbort=(/rident/).test(ua)||((/ecko/).test(ua)&&ua.match(/rv\:(\d+)/)&&RegExp.$1>35);var curSrcProp="currentSrc";var regWDesc=/\s+\+?\d+(e\d+)?w/;var regSize=/(\([^)]+\))?\s*(.+)/;var setOptions=window.picturefillCFG;var baseStyle="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)";var fsCss="font-size:100%!important;";var isVwDirty=true;var cssCache={};var sizeLengthCache={};var DPR=window.devicePixelRatio;var units={px:1,"in":96};var anchor=document.createElement("a");var alreadyRun=false;var regexLeadingSpaces=/^[ \t\n\r\u000c]+/,regexLeadingCommasOrSpaces=/^[, \t\n\r\u000c]+/,regexLeadingNotSpaces=/^[^ \t\n\r\u000c]+/,regexTrailingCommas=/[,]+$/,regexNonNegativeInteger=/^\d+$/,regexFloatingPoint=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/;var on=function(obj,evt,fn,capture){if(obj.addEventListener){obj.addEventListener(evt,fn,capture||false);}else if(obj.attachEvent){obj.attachEvent("on"+evt,fn);}};var memoize=function(fn){var cache={};return function(input){if(!(input in cache)){cache[input]=fn(input);}
return cache[input];};};function isSpace(c){return(c==="\u0020"||c==="\u0009"||c==="\u000A"||c==="\u000C"||c==="\u000D");}
var evalCSS=(function(){var regLength=/^([\d\.]+)(em|vw|px)$/;var replace=function(){var args=arguments,index=0,string=args[0];while(++index in args){string=string.replace(args[index],args[++index]);}
return string;};var buildStr=memoize(function(css){return"return "+replace((css||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/ig,"")+";";});return function(css,length){var parsedLength;if(!(css in cssCache)){cssCache[css]=false;if(length&&(parsedLength=css.match(regLength))){cssCache[css]=parsedLength[1]*units[parsedLength[2]];}else{try{cssCache[css]=new Function("e",buildStr(css))(units);}catch(e){}}}
return cssCache[css];};})();var setResolution=function(candidate,sizesattr){if(candidate.w){candidate.cWidth=pf.calcListLength(sizesattr||"100vw");candidate.res=candidate.w/candidate.cWidth;}else{candidate.res=candidate.d;}
return candidate;};var picturefill=function(opt){if(!isSupportTestReady){return;}
var elements,i,plen;var options=opt||{};if(options.elements&&options.elements.nodeType===1){if(options.elements.nodeName.toUpperCase()==="IMG"){options.elements=[options.elements];}else{options.context=options.elements;options.elements=null;}}
elements=options.elements||pf.qsa((options.context||document),(options.reevaluate||options.reselect)?pf.sel:pf.selShort);if((plen=elements.length)){pf.setupRun(options);alreadyRun=true;for(i=0;i<plen;i++){pf.fillImg(elements[i],options);}
pf.teardownRun(options);}};warn=(window.console&&console.warn)?function(message){console.warn(message);}:noop;if(!(curSrcProp in image)){curSrcProp="src";}
types["image/jpeg"]=true;types["image/gif"]=true;types["image/png"]=true;function detectTypeSupport(type,typeUri){var image=new window.Image();image.onerror=function(){types[type]=false;picturefill();};image.onload=function(){types[type]=image.width===1;picturefill();};image.src=typeUri;return"pending";}
types["image/svg+xml"]=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");function updateMetrics(){isVwDirty=false;DPR=window.devicePixelRatio;cssCache={};sizeLengthCache={};pf.DPR=DPR||1;units.width=Math.max(window.innerWidth||0,docElem.clientWidth);units.height=Math.max(window.innerHeight||0,docElem.clientHeight);units.vw=units.width/100;units.vh=units.height/100;evalId=[units.height,units.width,DPR].join("-");units.em=pf.getEmValue();units.rem=units.em;}
function chooseLowRes(lowerValue,higherValue,dprValue,isCached){var bonusFactor,tooMuch,bonus,meanDensity;if(cfg.algorithm==="saveData"){if(lowerValue>2.7){meanDensity=dprValue+1;}else{tooMuch=higherValue-dprValue;bonusFactor=Math.pow(lowerValue-0.6,1.5);bonus=tooMuch*bonusFactor;if(isCached){bonus+=0.1*bonusFactor;}
meanDensity=lowerValue+bonus;}}else{meanDensity=(dprValue>1)?Math.sqrt(lowerValue*higherValue):lowerValue;}
return meanDensity>dprValue;}
function applyBestCandidate(img){var srcSetCandidates;var matchingSet=pf.getSet(img);var evaluated=false;if(matchingSet!=="pending"){evaluated=evalId;if(matchingSet){srcSetCandidates=pf.setRes(matchingSet);pf.applySetCandidate(srcSetCandidates,img);}}
img[pf.ns].evaled=evaluated;}
function ascendingSort(a,b){return a.res-b.res;}
function setSrcToCur(img,src,set){var candidate;if(!set&&src){set=img[pf.ns].sets;set=set&&set[set.length-1];}
candidate=getCandidateForSrc(src,set);if(candidate){src=pf.makeUrl(src);img[pf.ns].curSrc=src;img[pf.ns].curCan=candidate;if(!candidate.res){setResolution(candidate,candidate.set.sizes);}}
return candidate;}
function getCandidateForSrc(src,set){var i,candidate,candidates;if(src&&set){candidates=pf.parseSet(set);src=pf.makeUrl(src);for(i=0;i<candidates.length;i++){if(src===pf.makeUrl(candidates[i].url)){candidate=candidates[i];break;}}}
return candidate;}
function getAllSourceElements(picture,candidates){var i,len,source,srcset;var sources=picture.getElementsByTagName("source");for(i=0,len=sources.length;i<len;i++){source=sources[i];source[pf.ns]=true;srcset=source.getAttribute("srcset");if(srcset){candidates.push({srcset:srcset,media:source.getAttribute("media"),type:source.getAttribute("type"),sizes:source.getAttribute("sizes")});}}}
function parseSrcset(input,set){function collectCharacters(regEx){var chars,match=regEx.exec(input.substring(pos));if(match){chars=match[0];pos+=chars.length;return chars;}}
var inputLength=input.length,url,descriptors,currentDescriptor,state,c,pos=0,candidates=[];function parseDescriptors(){var pError=false,w,d,h,i,candidate={},desc,lastChar,value,intVal,floatVal;for(i=0;i<descriptors.length;i++){desc=descriptors[i];lastChar=desc[desc.length-1];value=desc.substring(0,desc.length-1);intVal=parseInt(value,10);floatVal=parseFloat(value);if(regexNonNegativeInteger.test(value)&&(lastChar==="w")){if(w||d){pError=true;}
if(intVal===0){pError=true;}else{w=intVal;}}else if(regexFloatingPoint.test(value)&&(lastChar==="x")){if(w||d||h){pError=true;}
if(floatVal<0){pError=true;}else{d=floatVal;}}else if(regexNonNegativeInteger.test(value)&&(lastChar==="h")){if(h||d){pError=true;}
if(intVal===0){pError=true;}else{h=intVal;}}else{pError=true;}}
if(!pError){candidate.url=url;if(w){candidate.w=w;}
if(d){candidate.d=d;}
if(h){candidate.h=h;}
if(!h&&!d&&!w){candidate.d=1;}
if(candidate.d===1){set.has1x=true;}
candidate.set=set;candidates.push(candidate);}}
function tokenize(){collectCharacters(regexLeadingSpaces);currentDescriptor="";state="in descriptor";while(true){c=input.charAt(pos);if(state==="in descriptor"){if(isSpace(c)){if(currentDescriptor){descriptors.push(currentDescriptor);currentDescriptor="";state="after descriptor";}}else if(c===","){pos+=1;if(currentDescriptor){descriptors.push(currentDescriptor);}
parseDescriptors();return;}else if(c==="\u0028"){currentDescriptor=currentDescriptor+c;state="in parens";}else if(c===""){if(currentDescriptor){descriptors.push(currentDescriptor);}
parseDescriptors();return;}else{currentDescriptor=currentDescriptor+c;}}else if(state==="in parens"){if(c===")"){currentDescriptor=currentDescriptor+c;state="in descriptor";}else if(c===""){descriptors.push(currentDescriptor);parseDescriptors();return;}else{currentDescriptor=currentDescriptor+c;}}else if(state==="after descriptor"){if(isSpace(c)){}else if(c===""){parseDescriptors();return;}else{state="in descriptor";pos-=1;}}
pos+=1;}}
while(true){collectCharacters(regexLeadingCommasOrSpaces);if(pos>=inputLength){return candidates;}
url=collectCharacters(regexLeadingNotSpaces);descriptors=[];if(url.slice(-1)===","){url=url.replace(regexTrailingCommas,"");parseDescriptors();}else{tokenize();}}}
function parseSizes(strValue){var regexCssLengthWithUnits=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i;var regexCssCalc=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;var i;var unparsedSizesList;var unparsedSizesListLength;var unparsedSize;var lastComponentValue;var size;function parseComponentValues(str){var chrctr;var component="";var componentArray=[];var listArray=[];var parenDepth=0;var pos=0;var inComment=false;function pushComponent(){if(component){componentArray.push(component);component="";}}
function pushComponentArray(){if(componentArray[0]){listArray.push(componentArray);componentArray=[];}}
while(true){chrctr=str.charAt(pos);if(chrctr===""){pushComponent();pushComponentArray();return listArray;}else if(inComment){if((chrctr==="*")&&(str[pos+1]==="/")){inComment=false;pos+=2;pushComponent();continue;}else{pos+=1;continue;}}else if(isSpace(chrctr)){if((str.charAt(pos-1)&&isSpace(str.charAt(pos-1)))||!component){pos+=1;continue;}else if(parenDepth===0){pushComponent();pos+=1;continue;}else{chrctr=" ";}}else if(chrctr==="("){parenDepth+=1;}else if(chrctr===")"){parenDepth-=1;}else if(chrctr===","){pushComponent();pushComponentArray();pos+=1;continue;}else if((chrctr==="/")&&(str.charAt(pos+1)==="*")){inComment=true;pos+=2;continue;}
component=component+chrctr;pos+=1;}}
function isValidNonNegativeSourceSizeValue(s){if(regexCssLengthWithUnits.test(s)&&(parseFloat(s)>=0)){return true;}
if(regexCssCalc.test(s)){return true;}
if((s==="0")||(s==="-0")||(s==="+0")){return true;}
return false;}
unparsedSizesList=parseComponentValues(strValue);unparsedSizesListLength=unparsedSizesList.length;for(i=0;i<unparsedSizesListLength;i++){unparsedSize=unparsedSizesList[i];lastComponentValue=unparsedSize[unparsedSize.length-1];if(isValidNonNegativeSourceSizeValue(lastComponentValue)){size=lastComponentValue;unparsedSize.pop();}else{continue;}
if(unparsedSize.length===0){return size;}
unparsedSize=unparsedSize.join(" ");if(!(pf.matchesMedia(unparsedSize))){continue;}
return size;}
return"100vw";}
pf.ns=("pf"+new Date().getTime()).substr(0,9);pf.supSrcset="srcset"in image;pf.supSizes="sizes"in image;pf.supPicture=!!window.HTMLPictureElement;if(pf.supSrcset&&pf.supPicture&&!pf.supSizes){(function(image2){image.srcset="data:,a";image2.src="data:,a";pf.supSrcset=image.complete===image2.complete;pf.supPicture=pf.supSrcset&&pf.supPicture;})(document.createElement("img"));}
if(pf.supSrcset&&!pf.supSizes){(function(){var width2="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==";var width1="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";var img=document.createElement("img");var test=function(){var width=img.width;if(width===2){pf.supSizes=true;}
alwaysCheckWDescriptor=pf.supSrcset&&!pf.supSizes;isSupportTestReady=true;setTimeout(picturefill);};img.onload=test;img.onerror=test;img.setAttribute("sizes","9px");img.srcset=width1+" 1w,"+width2+" 9w";img.src=width1;})();}else{isSupportTestReady=true;}
pf.selShort="picture>img,img[srcset]";pf.sel=pf.selShort;pf.cfg=cfg;pf.DPR=(DPR||1);pf.u=units;pf.types=types;pf.setSize=noop;pf.makeUrl=memoize(function(src){anchor.href=src;return anchor.href;});pf.qsa=function(context,sel){return("querySelector"in context)?context.querySelectorAll(sel):[];};pf.matchesMedia=function(){if(window.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches){pf.matchesMedia=function(media){return!media||(matchMedia(media).matches);};}else{pf.matchesMedia=pf.mMQ;}
return pf.matchesMedia.apply(this,arguments);};pf.mMQ=function(media){return media?evalCSS(media):true;};pf.calcLength=function(sourceSizeValue){var value=evalCSS(sourceSizeValue,true)||false;if(value<0){value=false;}
return value;};pf.supportsType=function(type){return(type)?types[type]:true;};pf.parseSize=memoize(function(sourceSizeStr){var match=(sourceSizeStr||"").match(regSize);return{media:match&&match[1],length:match&&match[2]};});pf.parseSet=function(set){if(!set.cands){set.cands=parseSrcset(set.srcset,set);}
return set.cands;};pf.getEmValue=function(){var body;if(!eminpx&&(body=document.body)){var div=document.createElement("div"),originalHTMLCSS=docElem.style.cssText,originalBodyCSS=body.style.cssText;div.style.cssText=baseStyle;docElem.style.cssText=fsCss;body.style.cssText=fsCss;body.appendChild(div);eminpx=div.offsetWidth;body.removeChild(div);eminpx=parseFloat(eminpx,10);docElem.style.cssText=originalHTMLCSS;body.style.cssText=originalBodyCSS;}
return eminpx||16;};pf.calcListLength=function(sourceSizeListStr){if(!(sourceSizeListStr in sizeLengthCache)||cfg.uT){var winningLength=pf.calcLength(parseSizes(sourceSizeListStr));sizeLengthCache[sourceSizeListStr]=!winningLength?units.width:winningLength;}
return sizeLengthCache[sourceSizeListStr];};pf.setRes=function(set){var candidates;if(set){candidates=pf.parseSet(set);for(var i=0,len=candidates.length;i<len;i++){setResolution(candidates[i],set.sizes);}}
return candidates;};pf.setRes.res=setResolution;pf.applySetCandidate=function(candidates,img){if(!candidates.length){return;}
var candidate,i,j,length,bestCandidate,curSrc,curCan,candidateSrc,abortCurSrc;var imageData=img[pf.ns];var dpr=pf.DPR;curSrc=imageData.curSrc||img[curSrcProp];curCan=imageData.curCan||setSrcToCur(img,curSrc,candidates[0].set);if(curCan&&curCan.set===candidates[0].set){abortCurSrc=(supportAbort&&!img.complete&&curCan.res-0.1>dpr);if(!abortCurSrc){curCan.cached=true;if(curCan.res>=dpr){bestCandidate=curCan;}}}
if(!bestCandidate){candidates.sort(ascendingSort);length=candidates.length;bestCandidate=candidates[length-1];for(i=0;i<length;i++){candidate=candidates[i];if(candidate.res>=dpr){j=i-1;if(candidates[j]&&(abortCurSrc||curSrc!==pf.makeUrl(candidate.url))&&chooseLowRes(candidates[j].res,candidate.res,dpr,candidates[j].cached)){bestCandidate=candidates[j];}else{bestCandidate=candidate;}
break;}}}
if(bestCandidate){candidateSrc=pf.makeUrl(bestCandidate.url);imageData.curSrc=candidateSrc;imageData.curCan=bestCandidate;if(candidateSrc!==curSrc){pf.setSrc(img,bestCandidate);}
pf.setSize(img);}};pf.setSrc=function(img,bestCandidate){var origWidth;img.src=bestCandidate.url;if(bestCandidate.set.type==="image/svg+xml"){origWidth=img.style.width;img.style.width=(img.offsetWidth+1)+"px";if(img.offsetWidth+1){img.style.width=origWidth;}}};pf.getSet=function(img){var i,set,supportsType;var match=false;var sets=img[pf.ns].sets;for(i=0;i<sets.length&&!match;i++){set=sets[i];if(!set.srcset||!pf.matchesMedia(set.media)||!(supportsType=pf.supportsType(set.type))){continue;}
if(supportsType==="pending"){set=supportsType;}
match=set;break;}
return match;};pf.parseSets=function(element,parent,options){var srcsetAttribute,imageSet,isWDescripor,srcsetParsed;var hasPicture=parent&&parent.nodeName.toUpperCase()==="PICTURE";var imageData=element[pf.ns];if(imageData.src===undefined||options.src){imageData.src=getImgAttr.call(element,"src");if(imageData.src){setImgAttr.call(element,srcAttr,imageData.src);}else{removeImgAttr.call(element,srcAttr);}}
if(imageData.srcset===undefined||options.srcset||!pf.supSrcset||element.srcset){srcsetAttribute=getImgAttr.call(element,"srcset");imageData.srcset=srcsetAttribute;srcsetParsed=true;}
imageData.sets=[];if(hasPicture){imageData.pic=true;getAllSourceElements(parent,imageData.sets);}
if(imageData.srcset){imageSet={srcset:imageData.srcset,sizes:getImgAttr.call(element,"sizes")};imageData.sets.push(imageSet);isWDescripor=(alwaysCheckWDescriptor||imageData.src)&&regWDesc.test(imageData.srcset||"");if(!isWDescripor&&imageData.src&&!getCandidateForSrc(imageData.src,imageSet)&&!imageSet.has1x){imageSet.srcset+=", "+imageData.src;imageSet.cands.push({url:imageData.src,d:1,set:imageSet});}}else if(imageData.src){imageData.sets.push({srcset:imageData.src,sizes:null});}
imageData.curCan=null;imageData.curSrc=undefined;imageData.supported=!(hasPicture||(imageSet&&!pf.supSrcset)||(isWDescripor&&!pf.supSizes));if(srcsetParsed&&pf.supSrcset&&!imageData.supported){if(srcsetAttribute){setImgAttr.call(element,srcsetAttr,srcsetAttribute);element.srcset="";}else{removeImgAttr.call(element,srcsetAttr);}}
if(imageData.supported&&!imageData.srcset&&((!imageData.src&&element.src)||element.src!==pf.makeUrl(imageData.src))){if(imageData.src===null){element.removeAttribute("src");}else{element.src=imageData.src;}}
imageData.parsed=true;};pf.fillImg=function(element,options){var imageData;var extreme=options.reselect||options.reevaluate;if(!element[pf.ns]){element[pf.ns]={};}
imageData=element[pf.ns];if(!extreme&&imageData.evaled===evalId){return;}
if(!imageData.parsed||options.reevaluate){pf.parseSets(element,element.parentNode,options);}
if(!imageData.supported){applyBestCandidate(element);}else{imageData.evaled=evalId;}};pf.setupRun=function(){if(!alreadyRun||isVwDirty||(DPR!==window.devicePixelRatio)){updateMetrics();}};if(pf.supPicture){picturefill=noop;pf.fillImg=noop;}else{(function(){var isDomReady;var regReady=window.attachEvent?/d$|^c/:/d$|^c|^i/;var run=function(){var readyState=document.readyState||"";timerId=setTimeout(run,readyState==="loading"?200:999);if(document.body){pf.fillImgs();isDomReady=isDomReady||regReady.test(readyState);if(isDomReady){clearTimeout(timerId);}}};var timerId=setTimeout(run,document.body?9:99);var debounce=function(func,wait){var timeout,timestamp;var later=function(){var last=(new Date())-timestamp;if(last<wait){timeout=setTimeout(later,wait-last);}else{timeout=null;func();}};return function(){timestamp=new Date();if(!timeout){timeout=setTimeout(later,wait);}};};var lastClientWidth=docElem.clientHeight;var onResize=function(){isVwDirty=Math.max(window.innerWidth||0,docElem.clientWidth)!==units.width||docElem.clientHeight!==lastClientWidth;lastClientWidth=docElem.clientHeight;if(isVwDirty){pf.fillImgs();}};on(window,"resize",debounce(onResize,99));on(document,"readystatechange",run);})();}
pf.picturefill=picturefill;pf.fillImgs=picturefill;pf.teardownRun=noop;picturefill._=pf;window.picturefillCFG={pf:pf,push:function(args){var name=args.shift();if(typeof pf[name]==="function"){pf[name].apply(pf,args);}else{cfg[name]=args[0];if(alreadyRun){pf.fillImgs({reselect:true});}}}};while(setOptions&&setOptions.length){window.picturefillCFG.push(setOptions.shift());}
window.picturefill=picturefill;if(typeof module==="object"&&typeof module.exports==="object"){module.exports=picturefill;}else if(typeof define==="function"&&define.amd){define("picturefill",function(){return picturefill;});}
if(!pf.supPicture){types["image/webp"]=detectTypeSupport("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==");}})(window,document);;;(function(window,define){var _={version:"2.5.0",areas:{},apis:{},inherit:function(api,o){for(var p in api){if(!o.hasOwnProperty(p)){o[p]=api[p];}}
return o;},stringify:function(d){return d===undefined||typeof d==="function"?d+'':JSON.stringify(d);},parse:function(s){try{return JSON.parse(s);}catch(e){return s;}},fn:function(name,fn){_.storeAPI[name]=fn;for(var api in _.apis){_.apis[api][name]=fn;}},get:function(area,key){return area.getItem(key);},set:function(area,key,string){area.setItem(key,string);},remove:function(area,key){area.removeItem(key);},key:function(area,i){return area.key(i);},length:function(area){return area.length;},clear:function(area){area.clear();},Store:function(id,area,namespace){var store=_.inherit(_.storeAPI,function(key,data,overwrite){if(arguments.length===0){return store.getAll();}
if(typeof data==="function"){return store.transact(key,data,overwrite);}
if(data!==undefined){return store.set(key,data,overwrite);}
if(typeof key==="string"||typeof key==="number"){return store.get(key);}
if(!key){return store.clear();}
return store.setAll(key,data);});store._id=id;try{var testKey='_safariPrivate_';area.setItem(testKey,'sucks');store._area=area;area.removeItem(testKey);}catch(e){}
if(!store._area){store._area=_.inherit(_.storageAPI,{items:{},name:'fake'});}
store._ns=namespace||'';if(!_.areas[id]){_.areas[id]=store._area;}
if(!_.apis[store._ns+store._id]){_.apis[store._ns+store._id]=store;}
return store;},storeAPI:{area:function(id,area){var store=this[id];if(!store||!store.area){store=_.Store(id,area,this._ns);if(!this[id]){this[id]=store;}}
return store;},namespace:function(namespace,noSession){if(!namespace){return this._ns?this._ns.substring(0,this._ns.length-1):'';}
var ns=namespace,store=this[ns];if(!store||!store.namespace){store=_.Store(this._id,this._area,this._ns+ns+'.');if(!this[ns]){this[ns]=store;}
if(!noSession){store.area('session',_.areas.session);}}
return store;},isFake:function(){return this._area.name==='fake';},toString:function(){return'store'+(this._ns?'.'+this.namespace():'')+'['+this._id+']';},has:function(key){if(this._area.has){return this._area.has(this._in(key));}
return!!(this._in(key)in this._area);},size:function(){return this.keys().length;},each:function(fn,and){for(var i=0,m=_.length(this._area);i<m;i++){var key=this._out(_.key(this._area,i));if(key!==undefined){if(fn.call(this,key,and||this.get(key))===false){break;}}
if(m>_.length(this._area)){m--;i--;}}
return and||this;},keys:function(){return this.each(function(k,list){list.push(k);},[]);},get:function(key,alt){var s=_.get(this._area,this._in(key));return s!==null?_.parse(s):alt||s;},getAll:function(){return this.each(function(k,all){all[k]=this.get(k);},{});},transact:function(key,fn,alt){var val=this.get(key,alt),ret=fn(val);this.set(key,ret===undefined?val:ret);return this;},set:function(key,data,overwrite){var d=this.get(key);if(d!=null&&overwrite===false){return data;}
return _.set(this._area,this._in(key),_.stringify(data),overwrite)||d;},setAll:function(data,overwrite){var changed,val;for(var key in data){val=data[key];if(this.set(key,val,overwrite)!==val){changed=true;}}
return changed;},remove:function(key){var d=this.get(key);_.remove(this._area,this._in(key));return d;},clear:function(){if(!this._ns){_.clear(this._area);}else{this.each(function(k){_.remove(this._area,this._in(k));},1);}
return this;},clearAll:function(){var area=this._area;for(var id in _.areas){if(_.areas.hasOwnProperty(id)){this._area=_.areas[id];this.clear();}}
this._area=area;return this;},_in:function(k){if(typeof k!=="string"){k=_.stringify(k);}
return this._ns?this._ns+k:k;},_out:function(k){return this._ns?k&&k.indexOf(this._ns)===0?k.substring(this._ns.length):undefined:k;}},storageAPI:{length:0,has:function(k){return this.items.hasOwnProperty(k);},key:function(i){var c=0;for(var k in this.items){if(this.has(k)&&i===c++){return k;}}},setItem:function(k,v){if(!this.has(k)){this.length++;}
this.items[k]=v;},removeItem:function(k){if(this.has(k)){delete this.items[k];this.length--;}},getItem:function(k){return this.has(k)?this.items[k]:null;},clear:function(){for(var k in this.list){this.removeItem(k);}},toString:function(){return this.length+' items in '+this.name+'Storage';}}};var store=_.Store("local",(function(){try{return localStorage;}catch(e){}})());store.local=store;store._=_;store.area("session",(function(){try{return sessionStorage;}catch(e){}})());if(typeof define==='function'&&define.amd!==undefined){define('store2',[],function(){return store;});}else if(typeof module!=='undefined'&&module.exports){module.exports=store;}else{if(window.store){_.conflict=window.store;}
window.store=store;}})(this,this.define);;(function(){'use strict';if(!window.addEventListener){return;}
var regWhite=/\s+/g;var regSplitSet=/\s*\|\s+|\s+\|\s*/g;var regSource=/^(.+?)(?:\s+\[\s*(.+?)\s*\])?$/;var regBgUrlEscape=/\(|\)|'/;var allowedBackgroundSize={contain:1,cover:1};var proxyWidth=function(elem){var width=lazySizes.gW(elem,elem.parentNode);if(!elem._lazysizesWidth||width>elem._lazysizesWidth){elem._lazysizesWidth=width;}
return elem._lazysizesWidth;};var getBgSize=function(elem){var bgSize;bgSize=(getComputedStyle(elem)||{getPropertyValue:function(){}}).getPropertyValue('background-size');if(!allowedBackgroundSize[bgSize]&&allowedBackgroundSize[elem.style.backgroundSize]){bgSize=elem.style.backgroundSize;}
return bgSize;};var createPicture=function(sets,elem,img){var picture=document.createElement('picture');var sizes=elem.getAttribute(lazySizesConfig.sizesAttr);var ratio=elem.getAttribute('data-ratio');var optimumx=elem.getAttribute('data-optimumx');if(elem._lazybgset&&elem._lazybgset.parentNode==elem){elem.removeChild(elem._lazybgset);}
Object.defineProperty(img,'_lazybgset',{value:elem,writable:true});Object.defineProperty(elem,'_lazybgset',{value:picture,writable:true});sets=sets.replace(regWhite,' ').split(regSplitSet);picture.style.display='none';img.className=lazySizesConfig.lazyClass;if(sets.length==1&&!sizes){sizes='auto';}
sets.forEach(function(set){var source=document.createElement('source');if(sizes&&sizes!='auto'){source.setAttribute('sizes',sizes);}
if(set.match(regSource)){source.setAttribute(lazySizesConfig.srcsetAttr,RegExp.$1);if(RegExp.$2){source.setAttribute('media',lazySizesConfig.customMedia[RegExp.$2]||RegExp.$2);}}
picture.appendChild(source);});if(sizes){img.setAttribute(lazySizesConfig.sizesAttr,sizes);elem.removeAttribute(lazySizesConfig.sizesAttr);elem.removeAttribute('sizes');}
if(optimumx){img.setAttribute('data-optimumx',optimumx);}
if(ratio){img.setAttribute('data-ratio',ratio);}
picture.appendChild(img);elem.appendChild(picture);};var proxyLoad=function(e){if(!e.target._lazybgset){return;}
var image=e.target;var elem=image._lazybgset;var bg=image.currentSrc||image.src;if(bg){elem.style.backgroundImage='url('+(regBgUrlEscape.test(bg)?JSON.stringify(bg):bg)+')';}
if(image._lazybgsetLoading){lazySizes.fire(elem,'_lazyloaded',{},false,true);delete image._lazybgsetLoading;}};addEventListener('lazybeforeunveil',function(e){var set,image,elem;if(e.defaultPrevented||!(set=e.target.getAttribute('data-bgset'))){return;}
elem=e.target;image=document.createElement('img');image.alt='';image._lazybgsetLoading=true;e.detail.firesLoad=true;createPicture(set,elem,image);setTimeout(function(){lazySizes.loader.unveil(image);lazySizes.rAF(function(){lazySizes.fire(image,'_lazyloaded',{},true,true);if(image.complete){proxyLoad({target:image});}});});});document.addEventListener('load',proxyLoad,true);window.addEventListener('lazybeforesizes',function(e){if(e.target._lazybgset&&e.detail.dataAttr){var elem=e.target._lazybgset;var bgSize=getBgSize(elem);if(allowedBackgroundSize[bgSize]){e.target._lazysizesParentFit=bgSize;lazySizes.rAF(function(){e.target.setAttribute('data-parent-fit',bgSize);if(e.target._lazysizesParentFit){delete e.target._lazysizesParentFit;}});}}},true);document.documentElement.addEventListener('lazybeforesizes',function(e){if(e.defaultPrevented||!e.target._lazybgset){return;}
e.detail.width=proxyWidth(e.target._lazybgset);});})();;(function(window,factory){var lazySizes=factory(window,window.document);window.lazySizes=lazySizes;if(typeof module=='object'&&module.exports){module.exports=lazySizes;}}(window,function l(window,document){'use strict';if(!document.getElementsByClassName){return;}
var lazySizesConfig;var docElem=document.documentElement;var Date=window.Date;var supportPicture=window.HTMLPictureElement;var _addEventListener='addEventListener';var _getAttribute='getAttribute';var addEventListener=window[_addEventListener];var setTimeout=window.setTimeout;var requestAnimationFrame=window.requestAnimationFrame||setTimeout;var requestIdleCallback=window.requestIdleCallback;var regPicture=/^picture$/i;var loadEvents=['load','error','lazyincluded','_lazyloaded'];var regClassCache={};var forEach=Array.prototype.forEach;var hasClass=function(ele,cls){if(!regClassCache[cls]){regClassCache[cls]=new RegExp('(\\s|^)'+cls+'(\\s|$)');}
return regClassCache[cls].test(ele[_getAttribute]('class')||'')&&regClassCache[cls];};var addClass=function(ele,cls){if(!hasClass(ele,cls)){ele.setAttribute('class',(ele[_getAttribute]('class')||'').trim()+' '+cls);}};var removeClass=function(ele,cls){var reg;if((reg=hasClass(ele,cls))){ele.setAttribute('class',(ele[_getAttribute]('class')||'').replace(reg,' '));}};var addRemoveLoadEvents=function(dom,fn,add){var action=add?_addEventListener:'removeEventListener';if(add){addRemoveLoadEvents(dom,fn);}
loadEvents.forEach(function(evt){dom[action](evt,fn);});};var triggerEvent=function(elem,name,detail,noBubbles,noCancelable){var event=document.createEvent('CustomEvent');event.initCustomEvent(name,!noBubbles,!noCancelable,detail||{});elem.dispatchEvent(event);return event;};var updatePolyfill=function(el,full){var polyfill;if(!supportPicture&&(polyfill=(window.picturefill||lazySizesConfig.pf))){polyfill({reevaluate:true,elements:[el]});}else if(full&&full.src){el.src=full.src;}};var getCSS=function(elem,style){return(getComputedStyle(elem,null)||{})[style];};var getWidth=function(elem,parent,width){width=width||elem.offsetWidth;while(width<lazySizesConfig.minSize&&parent&&!elem._lazysizesWidth){width=parent.offsetWidth;parent=parent.parentNode;}
return width;};var rAF=(function(){var running,waiting;var fns=[];var run=function(){var fn;running=true;waiting=false;while(fns.length){fn=fns.shift();fn[0].apply(fn[1],fn[2]);}
running=false;};var rafBatch=function(fn){if(running){fn.apply(this,arguments);}else{fns.push([fn,this,arguments]);if(!waiting){waiting=true;(document.hidden?setTimeout:requestAnimationFrame)(run);}}};rafBatch._lsFlush=run;return rafBatch;})();var rAFIt=function(fn,simple){return simple?function(){rAF(fn);}:function(){var that=this;var args=arguments;rAF(function(){fn.apply(that,args);});};};var throttle=function(fn){var running;var lastTime=0;var gDelay=125;var RIC_DEFAULT_TIMEOUT=666;var rICTimeout=RIC_DEFAULT_TIMEOUT;var run=function(){running=false;lastTime=Date.now();fn();};var idleCallback=requestIdleCallback?function(){requestIdleCallback(run,{timeout:rICTimeout});if(rICTimeout!==RIC_DEFAULT_TIMEOUT){rICTimeout=RIC_DEFAULT_TIMEOUT;}}:rAFIt(function(){setTimeout(run);},true);return function(isPriority){var delay;if((isPriority=isPriority===true)){rICTimeout=44;}
if(running){return;}
running=true;delay=gDelay-(Date.now()-lastTime);if(delay<0){delay=0;}
if(isPriority||(delay<9&&requestIdleCallback)){idleCallback();}else{setTimeout(idleCallback,delay);}};};var debounce=function(func){var timeout,timestamp;var wait=99;var run=function(){timeout=null;func();};var later=function(){var last=Date.now()-timestamp;if(last<wait){setTimeout(later,wait-last);}else{(requestIdleCallback||run)(run);}};return function(){timestamp=Date.now();if(!timeout){timeout=setTimeout(later,wait);}};};var loader=(function(){var lazyloadElems,preloadElems,isCompleted,resetPreloadingTimer,loadMode,started;var eLvW,elvH,eLtop,eLleft,eLright,eLbottom;var defaultExpand,preloadExpand,hFac;var regImg=/^img$/i;var regIframe=/^iframe$/i;var supportScroll=('onscroll'in window)&&!(/glebot/.test(navigator.userAgent));var shrinkExpand=0;var currentExpand=0;var isLoading=0;var lowRuns=-1;var resetPreloading=function(e){isLoading--;if(e&&e.target){addRemoveLoadEvents(e.target,resetPreloading);}
if(!e||isLoading<0||!e.target){isLoading=0;}};var isNestedVisible=function(elem,elemExpand){var outerRect;var parent=elem;var visible=getCSS(document.body,'visibility')=='hidden'||getCSS(elem,'visibility')!='hidden';eLtop-=elemExpand;eLbottom+=elemExpand;eLleft-=elemExpand;eLright+=elemExpand;while(visible&&(parent=parent.offsetParent)&&parent!=document.body&&parent!=docElem){visible=((getCSS(parent,'opacity')||1)>0);if(visible&&getCSS(parent,'overflow')!='visible'){outerRect=parent.getBoundingClientRect();visible=eLright>outerRect.left&&eLleft<outerRect.right&&eLbottom>outerRect.top-1&&eLtop<outerRect.bottom+1;}}
return visible;};var checkElements=function(){var eLlen,i,rect,autoLoadElem,loadedSomething,elemExpand,elemNegativeExpand,elemExpandVal,beforeExpandVal;if((loadMode=lazySizesConfig.loadMode)&&isLoading<8&&(eLlen=lazyloadElems.length)){i=0;lowRuns++;if(preloadExpand==null){if(!('expand'in lazySizesConfig)){lazySizesConfig.expand=docElem.clientHeight>500&&docElem.clientWidth>500?500:370;}
defaultExpand=lazySizesConfig.expand;preloadExpand=defaultExpand*lazySizesConfig.expFactor;}
if(currentExpand<preloadExpand&&isLoading<1&&lowRuns>2&&loadMode>2&&!document.hidden){currentExpand=preloadExpand;lowRuns=0;}else if(loadMode>1&&lowRuns>1&&isLoading<6){currentExpand=defaultExpand;}else{currentExpand=shrinkExpand;}
for(;i<eLlen;i++){if(!lazyloadElems[i]||lazyloadElems[i]._lazyRace){continue;}
if(!supportScroll){unveilElement(lazyloadElems[i]);continue;}
if(!(elemExpandVal=lazyloadElems[i][_getAttribute]('data-expand'))||!(elemExpand=elemExpandVal*1)){elemExpand=currentExpand;}
if(beforeExpandVal!==elemExpand){eLvW=innerWidth+(elemExpand*hFac);elvH=innerHeight+elemExpand;elemNegativeExpand=elemExpand*-1;beforeExpandVal=elemExpand;}
rect=lazyloadElems[i].getBoundingClientRect();if((eLbottom=rect.bottom)>=elemNegativeExpand&&(eLtop=rect.top)<=elvH&&(eLright=rect.right)>=elemNegativeExpand*hFac&&(eLleft=rect.left)<=eLvW&&(eLbottom||eLright||eLleft||eLtop)&&((isCompleted&&isLoading<3&&!elemExpandVal&&(loadMode<3||lowRuns<4))||isNestedVisible(lazyloadElems[i],elemExpand))){unveilElement(lazyloadElems[i]);loadedSomething=true;if(isLoading>9){break;}}else if(!loadedSomething&&isCompleted&&!autoLoadElem&&isLoading<4&&lowRuns<4&&loadMode>2&&(preloadElems[0]||lazySizesConfig.preloadAfterLoad)&&(preloadElems[0]||(!elemExpandVal&&((eLbottom||eLright||eLleft||eLtop)||lazyloadElems[i][_getAttribute](lazySizesConfig.sizesAttr)!='auto')))){autoLoadElem=preloadElems[0]||lazyloadElems[i];}}
if(autoLoadElem&&!loadedSomething){unveilElement(autoLoadElem);}}};var throttledCheckElements=throttle(checkElements);var switchLoadingClass=function(e){addClass(e.target,lazySizesConfig.loadedClass);removeClass(e.target,lazySizesConfig.loadingClass);addRemoveLoadEvents(e.target,rafSwitchLoadingClass);};var rafedSwitchLoadingClass=rAFIt(switchLoadingClass);var rafSwitchLoadingClass=function(e){rafedSwitchLoadingClass({target:e.target});};var changeIframeSrc=function(elem,src){try{elem.contentWindow.location.replace(src);}catch(e){elem.src=src;}};var handleSources=function(source){var customMedia,parent;var sourceSrcset=source[_getAttribute](lazySizesConfig.srcsetAttr);if((customMedia=lazySizesConfig.customMedia[source[_getAttribute]('data-media')||source[_getAttribute]('media')])){source.setAttribute('media',customMedia);}
if(sourceSrcset){source.setAttribute('srcset',sourceSrcset);}
if(customMedia){parent=source.parentNode;parent.insertBefore(source.cloneNode(),source);parent.removeChild(source);}};var lazyUnveil=rAFIt(function(elem,detail,isAuto,sizes,isImg){var src,srcset,parent,isPicture,event,firesLoad;if(!(event=triggerEvent(elem,'lazybeforeunveil',detail)).defaultPrevented){if(sizes){if(isAuto){addClass(elem,lazySizesConfig.autosizesClass);}else{elem.setAttribute('sizes',sizes);}}
srcset=elem[_getAttribute](lazySizesConfig.srcsetAttr);src=elem[_getAttribute](lazySizesConfig.srcAttr);if(isImg){parent=elem.parentNode;isPicture=parent&&regPicture.test(parent.nodeName||'');}
firesLoad=detail.firesLoad||(('src'in elem)&&(srcset||src||isPicture));event={target:elem};if(firesLoad){addRemoveLoadEvents(elem,resetPreloading,true);clearTimeout(resetPreloadingTimer);resetPreloadingTimer=setTimeout(resetPreloading,2500);addClass(elem,lazySizesConfig.loadingClass);addRemoveLoadEvents(elem,rafSwitchLoadingClass,true);}
if(isPicture){forEach.call(parent.getElementsByTagName('source'),handleSources);}
if(srcset){elem.setAttribute('srcset',srcset);}else if(src&&!isPicture){if(regIframe.test(elem.nodeName)){changeIframeSrc(elem,src);}else{elem.src=src;}}
if(srcset||isPicture){updatePolyfill(elem,{src:src});}}
rAF(function(){if(elem._lazyRace){delete elem._lazyRace;}
removeClass(elem,lazySizesConfig.lazyClass);if(!firesLoad||elem.complete){if(firesLoad){resetPreloading(event);}else{isLoading--;}
switchLoadingClass(event);}});});var unveilElement=function(elem){var detail;var isImg=regImg.test(elem.nodeName);var sizes=isImg&&(elem[_getAttribute](lazySizesConfig.sizesAttr)||elem[_getAttribute]('sizes'));var isAuto=sizes=='auto';if((isAuto||!isCompleted)&&isImg&&(elem.src||elem.srcset)&&!elem.complete&&!hasClass(elem,lazySizesConfig.errorClass)){return;}
detail=triggerEvent(elem,'lazyunveilread').detail;if(isAuto){autoSizer.updateElem(elem,true,elem.offsetWidth);}
elem._lazyRace=true;isLoading++;lazyUnveil(elem,detail,isAuto,sizes,isImg);};var onload=function(){if(isCompleted){return;}
if(Date.now()-started<999){setTimeout(onload,999);return;}
var afterScroll=debounce(function(){lazySizesConfig.loadMode=3;throttledCheckElements();});isCompleted=true;lazySizesConfig.loadMode=3;throttledCheckElements();addEventListener('scroll',function(){if(lazySizesConfig.loadMode==3){lazySizesConfig.loadMode=2;}
afterScroll();},true);};return{_:function(){started=Date.now();lazyloadElems=document.getElementsByClassName(lazySizesConfig.lazyClass);preloadElems=document.getElementsByClassName(lazySizesConfig.lazyClass+' '+lazySizesConfig.preloadClass);hFac=lazySizesConfig.hFac;addEventListener('scroll',throttledCheckElements,true);addEventListener('resize',throttledCheckElements,true);if(window.MutationObserver){new MutationObserver(throttledCheckElements).observe(docElem,{childList:true,subtree:true,attributes:true});}else{docElem[_addEventListener]('DOMNodeInserted',throttledCheckElements,true);docElem[_addEventListener]('DOMAttrModified',throttledCheckElements,true);setInterval(throttledCheckElements,999);}
addEventListener('hashchange',throttledCheckElements,true);['focus','mouseover','click','load','transitionend','animationend','webkitAnimationEnd'].forEach(function(name){document[_addEventListener](name,throttledCheckElements,true);});if((/d$|^c/.test(document.readyState))){onload();}else{addEventListener('load',onload);document[_addEventListener]('DOMContentLoaded',throttledCheckElements);setTimeout(onload,20000);}
if(lazyloadElems.length){checkElements();}else{throttledCheckElements();}},checkElems:throttledCheckElements,unveil:unveilElement};})();var autoSizer=(function(){var autosizesElems;var sizeElement=rAFIt(function(elem,parent,event,width){var sources,i,len;elem._lazysizesWidth=width;width+='px';elem.setAttribute('sizes',width);if(regPicture.test(parent.nodeName||'')){sources=parent.getElementsByTagName('source');for(i=0,len=sources.length;i<len;i++){sources[i].setAttribute('sizes',width);}}
if(!event.detail.dataAttr){updatePolyfill(elem,event.detail);}});var getSizeElement=function(elem,dataAttr,width){var event;var parent=elem.parentNode;if(parent){width=getWidth(elem,parent,width);event=triggerEvent(elem,'lazybeforesizes',{width:width,dataAttr:!!dataAttr});if(!event.defaultPrevented){width=event.detail.width;if(width&&width!==elem._lazysizesWidth){sizeElement(elem,parent,event,width);}}}};var updateElementsSizes=function(){var i;var len=autosizesElems.length;if(len){i=0;for(;i<len;i++){getSizeElement(autosizesElems[i]);}}};var debouncedUpdateElementsSizes=debounce(updateElementsSizes);return{_:function(){autosizesElems=document.getElementsByClassName(lazySizesConfig.autosizesClass);addEventListener('resize',debouncedUpdateElementsSizes);},checkElems:debouncedUpdateElementsSizes,updateElem:getSizeElement};})();var init=function(){if(!init.i){init.i=true;autoSizer._();loader._();}};(function(){var prop;var lazySizesDefaults={lazyClass:'lazyload',loadedClass:'lazyloaded',loadingClass:'lazyloading',preloadClass:'lazypreload',errorClass:'lazyerror',autosizesClass:'lazyautosizes',srcAttr:'data-src',srcsetAttr:'data-srcset',sizesAttr:'data-sizes',minSize:40,customMedia:{},init:true,expFactor:1.5,hFac:0.8,loadMode:2};lazySizesConfig=window.lazySizesConfig||window.lazysizesConfig||{};for(prop in lazySizesDefaults){if(!(prop in lazySizesConfig)){lazySizesConfig[prop]=lazySizesDefaults[prop];}}
window.lazySizesConfig=lazySizesConfig;setTimeout(function(){if(lazySizesConfig.init){init();}});})();return{cfg:lazySizesConfig,autoSizer:autoSizer,loader:loader,init:init,uP:updatePolyfill,aC:addClass,rC:removeClass,hC:hasClass,fire:triggerEvent,gW:getWidth,rAF:rAF,};}));;(function(document){'use strict';var regImg,onLoad;if('srcset'in document.createElement('img')){regImg=/^img$/i;onLoad=function(e){e.target.style.backgroundSize='';e.target.style.backgroundImage='';e.target.removeEventListener(e.type,onLoad);};document.addEventListener('lazybeforeunveil',function(e){var img=e.target;if(!regImg.test(img.nodeName)){return;}
var src=img.getAttribute('src');if(src){img.style.backgroundSize='100% 100%';img.style.backgroundImage='url('+src+')';img.removeAttribute('src');img.addEventListener('load',onLoad);}},false);}})(document);;(function($,undef)
{if($.fn.dotdotdot)
{return;}
$.fn.dotdotdot=function(o)
{if(this.length==0)
{$.fn.dotdotdot.debug('No element found for "'+this.selector+'".');return this;}
if(this.length>1)
{return this.each(function()
{$(this).dotdotdot(o);});}
var $dot=this;if($dot.data('dotdotdot'))
{$dot.trigger('destroy.dot');}
$dot.data('dotdotdot-style',$dot.attr('style')||'');$dot.css('word-wrap','break-word');if($dot.css('white-space')==='nowrap')
{$dot.css('white-space','normal');}
$dot.bind_events=function()
{$dot.bind('update.dot',function(e,c)
{e.preventDefault();e.stopPropagation();opts.maxHeight=(typeof opts.height=='number')?opts.height:getTrueInnerHeight($dot);opts.maxHeight+=opts.tolerance;if(typeof c!='undefined')
{if(typeof c=='string'||c instanceof HTMLElement)
{c=$('<div />').append(c).contents();}
if(c instanceof $)
{orgContent=c;}}
$inr=$dot.wrapInner('<div class="dotdotdot" />').children();$inr.contents().detach().end().append(orgContent.clone(true)).find('br').replaceWith('  <br />  ').end().css({'height':'auto','width':'auto','border':'none','padding':0,'margin':0});var after=false,trunc=false;if(conf.afterElement)
{after=conf.afterElement.clone(true);after.show();conf.afterElement.detach();}
if(test($inr,opts))
{if(opts.wrap=='children')
{trunc=children($inr,opts,after);}
else
{trunc=ellipsis($inr,$dot,$inr,opts,after);}}
$inr.replaceWith($inr.contents());$inr=null;if($.isFunction(opts.callback))
{opts.callback.call($dot[0],trunc,orgContent);}
conf.isTruncated=trunc;return trunc;}).bind('isTruncated.dot',function(e,fn)
{e.preventDefault();e.stopPropagation();if(typeof fn=='function')
{fn.call($dot[0],conf.isTruncated);}
return conf.isTruncated;}).bind('originalContent.dot',function(e,fn)
{e.preventDefault();e.stopPropagation();if(typeof fn=='function')
{fn.call($dot[0],orgContent);}
return orgContent;}).bind('destroy.dot',function(e)
{e.preventDefault();e.stopPropagation();$dot.unwatch().unbind_events().contents().detach().end().append(orgContent).attr('style',$dot.data('dotdotdot-style')||'').data('dotdotdot',false);});return $dot;};$dot.unbind_events=function()
{$dot.unbind('.dot');return $dot;};$dot.watch=function()
{$dot.unwatch();if(opts.watch=='window')
{var $window=$(window),_wWidth=$window.width(),_wHeight=$window.height();$window.bind('resize.dot'+conf.dotId,function()
{if(_wWidth!=$window.width()||_wHeight!=$window.height()||!opts.windowResizeFix)
{_wWidth=$window.width();_wHeight=$window.height();if(watchInt)
{clearInterval(watchInt);}
watchInt=setTimeout(function()
{$dot.trigger('update.dot');},100);}});}
else
{watchOrg=getSizes($dot);watchInt=setInterval(function()
{if($dot.is(':visible'))
{var watchNew=getSizes($dot);if(watchOrg.width!=watchNew.width||watchOrg.height!=watchNew.height)
{$dot.trigger('update.dot');watchOrg=watchNew;}}},500);}
return $dot;};$dot.unwatch=function()
{$(window).unbind('resize.dot'+conf.dotId);if(watchInt)
{clearInterval(watchInt);}
return $dot;};var orgContent=$dot.contents(),opts=$.extend(true,{},$.fn.dotdotdot.defaults,o),conf={},watchOrg={},watchInt=null,$inr=null;if(!(opts.lastCharacter.remove instanceof Array))
{opts.lastCharacter.remove=$.fn.dotdotdot.defaultArrays.lastCharacter.remove;}
if(!(opts.lastCharacter.noEllipsis instanceof Array))
{opts.lastCharacter.noEllipsis=$.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis;}
conf.afterElement=getElement(opts.after,$dot);conf.isTruncated=false;conf.dotId=dotId++;$dot.data('dotdotdot',true).bind_events().trigger('update.dot');if(opts.watch)
{$dot.watch();}
return $dot;};$.fn.dotdotdot.defaults={'ellipsis':'... ','wrap':'word','fallbackToLetter':true,'lastCharacter':{},'tolerance':0,'callback':null,'after':null,'height':null,'watch':false,'windowResizeFix':true};$.fn.dotdotdot.defaultArrays={'lastCharacter':{'remove':[' ','\u3000',',',';','.','!','?'],'noEllipsis':[]}};$.fn.dotdotdot.debug=function(msg){};var dotId=1;function children($elem,o,after)
{var $elements=$elem.children(),isTruncated=false;$elem.empty();for(var a=0,l=$elements.length;a<l;a++)
{var $e=$elements.eq(a);$elem.append($e);if(after)
{$elem.append(after);}
if(test($elem,o))
{$e.remove();isTruncated=true;break;}
else
{if(after)
{after.detach();}}}
return isTruncated;}
function ellipsis($elem,$d,$i,o,after)
{var isTruncated=false;var notx='table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style';var noty='script, .dotdotdot-keep';$elem.contents().detach().each(function()
{var e=this,$e=$(e);if(typeof e=='undefined'||(e.nodeType==3&&$.trim(e.data).length==0))
{return true;}
else if($e.is(noty))
{$elem.append($e);}
else if(isTruncated)
{return true;}
else
{$elem.append($e);if(after)
{$elem[$elem.is(notx)?'after':'append'](after);}
if(test($i,o))
{if(e.nodeType==3)
{isTruncated=ellipsisElement($e,$d,$i,o,after);}
else
{isTruncated=ellipsis($e,$d,$i,o,after);}
if(!isTruncated)
{$e.detach();isTruncated=true;}}
if(!isTruncated)
{if(after)
{after.detach();}}}});return isTruncated;}
function ellipsisElement($e,$d,$i,o,after)
{var e=$e[0];if(!e)
{return false;}
var txt=getTextContent(e),space=(txt.indexOf(' ')!==-1)?' ':'\u3000',separator=(o.wrap=='letter')?'':space,textArr=txt.split(separator),position=-1,midPos=-1,startPos=0,endPos=textArr.length-1;if(o.fallbackToLetter&&startPos==0&&endPos==0)
{separator='';textArr=txt.split(separator);endPos=textArr.length-1;}
while(startPos<=endPos&&!(startPos==0&&endPos==0))
{var m=Math.floor((startPos+endPos)/2);if(m==midPos)
{break;}
midPos=m;setTextContent(e,textArr.slice(0,midPos+1).join(separator)+o.ellipsis);if(!test($i,o))
{position=midPos;startPos=midPos;}
else
{endPos=midPos;if(o.fallbackToLetter&&startPos==0&&endPos==0)
{separator='';textArr=textArr[0].split(separator);position=-1;midPos=-1;startPos=0;endPos=textArr.length-1;}}}
if(position!=-1&&!(textArr.length==1&&textArr[0].length==0))
{txt=addEllipsis(textArr.slice(0,position+1).join(separator),o);setTextContent(e,txt);}
else
{var $w=$e.parent();$e.detach();var afterLength=(after&&after.closest($w).length)?after.length:0;if($w.contents().length>afterLength)
{e=findLastTextNode($w.contents().eq(-1-afterLength),$d);}
else
{e=findLastTextNode($w,$d,true);if(!afterLength)
{$w.detach();}}
if(e)
{txt=addEllipsis(getTextContent(e),o);setTextContent(e,txt);if(afterLength&&after)
{$(e).parent().append(after);}}}
return true;}
function test($i,o)
{return $i.innerHeight()>o.maxHeight;}
function addEllipsis(txt,o)
{while($.inArray(txt.slice(-1),o.lastCharacter.remove)>-1)
{txt=txt.slice(0,-1);}
if($.inArray(txt.slice(-1),o.lastCharacter.noEllipsis)<0)
{txt+=o.ellipsis;}
return txt;}
function getSizes($d)
{return{'width':$d.innerWidth(),'height':$d.innerHeight()};}
function setTextContent(e,content)
{if(e.innerText)
{e.innerText=content;}
else if(e.nodeValue)
{e.nodeValue=content;}
else if(e.textContent)
{e.textContent=content;}}
function getTextContent(e)
{if(e.innerText)
{return e.innerText;}
else if(e.nodeValue)
{return e.nodeValue;}
else if(e.textContent)
{return e.textContent;}
else
{return"";}}
function getPrevNode(n)
{do
{n=n.previousSibling;}
while(n&&n.nodeType!==1&&n.nodeType!==3);return n;}
function findLastTextNode($el,$top,excludeCurrent)
{var e=$el&&$el[0],p;if(e)
{if(!excludeCurrent)
{if(e.nodeType===3)
{return e;}
if($.trim($el.text()))
{return findLastTextNode($el.contents().last(),$top);}}
p=getPrevNode(e);while(!p)
{$el=$el.parent();if($el.is($top)||!$el.length)
{return false;}
p=getPrevNode($el[0]);}
if(p)
{return findLastTextNode($(p),$top);}}
return false;}
function getElement(e,$i)
{if(!e)
{return false;}
if(typeof e==='string')
{e=$(e,$i);return(e.length)?e:false;}
return!e.jquery?false:e;}
function getTrueInnerHeight($el)
{var h=$el.innerHeight(),a=['paddingTop','paddingBottom'];for(var z=0,l=a.length;z<l;z++)
{var m=parseInt($el.css(a[z]),10);if(isNaN(m))
{m=0;}
h-=m;}
return h;}
var _orgHtml=$.fn.html;$.fn.html=function(str)
{if(str!=undef&&!$.isFunction(str)&&this.data('dotdotdot'))
{return this.trigger('update',[str]);}
return _orgHtml.apply(this,arguments);};var _orgText=$.fn.text;$.fn.text=function(str)
{if(str!=undef&&!$.isFunction(str)&&this.data('dotdotdot'))
{str=$('<div />').text(str).html();return this.trigger('update',[str]);}
return _orgText.apply(this,arguments);};})(jQuery);;;(function($){function appendContent($el,content){if(!content)return;$el.append(content.jquery?content.clone():content);}
function appendBody($body,$element,opt){var $content=$element.clone(opt.formValues);if(opt.formValues){copyValues($element,$content,'select, textarea');}
if(opt.removeScripts){$content.find('script').remove();}
if(opt.printContainer){$content.appendTo($body);}else{$content.each(function(){$(this).children().appendTo($body)});}}
function copyValues(origin,clone,elementSelector){var $originalElements=origin.find(elementSelector);clone.find(elementSelector).each(function(index,item){$(item).val($originalElements.eq(index).val());});}
var opt;$.fn.printThis=function(options){opt=$.extend({},$.fn.printThis.defaults,options);var $element=this instanceof jQuery?this:$(this);var strFrameName="printThis-"+(new Date()).getTime();if(window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)){var iframeSrc="javascript:document.write(\"<head><script>document.domain=\\\""+document.domain+"\\\";</s"+"cript></head><body></body>\")";var printI=document.createElement('iframe');printI.name="printIframe";printI.id=strFrameName;printI.className="MSIE";document.body.appendChild(printI);printI.src=iframeSrc;}else{var $frame=$("<iframe id='"+strFrameName+"' name='printIframe' />");$frame.appendTo("body");}
var $iframe=$("#"+strFrameName);if(!opt.debug)$iframe.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"});if(typeof opt.beforePrint==="function"){opt.beforePrint();}
setTimeout(function(){function setDocType($iframe,doctype){var win,doc;win=$iframe.get(0);win=win.contentWindow||win.contentDocument||win;doc=win.document||win.contentDocument||win;doc.open();doc.write(doctype);doc.close();}
if(opt.doctypeString){setDocType($iframe,opt.doctypeString);}
var $doc=$iframe.contents(),$head=$doc.find("head"),$body=$doc.find("body"),$base=$('base'),baseURL;if(opt.base===true&&$base.length>0){baseURL=$base.attr('href');}else if(typeof opt.base==='string'){baseURL=opt.base;}else{baseURL=document.location.protocol+'//'+document.location.host;}
$head.append('<base href="'+baseURL+'">');if(opt.importCSS)$("link[rel=stylesheet]").each(function(){var href=$(this).attr("href");if(href){var media=$(this).attr("media")||"all";$head.append("<link type='text/css' rel='stylesheet' href='"+href+"' media='"+media+"'>");}});if(opt.importStyle)$("style").each(function(){$head.append(this.outerHTML);});if(opt.pageTitle)$head.append("<title>"+opt.pageTitle+"</title>");if(opt.loadCSS){if($.isArray(opt.loadCSS)){jQuery.each(opt.loadCSS,function(index,value){$head.append("<link type='text/css' rel='stylesheet' href='"+this+"'>");});}else{$head.append("<link type='text/css' rel='stylesheet' href='"+opt.loadCSS+"'>");}}
var pageHtml=$('html')[0];$doc.find('html').prop('style',pageHtml.style.cssText);var tag=opt.copyTagClasses;if(tag){tag=tag===true?'bh':tag;if(tag.indexOf('b')!==-1){$body.addClass($('body')[0].className);}
if(tag.indexOf('h')!==-1){$doc.find('html').addClass(pageHtml.className);}}
appendContent($body,opt.header);if(opt.canvas){var canvasId=0;$element.find('canvas').addBack('canvas').each(function(){$(this).attr('data-printthis',canvasId++);});}
appendBody($body,$element,opt);if(opt.canvas){$body.find('canvas').each(function(){var cid=$(this).data('printthis'),$src=$('[data-printthis="'+cid+'"]');this.getContext('2d').drawImage($src[0],0,0);$src.removeData('printthis');});}
if(opt.removeInline){var selector=opt.removeInlineSelector||'*';if($.isFunction($.removeAttr)){$body.find(selector).removeAttr("style");}else{$body.find(selector).attr("style","");}}
appendContent($body,opt.footer);function attachOnBeforePrintEvent($iframe,beforePrintHandler){var win=$iframe.get(0);win=win.contentWindow||win.contentDocument||win;if(typeof beforePrintHandler==="function"){if('matchMedia'in win){win.matchMedia('print').addListener(function(mql){if(mql.matches)beforePrintHandler();});}else{win.onbeforeprint=beforePrintHandler;}}}
attachOnBeforePrintEvent($iframe,opt.beforePrint);setTimeout(function(){if($iframe.hasClass("MSIE")){window.frames["printIframe"].focus();$head.append("<script>  window.print(); </s"+"cript>");}else{if(document.queryCommandSupported("print")){$iframe[0].contentWindow.document.execCommand("print",false,null);}else{$iframe[0].contentWindow.focus();$iframe[0].contentWindow.print();}}
if(!opt.debug){setTimeout(function(){$iframe.remove();},1000);}
if(typeof opt.afterPrint==="function"){opt.afterPrint();}},opt.printDelay);},333);};$.fn.printThis.defaults={debug:false,importCSS:true,importStyle:false,printContainer:true,loadCSS:"",pageTitle:"",removeInline:false,removeInlineSelector:"*",printDelay:333,header:null,footer:null,base:false,formValues:true,canvas:false,doctypeString:'<!DOCTYPE html>',removeScripts:false,copyTagClasses:false,beforePrintEvent:null,beforePrint:null,afterPrint:null};})(jQuery);;;(function(window){'use strict';var
count=0,logEnabled=false,hiddenCheckEnabled=false,msgHeader='message',msgHeaderLen=msgHeader.length,msgId='[iFrameSizer]',msgIdLen=msgId.length,pagePosition=null,requestAnimationFrame=window.requestAnimationFrame,resetRequiredMethods={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},settings={},timer=null,logId='Host Page',defaults={autoResize:true,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:true,inPageLinks:false,enablePublicMethods:true,heightCalculationMethod:'bodyOffset',id:'iFrameResizer',interval:32,log:false,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0,resizeFrom:'parent',scrolling:false,sizeHeight:true,sizeWidth:false,tolerance:0,widthCalculationMethod:'scroll',closedCallback:function(){},initCallback:function(){},messageCallback:function(){warn('MessageCallback function not defined');},resizedCallback:function(){},scrollCallback:function(){return true;}};function addEventListener(obj,evt,func){if('addEventListener'in window){obj.addEventListener(evt,func,false);}else if('attachEvent'in window){obj.attachEvent('on'+evt,func);}}
function removeEventListener(el,evt,func){if('removeEventListener'in window){el.removeEventListener(evt,func,false);}else if('detachEvent'in window){el.detachEvent('on'+evt,func);}}
function setupRequestAnimationFrame(){var
vendors=['moz','webkit','o','ms'],x;for(x=0;x<vendors.length&&!requestAnimationFrame;x+=1){requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];}
if(!(requestAnimationFrame)){log('setup','RequestAnimationFrame not supported');}}
function getMyID(iframeId){var retStr='Host page: '+iframeId;if(window.top!==window.self){if(window.parentIFrame&&window.parentIFrame.getId){retStr=window.parentIFrame.getId()+': '+iframeId;}else{retStr='Nested host page: '+iframeId;}}
return retStr;}
function formatLogHeader(iframeId){return msgId+'['+getMyID(iframeId)+']';}
function isLogEnabled(iframeId){return settings[iframeId]?settings[iframeId].log:logEnabled;}
function log(iframeId,msg){output('log',iframeId,msg,isLogEnabled(iframeId));}
function info(iframeId,msg){output('info',iframeId,msg,isLogEnabled(iframeId));}
function warn(iframeId,msg){output('warn',iframeId,msg,true);}
function output(type,iframeId,msg,enabled){if(true===enabled&&'object'===typeof window.console){console[type](formatLogHeader(iframeId),msg);}}
function iFrameListener(event){function resizeIFrame(){function resize(){setSize(messageData);setPagePosition(iframeId);}
ensureInRange('Height');ensureInRange('Width');syncResize(resize,messageData,'init');}
function processMsg(){var data=msg.substr(msgIdLen).split(':');return{iframe:settings[data[0]].iframe,id:data[0],height:data[1],width:data[2],type:data[3]};}
function ensureInRange(Dimension){var
max=Number(settings[iframeId]['max'+Dimension]),min=Number(settings[iframeId]['min'+Dimension]),dimension=Dimension.toLowerCase(),size=Number(messageData[dimension]);log(iframeId,'Checking '+dimension+' is in range '+min+'-'+max);if(size<min){size=min;log(iframeId,'Set '+dimension+' to min value');}
if(size>max){size=max;log(iframeId,'Set '+dimension+' to max value');}
messageData[dimension]=''+size;}
function isMessageFromIFrame(){function checkAllowedOrigin(){function checkList(){var
i=0,retCode=false;log(iframeId,'Checking connection is from allowed list of origins: '+checkOrigin);for(;i<checkOrigin.length;i++){if(checkOrigin[i]===origin){retCode=true;break;}}
return retCode;}
function checkSingle(){var remoteHost=settings[iframeId].remoteHost;log(iframeId,'Checking connection is from: '+remoteHost);return origin===remoteHost;}
return checkOrigin.constructor===Array?checkList():checkSingle();}
var
origin=event.origin,checkOrigin=settings[iframeId].checkOrigin;if(checkOrigin&&(''+origin!=='null')&&!checkAllowedOrigin()){throw new Error('Unexpected message received from: '+origin+' for '+messageData.iframe.id+'. Message was: '+event.data+'. This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.');}
return true;}
function isMessageForUs(){return msgId===((''+msg).substr(0,msgIdLen))&&(msg.substr(msgIdLen).split(':')[0]in settings);}
function isMessageFromMetaParent(){var retCode=messageData.type in{'true':1,'false':1,'undefined':1};if(retCode){log(iframeId,'Ignoring init message from meta parent page');}
return retCode;}
function getMsgBody(offset){return msg.substr(msg.indexOf(':')+msgHeaderLen+offset);}
function forwardMsgFromIFrame(msgBody){log(iframeId,'MessageCallback passed: {iframe: '+messageData.iframe.id+', message: '+msgBody+'}');callback('messageCallback',{iframe:messageData.iframe,message:JSON.parse(msgBody)});log(iframeId,'--');}
function getPageInfo(){var
bodyPosition=document.body.getBoundingClientRect(),iFramePosition=messageData.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:iFramePosition.height,iframeWidth:iFramePosition.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(iFramePosition.top-bodyPosition.top,10),offsetLeft:parseInt(iFramePosition.left-bodyPosition.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset});}
function sendPageInfoToIframe(iframe,iframeId){function debouncedTrigger(){trigger('Send Page Info','pageInfo:'+getPageInfo(),iframe,iframeId);}
debouce(debouncedTrigger,32);}
function startPageInfoMonitor(){function setListener(type,func){function sendPageInfo(){if(settings[id]){sendPageInfoToIframe(settings[id].iframe,id);}else{stop();}}
['scroll','resize'].forEach(function(evt){log(id,type+evt+' listener for sendPageInfo');func(window,evt,sendPageInfo);});}
function stop(){setListener('Remove ',removeEventListener);}
function start(){setListener('Add ',addEventListener);}
var id=iframeId;start();settings[id].stopPageInfo=stop;}
function stopPageInfoMonitor(){if(settings[iframeId]&&settings[iframeId].stopPageInfo){settings[iframeId].stopPageInfo();delete settings[iframeId].stopPageInfo;}}
function checkIFrameExists(){var retBool=true;if(null===messageData.iframe){warn(iframeId,'IFrame ('+messageData.id+') not found');retBool=false;}
return retBool;}
function getElementPosition(target){var iFramePosition=target.getBoundingClientRect();getPagePosition(iframeId);return{x:Math.floor(Number(iFramePosition.left)+Number(pagePosition.x)),y:Math.floor(Number(iFramePosition.top)+Number(pagePosition.y))};}
function scrollRequestFromChild(addOffset){function reposition(){pagePosition=newPosition;scrollTo();log(iframeId,'--');}
function calcOffset(){return{x:Number(messageData.width)+offset.x,y:Number(messageData.height)+offset.y};}
function scrollParent(){if(window.parentIFrame){window.parentIFrame['scrollTo'+(addOffset?'Offset':'')](newPosition.x,newPosition.y);}else{warn(iframeId,'Unable to scroll to requested position, window.parentIFrame not found');}}
var
offset=addOffset?getElementPosition(messageData.iframe):{x:0,y:0},newPosition=calcOffset();log(iframeId,'Reposition requested from iFrame (offset x:'+offset.x+' y:'+offset.y+')');if(window.top!==window.self){scrollParent();}else{reposition();}}
function scrollTo(){if(false!==callback('scrollCallback',pagePosition)){setPagePosition(iframeId);}else{unsetPagePosition();}}
function findTarget(location){function jumpToTarget(){var jumpPosition=getElementPosition(target);log(iframeId,'Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);pagePosition={x:jumpPosition.x,y:jumpPosition.y};scrollTo();log(iframeId,'--');}
function jumpToParent(){if(window.parentIFrame){window.parentIFrame.moveToAnchor(hash);}else{log(iframeId,'In page link #'+hash+' not found and window.parentIFrame not found');}}
var
hash=location.split('#')[1]||'',hashData=decodeURIComponent(hash),target=document.getElementById(hashData)||document.getElementsByName(hashData)[0];if(target){jumpToTarget();}else if(window.top!==window.self){jumpToParent();}else{log(iframeId,'In page link #'+hash+' not found');}}
function callback(funcName,val){return chkCallback(iframeId,funcName,val);}
function actionMsg(){if(settings[iframeId].firstRun)firstRun();switch(messageData.type){case'close':closeIFrame(messageData.iframe);break;case'message':forwardMsgFromIFrame(getMsgBody(6));break;case'scrollTo':scrollRequestFromChild(false);break;case'scrollToOffset':scrollRequestFromChild(true);break;case'pageInfo':sendPageInfoToIframe(settings[iframeId].iframe,iframeId);startPageInfoMonitor();break;case'pageInfoStop':stopPageInfoMonitor();break;case'inPageLink':findTarget(getMsgBody(9));break;case'reset':resetIFrame(messageData);break;case'init':resizeIFrame();callback('initCallback',messageData.iframe);callback('resizedCallback',messageData);break;default:resizeIFrame();callback('resizedCallback',messageData);}}
function hasSettings(iframeId){var retBool=true;if(!settings[iframeId]){retBool=false;warn(messageData.type+' No settings for '+iframeId+'. Message was: '+msg);}
return retBool;}
function iFrameReadyMsgReceived(){for(var iframeId in settings){trigger('iFrame requested init',createOutgoingMsg(iframeId),document.getElementById(iframeId),iframeId);}}
function firstRun(){settings[iframeId].firstRun=false;}
var
msg=event.data,messageData={},iframeId=null;if('[iFrameResizerChild]Ready'===msg){iFrameReadyMsgReceived();}else if(isMessageForUs()){messageData=processMsg();iframeId=logId=messageData.id;if(!isMessageFromMetaParent()&&hasSettings(iframeId)){log(iframeId,'Received: '+msg);if(checkIFrameExists()&&isMessageFromIFrame()){actionMsg();}}}else{info(iframeId,'Ignored: '+msg);}}
function chkCallback(iframeId,funcName,val){var
func=null,retVal=null;if(settings[iframeId]){func=settings[iframeId][funcName];if('function'===typeof func){retVal=func(val);}else{throw new TypeError(funcName+' on iFrame['+iframeId+'] is not a function');}}
return retVal;}
function closeIFrame(iframe){var iframeId=iframe.id;log(iframeId,'Removing iFrame: '+iframeId);if(iframe.parentNode){iframe.parentNode.removeChild(iframe);}
chkCallback(iframeId,'closedCallback',iframeId);log(iframeId,'--');delete settings[iframeId];}
function getPagePosition(iframeId){if(null===pagePosition){pagePosition={x:(window.pageXOffset!==undefined)?window.pageXOffset:document.documentElement.scrollLeft,y:(window.pageYOffset!==undefined)?window.pageYOffset:document.documentElement.scrollTop};log(iframeId,'Get page position: '+pagePosition.x+','+pagePosition.y);}}
function setPagePosition(iframeId){if(null!==pagePosition){window.scrollTo(pagePosition.x,pagePosition.y);log(iframeId,'Set page position: '+pagePosition.x+','+pagePosition.y);unsetPagePosition();}}
function unsetPagePosition(){pagePosition=null;}
function resetIFrame(messageData){function reset(){setSize(messageData);trigger('reset','reset',messageData.iframe,messageData.id);}
log(messageData.id,'Size reset requested by '+('init'===messageData.type?'host page':'iFrame'));getPagePosition(messageData.id);syncResize(reset,messageData,'reset');}
function setSize(messageData){function setDimension(dimension){messageData.iframe.style[dimension]=messageData[dimension]+'px';log(messageData.id,'IFrame ('+iframeId+') '+dimension+' set to '+messageData[dimension]+'px');}
function chkZero(dimension){if(!hiddenCheckEnabled&&'0'===messageData[dimension]){hiddenCheckEnabled=true;log(iframeId,'Hidden iFrame detected, creating visibility listener');fixHiddenIFrames();}}
function processDimension(dimension){setDimension(dimension);chkZero(dimension);}
var iframeId=messageData.iframe.id;if(settings[iframeId]){if(settings[iframeId].sizeHeight){processDimension('height');}
if(settings[iframeId].sizeWidth){processDimension('width');}}}
function syncResize(func,messageData,doNotSync){if(doNotSync!==messageData.type&&requestAnimationFrame){log(messageData.id,'Requesting animation frame');requestAnimationFrame(func);}else{func();}}
function trigger(calleeMsg,msg,iframe,id){function postMessageToIFrame(){var target=settings[id].targetOrigin;log(id,'['+calleeMsg+'] Sending msg to iframe['+id+'] ('+msg+') targetOrigin: '+target);iframe.contentWindow.postMessage(msgId+msg,target);}
function iFrameNotFound(){warn(id,'['+calleeMsg+'] IFrame('+id+') not found');}
function chkAndSend(){if(iframe&&'contentWindow'in iframe&&(null!==iframe.contentWindow)){postMessageToIFrame();}else{iFrameNotFound();}}
id=id||iframe.id;if(settings[id]){chkAndSend();}}
function createOutgoingMsg(iframeId){return iframeId+':'+settings[iframeId].bodyMarginV1+':'+settings[iframeId].sizeWidth+':'+settings[iframeId].log+':'+settings[iframeId].interval+':'+settings[iframeId].enablePublicMethods+':'+settings[iframeId].autoResize+':'+settings[iframeId].bodyMargin+':'+settings[iframeId].heightCalculationMethod+':'+settings[iframeId].bodyBackground+':'+settings[iframeId].bodyPadding+':'+settings[iframeId].tolerance+':'+settings[iframeId].inPageLinks+':'+settings[iframeId].resizeFrom+':'+settings[iframeId].widthCalculationMethod;}
function setupIFrame(iframe,options){function setLimits(){function addStyle(style){if((Infinity!==settings[iframeId][style])&&(0!==settings[iframeId][style])){iframe.style[style]=settings[iframeId][style]+'px';log(iframeId,'Set '+style+' = '+settings[iframeId][style]+'px');}}
function chkMinMax(dimension){if(settings[iframeId]['min'+dimension]>settings[iframeId]['max'+dimension]){throw new Error('Value for min'+dimension+' can not be greater than max'+dimension);}}
chkMinMax('Height');chkMinMax('Width');addStyle('maxHeight');addStyle('minHeight');addStyle('maxWidth');addStyle('minWidth');}
function newId(){var id=((options&&options.id)||defaults.id+count++);if(null!==document.getElementById(id)){id=id+count++;}
return id;}
function ensureHasId(iframeId){logId=iframeId;if(''===iframeId){iframe.id=iframeId=newId();logEnabled=(options||{}).log;logId=iframeId;log(iframeId,'Added missing iframe ID: '+iframeId+' ('+iframe.src+')');}
return iframeId;}
function setScrolling(){log(iframeId,'IFrame scrolling '+(settings[iframeId].scrolling?'enabled':'disabled')+' for '+iframeId);iframe.style.overflow=false===settings[iframeId].scrolling?'hidden':'auto';switch(settings[iframeId].scrolling){case true:iframe.scrolling='yes';break;case false:iframe.scrolling='no';break;default:iframe.scrolling=settings[iframeId].scrolling;}}
function setupBodyMarginValues(){if(('number'===typeof(settings[iframeId].bodyMargin))||('0'===settings[iframeId].bodyMargin)){settings[iframeId].bodyMarginV1=settings[iframeId].bodyMargin;settings[iframeId].bodyMargin=''+settings[iframeId].bodyMargin+'px';}}
function checkReset(){var
firstRun=settings[iframeId].firstRun,resetRequertMethod=settings[iframeId].heightCalculationMethod in resetRequiredMethods;if(!firstRun&&resetRequertMethod){resetIFrame({iframe:iframe,height:0,width:0,type:'init'});}}
function setupIFrameObject(){if(Function.prototype.bind){settings[iframeId].iframe.iFrameResizer={close:closeIFrame.bind(null,settings[iframeId].iframe),resize:trigger.bind(null,'Window resize','resize',settings[iframeId].iframe),moveToAnchor:function(anchor){trigger('Move to anchor','moveToAnchor:'+anchor,settings[iframeId].iframe,iframeId);},sendMessage:function(message){message=JSON.stringify(message);trigger('Send Message','message:'+message,settings[iframeId].iframe,iframeId);}};}}
function init(msg){function iFrameLoaded(){trigger('iFrame.onload',msg,iframe);checkReset();}
addEventListener(iframe,'load',iFrameLoaded);trigger('init',msg,iframe);}
function checkOptions(options){if('object'!==typeof options){throw new TypeError('Options is not an object');}}
function copyOptions(options){for(var option in defaults){if(defaults.hasOwnProperty(option)){settings[iframeId][option]=options.hasOwnProperty(option)?options[option]:defaults[option];}}}
function getTargetOrigin(remoteHost){return(''===remoteHost||'file://'===remoteHost)?'*':remoteHost;}
function processOptions(options){options=options||{};settings[iframeId]={firstRun:true,iframe:iframe,remoteHost:iframe.src.split('/').slice(0,3).join('/')};checkOptions(options);copyOptions(options);settings[iframeId].targetOrigin=true===settings[iframeId].checkOrigin?getTargetOrigin(settings[iframeId].remoteHost):'*';}
function beenHere(){return(iframeId in settings&&'iFrameResizer'in iframe);}
var iframeId=ensureHasId(iframe.id);if(!beenHere()){processOptions(options);setScrolling();setLimits();setupBodyMarginValues();init(createOutgoingMsg(iframeId));setupIFrameObject();}else{warn(iframeId,'Ignored iFrame, already setup.');}}
function debouce(fn,time){if(null===timer){timer=setTimeout(function(){timer=null;fn();},time);}}
function fixHiddenIFrames(){function checkIFrames(){function checkIFrame(settingId){function chkDimension(dimension){return'0px'===settings[settingId].iframe.style[dimension];}
function isVisible(el){return(null!==el.offsetParent);}
if(isVisible(settings[settingId].iframe)&&(chkDimension('height')||chkDimension('width'))){trigger('Visibility change','resize',settings[settingId].iframe,settingId);}}
for(var settingId in settings){checkIFrame(settingId);}}
function mutationObserved(mutations){log('window','Mutation observed: '+mutations[0].target+' '+mutations[0].type);debouce(checkIFrames,16);}
function createMutationObserver(){var
target=document.querySelector('body'),config={attributes:true,attributeOldValue:false,characterData:true,characterDataOldValue:false,childList:true,subtree:true},observer=new MutationObserver(mutationObserved);observer.observe(target,config);}
var MutationObserver=window.MutationObserver||window.WebKitMutationObserver;if(MutationObserver)createMutationObserver();}
function resizeIFrames(event){function resize(){sendTriggerMsg('Window '+event,'resize');}
log('window','Trigger event: '+event);debouce(resize,16);}
function tabVisible(){function resize(){sendTriggerMsg('Tab Visable','resize');}
if('hidden'!==document.visibilityState){log('document','Trigger event: Visiblity change');debouce(resize,16);}}
function sendTriggerMsg(eventName,event){function isIFrameResizeEnabled(iframeId){return'parent'===settings[iframeId].resizeFrom&&settings[iframeId].autoResize&&!settings[iframeId].firstRun;}
for(var iframeId in settings){if(isIFrameResizeEnabled(iframeId)){trigger(eventName,event,document.getElementById(iframeId),iframeId);}}}
function setupEventListeners(){addEventListener(window,'message',iFrameListener);addEventListener(window,'resize',function(){resizeIFrames('resize');});addEventListener(document,'visibilitychange',tabVisible);addEventListener(document,'-webkit-visibilitychange',tabVisible);addEventListener(window,'focusin',function(){resizeIFrames('focus');});addEventListener(window,'focus',function(){resizeIFrames('focus');});}
function factory(){function init(options,element){function chkType(){if(!element.tagName){throw new TypeError('Object is not a valid DOM element');}else if('IFRAME'!==element.tagName.toUpperCase()){throw new TypeError('Expected <IFRAME> tag, found <'+element.tagName+'>');}}
if(element){chkType();setupIFrame(element,options);iFrames.push(element);}}
function warnDeprecatedOptions(options){if(options&&options.enablePublicMethods){warn('enablePublicMethods option has been removed, public methods are now always available in the iFrame');}}
var iFrames;setupRequestAnimationFrame();setupEventListeners();return function iFrameResizeF(options,target){iFrames=[];warnDeprecatedOptions(options);switch(typeof(target)){case'undefined':case'string':Array.prototype.forEach.call(document.querySelectorAll(target||'iframe'),init.bind(undefined,options));break;case'object':init(options,target);break;default:throw new TypeError('Unexpected data type ('+typeof(target)+')');}
return iFrames;};}
function createJQueryPublicMethod($){if(!$.fn){info('','Unable to bind to jQuery, it is not fully loaded.');}else if(!$.fn.iFrameResize){$.fn.iFrameResize=function $iFrameResizeF(options){function init(index,element){setupIFrame(element,options);}
return this.filter('iframe').each(init).end();};}}
if(window.jQuery){createJQueryPublicMethod(jQuery);}
if(typeof define==='function'&&define.amd){define([],factory);}else if(typeof module==='object'&&typeof module.exports==='object'){module.exports=factory();}else{window.iFrameResize=window.iFrameResize||factory();}})(window||{});;(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'&&typeof require==='function'){factory(require('jquery'));}else{factory(jQuery);}}(function($){'use strict';var
utils=(function(){return{escapeRegExChars:function(value){return value.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");},createNode:function(containerClass){var div=document.createElement('div');div.className=containerClass;div.style.position='absolute';div.style.display='none';return div;}};}()),keys={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};function Autocomplete(el,options){var noop=$.noop,that=this,defaults={ajaxSettings:{},autoSelectFirst:false,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:'auto',minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:Autocomplete.formatResult,formatGroup:Autocomplete.formatGroup,delimiter:null,zIndex:9999,type:'GET',noCache:false,onSearchStart:noop,onSearchComplete:noop,onSearchError:noop,preserveInput:false,containerClass:'autocomplete-suggestions',tabDisabled:false,dataType:'text',currentRequest:null,triggerSelectOnValidInput:true,preventBadQueries:true,lookupFilter:function(suggestion,originalQuery,queryLowerCase){return suggestion.value.toLowerCase().indexOf(queryLowerCase)!==-1;},paramName:'query',transformResult:function(response){return typeof response==='string'?$.parseJSON(response):response;},showNoSuggestionNotice:false,noSuggestionNotice:'No results',orientation:'bottom',forceFixPosition:false};that.element=el;that.el=$(el);that.suggestions=[];that.badQueries=[];that.selectedIndex=-1;that.currentValue=that.element.value;that.intervalId=0;that.cachedResponse={};that.onChangeInterval=null;that.onChange=null;that.isLocal=false;that.suggestionsContainer=null;that.noSuggestionsContainer=null;that.options=$.extend({},defaults,options);that.classes={selected:'autocomplete-selected',suggestion:'autocomplete-suggestion'};that.hint=null;that.hintValue='';that.selection=null;that.initialize();that.setOptions(options);}
Autocomplete.utils=utils;$.Autocomplete=Autocomplete;Autocomplete.formatResult=function(suggestion,currentValue){if(!currentValue){return suggestion.value;}
var pattern='('+utils.escapeRegExChars(currentValue)+')';return suggestion.value.replace(new RegExp(pattern,'gi'),'<strong>$1<\/strong>').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/&lt;(\/?strong)&gt;/g,'<$1>');};Autocomplete.formatGroup=function(suggestion,category){return'<div class="autocomplete-group"><strong>'+category+'</strong></div>';};Autocomplete.prototype={killerFn:null,initialize:function(){var that=this,suggestionSelector='.'+that.classes.suggestion,selected=that.classes.selected,options=that.options,container;that.element.setAttribute('autocomplete','off');that.killerFn=function(e){if(!$(e.target).closest('.'+that.options.containerClass).length){that.killSuggestions();that.disableKillerFn();}};that.noSuggestionsContainer=$('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0);that.suggestionsContainer=Autocomplete.utils.createNode(options.containerClass);container=$(that.suggestionsContainer);container.appendTo(options.appendTo);if(options.width!=='auto'){container.css('width',options.width);}
container.on('mouseover.autocomplete',suggestionSelector,function(){that.activate($(this).data('index'));});container.on('mouseout.autocomplete',function(){that.selectedIndex=-1;container.children('.'+selected).removeClass(selected);});container.on('click.autocomplete',suggestionSelector,function(){that.select($(this).data('index'));return false;});that.fixPositionCapture=function(){if(that.visible){that.fixPosition();}};$(window).on('resize.autocomplete',that.fixPositionCapture);that.el.on('keydown.autocomplete',function(e){that.onKeyPress(e);});that.el.on('keyup.autocomplete',function(e){that.onKeyUp(e);});that.el.on('blur.autocomplete',function(){that.onBlur();});that.el.on('focus.autocomplete',function(){that.onFocus();});that.el.on('change.autocomplete',function(e){that.onKeyUp(e);});that.el.on('input.autocomplete',function(e){that.onKeyUp(e);});},onFocus:function(){var that=this;that.fixPosition();if(that.el.val().length>=that.options.minChars){that.onValueChange();}},onBlur:function(){this.enableKillerFn();},abortAjax:function(){var that=this;if(that.currentRequest){that.currentRequest.abort();that.currentRequest=null;}},setOptions:function(suppliedOptions){var that=this,options=that.options;$.extend(options,suppliedOptions);that.isLocal=$.isArray(options.lookup);if(that.isLocal){options.lookup=that.verifySuggestionsFormat(options.lookup);}
options.orientation=that.validateOrientation(options.orientation,'bottom');$(that.suggestionsContainer).css({'max-height':options.maxHeight+'px','width':options.width+'px','z-index':options.zIndex});},clearCache:function(){this.cachedResponse={};this.badQueries=[];},clear:function(){this.clearCache();this.currentValue='';this.suggestions=[];},disable:function(){var that=this;that.disabled=true;clearInterval(that.onChangeInterval);that.abortAjax();},enable:function(){this.disabled=false;},fixPosition:function(){var that=this,$container=$(that.suggestionsContainer),containerParent=$container.parent().get(0);if(containerParent!==document.body&&!that.options.forceFixPosition){return;}
var orientation=that.options.orientation,containerHeight=$container.outerHeight(),height=that.el.outerHeight(),offset=that.el.offset(),styles={'top':offset.top,'left':offset.left};if(orientation==='auto'){var viewPortHeight=$(window).height(),scrollTop=$(window).scrollTop(),topOverflow=-scrollTop+offset.top-containerHeight,bottomOverflow=scrollTop+viewPortHeight-(offset.top+height+containerHeight);orientation=(Math.max(topOverflow,bottomOverflow)===topOverflow)?'top':'bottom';}
if(orientation==='top'){styles.top+=-containerHeight;}else{styles.top+=height;}
if(containerParent!==document.body){var opacity=$container.css('opacity'),parentOffsetDiff;if(!that.visible){$container.css('opacity',0).show();}
parentOffsetDiff=$container.offsetParent().offset();styles.top-=parentOffsetDiff.top;styles.left-=parentOffsetDiff.left;if(!that.visible){$container.css('opacity',opacity).hide();}}
if(that.options.width==='auto'){styles.width=that.el.outerWidth()+'px';}
$container.css(styles);},enableKillerFn:function(){var that=this;$(document).on('click.autocomplete',that.killerFn);},disableKillerFn:function(){var that=this;$(document).off('click.autocomplete',that.killerFn);},killSuggestions:function(){var that=this;that.stopKillSuggestions();that.intervalId=window.setInterval(function(){if(that.visible){if(!that.options.preserveInput){that.el.val(that.currentValue);}
that.hide();}
that.stopKillSuggestions();},50);},stopKillSuggestions:function(){window.clearInterval(this.intervalId);},isCursorAtEnd:function(){var that=this,valLength=that.el.val().length,selectionStart=that.element.selectionStart,range;if(typeof selectionStart==='number'){return selectionStart===valLength;}
if(document.selection){range=document.selection.createRange();range.moveStart('character',-valLength);return valLength===range.text.length;}
return true;},onKeyPress:function(e){var that=this;if(!that.disabled&&!that.visible&&e.which===keys.DOWN&&that.currentValue){that.suggest();return;}
if(that.disabled||!that.visible){return;}
switch(e.which){case keys.ESC:that.el.val(that.currentValue);that.hide();break;case keys.RIGHT:if(that.hint&&that.options.onHint&&that.isCursorAtEnd()){that.selectHint();break;}
return;case keys.TAB:if(that.hint&&that.options.onHint){that.selectHint();return;}
if(that.selectedIndex===-1){that.hide();return;}
that.select(that.selectedIndex);if(that.options.tabDisabled===false){return;}
break;case keys.RETURN:if(that.selectedIndex===-1){that.hide();return;}
that.select(that.selectedIndex);break;case keys.UP:that.moveUp();break;case keys.DOWN:that.moveDown();break;default:return;}
e.stopImmediatePropagation();e.preventDefault();},onKeyUp:function(e){var that=this;if(that.disabled){return;}
switch(e.which){case keys.UP:case keys.DOWN:return;}
clearInterval(that.onChangeInterval);if(that.currentValue!==that.el.val()){that.findBestHint();if(that.options.deferRequestBy>0){that.onChangeInterval=setInterval(function(){that.onValueChange();},that.options.deferRequestBy);}else{that.onValueChange();}}},onValueChange:function(){var that=this,options=that.options,value=that.el.val(),query=that.getQuery(value);if(that.selection&&that.currentValue!==query){that.selection=null;(options.onInvalidateSelection||$.noop).call(that.element);}
clearInterval(that.onChangeInterval);that.currentValue=value;that.selectedIndex=-1;if(options.triggerSelectOnValidInput&&that.isExactMatch(query)){that.select(0);return;}
if(query.length<options.minChars){that.hide();}else{that.getSuggestions(query);}},isExactMatch:function(query){var suggestions=this.suggestions;return(suggestions.length===1&&suggestions[0].value.toLowerCase()===query.toLowerCase());},getQuery:function(value){var delimiter=this.options.delimiter,parts;if(!delimiter){return value;}
parts=value.split(delimiter);return $.trim(parts[parts.length-1]);},getSuggestionsLocal:function(query){var that=this,options=that.options,queryLowerCase=query.toLowerCase(),filter=options.lookupFilter,limit=parseInt(options.lookupLimit,10),data;data={suggestions:$.grep(options.lookup,function(suggestion){return filter(suggestion,query,queryLowerCase);})};if(limit&&data.suggestions.length>limit){data.suggestions=data.suggestions.slice(0,limit);}
return data;},getSuggestions:function(q){var response,that=this,options=that.options,serviceUrl=options.serviceUrl,params,cacheKey,ajaxSettings;options.params[options.paramName]=q;params=options.ignoreParams?null:options.params;if(options.onSearchStart.call(that.element,options.params)===false){return;}
if($.isFunction(options.lookup)){options.lookup(q,function(data){that.suggestions=data.suggestions;that.suggest();options.onSearchComplete.call(that.element,q,data.suggestions);});return;}
if(that.isLocal){response=that.getSuggestionsLocal(q);}else{if($.isFunction(serviceUrl)){serviceUrl=serviceUrl.call(that.element,q);}
cacheKey=serviceUrl+'?'+$.param(params||{});response=that.cachedResponse[cacheKey];}
if(response&&$.isArray(response.suggestions)){that.suggestions=response.suggestions;that.suggest();options.onSearchComplete.call(that.element,q,response.suggestions);}else if(!that.isBadQuery(q)){that.abortAjax();ajaxSettings={url:serviceUrl,data:params,type:options.type,dataType:options.dataType};$.extend(ajaxSettings,options.ajaxSettings);that.currentRequest=$.ajax(ajaxSettings).done(function(data){var result;that.currentRequest=null;result=options.transformResult(data,q);that.processResponse(result,q,cacheKey);options.onSearchComplete.call(that.element,q,result.suggestions);}).fail(function(jqXHR,textStatus,errorThrown){options.onSearchError.call(that.element,q,jqXHR,textStatus,errorThrown);});}else{options.onSearchComplete.call(that.element,q,[]);}},isBadQuery:function(q){if(!this.options.preventBadQueries){return false;}
var badQueries=this.badQueries,i=badQueries.length;while(i--){if(q.indexOf(badQueries[i])===0){return true;}}
return false;},hide:function(){var that=this,container=$(that.suggestionsContainer);if($.isFunction(that.options.onHide)&&that.visible){that.options.onHide.call(that.element,container);}
that.visible=false;that.selectedIndex=-1;clearInterval(that.onChangeInterval);$(that.suggestionsContainer).hide();that.signalHint(null);},suggest:function(){if(!this.suggestions.length){if(this.options.showNoSuggestionNotice){this.noSuggestions();}else{this.hide();}
return;}
var that=this,options=that.options,groupBy=options.groupBy,formatResult=options.formatResult,value=that.getQuery(that.currentValue),className=that.classes.suggestion,classSelected=that.classes.selected,container=$(that.suggestionsContainer),noSuggestionsContainer=$(that.noSuggestionsContainer),beforeRender=options.beforeRender,html='',category,formatGroup=function(suggestion,index){var currentCategory=suggestion.data[groupBy];if(category===currentCategory){return'';}
category=currentCategory;return options.formatGroup(suggestion,category);};if(options.triggerSelectOnValidInput&&that.isExactMatch(value)){that.select(0);return;}
$.each(that.suggestions,function(i,suggestion){if(groupBy){html+=formatGroup(suggestion,value,i);}
html+='<div class="'+className+'" data-index="'+i+'">'+formatResult(suggestion,value,i)+'</div>';});this.adjustContainerWidth();noSuggestionsContainer.detach();container.html(html);if($.isFunction(beforeRender)){beforeRender.call(that.element,container,that.suggestions);}
that.fixPosition();container.show();if(options.autoSelectFirst){that.selectedIndex=0;container.scrollTop(0);container.children('.'+className).first().addClass(classSelected);}
that.visible=true;that.findBestHint();},noSuggestions:function(){var that=this,container=$(that.suggestionsContainer),noSuggestionsContainer=$(that.noSuggestionsContainer);this.adjustContainerWidth();noSuggestionsContainer.detach();container.empty();container.append(noSuggestionsContainer);that.fixPosition();container.show();that.visible=true;},adjustContainerWidth:function(){var that=this,options=that.options,width,container=$(that.suggestionsContainer);if(options.width==='auto'){width=that.el.outerWidth();container.css('width',width>0?width:300);}else if(options.width==='flex'){container.css('width','');}},findBestHint:function(){var that=this,value=that.el.val().toLowerCase(),bestMatch=null;if(!value){return;}
$.each(that.suggestions,function(i,suggestion){var foundMatch=suggestion.value.toLowerCase().indexOf(value)===0;if(foundMatch){bestMatch=suggestion;}
return!foundMatch;});that.signalHint(bestMatch);},signalHint:function(suggestion){var hintValue='',that=this;if(suggestion){hintValue=that.currentValue+suggestion.value.substr(that.currentValue.length);}
if(that.hintValue!==hintValue){that.hintValue=hintValue;that.hint=suggestion;(this.options.onHint||$.noop)(hintValue);}},verifySuggestionsFormat:function(suggestions){if(suggestions.length&&typeof suggestions[0]==='string'){return $.map(suggestions,function(value){return{value:value,data:null};});}
return suggestions;},validateOrientation:function(orientation,fallback){orientation=$.trim(orientation||'').toLowerCase();if($.inArray(orientation,['auto','bottom','top'])===-1){orientation=fallback;}
return orientation;},processResponse:function(result,originalQuery,cacheKey){var that=this,options=that.options;result.suggestions=that.verifySuggestionsFormat(result.suggestions);if(!options.noCache){that.cachedResponse[cacheKey]=result;if(options.preventBadQueries&&!result.suggestions.length){that.badQueries.push(originalQuery);}}
if(originalQuery!==that.getQuery(that.currentValue)){return;}
that.suggestions=result.suggestions;that.suggest();},activate:function(index){var that=this,activeItem,selected=that.classes.selected,container=$(that.suggestionsContainer),children=container.find('.'+that.classes.suggestion);container.find('.'+selected).removeClass(selected);that.selectedIndex=index;if(that.selectedIndex!==-1&&children.length>that.selectedIndex){activeItem=children.get(that.selectedIndex);$(activeItem).addClass(selected);return activeItem;}
return null;},selectHint:function(){var that=this,i=$.inArray(that.hint,that.suggestions);that.select(i);},select:function(i){var that=this;that.hide();that.onSelect(i);that.disableKillerFn();},moveUp:function(){var that=this;if(that.selectedIndex===-1){return;}
if(that.selectedIndex===0){$(that.suggestionsContainer).children().first().removeClass(that.classes.selected);that.selectedIndex=-1;that.el.val(that.currentValue);that.findBestHint();return;}
that.adjustScroll(that.selectedIndex-1);},moveDown:function(){var that=this;if(that.selectedIndex===(that.suggestions.length-1)){return;}
that.adjustScroll(that.selectedIndex+1);},adjustScroll:function(index){var that=this,activeItem=that.activate(index);if(!activeItem){return;}
var offsetTop,upperBound,lowerBound,heightDelta=$(activeItem).outerHeight();offsetTop=activeItem.offsetTop;upperBound=$(that.suggestionsContainer).scrollTop();lowerBound=upperBound+that.options.maxHeight-heightDelta;if(offsetTop<upperBound){$(that.suggestionsContainer).scrollTop(offsetTop);}else if(offsetTop>lowerBound){$(that.suggestionsContainer).scrollTop(offsetTop-that.options.maxHeight+heightDelta);}
if(!that.options.preserveInput){that.el.val(that.getValue(that.suggestions[index].value));}
that.signalHint(null);},onSelect:function(index){var that=this,onSelectCallback=that.options.onSelect,suggestion=that.suggestions[index];that.currentValue=that.getValue(suggestion.value);if(that.currentValue!==that.el.val()&&!that.options.preserveInput){that.el.val(that.currentValue);}
that.signalHint(null);that.suggestions=[];that.selection=suggestion;if($.isFunction(onSelectCallback)){onSelectCallback.call(that.element,suggestion);}},getValue:function(value){var that=this,delimiter=that.options.delimiter,currentValue,parts;if(!delimiter){return value;}
currentValue=that.currentValue;parts=currentValue.split(delimiter);if(parts.length===1){return value;}
return currentValue.substr(0,currentValue.length-parts[parts.length-1].length)+value;},dispose:function(){var that=this;that.el.off('.autocomplete').removeData('autocomplete');that.disableKillerFn();$(window).off('resize.autocomplete',that.fixPositionCapture);$(that.suggestionsContainer).remove();}};$.fn.autocomplete=$.fn.devbridgeAutocomplete=function(options,args){var dataKey='autocomplete';if(!arguments.length){return this.first().data(dataKey);}
return this.each(function(){var inputElement=$(this),instance=inputElement.data(dataKey);if(typeof options==='string'){if(instance&&typeof instance[options]==='function'){instance[options](args);}}else{if(instance&&instance.dispose){instance.dispose();}
instance=new Autocomplete(this,options);inputElement.data(dataKey,instance);}});};}));;(function($){'use strict';var BrowserDetect={init:function(_navigator){this.navigator=_navigator;this.browser=this.searchString(this.dataBrowser()).name||'Other';this.version=this.searchVersion(this.navigator.userAgent)||this.searchVersion(this.navigator.appVersion)||'Unknown';this.platform=this.searchString(this.dataplatform())||'Other';},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;this.search=data[i].search;if(this.search.test(dataString)){if(data[i].device!==undefined){this.device=data[i].device;}
var version;if(data[i].version){var versionMatch=this.navigator.appVersion.match(data[i].version);if(versionMatch&&versionMatch.length===2){version=parseInt(versionMatch[1],10);}}
return{name:data[i].identity,version:version}}}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index===-1){return;}
var rv=dataString.indexOf('rv:');if(this.versionSearchString==='Trident'&&rv!==-1){return parseFloat(dataString.substring(rv+3));}else{return parseFloat(dataString.substring(index+this.versionSearchString.length+1));}},dataplatform:function(){return[{string:this.navigator.platform,search:/iPad/,identity:'iOS',device:'iPad',version:/OS (\d+)/},{string:this.navigator.platform,search:/iPhone/,identity:'iOS',device:'iPhone',version:/OS (\d+)/},{string:this.navigator.platform,search:/iPod/,identity:'iOS',device:'iPod',version:/OS (\d+)/},{string:this.navigator.userAgent,search:/Android/,identity:'Android',device:'Android',version:/Android (\d+)/}];},dataBrowser:function(){return[{string:this.navigator.userAgent,search:/Edge/,identity:'MS Edge'},{string:this.navigator.userAgent,search:/(MSIE)|(Trident)/,identity:'Explorer'},{string:this.navigator.userAgent,search:/(FxiOS)|(Firefox)/,identity:'Firefox'},{string:this.navigator.userAgent,search:/(Opera)|(OPR)/,identity:'Opera'},{string:this.navigator.userAgent,search:/(Chrome)|(CriOS)/,identity:'Chrome'},{string:this.navigator.userAgent,search:/Safari/,identity:'Safari'}];}};BrowserDetect.init(window.navigator);BrowserDetect.isMobile=BrowserDetect.device==='Android'||BrowserDetect.device==='iPhone';window.BrowserDetect=BrowserDetect;if($){$.browser={msie:BrowserDetect.browser==='Explorer',version:BrowserDetect.version,name:BrowserDetect.browser.replace('Chrome','chrome').replace('Firefox','firefox').replace('Opera','opera').replace('Explorer','msie')+BrowserDetect.version};}})(jQuery);;;(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.moment=factory()}(this,(function(){'use strict';var hookCallback;function hooks(){return hookCallback.apply(null,arguments);}
function setHookCallback(callback){hookCallback=callback;}
function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==='[object Array]';}
function isObject(input){return input!=null&&Object.prototype.toString.call(input)==='[object Object]';}
function isObjectEmpty(obj){var k;for(k in obj){return false;}
return true;}
function isNumber(input){return typeof input==='number'||Object.prototype.toString.call(input)==='[object Number]';}
function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==='[object Date]';}
function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}
return res;}
function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}
function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}
if(hasOwnProp(b,'toString')){a.toString=b.toString;}
if(hasOwnProp(b,'valueOf')){a.valueOf=b.valueOf;}
return a;}
function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}
function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null};}
function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}
return m._pf;}
var some;if(Array.prototype.some){some=Array.prototype.some;}else{some=function(fun){var t=Object(this);var len=t.length>>>0;for(var i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true;}}
return false;};}
var some$1=some;function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);var parsedParts=some$1.call(flags.parsedDateParts,function(i){return i!=null;});var isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||(flags.meridiem&&parsedParts));if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}
if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid;}
else{return isNowValid;}}
return m._isValid;}
function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}
else{getParsingFlags(m).userInvalidated=true;}
return m;}
function isUndefined(input){return input===void 0;}
var momentProperties=hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject;}
if(!isUndefined(from._i)){to._i=from._i;}
if(!isUndefined(from._f)){to._f=from._f;}
if(!isUndefined(from._l)){to._l=from._l;}
if(!isUndefined(from._strict)){to._strict=from._strict;}
if(!isUndefined(from._tzm)){to._tzm=from._tzm;}
if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC;}
if(!isUndefined(from._offset)){to._offset=from._offset;}
if(!isUndefined(from._pf)){to._pf=getParsingFlags(from);}
if(!isUndefined(from._locale)){to._locale=from._locale;}
if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val;}}}
return to;}
var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN);}
if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false;}}
function isMoment(obj){return obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null);}
function absFloor(number){if(number<0){return Math.ceil(number)||0;}else{return Math.floor(number);}}
function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber);}
return value;}
function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++;}}
return diffs+lengthDiff;}
function warn(msg){if(hooks.suppressDeprecationWarnings===false&&(typeof console!=='undefined')&&console.warn){console.warn('Deprecation warning: '+msg);}}
function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg);}
if(firstTime){var args=[];var arg;for(var i=0;i<arguments.length;i++){arg='';if(typeof arguments[i]==='object'){arg+='\n['+i+'] ';for(var key in arguments[0]){arg+=key+': '+arguments[0][key]+', ';}
arg=arg.slice(0,-2);}else{arg=arguments[i];}
args.push(arg);}
warn(msg+'\nArguments: '+Array.prototype.slice.call(args).join('')+'\n'+(new Error()).stack);firstTime=false;}
return fn.apply(this,arguments);},fn);}
var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg);}
if(!deprecations[name]){warn(msg);deprecations[name]=true;}}
hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==='[object Function]';}
function set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop;}else{this['_'+i]=prop;}}
this._config=config;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+'|'+(/\d{1,2}/).source);}
function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop]);}else if(childConfig[prop]!=null){res[prop]=childConfig[prop];}else{delete res[prop];}}}
for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop]);}}
return res;}
function Locale(config){if(config!=null){this.set(config);}}
var keys;if(Object.keys){keys=Object.keys;}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i);}}
return res;};}
var keys$1=keys;var defaultCalendar={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar['sameElse'];return isFunction(output)?output.call(mom,now):output;}
var defaultLongDateFormat={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format;}
this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});return this._longDateFormat[key];}
var defaultInvalidDate='Invalid date';function invalidDate(){return this._invalidDate;}
var defaultOrdinal='%d';var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace('%d',number);}
var defaultRelativeTime={future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(isFunction(output))?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}
function pastFuture(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return isFunction(format)?format(output):format.replace(/%s/i,output);}
var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+'s']=aliases[shorthand]=unit;}
function normalizeUnits(units){return typeof units==='string'?aliases[units]||aliases[units.toLowerCase()]:undefined;}
function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}
return normalizedInput;}
var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority;}
function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj){units.push({unit:u,priority:priorities[u]});}
units.sort(function(a,b){return a.priority-b.priority;});return units;}
function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this;}else{return get(this,unit);}};}
function get(mom,unit){return mom.isValid()?mom._d['get'+(mom._isUTC?'UTC':'')+unit]():NaN;}
function set$1(mom,unit,value){if(mom.isValid()){mom._d['set'+(mom._isUTC?'UTC':'')+unit](value);}}
function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]();}
return this;}
function stringSet(units,value){if(typeof units==='object'){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units);for(var i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit]);}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value);}}
return this;}
function zeroFill(number,targetLength,forceSign){var absNumber=''+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?(forceSign?'+':''):'-')+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber;}
var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==='string'){func=function(){return this[callback]();};}
if(token){formatTokenFunctions[token]=func;}
if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}
if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}
function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,'');}
return input.replace(/\\/g,'');}
function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}
return function(mom){var output='',i;for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i];}
return output;};}
function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}
format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m);}
function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}
localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}
return format;}
var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return(isStrict&&strictRegex)?strictRegex:regex;};}
function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}
return regexes[token](config._strict,config._locale);}
function unescapeFormat(s){return regexEscape(s.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}));}
function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}
var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==='string'){token=[token];}
if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input);};}
for(i=0;i<token.length;i++){tokens[token[i]]=func;}}
function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}
function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}
var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf;}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i;}}
return-1;};}
var indexOf$1=indexOf;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate();}
addFormatToken('M',['MM',2],'Mo',function(){return this.month()+1;});addFormatToken('MMM',0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken('MMMM',0,0,function(format){return this.localeData().months(this,format);});addUnitAlias('month','M');addUnitPriority('month',8);addRegexToken('M',match1to2);addRegexToken('MM',match1to2,match2);addRegexToken('MMM',function(isStrict,locale){return locale.monthsShortRegex(isStrict);});addRegexToken('MMMM',function(isStrict,locale){return locale.monthsRegex(isStrict);});addParseToken(['M','MM'],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(['MMM','MMMM'],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var defaultLocaleMonths='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function localeMonths(m,format){if(!m){return this._months;}
return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?'format':'standalone'][m.month()];}
var defaultLocaleMonthsShort='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function localeMonthsShort(m,format){if(!m){return this._monthsShort;}
return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?'format':'standalone'][m.month()];}
function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2000,i]);this._shortMonthsParse[i]=this.monthsShort(mom,'').toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,'').toLocaleLowerCase();}}
if(strict){if(format==='MMM'){ii=indexOf$1.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf$1.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}}else{if(format==='MMM'){ii=indexOf$1.call(this._shortMonthsParse,llc);if(ii!==-1){return ii;}
ii=indexOf$1.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf$1.call(this._longMonthsParse,llc);if(ii!==-1){return ii;}
ii=indexOf$1.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}}}
function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict);}
if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}
for(i=0;i<12;i++){mom=createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i');}
if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName)){return i;}else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName)){return i;}else if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}
function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom;}
if(typeof value==='string'){if(/^\d+$/.test(value)){value=toInt(value);}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom;}}}
dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom;}
function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this;}else{return get(this,'Month');}}
function getDaysInMonth(){return daysInMonth(this.year(),this.month());}
var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}
if(isStrict){return this._monthsShortStrictRegex;}else{return this._monthsShortRegex;}}else{if(!hasOwnProp(this,'_monthsShortRegex')){this._monthsShortRegex=defaultMonthsShortRegex;}
return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex;}}
var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}
if(isStrict){return this._monthsStrictRegex;}else{return this._monthsRegex;}}else{if(!hasOwnProp(this,'_monthsRegex')){this._monthsRegex=defaultMonthsRegex;}
return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex;}}
function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length;}
var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2000,i]);shortPieces.push(this.monthsShort(mom,''));longPieces.push(this.months(mom,''));mixedPieces.push(this.months(mom,''));mixedPieces.push(this.monthsShort(mom,''));}
shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);}
for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i]);}
this._monthsRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp('^('+longPieces.join('|')+')','i');this._monthsShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')','i');}
addFormatToken('Y',0,0,function(){var y=this.year();return y<=9999?''+y:'+'+y;});addFormatToken(0,['YY',2],0,function(){return this.year()%100;});addFormatToken(0,['YYYY',4],0,'year');addFormatToken(0,['YYYYY',5],0,'year');addFormatToken(0,['YYYYYY',6,true],0,'year');addUnitAlias('year','y');addUnitPriority('year',1);addRegexToken('Y',matchSigned);addRegexToken('YY',match1to2,match2);addRegexToken('YYYY',match1to4,match4);addRegexToken('YYYYY',match1to6,match6);addRegexToken('YYYYYY',match1to6,match6);addParseToken(['YYYYY','YYYYYY'],YEAR);addParseToken('YYYY',function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input);});addParseToken('YY',function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input);});addParseToken('Y',function(input,array){array[YEAR]=parseInt(input,10);});function daysInYear(year){return isLeapYear(year)?366:365;}
function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}
hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet('FullYear',true);function getIsLeapYear(){return isLeapYear(this.year());}
function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<100&&y>=0&&isFinite(date.getFullYear())){date.setFullYear(y);}
return date;}
function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<100&&y>=0&&isFinite(date.getUTCFullYear())){date.setUTCFullYear(y);}
return date;}
function firstWeekOffset(year,dow,doy){var
fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1;}
function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear;}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year);}else{resYear=year;resDayOfYear=dayOfYear;}
return{year:resYear,dayOfYear:resDayOfYear};}
function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy);}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1;}else{resYear=mom.year();resWeek=week;}
return{week:resWeek,year:resYear};}
function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7;}
addFormatToken('w',['ww',2],'wo','week');addFormatToken('W',['WW',2],'Wo','isoWeek');addUnitAlias('week','w');addUnitAlias('isoWeek','W');addUnitPriority('week',5);addUnitPriority('isoWeek',5);addRegexToken('w',match1to2);addRegexToken('ww',match1to2,match2);addRegexToken('W',match1to2);addRegexToken('WW',match1to2,match2);addWeekParseToken(['w','ww','W','WW'],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}
var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}
function localeFirstDayOfYear(){return this._week.doy;}
function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d');}
function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d');}
addFormatToken('d',0,'do','day');addFormatToken('dd',0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken('ddd',0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken('dddd',0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken('e',0,0,'weekday');addFormatToken('E',0,0,'isoWeekday');addUnitAlias('day','d');addUnitAlias('weekday','e');addUnitAlias('isoWeekday','E');addUnitPriority('day',11);addUnitPriority('weekday',11);addUnitPriority('isoWeekday',11);addRegexToken('d',match1to2);addRegexToken('e',match1to2);addRegexToken('E',match1to2);addRegexToken('dd',function(isStrict,locale){return locale.weekdaysMinRegex(isStrict);});addRegexToken('ddd',function(isStrict,locale){return locale.weekdaysShortRegex(isStrict);});addRegexToken('dddd',function(isStrict,locale){return locale.weekdaysRegex(isStrict);});addWeekParseToken(['dd','ddd','dddd'],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(['d','e','E'],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input!=='string'){return input;}
if(!isNaN(input)){return parseInt(input,10);}
input=locale.weekdaysParse(input);if(typeof input==='number'){return input;}
return null;}
function parseIsoWeekday(input,locale){if(typeof input==='string'){return locale.weekdaysParse(input)%7||7;}
return isNaN(input)?null:input;}
var defaultLocaleWeekdays='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function localeWeekdays(m,format){if(!m){return this._weekdays;}
return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?'format':'standalone'][m.day()];}
var defaultLocaleWeekdaysShort='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function localeWeekdaysShort(m){return(m)?this._weekdaysShort[m.day()]:this._weekdaysShort;}
var defaultLocaleWeekdaysMin='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function localeWeekdaysMin(m){return(m)?this._weekdaysMin[m.day()]:this._weekdaysMin;}
function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2000,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,'').toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,'').toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,'').toLocaleLowerCase();}}
if(strict){if(format==='dddd'){ii=indexOf$1.call(this._weekdaysParse,llc);return ii!==-1?ii:null;}else if(format==='ddd'){ii=indexOf$1.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}}else{if(format==='dddd'){ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf$1.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else if(format==='ddd'){ii=indexOf$1.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf$1.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}
ii=indexOf$1.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}}}
function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict);}
if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[];}
for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp('^'+this.weekdays(mom,'').replace('.','\.?')+'$','i');this._shortWeekdaysParse[i]=new RegExp('^'+this.weekdaysShort(mom,'').replace('.','\.?')+'$','i');this._minWeekdaysParse[i]=new RegExp('^'+this.weekdaysMin(mom,'').replace('.','\.?')+'$','i');}
if(!this._weekdaysParse[i]){regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='dddd'&&this._fullWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='ddd'&&this._shortWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='dd'&&this._minWeekdaysParse[i].test(weekdayName)){return i;}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i;}}}
function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d');}else{return day;}}
function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d');}
function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7);}else{return this.day()||7;}}
var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysStrictRegex;}else{return this._weekdaysRegex;}}else{if(!hasOwnProp(this,'_weekdaysRegex')){this._weekdaysRegex=defaultWeekdaysRegex;}
return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex;}}
var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysShortStrictRegex;}else{return this._weekdaysShortRegex;}}else{if(!hasOwnProp(this,'_weekdaysShortRegex')){this._weekdaysShortRegex=defaultWeekdaysShortRegex;}
return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;}}
var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}
if(isStrict){return this._weekdaysMinStrictRegex;}else{return this._weekdaysMinRegex;}}else{if(!hasOwnProp(this,'_weekdaysMinRegex')){this._weekdaysMinRegex=defaultWeekdaysMinRegex;}
return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;}}
function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length;}
var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);minp=this.weekdaysMin(mom,'');shortp=this.weekdaysShort(mom,'');longp=this.weekdays(mom,'');minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp);}
minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<7;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i]);}
this._weekdaysRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp('^('+longPieces.join('|')+')','i');this._weekdaysShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')','i');this._weekdaysMinStrictRegex=new RegExp('^('+minPieces.join('|')+')','i');}
function hFormat(){return this.hours()%12||12;}
function kFormat(){return this.hours()||24;}
addFormatToken('H',['HH',2],0,'hour');addFormatToken('h',['hh',2],0,hFormat);addFormatToken('k',['kk',2],0,kFormat);addFormatToken('hmm',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2);});addFormatToken('hmmss',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2);});addFormatToken('Hmm',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2);});addFormatToken('Hmmss',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2);});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}
meridiem('a',true);meridiem('A',false);addUnitAlias('hour','h');addUnitPriority('hour',13);function matchMeridiem(isStrict,locale){return locale._meridiemParse;}
addRegexToken('a',matchMeridiem);addRegexToken('A',matchMeridiem);addRegexToken('H',match1to2);addRegexToken('h',match1to2);addRegexToken('HH',match1to2,match2);addRegexToken('hh',match1to2,match2);addRegexToken('hmm',match3to4);addRegexToken('hmmss',match5to6);addRegexToken('Hmm',match3to4);addRegexToken('Hmmss',match5to6);addParseToken(['H','HH'],HOUR);addParseToken(['a','A'],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(['h','hh'],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});addParseToken('hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true;});addParseToken('hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true;});addParseToken('Hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));});addParseToken('Hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));});function localeIsPM(input){return((input+'').toLowerCase().charAt(0)==='p');}
var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?'pm':'PM';}else{return isLower?'am':'AM';}}
var getSetHour=makeGetSet('Hours',true);var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,ordinalParse:defaultOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={};var localeFamilies={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key;}
function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale){return locale;}
if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break;}
j--;}
i++;}
return null;}
function loadLocale(name){var oldLocale=null;if(!locales[name]&&(typeof module!=='undefined')&&module&&module.exports){try{oldLocale=globalLocale._abbr;require('./locale/'+name);getSetGlobalLocale(oldLocale);}catch(e){}}
return locales[name];}
function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key);}
else{data=defineLocale(key,values);}
if(data){globalLocale=data;}}
return globalLocale._abbr;}
function defineLocale(name,config){if(config!==null){var parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple('defineLocaleOverride','use moment.updateLocale(localeName, config) to change '+'an existing locale. moment.defineLocale(localeName, '+'config) should only be used for creating a new locale '+'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');parentConfig=locales[name]._config;}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config;}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[];}
localeFamilies[config.parentLocale].push({name:name,config:config});return null;}}
locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config);});}
getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}
function updateLocale(name,config){if(config!=null){var locale,parentConfig=baseConfig;if(locales[name]!=null){parentConfig=locales[name]._config;}
config=mergeConfigs(parentConfig,config);locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;getSetGlobalLocale(name);}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale;}else if(locales[name]!=null){delete locales[name];}}}
return locales[name];}
function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}
if(!key){return globalLocale;}
if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}
key=[key];}
return chooseLocale(key);}
function listLocales(){return keys$1(locales);}
function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}
if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK;}
if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY;}
getParsingFlags(m).overflow=overflow;}
return m;}
var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d\d-\d\d/],['YYYY-MM-DD',/\d{4}-\d\d-\d\d/],['GGGG-[W]WW-E',/\d{4}-W\d\d-\d/],['GGGG-[W]WW',/\d{4}-W\d\d/,false],['YYYY-DDD',/\d{4}-\d{3}/],['YYYY-MM',/\d{4}-\d\d/,false],['YYYYYYMMDD',/[+-]\d{10}/],['YYYYMMDD',/\d{8}/],['GGGG[W]WWE',/\d{4}W\d{3}/],['GGGG[W]WW',/\d{4}W\d{2}/,false],['YYYYDDD',/\d{7}/]];var isoTimes=[['HH:mm:ss.SSSS',/\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss,SSSS',/\d\d:\d\d:\d\d,\d+/],['HH:mm:ss',/\d\d:\d\d:\d\d/],['HH:mm',/\d\d:\d\d/],['HHmmss.SSSS',/\d\d\d\d\d\d\.\d+/],['HHmmss,SSSS',/\d\d\d\d\d\d,\d+/],['HHmmss',/\d\d\d\d\d\d/],['HHmm',/\d\d\d\d/],['HH',/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break;}}
if(dateFormat==null){config._isValid=false;return;}
if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||' ')+isoTimes[i][0];break;}}
if(timeFormat==null){config._isValid=false;return;}}
if(!allowTime&&timeFormat!=null){config._isValid=false;return;}
if(match[4]){if(tzRegex.exec(match[4])){tzFormat='Z';}else{config._isValid=false;return;}}
config._f=dateFormat+(timeFormat||'')+(tzFormat||'');configFromStringAndFormat(config);}else{config._isValid=false;}}
function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}
configFromISO(config);if(config._isValid===false){delete config._isValid;hooks.createFromInputFallback(config);}}
hooks.createFromInputFallback=deprecate('value provided is not in a recognized ISO format. moment construction falls back to js Date(), '+'which is not reliable across all browsers and versions. Non ISO date formats are '+'discouraged and will be removed in an upcoming major release. Please refer to '+'http://momentjs.com/guides/#/warnings/js-date/ for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''));});function defaults(a,b,c){if(a!=null){return a;}
if(b!=null){return b;}
return c;}
function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()];}
return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()];}
function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return;}
currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}
if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true;}
date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}
for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}
for(;i<7;i++){config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i];}
if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}
config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}
if(config._nextDay){config._a[HOUR]=24;}}
function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true;}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true;}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true;}}else{weekday=dow;}}
if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true;}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true;}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}}
hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return;}
config._a=[];getParsingFlags(config).empty=true;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}
string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}
if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}
else{getParsingFlags(config).unusedTokens.push(token);}
addTimeToArrayFromToken(token,parsedInput,config);}
else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}
getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}
if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}
getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}
function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}
if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}
if(!isPm&&hour===12){hour=0;}
return hour;}else{return hour;}}
function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}
for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}
tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue;}
currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}
extend(config,bestMoment||tempConfig);}
function configFromObject(config){if(config._d){return;}
var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10);});configFromArray(config);}
function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,'d');res._nextDay=undefined;}
return res;}
function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||(format===undefined&&input==='')){return createInvalid({nullInput:true});}
if(typeof input==='string'){config._i=input=config._locale.preparse(input);}
if(isMoment(input)){return new Moment(checkOverflow(input));}else if(isDate(input)){config._d=input;}else if(isArray(format)){configFromStringAndArray(config);}else if(format){configFromStringAndFormat(config);}else{configFromInput(config);}
if(!isValid(config)){config._d=null;}
return config;}
function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date(hooks.now());}else if(isDate(input)){config._d=new Date(input.valueOf());}else if(typeof input==='string'){configFromString(config);}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(typeof(input)==='object'){configFromObject(config);}else if(isNumber(input)){config._d=new Date(input);}else{hooks.createFromInputFallback(config);}}
function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(locale===true||locale===false){strict=locale;locale=undefined;}
if((isObject(input)&&isObjectEmpty(input))||(isArray(input)&&input.length===0)){input=undefined;}
c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}
function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}
var prototypeMin=deprecate('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other;}else{return createInvalid();}});var prototypeMax=deprecate('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other;}else{return createInvalid();}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}
if(!moments.length){return createLocal();}
res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i];}}
return res;}
function min(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args);}
function max(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args);}
var now=function(){return Date.now?Date.now():+(new Date());};function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*1000*60*60;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=getLocale();this._bubble();}
function isDuration(obj){return obj instanceof Duration;}
function absRound(number){if(number<0){return Math.round(-1*number)*-1;}else{return Math.round(number);}}
function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign='+';if(offset<0){offset=-offset;sign='-';}
return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~(offset)%60,2);});}
offset('Z',':');offset('ZZ','');addRegexToken('Z',matchShortOffset);addRegexToken('ZZ',matchShortOffset);addParseToken(['Z','ZZ'],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||'').match(matcher);if(matches===null){return null;}
var chunk=matches[matches.length-1]||[];var parts=(chunk+'').match(chunkOffset)||['-',0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==='+'?minutes:-minutes;}
function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res;}else{return createLocal(input).local();}}
function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15;}
hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN;}
if(input!=null){if(typeof input==='string'){input=offsetFromString(matchShortOffset,input);if(input===null){return this;}}else if(Math.abs(input)<16){input=input*60;}
if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}
this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,'m');}
if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,'m'),1,false);}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null;}}
return this;}else{return this._isUTC?offset:getDateOffset(this);}}
function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=='string'){input=-input;}
this.utcOffset(input,keepLocalTime);return this;}else{return-this.utcOffset();}}
function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}
function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),'m');}}
return this;}
function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm);}else if(typeof this._i==='string'){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone);}
else{this.utcOffset(0,true);}}
return this;}
function hasAlignedHourOffset(input){if(!this.isValid()){return false;}
input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0;}
function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}
function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted;}
var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0;}else{this._isDSTShifted=false;}
return this._isDSTShifted;}
function isLocal(){return this.isValid()?!this._isUTC:false;}
function isUtcOffset(){return this.isValid()?this._isUTC:false;}
function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false;}
var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else if(isNumber(input)){duration={};if(key){duration[key]=input;}else{duration.milliseconds=input;}}else if(!!(match=aspNetRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1000))*sign};}else if(!!(match=isoRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)};}else if(duration==null){duration={};}else if(typeof duration==='object'&&('from'in duration||'to'in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}
ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,'_locale')){ret._locale=input._locale;}
return ret;}
createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign;}
function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other)){--res.months;}
res.milliseconds=+other-+(base.clone().add(res.months,'M'));return res;}
function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0};}
other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}
return res;}
function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period). '+'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');tmp=val;val=period;period=tmp;}
val=typeof val==='string'?+val:val;dur=createDuration(val,period);addSubtract(this,dur,direction);return this;};}
function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return;}
updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding);}
if(days){set$1(mom,'Date',get(mom,'Date')+days*isAdding);}
if(months){setMonth(mom,get(mom,'Month')+months*isAdding);}
if(updateOffset){hooks.updateOffset(mom,days||months);}}
var add=createAdder(1,'add');var subtract=createAdder(-1,'subtract');function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,'days',true);return diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';}
function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf('day'),format=hooks.calendarFormat(this,sod)||'sameElse';var output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)));}
function clone(){return new Moment(this);}
function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(!isUndefined(units)?units:'millisecond');if(units==='millisecond'){return this.valueOf()>localInput.valueOf();}else{return localInput.valueOf()<this.clone().startOf(units).valueOf();}}
function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(!isUndefined(units)?units:'millisecond');if(units==='millisecond'){return this.valueOf()<localInput.valueOf();}else{return this.clone().endOf(units).valueOf()<localInput.valueOf();}}
function isBetween(from,to,units,inclusivity){inclusivity=inclusivity||'()';return(inclusivity[0]==='('?this.isAfter(from,units):!this.isBefore(from,units))&&(inclusivity[1]===')'?this.isBefore(to,units):!this.isAfter(to,units));}
function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false;}
units=normalizeUnits(units||'millisecond');if(units==='millisecond'){return this.valueOf()===localInput.valueOf();}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf();}}
function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units);}
function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units);}
function diff(input,units,asFloat){var that,zoneDelta,delta,output;if(!this.isValid()){return NaN;}
that=cloneWithOffset(input,this);if(!that.isValid()){return NaN;}
zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);if(units==='year'||units==='month'||units==='quarter'){output=monthDiff(this,that);if(units==='quarter'){output=output/3;}else if(units==='year'){output=output/12;}}else{delta=this-that;output=units==='second'?delta/1e3:units==='minute'?delta/6e4:units==='hour'?delta/36e5:units==='day'?(delta-zoneDelta)/864e5:units==='week'?(delta-zoneDelta)/6048e5:delta;}
return asFloat?output:absFloor(output);}
function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor);}
return-(wholeMonthDiff+adjust)||0;}
hooks.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';hooks.defaultFormatUtc='YYYY-MM-DDTHH:mm:ss[Z]';function toString(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}
function toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if(isFunction(Date.prototype.toISOString)){return this.toDate().toISOString();}else{return formatMoment(m,'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}}else{return formatMoment(m,'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}}
function inspect(){if(!this.isValid()){return'moment.invalid(/* '+this._i+' */)';}
var func='moment';var zone='';if(!this.isLocal()){func=this.utcOffset()===0?'moment.utc':'moment.parseZone';zone='Z';}
var prefix='['+func+'("]';var year=(0<this.year()&&this.year()<=9999)?'YYYY':'YYYYYY';var datetime='-MM-DD[T]HH:mm:ss.SSS';var suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix);}
function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat;}
var output=formatMoment(this,inputString);return this.localeData().postformat(output);}
function from(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix);}
function to(time,withoutSuffix){if(this.isValid()&&((isMoment(time)&&time.isValid())||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}
function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix);}
function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}
return this;}}
var lang=deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}
function startOf(units){units=normalizeUnits(units);switch(units){case'year':this.month(0);case'quarter':case'month':this.date(1);case'week':case'isoWeek':case'day':case'date':this.hours(0);case'hour':this.minutes(0);case'minute':this.seconds(0);case'second':this.milliseconds(0);}
if(units==='week'){this.weekday(0);}
if(units==='isoWeek'){this.isoWeekday(1);}
if(units==='quarter'){this.month(Math.floor(this.month()/3)*3);}
return this;}
function endOf(units){units=normalizeUnits(units);if(units===undefined||units==='millisecond'){return this;}
if(units==='date'){units='day';}
return this.startOf(units).add(1,(units==='isoWeek'?'week':units)).subtract(1,'ms');}
function valueOf(){return this._d.valueOf()-((this._offset||0)*60000);}
function unix(){return Math.floor(this.valueOf()/1000);}
function toDate(){return new Date(this.valueOf());}
function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}
function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()};}
function toJSON(){return this.isValid()?this.toISOString():null;}
function isValid$1(){return isValid(this);}
function parsingFlags(){return extend({},getParsingFlags(this));}
function invalidAt(){return getParsingFlags(this).overflow;}
function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict};}
addFormatToken(0,['gg',2],0,function(){return this.weekYear()%100;});addFormatToken(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}
addWeekYearFormatToken('gggg','weekYear');addWeekYearFormatToken('ggggg','weekYear');addWeekYearFormatToken('GGGG','isoWeekYear');addWeekYearFormatToken('GGGGG','isoWeekYear');addUnitAlias('weekYear','gg');addUnitAlias('isoWeekYear','GG');addUnitPriority('weekYear',1);addUnitPriority('isoWeekYear',1);addRegexToken('G',matchSigned);addRegexToken('g',matchSigned);addRegexToken('GG',match1to2,match2);addRegexToken('gg',match1to2,match2);addRegexToken('GGGG',match1to4,match4);addRegexToken('gggg',match1to4,match4);addRegexToken('GGGGG',match1to6,match6);addRegexToken('ggggg',match1to6,match6);addWeekParseToken(['gggg','ggggg','GGGG','GGGGG'],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(['gg','GG'],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input);});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy);}
function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4);}
function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}
function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}
function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year;}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget;}
return setWeekAll.call(this,input,week,weekday,dow,doy);}}
function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this;}
addFormatToken('Q',0,'Qo','quarter');addUnitAlias('quarter','Q');addUnitPriority('quarter',7);addRegexToken('Q',match1);addParseToken('Q',function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}
addFormatToken('D',['DD',2],'Do','date');addUnitAlias('date','D');addUnitPriority('date',9);addRegexToken('D',match1to2);addRegexToken('DD',match1to2,match2);addRegexToken('Do',function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient;});addParseToken(['D','DD'],DATE);addParseToken('Do',function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10);});var getSetDayOfMonth=makeGetSet('Date',true);addFormatToken('DDD',['DDDD',3],'DDDo','dayOfYear');addUnitAlias('dayOfYear','DDD');addUnitPriority('dayOfYear',4);addRegexToken('DDD',match1to3);addRegexToken('DDDD',match3);addParseToken(['DDD','DDDD'],function(input,array,config){config._dayOfYear=toInt(input);});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add((input-dayOfYear),'d');}
addFormatToken('m',['mm',2],0,'minute');addUnitAlias('minute','m');addUnitPriority('minute',14);addRegexToken('m',match1to2);addRegexToken('mm',match1to2,match2);addParseToken(['m','mm'],MINUTE);var getSetMinute=makeGetSet('Minutes',false);addFormatToken('s',['ss',2],0,'second');addUnitAlias('second','s');addUnitPriority('second',15);addRegexToken('s',match1to2);addRegexToken('ss',match1to2,match2);addParseToken(['s','ss'],SECOND);var getSetSecond=makeGetSet('Seconds',false);addFormatToken('S',0,0,function(){return~~(this.millisecond()/100);});addFormatToken(0,['SS',2],0,function(){return~~(this.millisecond()/10);});addFormatToken(0,['SSS',3],0,'millisecond');addFormatToken(0,['SSSS',4],0,function(){return this.millisecond()*10;});addFormatToken(0,['SSSSS',5],0,function(){return this.millisecond()*100;});addFormatToken(0,['SSSSSS',6],0,function(){return this.millisecond()*1000;});addFormatToken(0,['SSSSSSS',7],0,function(){return this.millisecond()*10000;});addFormatToken(0,['SSSSSSSS',8],0,function(){return this.millisecond()*100000;});addFormatToken(0,['SSSSSSSSS',9],0,function(){return this.millisecond()*1000000;});addUnitAlias('millisecond','ms');addUnitPriority('millisecond',16);addRegexToken('S',match1to3,match1);addRegexToken('SS',match1to3,match2);addRegexToken('SSS',match1to3,match3);var token;for(token='SSSS';token.length<=9;token+='S'){addRegexToken(token,matchUnsigned);}
function parseMs(input,array){array[MILLISECOND]=toInt(('0.'+input)*1000);}
for(token='S';token.length<=9;token+='S'){addParseToken(token,parseMs);}
var getSetMillisecond=makeGetSet('Milliseconds',false);addFormatToken('z',0,0,'zoneAbbr');addFormatToken('zz',0,0,'zoneName');function getZoneAbbr(){return this._isUTC?'UTC':'';}
function getZoneName(){return this._isUTC?'Coordinated Universal Time':'';}
var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$1;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate('dates accessor is deprecated. Use date instead.',getSetDayOfMonth);proto.months=deprecate('months accessor is deprecated. Use month instead',getSetMonth);proto.years=deprecate('years accessor is deprecated. Use year instead',getSetYear);proto.zone=deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',getSetZone);proto.isDSTShifted=deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1000);}
function createInZone(){return createLocal.apply(null,arguments).parseZone();}
function preParsePostFormat(string){return string;}
var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale();var utc=createUTC().set(setter,index);return locale[field](utc,format);}
function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined;}
format=format||'';if(index!=null){return get$1(format,index,field,'month');}
var i;var out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,'month');}
return out;}
function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==='boolean'){if(isNumber(format)){index=format;format=undefined;}
format=format||'';}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined;}
format=format||'';}
var locale=getLocale(),shift=localeSorted?locale._week.dow:0;if(index!=null){return get$1(format,(index+shift)%7,field,'day');}
var i;var out=[];for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,'day');}
return out;}
function listMonths(format,index){return listMonthsImpl(format,index,'months');}
function listMonthsShort(format,index){return listMonthsImpl(format,index,'monthsShort');}
function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdays');}
function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdaysShort');}
function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdaysMin');}
getSetGlobalLocale('en',{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return number+output;}});hooks.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',getSetGlobalLocale);hooks.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}
function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}
function add$1(input,value){return addSubtract$1(this,input,value,1);}
function subtract$1(input,value){return addSubtract$1(this,input,value,-1);}
function absCeil(number){if(number<0){return Math.floor(number);}else{return Math.ceil(number);}}
function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!((milliseconds>=0&&days>=0&&months>=0)||(milliseconds<=0&&days<=0&&months<=0))){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0;}
data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}
function daysToMonths(days){return days*4800/146097;}
function monthsToDays(months){return months*146097/4800;}
function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==='month'||units==='year'){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==='month'?months:months/12;}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case'week':return days/7+milliseconds/6048e5;case'day':return days+milliseconds/864e5;case'hour':return days*24+milliseconds/36e5;case'minute':return days*1440+milliseconds/6e4;case'second':return days*86400+milliseconds/1000;case'millisecond':return Math.floor(days*864e5)+milliseconds;default:throw new Error('Unknown unit '+units);}}}
function valueOf$1(){return(this._milliseconds+this._days*864e5+(this._months%12)*2592e6+toInt(this._months/12)*31536e6);}
function makeAs(alias){return function(){return this.as(alias);};}
var asMilliseconds=makeAs('ms');var asSeconds=makeAs('s');var asMinutes=makeAs('m');var asHours=makeAs('h');var asDays=makeAs('d');var asWeeks=makeAs('w');var asMonths=makeAs('M');var asYears=makeAs('y');function get$2(units){units=normalizeUnits(units);return this[units+'s']();}
function makeGetter(name){return function(){return this._data[name];};}
var milliseconds=makeGetter('milliseconds');var seconds=makeGetter('seconds');var minutes=makeGetter('minutes');var hours=makeGetter('hours');var days=makeGetter('days');var months=makeGetter('months');var years=makeGetter('years');function weeks(){return absFloor(this.days()/7);}
var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}
function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs();var seconds=round(duration.as('s'));var minutes=round(duration.as('m'));var hours=round(duration.as('h'));var days=round(duration.as('d'));var months=round(duration.as('M'));var years=round(duration.as('y'));var a=seconds<thresholds.s&&['s',seconds]||minutes<=1&&['m']||minutes<thresholds.m&&['mm',minutes]||hours<=1&&['h']||hours<thresholds.h&&['hh',hours]||days<=1&&['d']||days<thresholds.d&&['dd',days]||months<=1&&['M']||months<thresholds.M&&['MM',months]||years<=1&&['y']||['yy',years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}
function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round;}
if(typeof(roundingFunction)==='function'){round=roundingFunction;return true;}
return false;}
function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}
if(limit===undefined){return thresholds[threshold];}
thresholds[threshold]=limit;return true;}
function humanize(withSuffix){var locale=this.localeData();var output=relativeTime$1(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output);}
return locale.postformat(output);}
var abs$1=Math.abs;function toISOString$1(){var seconds=abs$1(this._milliseconds)/1000;var days=abs$1(this._days);var months=abs$1(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds;var total=this.asSeconds();if(!total){return'P0D';}
return(total<0?'-':'')+'P'+(Y?Y+'Y':'')+(M?M+'M':'')+(D?D+'D':'')+((h||m||s)?'T':'')+(h?h+'H':'')+(m?m+'M':'')+(s?s+'S':'');}
var proto$2=Duration.prototype;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',toISOString$1);proto$2.lang=lang;addFormatToken('X',0,0,'unix');addFormatToken('x',0,0,'valueOf');addRegexToken('x',matchSigned);addRegexToken('X',matchTimestamp);addParseToken('X',function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken('x',function(input,array,config){config._d=new Date(toInt(input));});hooks.version='2.17.1';setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;return hooks;})));;(function(factory){if(typeof define==='function'&&define.amd){define([],factory);}else if(typeof exports==='object'){module.exports=factory();}else{window.noUiSlider=factory();}}(function(){'use strict';function unique(array){return array.filter(function(a){return!this[a]?this[a]=true:false;},{});}
function closest(value,to){return Math.round(value/to)*to;}
function offset(elem){var rect=elem.getBoundingClientRect(),doc=elem.ownerDocument,docElem=doc.documentElement,pageOffset=getPageOffset();if(/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)){pageOffset.x=0;}
return{top:rect.top+pageOffset.y-docElem.clientTop,left:rect.left+pageOffset.x-docElem.clientLeft};}
function isNumeric(a){return typeof a==='number'&&!isNaN(a)&&isFinite(a);}
function addClassFor(element,className,duration){addClass(element,className);setTimeout(function(){removeClass(element,className);},duration);}
function limit(a){return Math.max(Math.min(a,100),0);}
function asArray(a){return Array.isArray(a)?a:[a];}
function countDecimals(numStr){var pieces=numStr.split(".");return pieces.length>1?pieces[1].length:0;}
function addClass(el,className){if(el.classList){el.classList.add(className);}else{el.className+=' '+className;}}
function removeClass(el,className){if(el.classList){el.classList.remove(className);}else{el.className=el.className.replace(new RegExp('(^|\\b)'+className.split(' ').join('|')+'(\\b|$)','gi'),' ');}}
function hasClass(el,className){return el.classList?el.classList.contains(className):new RegExp('\\b'+className+'\\b').test(el.className);}
function getPageOffset(){var supportPageOffset=window.pageXOffset!==undefined,isCSS1Compat=((document.compatMode||"")==="CSS1Compat"),x=supportPageOffset?window.pageXOffset:isCSS1Compat?document.documentElement.scrollLeft:document.body.scrollLeft,y=supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop;return{x:x,y:y};}
function getActions(){return window.navigator.pointerEnabled?{start:'pointerdown',move:'pointermove',end:'pointerup'}:window.navigator.msPointerEnabled?{start:'MSPointerDown',move:'MSPointerMove',end:'MSPointerUp'}:{start:'mousedown touchstart',move:'mousemove touchmove',end:'mouseup touchend'};}
function subRangeRatio(pa,pb){return(100/(pb-pa));}
function fromPercentage(range,value){return(value*100)/(range[1]-range[0]);}
function toPercentage(range,value){return fromPercentage(range,range[0]<0?value+Math.abs(range[0]):value-range[0]);}
function isPercentage(range,value){return((value*(range[1]-range[0]))/100)+range[0];}
function getJ(value,arr){var j=1;while(value>=arr[j]){j+=1;}
return j;}
function toStepping(xVal,xPct,value){if(value>=xVal.slice(-1)[0]){return 100;}
var j=getJ(value,xVal),va,vb,pa,pb;va=xVal[j-1];vb=xVal[j];pa=xPct[j-1];pb=xPct[j];return pa+(toPercentage([va,vb],value)/subRangeRatio(pa,pb));}
function fromStepping(xVal,xPct,value){if(value>=100){return xVal.slice(-1)[0];}
var j=getJ(value,xPct),va,vb,pa,pb;va=xVal[j-1];vb=xVal[j];pa=xPct[j-1];pb=xPct[j];return isPercentage([va,vb],(value-pa)*subRangeRatio(pa,pb));}
function getStep(xPct,xSteps,snap,value){if(value===100){return value;}
var j=getJ(value,xPct),a,b;if(snap){a=xPct[j-1];b=xPct[j];if((value-a)>((b-a)/2)){return b;}
return a;}
if(!xSteps[j-1]){return value;}
return xPct[j-1]+closest(value-xPct[j-1],xSteps[j-1]);}
function handleEntryPoint(index,value,that){var percentage;if(typeof value==="number"){value=[value];}
if(Object.prototype.toString.call(value)!=='[object Array]'){throw new Error("noUiSlider: 'range' contains invalid value.");}
if(index==='min'){percentage=0;}else if(index==='max'){percentage=100;}else{percentage=parseFloat(index);}
if(!isNumeric(percentage)||!isNumeric(value[0])){throw new Error("noUiSlider: 'range' value isn't numeric.");}
that.xPct.push(percentage);that.xVal.push(value[0]);if(!percentage){if(!isNaN(value[1])){that.xSteps[0]=value[1];}}else{that.xSteps.push(isNaN(value[1])?false:value[1]);}}
function handleStepPoint(i,n,that){if(!n){return true;}
that.xSteps[i]=fromPercentage([that.xVal[i],that.xVal[i+1]],n)/subRangeRatio(that.xPct[i],that.xPct[i+1]);}
function Spectrum(entry,snap,direction,singleStep){this.xPct=[];this.xVal=[];this.xSteps=[singleStep||false];this.xNumSteps=[false];this.snap=snap;this.direction=direction;var index,ordered=[];for(index in entry){if(entry.hasOwnProperty(index)){ordered.push([entry[index],index]);}}
if(ordered.length&&typeof ordered[0][0]==="object"){ordered.sort(function(a,b){return a[0][0]-b[0][0];});}else{ordered.sort(function(a,b){return a[0]-b[0];});}
for(index=0;index<ordered.length;index++){handleEntryPoint(ordered[index][1],ordered[index][0],this);}
this.xNumSteps=this.xSteps.slice(0);for(index=0;index<this.xNumSteps.length;index++){handleStepPoint(index,this.xNumSteps[index],this);}}
Spectrum.prototype.getMargin=function(value){return this.xPct.length===2?fromPercentage(this.xVal,value):false;};Spectrum.prototype.toStepping=function(value){value=toStepping(this.xVal,this.xPct,value);if(this.direction){value=100-value;}
return value;};Spectrum.prototype.fromStepping=function(value){if(this.direction){value=100-value;}
return fromStepping(this.xVal,this.xPct,value);};Spectrum.prototype.getStep=function(value){if(this.direction){value=100-value;}
value=getStep(this.xPct,this.xSteps,this.snap,value);if(this.direction){value=100-value;}
return value;};Spectrum.prototype.getApplicableStep=function(value){var j=getJ(value,this.xPct),offset=value===100?2:1;return[this.xNumSteps[j-2],this.xVal[j-offset],this.xNumSteps[j-offset]];};Spectrum.prototype.convert=function(value){return this.getStep(this.toStepping(value));};var defaultFormatter={'to':function(value){return value!==undefined&&value.toFixed(2);},'from':Number};function testStep(parsed,entry){if(!isNumeric(entry)){throw new Error("noUiSlider: 'step' is not numeric.");}
parsed.singleStep=entry;}
function testRange(parsed,entry){if(typeof entry!=='object'||Array.isArray(entry)){throw new Error("noUiSlider: 'range' is not an object.");}
if(entry.min===undefined||entry.max===undefined){throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");}
if(entry.min===entry.max){throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.");}
parsed.spectrum=new Spectrum(entry,parsed.snap,parsed.dir,parsed.singleStep);}
function testStart(parsed,entry){entry=asArray(entry);if(!Array.isArray(entry)||!entry.length||entry.length>2){throw new Error("noUiSlider: 'start' option is incorrect.");}
parsed.handles=entry.length;parsed.start=entry;}
function testSnap(parsed,entry){parsed.snap=entry;if(typeof entry!=='boolean'){throw new Error("noUiSlider: 'snap' option must be a boolean.");}}
function testAnimate(parsed,entry){parsed.animate=entry;if(typeof entry!=='boolean'){throw new Error("noUiSlider: 'animate' option must be a boolean.");}}
function testAnimationDuration(parsed,entry){parsed.animationDuration=entry;if(typeof entry!=='number'){throw new Error("noUiSlider: 'animationDuration' option must be a number.");}}
function testConnect(parsed,entry){if(entry==='lower'&&parsed.handles===1){parsed.connect=1;}else if(entry==='upper'&&parsed.handles===1){parsed.connect=2;}else if(entry===true&&parsed.handles===2){parsed.connect=3;}else if(entry===false){parsed.connect=0;}else{throw new Error("noUiSlider: 'connect' option doesn't match handle count.");}}
function testOrientation(parsed,entry){switch(entry){case'horizontal':parsed.ort=0;break;case'vertical':parsed.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.");}}
function testMargin(parsed,entry){if(!isNumeric(entry)){throw new Error("noUiSlider: 'margin' option must be numeric.");}
if(entry===0){return;}
parsed.margin=parsed.spectrum.getMargin(entry);if(!parsed.margin){throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.");}}
function testLimit(parsed,entry){if(!isNumeric(entry)){throw new Error("noUiSlider: 'limit' option must be numeric.");}
parsed.limit=parsed.spectrum.getMargin(entry);if(!parsed.limit){throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.");}}
function testDirection(parsed,entry){switch(entry){case'ltr':parsed.dir=0;break;case'rtl':parsed.dir=1;parsed.connect=[0,2,1,3][parsed.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.");}}
function testBehaviour(parsed,entry){if(typeof entry!=='string'){throw new Error("noUiSlider: 'behaviour' must be a string containing options.");}
var tap=entry.indexOf('tap')>=0,drag=entry.indexOf('drag')>=0,fixed=entry.indexOf('fixed')>=0,snap=entry.indexOf('snap')>=0,hover=entry.indexOf('hover')>=0;if(drag&&!parsed.connect){throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.");}
parsed.events={tap:tap||snap,drag:drag,fixed:fixed,snap:snap,hover:hover};}
function testTooltips(parsed,entry){var i;if(entry===false){return;}else if(entry===true){parsed.tooltips=[];for(i=0;i<parsed.handles;i++){parsed.tooltips.push(true);}}else{parsed.tooltips=asArray(entry);if(parsed.tooltips.length!==parsed.handles){throw new Error("noUiSlider: must pass a formatter for all handles.");}
parsed.tooltips.forEach(function(formatter){if(typeof formatter!=='boolean'&&(typeof formatter!=='object'||typeof formatter.to!=='function')){throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.");}});}}
function testFormat(parsed,entry){parsed.format=entry;if(typeof entry.to==='function'&&typeof entry.from==='function'){return true;}
throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");}
function testCssPrefix(parsed,entry){if(entry!==undefined&&typeof entry!=='string'&&entry!==false){throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");}
parsed.cssPrefix=entry;}
function testCssClasses(parsed,entry){if(entry!==undefined&&typeof entry!=='object'){throw new Error("noUiSlider: 'cssClasses' must be an object.");}
if(typeof parsed.cssPrefix==='string'){parsed.cssClasses={};for(var key in entry){if(!entry.hasOwnProperty(key)){continue;}
parsed.cssClasses[key]=parsed.cssPrefix+entry[key];}}else{parsed.cssClasses=entry;}}
function testOptions(options){var parsed={margin:0,limit:0,animate:true,animationDuration:300,format:defaultFormatter},tests;tests={'step':{r:false,t:testStep},'start':{r:true,t:testStart},'connect':{r:true,t:testConnect},'direction':{r:true,t:testDirection},'snap':{r:false,t:testSnap},'animate':{r:false,t:testAnimate},'animationDuration':{r:false,t:testAnimationDuration},'range':{r:true,t:testRange},'orientation':{r:false,t:testOrientation},'margin':{r:false,t:testMargin},'limit':{r:false,t:testLimit},'behaviour':{r:true,t:testBehaviour},'format':{r:false,t:testFormat},'tooltips':{r:false,t:testTooltips},'cssPrefix':{r:false,t:testCssPrefix},'cssClasses':{r:false,t:testCssClasses}};var defaults={'connect':false,'direction':'ltr','behaviour':'tap','orientation':'horizontal','cssPrefix':'noUi-','cssClasses':{target:'target',base:'base',origin:'origin',handle:'handle',handleLower:'handle-lower',handleUpper:'handle-upper',horizontal:'horizontal',vertical:'vertical',background:'background',connect:'connect',ltr:'ltr',rtl:'rtl',draggable:'draggable',drag:'state-drag',tap:'state-tap',active:'active',stacking:'stacking',tooltip:'tooltip',pips:'pips',pipsHorizontal:'pips-horizontal',pipsVertical:'pips-vertical',marker:'marker',markerHorizontal:'marker-horizontal',markerVertical:'marker-vertical',markerNormal:'marker-normal',markerLarge:'marker-large',markerSub:'marker-sub',value:'value',valueHorizontal:'value-horizontal',valueVertical:'value-vertical',valueNormal:'value-normal',valueLarge:'value-large',valueSub:'value-sub'}};Object.keys(tests).forEach(function(name){if(options[name]===undefined&&defaults[name]===undefined){if(tests[name].r){throw new Error("noUiSlider: '"+name+"' is required.");}
return true;}
tests[name].t(parsed,options[name]===undefined?defaults[name]:options[name]);});parsed.pips=options.pips;parsed.style=parsed.ort?'top':'left';return parsed;}
function closure(target,options,originalOptions){var
actions=getActions(),scope_Target=target,scope_Locations=[-1,-1],scope_Base,scope_Handles,scope_Spectrum=options.spectrum,scope_Values=[],scope_Events={},scope_Self;function getPositions(a,b,delimit){var c=a+b[0],d=a+b[1];if(delimit){if(c<0){d+=Math.abs(c);}
if(d>100){c-=(d-100);}
return[limit(c),limit(d)];}
return[c,d];}
function fixEvent(e,pageOffset){e.preventDefault();var touch=e.type.indexOf('touch')===0,mouse=e.type.indexOf('mouse')===0,pointer=e.type.indexOf('pointer')===0,x,y,event=e;if(e.type.indexOf('MSPointer')===0){pointer=true;}
if(touch){x=e.changedTouches[0].pageX;y=e.changedTouches[0].pageY;}
pageOffset=pageOffset||getPageOffset();if(mouse||pointer){x=e.clientX+pageOffset.x;y=e.clientY+pageOffset.y;}
event.pageOffset=pageOffset;event.points=[x,y];event.cursor=mouse||pointer;return event;}
function addHandle(direction,index){var origin=document.createElement('div'),handle=document.createElement('div'),classModifier=[options.cssClasses.handleLower,options.cssClasses.handleUpper];if(direction){classModifier.reverse();}
addClass(handle,options.cssClasses.handle);addClass(handle,classModifier[index]);addClass(origin,options.cssClasses.origin);origin.appendChild(handle);return origin;}
function addConnection(connect,target,handles){switch(connect){case 1:addClass(target,options.cssClasses.connect);addClass(handles[0],options.cssClasses.background);break;case 3:addClass(handles[1],options.cssClasses.background);case 2:addClass(handles[0],options.cssClasses.connect);case 0:addClass(target,options.cssClasses.background);break;}}
function addHandles(nrHandles,direction,base){var index,handles=[];for(index=0;index<nrHandles;index+=1){handles.push(base.appendChild(addHandle(direction,index)));}
return handles;}
function addSlider(direction,orientation,target){addClass(target,options.cssClasses.target);if(direction===0){addClass(target,options.cssClasses.ltr);}else{addClass(target,options.cssClasses.rtl);}
if(orientation===0){addClass(target,options.cssClasses.horizontal);}else{addClass(target,options.cssClasses.vertical);}
var div=document.createElement('div');addClass(div,options.cssClasses.base);target.appendChild(div);return div;}
function addTooltip(handle,index){if(!options.tooltips[index]){return false;}
var element=document.createElement('div');element.className=options.cssClasses.tooltip;return handle.firstChild.appendChild(element);}
function tooltips(){if(options.dir){options.tooltips.reverse();}
var tips=scope_Handles.map(addTooltip);if(options.dir){tips.reverse();options.tooltips.reverse();}
bindEvent('update',function(f,o,r){if(tips[o]){tips[o].innerHTML=options.tooltips[o]===true?f[o]:options.tooltips[o].to(r[o]);}});}
function getGroup(mode,values,stepped){if(mode==='range'||mode==='steps'){return scope_Spectrum.xVal;}
if(mode==='count'){var spread=(100/(values-1)),v,i=0;values=[];while((v=i++*spread)<=100){values.push(v);}
mode='positions';}
if(mode==='positions'){return values.map(function(value){return scope_Spectrum.fromStepping(stepped?scope_Spectrum.getStep(value):value);});}
if(mode==='values'){if(stepped){return values.map(function(value){return scope_Spectrum.fromStepping(scope_Spectrum.getStep(scope_Spectrum.toStepping(value)));});}
return values;}}
function generateSpread(density,mode,group){function safeIncrement(value,increment){return(value+increment).toFixed(7)/1;}
var originalSpectrumDirection=scope_Spectrum.direction,indexes={},firstInRange=scope_Spectrum.xVal[0],lastInRange=scope_Spectrum.xVal[scope_Spectrum.xVal.length-1],ignoreFirst=false,ignoreLast=false,prevPct=0;scope_Spectrum.direction=0;group=unique(group.slice().sort(function(a,b){return a-b;}));if(group[0]!==firstInRange){group.unshift(firstInRange);ignoreFirst=true;}
if(group[group.length-1]!==lastInRange){group.push(lastInRange);ignoreLast=true;}
group.forEach(function(current,index){var step,i,q,low=current,high=group[index+1],newPct,pctDifference,pctPos,type,steps,realSteps,stepsize;if(mode==='steps'){step=scope_Spectrum.xNumSteps[index];}
if(!step){step=high-low;}
if(low===false||high===undefined){return;}
for(i=low;i<=high;i=safeIncrement(i,step)){newPct=scope_Spectrum.toStepping(i);pctDifference=newPct-prevPct;steps=pctDifference/density;realSteps=Math.round(steps);stepsize=pctDifference/realSteps;for(q=1;q<=realSteps;q+=1){pctPos=prevPct+(q*stepsize);indexes[pctPos.toFixed(5)]=['x',0];}
type=(group.indexOf(i)>-1)?1:(mode==='steps'?2:0);if(!index&&ignoreFirst){type=0;}
if(!(i===high&&ignoreLast)){indexes[newPct.toFixed(5)]=[i,type];}
prevPct=newPct;}});scope_Spectrum.direction=originalSpectrumDirection;return indexes;}
function addMarking(spread,filterFunc,formatter){var element=document.createElement('div'),out='',valueSizeClasses=[options.cssClasses.valueNormal,options.cssClasses.valueLarge,options.cssClasses.valueSub],markerSizeClasses=[options.cssClasses.markerNormal,options.cssClasses.markerLarge,options.cssClasses.markerSub],valueOrientationClasses=[options.cssClasses.valueHorizontal,options.cssClasses.valueVertical],markerOrientationClasses=[options.cssClasses.markerHorizontal,options.cssClasses.markerVertical];addClass(element,options.cssClasses.pips);addClass(element,options.ort===0?options.cssClasses.pipsHorizontal:options.cssClasses.pipsVertical);function getClasses(type,source){var a=source===options.cssClasses.value,orientationClasses=a?valueOrientationClasses:markerOrientationClasses,sizeClasses=a?valueSizeClasses:markerSizeClasses;return source+' '+orientationClasses[options.ort]+' '+sizeClasses[type];}
function getTags(offset,source,values){return'class="'+getClasses(values[1],source)+'" style="'+options.style+': '+offset+'%"';}
function addSpread(offset,values){if(scope_Spectrum.direction){offset=100-offset;}
values[1]=(values[1]&&filterFunc)?filterFunc(values[0],values[1]):values[1];out+='<div '+getTags(offset,options.cssClasses.marker,values)+'></div>';if(values[1]){out+='<div '+getTags(offset,options.cssClasses.value,values)+'>'+formatter.to(values[0])+'</div>';}}
Object.keys(spread).forEach(function(a){addSpread(a,spread[a]);});element.innerHTML=out;return element;}
function pips(grid){var mode=grid.mode,density=grid.density||1,filter=grid.filter||false,values=grid.values||false,stepped=grid.stepped||false,group=getGroup(mode,values,stepped),spread=generateSpread(density,mode,group),format=grid.format||{to:Math.round};return scope_Target.appendChild(addMarking(spread,filter,format));}
function baseSize(){var rect=scope_Base.getBoundingClientRect(),alt='offset'+['Width','Height'][options.ort];return options.ort===0?(rect.width||scope_Base[alt]):(rect.height||scope_Base[alt]);}
function fireEvent(event,handleNumber,tap){var i;for(i=0;i<options.handles;i++){if(scope_Locations[i]===-1){return;}}
if(handleNumber!==undefined&&options.handles!==1){handleNumber=Math.abs(handleNumber-options.dir);}
Object.keys(scope_Events).forEach(function(targetEvent){var eventType=targetEvent.split('.')[0];if(event===eventType){scope_Events[targetEvent].forEach(function(callback){callback.call(scope_Self,asArray(valueGet()),handleNumber,asArray(inSliderOrder(Array.prototype.slice.call(scope_Values))),tap||false,scope_Locations);});}});}
function inSliderOrder(values){if(values.length===1){return values[0];}
if(options.dir){return values.reverse();}
return values;}
function attach(events,element,callback,data){var method=function(e){if(scope_Target.hasAttribute('disabled')){return false;}
if(hasClass(scope_Target,options.cssClasses.tap)){return false;}
e=fixEvent(e,data.pageOffset);if(events===actions.start&&e.buttons!==undefined&&e.buttons>1){return false;}
if(data.hover&&e.buttons){return false;}
e.calcPoint=e.points[options.ort];callback(e,data);},methods=[];events.split(' ').forEach(function(eventName){element.addEventListener(eventName,method,false);methods.push([eventName,method]);});return methods;}
function move(event,data){if(navigator.appVersion.indexOf("MSIE 9")===-1&&event.buttons===0&&data.buttonsProperty!==0){return end(event,data);}
var handles=data.handles||scope_Handles,positions,state=false,proposal=((event.calcPoint-data.start)*100)/data.baseSize,handleNumber=handles[0]===scope_Handles[0]?0:1,i;positions=getPositions(proposal,data.positions,handles.length>1);state=setHandle(handles[0],positions[handleNumber],handles.length===1);if(handles.length>1){state=setHandle(handles[1],positions[handleNumber?0:1],false)||state;if(state){for(i=0;i<data.handles.length;i++){fireEvent('slide',i);}}}else if(state){fireEvent('slide',handleNumber);}}
function end(event,data){var active=scope_Base.querySelector('.'+options.cssClasses.active),handleNumber=data.handles[0]===scope_Handles[0]?0:1;if(active!==null){removeClass(active,options.cssClasses.active);}
if(event.cursor){document.body.style.cursor='';document.body.removeEventListener('selectstart',document.body.noUiListener);}
var d=document.documentElement;d.noUiListeners.forEach(function(c){d.removeEventListener(c[0],c[1]);});removeClass(scope_Target,options.cssClasses.drag);fireEvent('set',handleNumber);fireEvent('change',handleNumber);if(data.handleNumber!==undefined){fireEvent('end',data.handleNumber);}}
function documentLeave(event,data){if(event.type==="mouseout"&&event.target.nodeName==="HTML"&&event.relatedTarget===null){end(event,data);}}
function start(event,data){var d=document.documentElement;if(data.handles.length===1){if(data.handles[0].hasAttribute('disabled')){return false;}
addClass(data.handles[0].children[0],options.cssClasses.active);}
event.preventDefault();event.stopPropagation();var moveEvent=attach(actions.move,d,move,{start:event.calcPoint,baseSize:baseSize(),pageOffset:event.pageOffset,handles:data.handles,handleNumber:data.handleNumber,buttonsProperty:event.buttons,positions:[scope_Locations[0],scope_Locations[scope_Handles.length-1]]}),endEvent=attach(actions.end,d,end,{handles:data.handles,handleNumber:data.handleNumber});var outEvent=attach("mouseout",d,documentLeave,{handles:data.handles,handleNumber:data.handleNumber});d.noUiListeners=moveEvent.concat(endEvent,outEvent);if(event.cursor){document.body.style.cursor=getComputedStyle(event.target).cursor;if(scope_Handles.length>1){addClass(scope_Target,options.cssClasses.drag);}
var f=function(){return false;};document.body.noUiListener=f;document.body.addEventListener('selectstart',f,false);}
if(data.handleNumber!==undefined){fireEvent('start',data.handleNumber);}}
function tap(event){var location=event.calcPoint,total=0,handleNumber,to;event.stopPropagation();scope_Handles.forEach(function(a){total+=offset(a)[options.style];});handleNumber=(location<total/2||scope_Handles.length===1)?0:1;if(scope_Handles[handleNumber].hasAttribute('disabled')){handleNumber=handleNumber?0:1;}
location-=offset(scope_Base)[options.style];to=(location*100)/baseSize();if(!options.events.snap){addClassFor(scope_Target,options.cssClasses.tap,options.animationDuration);}
if(scope_Handles[handleNumber].hasAttribute('disabled')){return false;}
setHandle(scope_Handles[handleNumber],to);fireEvent('slide',handleNumber,true);fireEvent('set',handleNumber,true);fireEvent('change',handleNumber,true);if(options.events.snap){start(event,{handles:[scope_Handles[handleNumber]]});}}
function hover(event){var location=event.calcPoint-offset(scope_Base)[options.style],to=scope_Spectrum.getStep((location*100)/baseSize()),value=scope_Spectrum.fromStepping(to);Object.keys(scope_Events).forEach(function(targetEvent){if('hover'===targetEvent.split('.')[0]){scope_Events[targetEvent].forEach(function(callback){callback.call(scope_Self,value);});}});}
function events(behaviour){if(!behaviour.fixed){scope_Handles.forEach(function(handle,index){attach(actions.start,handle.children[0],start,{handles:[handle],handleNumber:index});});}
if(behaviour.tap){attach(actions.start,scope_Base,tap,{handles:scope_Handles});}
if(behaviour.hover){attach(actions.move,scope_Base,hover,{hover:true});}
if(behaviour.drag){var drag=[scope_Base.querySelector('.'+options.cssClasses.connect)];addClass(drag[0],options.cssClasses.draggable);if(behaviour.fixed){drag.push(scope_Handles[(drag[0]===scope_Handles[0]?1:0)].children[0]);}
drag.forEach(function(element){attach(actions.start,element,start,{handles:scope_Handles});});}}
function setHandle(handle,to,noLimitOption){var trigger=handle!==scope_Handles[0]?1:0,lowerMargin=scope_Locations[0]+options.margin,upperMargin=scope_Locations[1]-options.margin,lowerLimit=scope_Locations[0]+options.limit,upperLimit=scope_Locations[1]-options.limit;if(scope_Handles.length>1){to=trigger?Math.max(to,lowerMargin):Math.min(to,upperMargin);}
if(noLimitOption!==false&&options.limit&&scope_Handles.length>1){to=trigger?Math.min(to,lowerLimit):Math.max(to,upperLimit);}
to=scope_Spectrum.getStep(to);to=limit(to);if(to===scope_Locations[trigger]){return false;}
if(window.requestAnimationFrame){window.requestAnimationFrame(function(){handle.style[options.style]=to+'%';});}else{handle.style[options.style]=to+'%';}
if(!handle.previousSibling){removeClass(handle,options.cssClasses.stacking);if(to>50){addClass(handle,options.cssClasses.stacking);}}
scope_Locations[trigger]=to;scope_Values[trigger]=scope_Spectrum.fromStepping(to);fireEvent('update',trigger);return true;}
function setValues(count,values){var i,trigger,to;if(options.limit){count+=1;}
for(i=0;i<count;i+=1){trigger=i%2;to=values[trigger];if(to!==null&&to!==false){if(typeof to==='number'){to=String(to);}
to=options.format.from(to);if(to===false||isNaN(to)||setHandle(scope_Handles[trigger],scope_Spectrum.toStepping(to),i===(3-options.dir))===false){fireEvent('update',trigger);}}}}
function valueSet(input,fireSetEvent){var count,values=asArray(input),i;fireSetEvent=(fireSetEvent===undefined?true:!!fireSetEvent);if(options.dir&&options.handles>1){values.reverse();}
if(options.animate&&scope_Locations[0]!==-1){addClassFor(scope_Target,options.cssClasses.tap,options.animationDuration);}
count=scope_Handles.length>1?3:1;if(values.length===1){count=1;}
setValues(count,values);for(i=0;i<scope_Handles.length;i++){if(values[i]!==null&&fireSetEvent){fireEvent('set',i);}}}
function valueGet(){var i,retour=[];for(i=0;i<options.handles;i+=1){retour[i]=options.format.to(scope_Values[i]);}
return inSliderOrder(retour);}
function destroy(){for(var key in options.cssClasses){if(!options.cssClasses.hasOwnProperty(key)){continue;}
removeClass(scope_Target,options.cssClasses[key]);}
while(scope_Target.firstChild){scope_Target.removeChild(scope_Target.firstChild);}
delete scope_Target.noUiSlider;}
function getCurrentStep(){var retour=scope_Locations.map(function(location,index){var step=scope_Spectrum.getApplicableStep(location),stepDecimals=countDecimals(String(step[2])),value=scope_Values[index],increment=location===100?null:step[2],prev=Number((value-step[2]).toFixed(stepDecimals)),decrement=location===0?null:(prev>=step[1])?step[2]:(step[0]||false);return[decrement,increment];});return inSliderOrder(retour);}
function bindEvent(namespacedEvent,callback){scope_Events[namespacedEvent]=scope_Events[namespacedEvent]||[];scope_Events[namespacedEvent].push(callback);if(namespacedEvent.split('.')[0]==='update'){scope_Handles.forEach(function(a,index){fireEvent('update',index);});}}
function removeEvent(namespacedEvent){var event=namespacedEvent&&namespacedEvent.split('.')[0],namespace=event&&namespacedEvent.substring(event.length);Object.keys(scope_Events).forEach(function(bind){var tEvent=bind.split('.')[0],tNamespace=bind.substring(tEvent.length);if((!event||event===tEvent)&&(!namespace||namespace===tNamespace)){delete scope_Events[bind];}});}
function updateOptions(optionsToUpdate,fireSetEvent){var v=valueGet(),newOptions=testOptions({start:[0,0],margin:optionsToUpdate.margin,limit:optionsToUpdate.limit,step:optionsToUpdate.step===undefined?options.singleStep:optionsToUpdate.step,range:optionsToUpdate.range,animate:optionsToUpdate.animate,snap:optionsToUpdate.snap===undefined?options.snap:optionsToUpdate.snap});['margin','limit','range','animate'].forEach(function(name){if(optionsToUpdate[name]!==undefined){options[name]=optionsToUpdate[name];}});newOptions.spectrum.direction=scope_Spectrum.direction;scope_Spectrum=newOptions.spectrum;scope_Locations=[-1,-1];valueSet(optionsToUpdate.start||v,fireSetEvent);}
if(scope_Target.noUiSlider){throw new Error('Slider was already initialized.');}
scope_Base=addSlider(options.dir,options.ort,scope_Target);scope_Handles=addHandles(options.handles,options.dir,scope_Base);addConnection(options.connect,scope_Target,scope_Handles);if(options.pips){pips(options.pips);}
if(options.tooltips){tooltips();}
scope_Self={destroy:destroy,steps:getCurrentStep,on:bindEvent,off:removeEvent,get:valueGet,set:valueSet,updateOptions:updateOptions,options:originalOptions,target:scope_Target,pips:pips};events(options.events);return scope_Self;}
function initialize(target,originalOptions){if(!target.nodeName){throw new Error('noUiSlider.create requires a single element.');}
var options=testOptions(originalOptions,target),slider=closure(target,options,originalOptions);slider.set(options.start);target.noUiSlider=slider;return slider;}
return{create:initialize};}));;;(function($){var focused=true;$.flexslider=function(el,options){var slider=$(el);slider.vars=$.extend({},$.flexslider.defaults,options);var namespace=slider.vars.namespace,msGesture=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,touch=(("ontouchstart"in window)||msGesture||window.DocumentTouch&&document instanceof DocumentTouch)&&slider.vars.touch,eventType="click touchend MSPointerUp keyup",watchedEvent="",watchedEventClearTimer,vertical=slider.vars.direction==="vertical",reverse=slider.vars.reverse,carousel=(slider.vars.itemWidth>0),fade=slider.vars.animation==="fade",asNav=slider.vars.asNavFor!=="",methods={};$.data(el,"flexslider",slider);methods={init:function(){slider.animating=false;slider.currentSlide=parseInt((slider.vars.startAt?slider.vars.startAt:0),10);if(isNaN(slider.currentSlide)){slider.currentSlide=0;}
slider.animatingTo=slider.currentSlide;slider.atEnd=(slider.currentSlide===0||slider.currentSlide===slider.last);slider.containerSelector=slider.vars.selector.substr(0,slider.vars.selector.search(' '));slider.slides=$(slider.vars.selector,slider);slider.container=$(slider.containerSelector,slider);slider.count=slider.slides.length;slider.syncExists=$(slider.vars.sync).length>0;if(slider.vars.animation==="slide"){slider.vars.animation="swing";}
slider.prop=(vertical)?"top":"marginLeft";slider.args={};slider.manualPause=false;slider.stopped=false;slider.started=false;slider.startTimeout=null;slider.transitions=!slider.vars.video&&!fade&&slider.vars.useCSS&&(function(){var obj=document.createElement('div'),props=['perspectiveProperty','WebkitPerspective','MozPerspective','OPerspective','msPerspective'];for(var i in props){if(obj.style[props[i]]!==undefined){slider.pfx=props[i].replace('Perspective','').toLowerCase();slider.prop="-"+slider.pfx+"-transform";return true;}}
return false;}());slider.ensureAnimationEnd='';if(slider.vars.controlsContainer!=="")slider.controlsContainer=$(slider.vars.controlsContainer).length>0&&$(slider.vars.controlsContainer);if(slider.vars.manualControls!=="")slider.manualControls=$(slider.vars.manualControls).length>0&&$(slider.vars.manualControls);if(slider.vars.customDirectionNav!=="")slider.customDirectionNav=$(slider.vars.customDirectionNav).length===2&&$(slider.vars.customDirectionNav);if(slider.vars.randomize){slider.slides.sort(function(){return(Math.round(Math.random())-0.5);});slider.container.empty().append(slider.slides);}
slider.doMath();slider.setup("init");if(slider.vars.controlNav){methods.controlNav.setup();}
if(slider.vars.directionNav){methods.directionNav.setup();}
if(slider.vars.keyboard&&($(slider.containerSelector).length===1||slider.vars.multipleKeyboard)){$(document).bind('keyup',function(event){var keycode=event.keyCode;if(!slider.animating&&(keycode===39||keycode===37)){var target=(keycode===39)?slider.getTarget('next'):(keycode===37)?slider.getTarget('prev'):false;slider.flexAnimate(target,slider.vars.pauseOnAction);}});}
if(slider.vars.mousewheel){slider.bind('mousewheel',function(event,delta,deltaX,deltaY){event.preventDefault();var target=(delta<0)?slider.getTarget('next'):slider.getTarget('prev');slider.flexAnimate(target,slider.vars.pauseOnAction);});}
if(slider.vars.pausePlay){methods.pausePlay.setup();}
if(slider.vars.slideshow&&slider.vars.pauseInvisible){methods.pauseInvisible.init();}
if(slider.vars.slideshow){if(slider.vars.pauseOnHover){slider.hover(function(){if(!slider.manualPlay&&!slider.manualPause){slider.pause();}},function(){if(!slider.manualPause&&!slider.manualPlay&&!slider.stopped){slider.play();}});}
if(!slider.vars.pauseInvisible||!methods.pauseInvisible.isHidden()){(slider.vars.initDelay>0)?slider.startTimeout=setTimeout(slider.play,slider.vars.initDelay):slider.play();}}
if(asNav){methods.asNav.setup();}
if(touch&&slider.vars.touch){methods.touch();}
if(!fade||(fade&&slider.vars.smoothHeight)){$(window).bind("resize orientationchange focus",methods.resize);}
slider.find("img").attr("draggable","false");setTimeout(function(){slider.vars.start(slider);},200);},asNav:{setup:function(){slider.asNav=true;slider.animatingTo=Math.floor(slider.currentSlide/slider.move);slider.currentItem=slider.currentSlide;slider.slides.removeClass(namespace+"active-slide").eq(slider.currentItem).addClass(namespace+"active-slide");if(!msGesture){slider.slides.on(eventType,function(e){e.preventDefault();var $slide=$(this),target=$slide.index();var posFromLeft=$slide.offset().left-$(slider).scrollLeft();if(posFromLeft<=0&&$slide.hasClass(namespace+'active-slide')){slider.flexAnimate(slider.getTarget("prev"),true);}else if(!$(slider.vars.asNavFor).data('flexslider').animating&&!$slide.hasClass(namespace+"active-slide")){slider.direction=(slider.currentItem<target)?"next":"prev";slider.flexAnimate(target,slider.vars.pauseOnAction,false,true,true);}});}else{el._slider=slider;slider.slides.each(function(){var that=this;that._gesture=new MSGesture();that._gesture.target=that;that.addEventListener("MSPointerDown",function(e){e.preventDefault();if(e.currentTarget._gesture){e.currentTarget._gesture.addPointer(e.pointerId);}},false);that.addEventListener("MSGestureTap",function(e){e.preventDefault();var $slide=$(this),target=$slide.index();if(!$(slider.vars.asNavFor).data('flexslider').animating&&!$slide.hasClass('active')){slider.direction=(slider.currentItem<target)?"next":"prev";slider.flexAnimate(target,slider.vars.pauseOnAction,false,true,true);}});});}}},controlNav:{setup:function(){if(!slider.manualControls){methods.controlNav.setupPaging();}else{methods.controlNav.setupManual();}},setupPaging:function(){var type=(slider.vars.controlNav==="thumbnails")?'control-thumbs':'control-paging',j=1,item,slide;slider.controlNavScaffold=$('<ol class="'+namespace+'control-nav '+namespace+type+'"></ol>');if(slider.pagingCount>1){for(var i=0;i<slider.pagingCount;i++){slide=slider.slides.eq(i);if(undefined===slide.attr('data-thumb-alt')){slide.attr('data-thumb-alt','');}
var altText=(''!==slide.attr('data-thumb-alt'))?altText=' alt="'+slide.attr('data-thumb-alt')+'"':'';item=(slider.vars.controlNav==="thumbnails")?'<img src="'+slide.attr('data-thumb')+'"'+altText+'/>':'<a href="#">'+j+'</a>';if('thumbnails'===slider.vars.controlNav&&true===slider.vars.thumbCaptions){var captn=slide.attr('data-thumbcaption');if(''!==captn&&undefined!==captn){item+='<span class="'+namespace+'caption">'+captn+'</span>';}}
slider.controlNavScaffold.append('<li>'+item+'</li>');j++;}}
(slider.controlsContainer)?$(slider.controlsContainer).append(slider.controlNavScaffold):slider.append(slider.controlNavScaffold);methods.controlNav.set();methods.controlNav.active();slider.controlNavScaffold.delegate('a, img',eventType,function(event){event.preventDefault();if(watchedEvent===""||watchedEvent===event.type){var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+'active')){slider.direction=(target>slider.currentSlide)?"next":"prev";slider.flexAnimate(target,slider.vars.pauseOnAction);}}
if(watchedEvent===""){watchedEvent=event.type;}
methods.setToClearWatchedEvent();});},setupManual:function(){slider.controlNav=slider.manualControls;methods.controlNav.active();slider.controlNav.bind(eventType,function(event){event.preventDefault();if(watchedEvent===""||watchedEvent===event.type){var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+'active')){(target>slider.currentSlide)?slider.direction="next":slider.direction="prev";slider.flexAnimate(target,slider.vars.pauseOnAction);}}
if(watchedEvent===""){watchedEvent=event.type;}
methods.setToClearWatchedEvent();});},set:function(){var selector=(slider.vars.controlNav==="thumbnails")?'img':'a';slider.controlNav=$('.'+namespace+'control-nav li '+selector,(slider.controlsContainer)?slider.controlsContainer:slider);},active:function(){slider.controlNav.removeClass(namespace+"active").eq(slider.animatingTo).addClass(namespace+"active");},update:function(action,pos){if(slider.pagingCount>1&&action==="add"){slider.controlNavScaffold.append($('<li><a href="#">'+slider.count+'</a></li>'));}else if(slider.pagingCount===1){slider.controlNavScaffold.find('li').remove();}else{slider.controlNav.eq(pos).closest('li').remove();}
methods.controlNav.set();(slider.pagingCount>1&&slider.pagingCount!==slider.controlNav.length)?slider.update(pos,action):methods.controlNav.active();}},directionNav:{setup:function(){var directionNavScaffold=$('<ul class="'+namespace+'direction-nav"><li class="'+namespace+'nav-prev"><a class="'+namespace+'prev" href="#">'+slider.vars.prevText+'</a></li><li class="'+namespace+'nav-next"><a class="'+namespace+'next" href="#">'+slider.vars.nextText+'</a></li></ul>');if(slider.customDirectionNav){slider.directionNav=slider.customDirectionNav;}else if(slider.controlsContainer){$(slider.controlsContainer).append(directionNavScaffold);slider.directionNav=$('.'+namespace+'direction-nav li a',slider.controlsContainer);}else{slider.append(directionNavScaffold);slider.directionNav=$('.'+namespace+'direction-nav li a',slider);}
methods.directionNav.update();slider.directionNav.bind(eventType,function(event){event.preventDefault();var target;if(watchedEvent===""||watchedEvent===event.type){target=($(this).hasClass(namespace+'next'))?slider.getTarget('next'):slider.getTarget('prev');slider.flexAnimate(target,slider.vars.pauseOnAction);}
if(watchedEvent===""){watchedEvent=event.type;}
methods.setToClearWatchedEvent();});},update:function(){var disabledClass=namespace+'disabled';if(slider.pagingCount===1){slider.directionNav.addClass(disabledClass).attr('tabindex','-1');}else if(!slider.vars.animationLoop){if(slider.animatingTo===0){slider.directionNav.removeClass(disabledClass).filter('.'+namespace+"prev").addClass(disabledClass).attr('tabindex','-1');}else if(slider.animatingTo===slider.last){slider.directionNav.removeClass(disabledClass).filter('.'+namespace+"next").addClass(disabledClass).attr('tabindex','-1');}else{slider.directionNav.removeClass(disabledClass).removeAttr('tabindex');}}else{slider.directionNav.removeClass(disabledClass).removeAttr('tabindex');}}},pausePlay:{setup:function(){var pausePlayScaffold=$('<div class="'+namespace+'pauseplay"><a href="#"></a></div>');if(slider.controlsContainer){slider.controlsContainer.append(pausePlayScaffold);slider.pausePlay=$('.'+namespace+'pauseplay a',slider.controlsContainer);}else{slider.append(pausePlayScaffold);slider.pausePlay=$('.'+namespace+'pauseplay a',slider);}
methods.pausePlay.update((slider.vars.slideshow)?namespace+'pause':namespace+'play');slider.pausePlay.bind(eventType,function(event){event.preventDefault();if(watchedEvent===""||watchedEvent===event.type){if($(this).hasClass(namespace+'pause')){slider.manualPause=true;slider.manualPlay=false;slider.pause();}else{slider.manualPause=false;slider.manualPlay=true;slider.play();}}
if(watchedEvent===""){watchedEvent=event.type;}
methods.setToClearWatchedEvent();});},update:function(state){(state==="play")?slider.pausePlay.removeClass(namespace+'pause').addClass(namespace+'play').html(slider.vars.playText):slider.pausePlay.removeClass(namespace+'play').addClass(namespace+'pause').html(slider.vars.pauseText);}},touch:function(){var startX,startY,offset,cwidth,dx,startT,onTouchStart,onTouchMove,onTouchEnd,scrolling=false,localX=0,localY=0,accDx=0;if(!msGesture){onTouchStart=function(e){if(slider.animating){e.preventDefault();}else if((window.navigator.msPointerEnabled)||e.touches.length===1){slider.pause();cwidth=(vertical)?slider.h:slider.w;startT=Number(new Date());localX=e.touches[0].pageX;localY=e.touches[0].pageY;offset=(carousel&&reverse&&slider.animatingTo===slider.last)?0:(carousel&&reverse)?slider.limit-(((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.animatingTo):(carousel&&slider.currentSlide===slider.last)?slider.limit:(carousel)?((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.currentSlide:(reverse)?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth;startX=(vertical)?localY:localX;startY=(vertical)?localX:localY;el.addEventListener('touchmove',onTouchMove,false);el.addEventListener('touchend',onTouchEnd,false);}};onTouchMove=function(e){localX=e.touches[0].pageX;localY=e.touches[0].pageY;dx=(vertical)?startX-localY:startX-localX;scrolling=(vertical)?(Math.abs(dx)<Math.abs(localX-startY)):(Math.abs(dx)<Math.abs(localY-startY));var fxms=500;if(!scrolling||Number(new Date())-startT>fxms){e.preventDefault();if(!fade&&slider.transitions){if(!slider.vars.animationLoop){dx=dx/((slider.currentSlide===0&&dx<0||slider.currentSlide===slider.last&&dx>0)?(Math.abs(dx)/cwidth+2):1);}
slider.setProps(offset+dx,"setTouch");}}};onTouchEnd=function(e){el.removeEventListener('touchmove',onTouchMove,false);if(slider.animatingTo===slider.currentSlide&&!scrolling&&!(dx===null)){var updateDx=(reverse)?-dx:dx,target=(updateDx>0)?slider.getTarget('next'):slider.getTarget('prev');if(slider.canAdvance(target)&&(Number(new Date())-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2)){slider.flexAnimate(target,slider.vars.pauseOnAction);}else{if(!fade){slider.flexAnimate(slider.currentSlide,slider.vars.pauseOnAction,true);}}}
el.removeEventListener('touchend',onTouchEnd,false);startX=null;startY=null;dx=null;offset=null;};el.addEventListener('touchstart',onTouchStart,false);}else{el.style.msTouchAction="none";el._gesture=new MSGesture();el._gesture.target=el;el.addEventListener("MSPointerDown",onMSPointerDown,false);el._slider=slider;el.addEventListener("MSGestureChange",onMSGestureChange,false);el.addEventListener("MSGestureEnd",onMSGestureEnd,false);function onMSPointerDown(e){e.stopPropagation();if(slider.animating){e.preventDefault();}else{slider.pause();el._gesture.addPointer(e.pointerId);accDx=0;cwidth=(vertical)?slider.h:slider.w;startT=Number(new Date());offset=(carousel&&reverse&&slider.animatingTo===slider.last)?0:(carousel&&reverse)?slider.limit-(((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.animatingTo):(carousel&&slider.currentSlide===slider.last)?slider.limit:(carousel)?((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.currentSlide:(reverse)?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth;}}
function onMSGestureChange(e){e.stopPropagation();var slider=e.target._slider;if(!slider){return;}
var transX=-e.translationX,transY=-e.translationY;accDx=accDx+((vertical)?transY:transX);dx=accDx;scrolling=(vertical)?(Math.abs(accDx)<Math.abs(-transX)):(Math.abs(accDx)<Math.abs(-transY));if(e.detail===e.MSGESTURE_FLAG_INERTIA){setImmediate(function(){el._gesture.stop();});return;}
if(!scrolling||Number(new Date())-startT>500){e.preventDefault();if(!fade&&slider.transitions){if(!slider.vars.animationLoop){dx=accDx/((slider.currentSlide===0&&accDx<0||slider.currentSlide===slider.last&&accDx>0)?(Math.abs(accDx)/cwidth+2):1);}
slider.setProps(offset+dx,"setTouch");}}}
function onMSGestureEnd(e){e.stopPropagation();var slider=e.target._slider;if(!slider){return;}
if(slider.animatingTo===slider.currentSlide&&!scrolling&&!(dx===null)){var updateDx=(reverse)?-dx:dx,target=(updateDx>0)?slider.getTarget('next'):slider.getTarget('prev');if(slider.canAdvance(target)&&(Number(new Date())-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2)){slider.flexAnimate(target,slider.vars.pauseOnAction);}else{if(!fade){slider.flexAnimate(slider.currentSlide,slider.vars.pauseOnAction,true);}}}
startX=null;startY=null;dx=null;offset=null;accDx=0;}}},resize:function(){if(!slider.animating&&slider.is(':visible')){if(!carousel){slider.doMath();}
if(fade){methods.smoothHeight();}else if(carousel){slider.slides.width(slider.computedW);slider.update(slider.pagingCount);slider.setProps();}
else if(vertical){slider.viewport.height(slider.h);slider.setProps(slider.h,"setTotal");}else{if(slider.vars.smoothHeight){methods.smoothHeight();}
slider.newSlides.width(slider.computedW);slider.setProps(slider.computedW,"setTotal");}}},smoothHeight:function(dur){if(!vertical||fade){var $obj=(fade)?slider:slider.viewport;(dur)?$obj.animate({"height":slider.slides.eq(slider.animatingTo).innerHeight()},dur):$obj.innerHeight(slider.slides.eq(slider.animatingTo).innerHeight());}},sync:function(action){var $obj=$(slider.vars.sync).data("flexslider"),target=slider.animatingTo;switch(action){case"animate":$obj.flexAnimate(target,slider.vars.pauseOnAction,false,true);break;case"play":if(!$obj.playing&&!$obj.asNav){$obj.play();}break;case"pause":$obj.pause();break;}},uniqueID:function($clone){$clone.filter('[id]').add($clone.find('[id]')).each(function(){var $this=$(this);$this.attr('id',$this.attr('id')+'_clone');});return $clone;},pauseInvisible:{visProp:null,init:function(){var visProp=methods.pauseInvisible.getHiddenProp();if(visProp){var evtname=visProp.replace(/[H|h]idden/,'')+'visibilitychange';document.addEventListener(evtname,function(){if(methods.pauseInvisible.isHidden()){if(slider.startTimeout){clearTimeout(slider.startTimeout);}else{slider.pause();}}
else{if(slider.started){slider.play();}else{if(slider.vars.initDelay>0){setTimeout(slider.play,slider.vars.initDelay);}else{slider.play();}}}});}},isHidden:function(){var prop=methods.pauseInvisible.getHiddenProp();if(!prop){return false;}
return document[prop];},getHiddenProp:function(){var prefixes=['webkit','moz','ms','o'];if('hidden'in document){return'hidden';}
for(var i=0;i<prefixes.length;i++){if((prefixes[i]+'Hidden')in document){return prefixes[i]+'Hidden';}}
return null;}},setToClearWatchedEvent:function(){clearTimeout(watchedEventClearTimer);watchedEventClearTimer=setTimeout(function(){watchedEvent="";},3000);}};slider.flexAnimate=function(target,pause,override,withSync,fromNav){if(!slider.vars.animationLoop&&target!==slider.currentSlide){slider.direction=(target>slider.currentSlide)?"next":"prev";}
if(asNav&&slider.pagingCount===1)slider.direction=(slider.currentItem<target)?"next":"prev";if(!slider.animating&&(slider.canAdvance(target,fromNav)||override)&&slider.is(":visible")){if(asNav&&withSync){var master=$(slider.vars.asNavFor).data('flexslider');slider.atEnd=target===0||target===slider.count-1;master.flexAnimate(target,true,false,true,fromNav);slider.direction=(slider.currentItem<target)?"next":"prev";master.direction=slider.direction;if(Math.ceil((target+1)/slider.visible)-1!==slider.currentSlide&&target!==0){slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");target=Math.floor(target/slider.visible);}else{slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");return false;}}
slider.animating=true;slider.animatingTo=target;if(pause){slider.pause();}
slider.vars.before(slider);if(slider.syncExists&&!fromNav){methods.sync("animate");}
if(slider.vars.controlNav){methods.controlNav.active();}
if(!carousel){slider.slides.removeClass(namespace+'active-slide').eq(target).addClass(namespace+'active-slide');}
slider.atEnd=target===0||target===slider.last;if(slider.vars.directionNav){methods.directionNav.update();}
if(target===slider.last){slider.vars.end(slider);if(!slider.vars.animationLoop){slider.pause();}}
if(!fade){var dimension=(vertical)?slider.slides.filter(':first').height():slider.computedW,margin,slideString,calcNext;if(carousel){margin=slider.vars.itemMargin;calcNext=((slider.itemW+margin)*slider.move)*slider.animatingTo;slideString=(calcNext>slider.limit&&slider.visible!==1)?slider.limit:calcNext;}else if(slider.currentSlide===0&&target===slider.count-1&&slider.vars.animationLoop&&slider.direction!=="next"){slideString=(reverse)?(slider.count+slider.cloneOffset)*dimension:0;}else if(slider.currentSlide===slider.last&&target===0&&slider.vars.animationLoop&&slider.direction!=="prev"){slideString=(reverse)?0:(slider.count+1)*dimension;}else{slideString=(reverse)?((slider.count-1)-target+slider.cloneOffset)*dimension:(target+slider.cloneOffset)*dimension;}
slider.setProps(slideString,"",slider.vars.animationSpeed);if(slider.transitions){if(!slider.vars.animationLoop||!slider.atEnd){slider.animating=false;slider.currentSlide=slider.animatingTo;}
slider.container.unbind("webkitTransitionEnd transitionend");slider.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(slider.ensureAnimationEnd);slider.wrapup(dimension);});clearTimeout(slider.ensureAnimationEnd);slider.ensureAnimationEnd=setTimeout(function(){slider.wrapup(dimension);},slider.vars.animationSpeed+100);}else{slider.container.animate(slider.args,slider.vars.animationSpeed,slider.vars.easing,function(){slider.wrapup(dimension);});}}else{if(!touch){slider.slides.eq(slider.currentSlide).css({"zIndex":1}).animate({"opacity":0},slider.vars.animationSpeed,slider.vars.easing);slider.slides.eq(target).css({"zIndex":2}).animate({"opacity":1},slider.vars.animationSpeed,slider.vars.easing,slider.wrapup);}else{slider.slides.eq(slider.currentSlide).css({"opacity":0,"zIndex":1});slider.slides.eq(target).css({"opacity":1,"zIndex":2});slider.wrapup(dimension);}}
if(slider.vars.smoothHeight){methods.smoothHeight(slider.vars.animationSpeed);}}};slider.wrapup=function(dimension){if(!fade&&!carousel){if(slider.currentSlide===0&&slider.animatingTo===slider.last&&slider.vars.animationLoop){slider.setProps(dimension,"jumpEnd");}else if(slider.currentSlide===slider.last&&slider.animatingTo===0&&slider.vars.animationLoop){slider.setProps(dimension,"jumpStart");}}
slider.animating=false;slider.currentSlide=slider.animatingTo;slider.vars.after(slider);};slider.animateSlides=function(){if(!slider.animating&&focused){slider.flexAnimate(slider.getTarget("next"));}};slider.pause=function(){clearInterval(slider.animatedSlides);slider.animatedSlides=null;slider.playing=false;if(slider.vars.pausePlay){methods.pausePlay.update("play");}
if(slider.syncExists){methods.sync("pause");}};slider.play=function(){if(slider.playing){clearInterval(slider.animatedSlides);}
slider.animatedSlides=slider.animatedSlides||setInterval(slider.animateSlides,slider.vars.slideshowSpeed);slider.started=slider.playing=true;if(slider.vars.pausePlay){methods.pausePlay.update("pause");}
if(slider.syncExists){methods.sync("play");}};slider.stop=function(){slider.pause();slider.stopped=true;};slider.canAdvance=function(target,fromNav){var last=(asNav)?slider.pagingCount-1:slider.last;return(fromNav)?true:(asNav&&slider.currentItem===slider.count-1&&target===0&&slider.direction==="prev")?true:(asNav&&slider.currentItem===0&&target===slider.pagingCount-1&&slider.direction!=="next")?false:(target===slider.currentSlide&&!asNav)?false:(slider.vars.animationLoop)?true:(slider.atEnd&&slider.currentSlide===0&&target===last&&slider.direction!=="next")?false:(slider.atEnd&&slider.currentSlide===last&&target===0&&slider.direction==="next")?false:true;};slider.getTarget=function(dir){slider.direction=dir;if(dir==="next"){return(slider.currentSlide===slider.last)?0:slider.currentSlide+1;}else{return(slider.currentSlide===0)?slider.last:slider.currentSlide-1;}};slider.setProps=function(pos,special,dur){var target=(function(){var posCheck=(pos)?pos:((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.animatingTo,posCalc=(function(){if(carousel){return(special==="setTouch")?pos:(reverse&&slider.animatingTo===slider.last)?0:(reverse)?slider.limit-(((slider.itemW+slider.vars.itemMargin)*slider.move)*slider.animatingTo):(slider.animatingTo===slider.last)?slider.limit:posCheck;}else{switch(special){case"setTotal":return(reverse)?((slider.count-1)-slider.currentSlide+slider.cloneOffset)*pos:(slider.currentSlide+slider.cloneOffset)*pos;case"setTouch":return(reverse)?pos:pos;case"jumpEnd":return(reverse)?pos:slider.count*pos;case"jumpStart":return(reverse)?slider.count*pos:pos;default:return pos;}}}());return(posCalc*-1)+"px";}());if(slider.transitions){target=(vertical)?"translate3d(0,"+target+",0)":"translate3d("+target+",0,0)";dur=(dur!==undefined)?(dur/1000)+"s":"0s";slider.container.css("-"+slider.pfx+"-transition-duration",dur);slider.container.css("transition-duration",dur);}
slider.args[slider.prop]=target;if(slider.transitions||dur===undefined){slider.container.css(slider.args);}
slider.container.css('transform',target);};slider.setup=function(type){if(!fade){var sliderOffset,arr;if(type==="init"){slider.viewport=$('<div class="'+namespace+'viewport"></div>').css({"overflow":"hidden","position":"relative"}).appendTo(slider).append(slider.container);slider.cloneCount=0;slider.cloneOffset=0;if(reverse){arr=$.makeArray(slider.slides).reverse();slider.slides=$(arr);slider.container.empty().append(slider.slides);}}
if(slider.vars.animationLoop&&!carousel){slider.cloneCount=2;slider.cloneOffset=1;if(type!=="init"){slider.container.find('.clone').remove();}
slider.container.append(methods.uniqueID(slider.slides.first().clone().addClass('clone')).attr('aria-hidden','true')).prepend(methods.uniqueID(slider.slides.last().clone().addClass('clone')).attr('aria-hidden','true'));}
slider.newSlides=$(slider.vars.selector,slider);sliderOffset=(reverse)?slider.count-1-slider.currentSlide+slider.cloneOffset:slider.currentSlide+slider.cloneOffset;if(vertical&&!carousel){slider.container.height((slider.count+slider.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){slider.newSlides.css({"display":"block"});slider.doMath();slider.viewport.height(slider.h);slider.setProps(sliderOffset*slider.h,"init");},(type==="init")?100:0);}else{slider.container.width((slider.count+slider.cloneCount)*200+"%");slider.setProps(sliderOffset*slider.computedW,"init");setTimeout(function(){slider.doMath();slider.newSlides.css({"width":slider.computedW,"marginRight":slider.computedM,"float":"left","display":"block"});if(slider.vars.smoothHeight){methods.smoothHeight();}},(type==="init")?100:0);}}else{slider.slides.css({"width":"100%","float":"left","marginRight":"-100%","position":"relative"});if(type==="init"){if(!touch){if(slider.vars.fadeFirstSlide==false){slider.slides.css({"opacity":0,"display":"block","zIndex":1}).eq(slider.currentSlide).css({"zIndex":2}).css({"opacity":1});}else{slider.slides.css({"opacity":0,"display":"block","zIndex":1}).eq(slider.currentSlide).css({"zIndex":2}).animate({"opacity":1},slider.vars.animationSpeed,slider.vars.easing);}}else{slider.slides.css({"opacity":0,"display":"block","webkitTransition":"opacity "+slider.vars.animationSpeed/1000+"s ease","zIndex":1}).eq(slider.currentSlide).css({"opacity":1,"zIndex":2});}}
if(slider.vars.smoothHeight){methods.smoothHeight();}}
if(!carousel){slider.slides.removeClass(namespace+"active-slide").eq(slider.currentSlide).addClass(namespace+"active-slide");}
slider.vars.init(slider);};slider.doMath=function(){var slide=slider.slides.first(),slideMargin=slider.vars.itemMargin,minItems=slider.vars.minItems,maxItems=slider.vars.maxItems;slider.w=(slider.viewport===undefined)?slider.width():slider.viewport.width();slider.h=slide.height();slider.boxPadding=slide.outerWidth()-slide.width();if(carousel){slider.itemT=slider.vars.itemWidth+slideMargin;slider.itemM=slideMargin;slider.minW=(minItems)?minItems*slider.itemT:slider.w;slider.maxW=(maxItems)?(maxItems*slider.itemT)-slideMargin:slider.w;slider.itemW=(slider.minW>slider.w)?(slider.w-(slideMargin*(minItems-1)))/minItems:(slider.maxW<slider.w)?(slider.w-(slideMargin*(maxItems-1)))/maxItems:(slider.vars.itemWidth>slider.w)?slider.w:slider.vars.itemWidth;slider.visible=Math.floor(slider.w/(slider.itemW));slider.move=(slider.vars.move>0&&slider.vars.move<slider.visible)?slider.vars.move:slider.visible;slider.pagingCount=Math.ceil(((slider.count-slider.visible)/slider.move)+1);slider.last=slider.pagingCount-1;slider.limit=(slider.pagingCount===1)?0:(slider.vars.itemWidth>slider.w)?(slider.itemW*(slider.count-1))+(slideMargin*(slider.count-1)):((slider.itemW+slideMargin)*slider.count)-slider.w-slideMargin;}else{slider.itemW=slider.w;slider.itemM=slideMargin;slider.pagingCount=slider.count;slider.last=slider.count-1;}
slider.computedW=slider.itemW-slider.boxPadding;slider.computedM=slider.itemM;};slider.update=function(pos,action){slider.doMath();if(!carousel){if(pos<slider.currentSlide){slider.currentSlide+=1;}else if(pos<=slider.currentSlide&&pos!==0){slider.currentSlide-=1;}
slider.animatingTo=slider.currentSlide;}
if(slider.vars.controlNav&&!slider.manualControls){if((action==="add"&&!carousel)||slider.pagingCount>slider.controlNav.length){methods.controlNav.update("add");}else if((action==="remove"&&!carousel)||slider.pagingCount<slider.controlNav.length){if(carousel&&slider.currentSlide>slider.last){slider.currentSlide-=1;slider.animatingTo-=1;}
methods.controlNav.update("remove",slider.last);}}
if(slider.vars.directionNav){methods.directionNav.update();}};slider.addSlide=function(obj,pos){var $obj=$(obj);slider.count+=1;slider.last=slider.count-1;if(vertical&&reverse){(pos!==undefined)?slider.slides.eq(slider.count-pos).after($obj):slider.container.prepend($obj);}else{(pos!==undefined)?slider.slides.eq(pos).before($obj):slider.container.append($obj);}
slider.update(pos,"add");slider.slides=$(slider.vars.selector+':not(.clone)',slider);slider.setup();slider.vars.added(slider);};slider.removeSlide=function(obj){var pos=(isNaN(obj))?slider.slides.index($(obj)):obj;slider.count-=1;slider.last=slider.count-1;if(isNaN(obj)){$(obj,slider.slides).remove();}else{(vertical&&reverse)?slider.slides.eq(slider.last).remove():slider.slides.eq(obj).remove();}
slider.doMath();slider.update(pos,"remove");slider.slides=$(slider.vars.selector+':not(.clone)',slider);slider.setup();slider.vars.removed(slider);};methods.init();};$(window).blur(function(e){focused=false;}).focus(function(e){focused=true;});$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,fadeFirstSlide:true,thumbCaptions:false,pauseOnAction:true,pauseOnHover:false,pauseInvisible:true,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:true,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}};$.fn.flexslider=function(options){if(options===undefined){options={};}
if(typeof options==="object"){return this.each(function(){var $this=$(this),selector=(options.selector)?options.selector:".slides > li",$slides=$this.find(selector);if(($slides.length===1&&options.allowOneSlide===false)||$slides.length===0){$slides.fadeIn(400);if(options.start){options.start($this);}}else if($this.data('flexslider')===undefined){new $.flexslider(this,options);}});}else{var $slider=$(this).data('flexslider');switch(options){case"play":$slider.play();break;case"pause":$slider.pause();break;case"stop":$slider.stop();break;case"next":$slider.flexAnimate($slider.getTarget("next"),true);break;case"prev":case"previous":$slider.flexAnimate($slider.getTarget("prev"),true);break;default:if(typeof options==="number"){$slider.flexAnimate(options,true);}}}};})(jQuery);;(function(factory){if(typeof define==='function'&&define.amd){define([],factory);}else if(typeof exports==='object'){module.exports=factory();}else{window.wNumb=factory();}}(function(){'use strict';var
FormatOptions=['decimals','thousand','mark','prefix','postfix','encoder','decoder','negativeBefore','negative','edit','undo'];function strReverse(a){return a.split('').reverse().join('');}
function strStartsWith(input,match){return input.substring(0,match.length)===match;}
function strEndsWith(input,match){return input.slice(-1*match.length)===match;}
function throwEqualError(F,a,b){if((F[a]||F[b])&&(F[a]===F[b])){throw new Error(a);}}
function isValidNumber(input){return typeof input==='number'&&isFinite(input);}
function toFixed(value,decimals){var scale=Math.pow(10,decimals);return(Math.round(value*scale)/scale).toFixed(decimals);}
function formatTo(decimals,thousand,mark,prefix,postfix,encoder,decoder,negativeBefore,negative,edit,undo,input){var originalInput=input,inputIsNegative,inputPieces,inputBase,inputDecimals='',output='';if(encoder){input=encoder(input);}
if(!isValidNumber(input)){return false;}
if(decimals!==false&&parseFloat(input.toFixed(decimals))===0){input=0;}
if(input<0){inputIsNegative=true;input=Math.abs(input);}
if(decimals!==false){input=toFixed(input,decimals);}
input=input.toString();if(input.indexOf('.')!==-1){inputPieces=input.split('.');inputBase=inputPieces[0];if(mark){inputDecimals=mark+inputPieces[1];}}else{inputBase=input;}
if(thousand){inputBase=strReverse(inputBase).match(/.{1,3}/g);inputBase=strReverse(inputBase.join(strReverse(thousand)));}
if(inputIsNegative&&negativeBefore){output+=negativeBefore;}
if(prefix){output+=prefix;}
if(inputIsNegative&&negative){output+=negative;}
output+=inputBase;output+=inputDecimals;if(postfix){output+=postfix;}
if(edit){output=edit(output,originalInput);}
return output;}
function formatFrom(decimals,thousand,mark,prefix,postfix,encoder,decoder,negativeBefore,negative,edit,undo,input){var originalInput=input,inputIsNegative,output='';if(undo){input=undo(input);}
if(!input||typeof input!=='string'){return false;}
if(negativeBefore&&strStartsWith(input,negativeBefore)){input=input.replace(negativeBefore,'');inputIsNegative=true;}
if(prefix&&strStartsWith(input,prefix)){input=input.replace(prefix,'');}
if(negative&&strStartsWith(input,negative)){input=input.replace(negative,'');inputIsNegative=true;}
if(postfix&&strEndsWith(input,postfix)){input=input.slice(0,-1*postfix.length);}
if(thousand){input=input.split(thousand).join('');}
if(mark){input=input.replace(mark,'.');}
if(inputIsNegative){output+='-';}
output+=input;output=output.replace(/[^0-9\.\-.]/g,'');if(output===''){return false;}
output=Number(output);if(decoder){output=decoder(output);}
if(!isValidNumber(output)){return false;}
return output;}
function validate(inputOptions){var i,optionName,optionValue,filteredOptions={};for(i=0;i<FormatOptions.length;i+=1){optionName=FormatOptions[i];optionValue=inputOptions[optionName];if(optionValue===undefined){if(optionName==='negative'&&!filteredOptions.negativeBefore){filteredOptions[optionName]='-';}else if(optionName==='mark'&&filteredOptions.thousand!=='.'){filteredOptions[optionName]='.';}else{filteredOptions[optionName]=false;}}else if(optionName==='decimals'){if(optionValue>=0&&optionValue<8){filteredOptions[optionName]=optionValue;}else{throw new Error(optionName);}}else if(optionName==='encoder'||optionName==='decoder'||optionName==='edit'||optionName==='undo'){if(typeof optionValue==='function'){filteredOptions[optionName]=optionValue;}else{throw new Error(optionName);}}else{if(typeof optionValue==='string'){filteredOptions[optionName]=optionValue;}else{throw new Error(optionName);}}}
throwEqualError(filteredOptions,'mark','thousand');throwEqualError(filteredOptions,'prefix','negative');throwEqualError(filteredOptions,'prefix','negativeBefore');return filteredOptions;}
function passAll(options,method,input){var i,args=[];for(i=0;i<FormatOptions.length;i+=1){args.push(options[FormatOptions[i]]);}
args.push(input);return method.apply('',args);}
function wNumb(options){if(!(this instanceof wNumb)){return new wNumb(options);}
if(typeof options!=="object"){return;}
options=validate(options);this.to=function(input){return passAll(options,formatTo,input);};this.from=function(input){return passAll(options,formatFrom,input);};}
return wNumb;}));;this["k4"]=this["k4"]||{};this["k4"]["templates"]=this["k4"]["templates"]||{};Handlebars.registerPartial("openhours",Handlebars.template({"1":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return" \n<p>\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.opentoday:depth0),{"name":"if","hash":{},"fn":this.program(2,data,0,blockParams,depths),"inverse":this.program(29,data,0,blockParams,depths),"data":data}))!=null?stack1:"")+"</p>\n";},"2":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['with'].call(depth0,(depth0!=null?depth0.opentoday:depth0),{"name":"with","hash":{},"fn":this.program(3,data,0,blockParams,depths),"inverse":this.noop,"data":data}))!=null?stack1:"");},"3":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depths[1]!=null?depths[1].is_closed_for_today:depths[1]),{"name":"if","hash":{},"fn":this.program(4,data,0,blockParams,depths),"inverse":this.program(6,data,0,blockParams,depths),"data":data}))!=null?stack1:"")+"\n";},"4":function(depth0,helpers,partials,data){return"        "+this.escapeExpression(helpers.t.call(depth0,"Closed",{"name":"t","hash":{},"data":data}))+"\n";},"6":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.open2:depth0),{"name":"if","hash":{},"fn":this.program(7,data,0,blockParams,depths),"inverse":this.program(18,data,0,blockParams,depths),"data":data}))!=null?stack1:"")+"      ";},"7":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depths[2]!=null?depths[2].exceptional_opening:depths[2]),{"name":"if","hash":{},"fn":this.program(8,data,0,blockParams,depths),"inverse":this.program(13,data,0,blockParams,depths),"data":data}))!=null?stack1:"");},"8":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depths[4]!=null?depths[4].is_open:depths[4]),{"name":"if","hash":{},"fn":this.program(9,data,0,blockParams,depths),"inverse":this.program(11,data,0,blockParams,depths),"data":data}))!=null?stack1:"");},"9":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Open exceptionally today twice",{"name":"t","hash":{"close2":(depth0!=null?depth0.close2:depth0),"open2":(depth0!=null?depth0.open2:depth0),"close":(depth0!=null?depth0.close:depth0),"open":(depth0!=null?depth0.open:depth0)},"data":data}))+"\n";},"11":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Opens exceptionally today twice",{"name":"t","hash":{"close2":(depth0!=null?depth0.close2:depth0),"open2":(depth0!=null?depth0.open2:depth0),"close":(depth0!=null?depth0.close:depth0),"open":(depth0!=null?depth0.open:depth0)},"data":data}))+"\n";},"13":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depths[4]!=null?depths[4].is_open:depths[4]),{"name":"if","hash":{},"fn":this.program(14,data,0,blockParams,depths),"inverse":this.program(16,data,0,blockParams,depths),"data":data}))!=null?stack1:"");},"14":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Open today twice",{"name":"t","hash":{"close2":(depth0!=null?depth0.close2:depth0),"open2":(depth0!=null?depth0.open2:depth0),"close":(depth0!=null?depth0.close:depth0),"open":(depth0!=null?depth0.open:depth0)},"data":data}))+"\n";},"16":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Opens today twice",{"name":"t","hash":{"close2":(depth0!=null?depth0.close2:depth0),"open2":(depth0!=null?depth0.open2:depth0),"close":(depth0!=null?depth0.close:depth0),"open":(depth0!=null?depth0.open:depth0)},"data":data}))+"\n";},"18":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depths[3]!=null?depths[3].exceptional_opening:depths[3]),{"name":"if","hash":{},"fn":this.program(19,data,0,blockParams,depths),"inverse":this.program(24,data,0,blockParams,depths),"data":data}))!=null?stack1:"");},"19":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depths[4]!=null?depths[4].is_open:depths[4]),{"name":"if","hash":{},"fn":this.program(20,data,0,blockParams,depths),"inverse":this.program(22,data,0,blockParams,depths),"data":data}))!=null?stack1:"");},"20":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Open exceptionally today",{"name":"t","hash":{"close":(depth0!=null?depth0.close:depth0),"open":(depth0!=null?depth0.open:depth0)},"data":data}))+"\n";},"22":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Opens exceptionally today",{"name":"t","hash":{"close":(depth0!=null?depth0.close:depth0),"open":(depth0!=null?depth0.open:depth0)},"data":data}))+"\n";},"24":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depths[4]!=null?depths[4].is_open:depths[4]),{"name":"if","hash":{},"fn":this.program(25,data,0,blockParams,depths),"inverse":this.program(27,data,0,blockParams,depths),"data":data}))!=null?stack1:"");},"25":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Open today",{"name":"t","hash":{"close":(depth0!=null?depth0.close:depth0),"open":(depth0!=null?depth0.open:depth0)},"data":data}))+"\n";},"27":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Opens today",{"name":"t","hash":{"close":(depth0!=null?depth0.close:depth0),"open":(depth0!=null?depth0.open:depth0)},"data":data}))+"\n";},"29":function(depth0,helpers,partials,data){var stack1;return((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.exceptional_closing:depth0),{"name":"if","hash":{},"fn":this.program(30,data,0),"inverse":this.program(32,data,0),"data":data}))!=null?stack1:"");},"30":function(depth0,helpers,partials,data){return"      "+this.escapeExpression(helpers.t.call(depth0,"Closed exceptionally today",{"name":"t","hash":{},"data":data}))+"\n";},"32":function(depth0,helpers,partials,data){return"      "+this.escapeExpression(helpers.t.call(depth0,"Closed today",{"name":"t","hash":{},"data":data}))+"\n";},"34":function(depth0,helpers,partials,data){var stack1;return"  <p>"+this.escapeExpression(helpers.t.call(depth0,"Closest exceptional open",{"name":"t","hash":{"close":((stack1=(depth0!=null?depth0.nextspecialopen:depth0))!=null?stack1.close:stack1),"open":((stack1=(depth0!=null?depth0.nextspecialopen:depth0))!=null?stack1.open:stack1),"day":((stack1=(depth0!=null?depth0.nextspecialopen:depth0))!=null?stack1.day:stack1)},"data":data}))+"</p>\n";},"36":function(depth0,helpers,partials,data){var stack1;return"  <p>"+this.escapeExpression(helpers.t.call(depth0,"Closest exceptional close",{"name":"t","hash":{"day":((stack1=(depth0!=null?depth0.nextspecialclose:depth0))!=null?stack1.day:stack1)},"data":data}))+"</p>\n";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data,blockParams,depths){var stack1;return((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.opening:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0,blockParams,depths),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.nextspecialopen:depth0),{"name":"if","hash":{},"fn":this.program(34,data,0,blockParams,depths),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.nextspecialclose:depth0),{"name":"if","hash":{},"fn":this.program(36,data,0,blockParams,depths),"inverse":this.noop,"data":data}))!=null?stack1:"");},"useData":true,"useDepths":true}));this["k4"]["templates"]["accountStore"]=Handlebars.template({"1":function(depth0,helpers,partials,data){var stack1,alias1=this.lambda,alias2=this.escapeExpression;return"\n  <table class=\"k4-storestable\">\n     <thead class=\"element-invisible\">\n      <tr>\n        <th>Favori</th>\n        <th>Enseigne</th>\n        <th>Nom</th>\n        <th>Ouvertures</th>\n        <th>Lien</th>\n      </tr>\n    </thead>\n    <tbody>\n    <tr class=\"k4-storestable-line\">\n      <td class=\"k4-storestable-cell k4-storestable-cell_favorite\">\n        <button data-store-id=\""+alias2(alias1((depth0!=null?depth0.store_id:depth0),depth0))+"\" class=\"k4-storefav k4-storefav_icon "+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.favorite:depth0),{"name":"if","hash":{},"fn":this.program(2,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\" data-storefav-name=\""+alias2(alias1((depth0!=null?depth0.fullname:depth0),depth0))+"\"><span>Supprimer</span></button>\n      </td>\n      <td class=\"k4-storestable-cell k4-storestable-cell_type\">\n        <picture>\n          <img src=\""+alias2(alias1((depth0!=null?depth0.typology_logo:depth0),depth0))+"\" alt=\""+alias2(alias1((depth0!=null?depth0.typology_name:depth0),depth0))+"\">\n        </picture>\n      </td>\n      <td class=\"k4-storestable-cell k4-storestable-cell_name\">\n        "+alias2(alias1((depth0!=null?depth0.fullname:depth0),depth0))+"\n      </td>\n      <td class=\"k4-storestable-cell k4-storestable-cell_opening\">\n\n        <div class=\"k4-opening"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.is_open:depth0),{"name":"if","hash":{},"fn":this.program(4,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\">\n\n"+((stack1=this.invokePartial(partials.openhours,depth0,{"name":"openhours","data":data,"indent":"          ","helpers":helpers,"partials":partials}))!=null?stack1:"")+"\n        </div>\n\n      </td>\n      <td class=\"k4-storestable-cell k4-storestable-cell_link\">\n        <a href=\""+alias2(alias1((depth0!=null?depth0.link:depth0),depth0))+"\" class=\"k4-cta2 k4-cta2_dark\">"+alias2(helpers.t.call(depth0,"Go",{"name":"t","hash":{},"data":data}))+"</a>\n      </td>\n    </tr>\n    </tbody>\n  </table>\n\n";},"2":function(depth0,helpers,partials,data){return" is-favorite";},"4":function(depth0,helpers,partials,data){return" is-open";},"6":function(depth0,helpers,partials,data){var stack1,alias1=this.escapeExpression;return"\n  <div class=\"k4-align_center\">\n    <p>"+((stack1=helpers.t.call(depth0,"You do not have a favorite store",{"name":"t","hash":{},"data":data}))!=null?stack1:"")+"</p>\n    <a href=\""+alias1(this.lambda((depth0!=null?depth0.storesURL:depth0),depth0))+"\" class=\"k4-cta k4-scroll-to\" data-href=\"#k4-locator-scrolltop\">"+alias1(helpers.t.call(depth0,"Choose a store",{"name":"t","hash":{},"data":data}))+"</a>\n  </div>\n\n";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1;return((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.fullname:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0),"inverse":this.program(6,data,0),"data":data}))!=null?stack1:"");},"usePartial":true,"useData":true});this["k4"]["templates"]["headerStore"]=Handlebars.template({"1":function(depth0,helpers,partials,data){var stack1,alias1=this.escapeExpression,alias2=this.lambda;return"  <img  class=\"k4-userinfos-typologo\" src=\""+alias1(helpers.fallback.call(depth0,(depth0!=null?depth0.marker_typology_favorite_store:depth0),(depth0!=null?depth0.style_url:depth0),{"name":"fallback","hash":{},"data":data}))+"\" alt=\""+alias1(alias2((depth0!=null?depth0.typology_name:depth0),depth0))+"\" />\n  <span class=\"k4-userinfos-legend\" >\n    <span>"+alias1(alias2((depth0!=null?depth0.fullname:depth0),depth0))+"</span>\n    "+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.opening:depth0),{"name":"if","hash":{},"fn":this.program(2,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"  </span>\n";},"2":function(depth0,helpers,partials,data){var stack1;return" \n      <span class=\"k4-opening"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.is_open:depth0),{"name":"if","hash":{},"fn":this.program(3,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\">\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.is_open:depth0),{"name":"if","hash":{},"fn":this.program(5,data,0),"inverse":this.program(7,data,0),"data":data}))!=null?stack1:"")+"      </span>\n";},"3":function(depth0,helpers,partials,data){return" is-open";},"5":function(depth0,helpers,partials,data){return"          "+this.escapeExpression(helpers.t.call(depth0,"Is open",{"name":"t","hash":{},"data":data}))+"\n";},"7":function(depth0,helpers,partials,data){return"          "+this.escapeExpression(helpers.t.call(depth0,"Closed",{"name":"t","hash":{},"data":data}))+"\n";},"9":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"  <img  class=\"k4-userinfos-typologo\" src=\""+alias1(helpers.imgurl.call(depth0,"svg/usericons/svg/store_marker.svg",{"name":"imgurl","hash":{},"data":data}))+"\" alt=\"Magasins\" />\n  <span class=\"k4-userinfos-legend\" >\n    <span>"+alias1(helpers.t.call(depth0,"Mes magasins",{"name":"t","hash":{},"data":data}))+"</span>\n  </span>\n";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1;return((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.fullname:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0),"inverse":this.program(9,data,0),"data":data}))!=null?stack1:"");},"useData":true});this["k4"]["templates"]["headerStoreOverlayer"]=Handlebars.template({"1":function(depth0,helpers,partials,data){var alias1=this.lambda,alias2=this.escapeExpression;return"  <a class=\"k4-storeoverlayer-drive-link\" href=\""+alias2(alias1((depth0!=null?depth0.drive_url:depth0),depth0))+"\">\n    <img class=\"k4-storeoverlayer-drive-icon\" src=\""+alias2(alias1((depth0!=null?depth0.drive_icon:depth0),depth0))+"\" alt=\""+alias2(helpers.t.call(depth0,"Carrefour Drive",{"name":"t","hash":{},"data":data}))+"\">\n  </a>\n";},"3":function(depth0,helpers,partials,data){return" is-open";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1,alias1=this.lambda,alias2=this.escapeExpression;return"<picture class=\"k4-storeoverlayer-typology\">\n  <img src=\""+alias2(alias1((depth0!=null?depth0.typology_logo:depth0),depth0))+"\" alt=\""+alias2(alias1((depth0!=null?depth0.typology_name:depth0),depth0))+"\">\n</picture>\n\n<p class=\"k4-storeoverlayer-storename\">"+alias2(alias1((depth0!=null?depth0.fullname:depth0),depth0))+"</p>\n\n<div class=\"k4-storeoverlayer-opening\">\n\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.drive_url:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n  <div class=\"k4-opening"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.is_open:depth0),{"name":"if","hash":{},"fn":this.program(3,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\">\n\n"+((stack1=this.invokePartial(partials.openhours,depth0,{"name":"openhours","data":data,"indent":"    ","helpers":helpers,"partials":partials}))!=null?stack1:"")+"\n  </div>\n\n</div>\n\n<a class=\"k4-cta\" href=\""+alias2(alias1((depth0!=null?depth0.link:depth0),depth0))+"\">"+alias2(helpers.t.call(depth0,"All about my store",{"name":"t","hash":{},"data":data}))+"</a>\n";},"usePartial":true,"useData":true});this["k4"]["templates"]["navMenu"]=Handlebars.template({"1":function(depth0,helpers,partials,data){var alias1=this.lambda,alias2=this.escapeExpression;return"\n<div class=\"k4-nav-group k4-nav-group_full\"\n       data-nav-id=\""+alias2(alias1((depth0!=null?depth0.id:depth0),depth0))+"\">\n  <div class=\"k4-nav-group-inner\">\n    "+alias2(alias1((depth0!=null?depth0.overlay_mobile:depth0),depth0))+"\n  </div>\n</div>\n\n";},"3":function(depth0,helpers,partials,data){var stack1,alias1=this.lambda,alias2=this.escapeExpression;return"\n<div class=\"k4-nav-group\" data-nav-id=\""+alias2(alias1((depth0!=null?depth0.id:depth0),depth0))+"\">\n  <div class=\"k4-nav-group-inner\">\n    <div class=\"k4-nav-group-header\">\n\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.parent_href_mobile:depth0),{"name":"if","hash":{},"fn":this.program(4,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.parent_href_desktop:depth0),{"name":"if","hash":{},"fn":this.program(16,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n    </div>\n    <div class=\"k4-submenu\">\n      <div class=\"k4-submenu-header\">\n        <div class=\"k4-submenu-header-inner\"\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.menu_icon_url:depth0),{"name":"if","hash":{},"fn":this.program(23,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+">\n          <a href=\""+alias2(alias1((depth0!=null?depth0.href:depth0),depth0))+"\" class=\"k4-submenu-title\">\n            "+alias2(alias1((depth0!=null?depth0.title:depth0),depth0))+"\n          </a>\n        </div>\n      </div>\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.children:depth0),{"name":"if","hash":{},"fn":this.program(25,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"    </div>\n  </div>\n</div>\n\n";},"4":function(depth0,helpers,partials,data){var stack1;return"        <a href=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.parent_href_mobile:depth0),depth0))+"\"\n        class=\"k4-cta3 k4-cta3_red k4-cta3_back k4-nav-group-header_s\"\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.depth:depth0),{"name":"if","hash":{},"fn":this.program(5,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.cuwa_click_tag:depth0),{"name":"if","hash":{},"fn":this.program(7,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+">\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.depth:depth0),{"name":"if","hash":{},"fn":this.program(9,data,0),"inverse":this.program(14,data,0),"data":data}))!=null?stack1:"")+"        </a>\n";},"5":function(depth0,helpers,partials,data){return"          data-nav-id=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.parent_id:depth0),depth0))+"\"\n";},"7":function(depth0,helpers,partials,data){return"          onclick=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.cuwa_click_tag:depth0),depth0))+"\"\n        ";},"9":function(depth0,helpers,partials,data){var stack1;return((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.parent_title_mobile:depth0),{"name":"if","hash":{},"fn":this.program(10,data,0),"inverse":this.program(12,data,0),"data":data}))!=null?stack1:"");},"10":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(this.lambda((depth0!=null?depth0.parent_title_mobile:depth0),depth0))+"\n";},"12":function(depth0,helpers,partials,data){return"              "+this.escapeExpression(helpers.t.call(depth0,"Retour",{"name":"t","hash":{},"data":data}))+"\n";},"14":function(depth0,helpers,partials,data){return"            "+this.escapeExpression(helpers.t.call(depth0,"Retour",{"name":"t","hash":{},"data":data}))+"\n";},"16":function(depth0,helpers,partials,data){var stack1;return"        <a href=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.parent_href_desktop:depth0),depth0))+"\"\n          class=\"k4-cta3 k4-cta3_red k4-cta3_back k4-nav-group-header_m\"\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.depth:depth0),{"name":"if","hash":{},"fn":this.program(17,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.cuwa_click_tag:depth0),{"name":"if","hash":{},"fn":this.program(19,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+">\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.parent_title_desktop:depth0),{"name":"if","hash":{},"fn":this.program(21,data,0),"inverse":this.program(14,data,0),"data":data}))!=null?stack1:"")+"        </a>\n";},"17":function(depth0,helpers,partials,data){return"            data-nav-id=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.parent_id:depth0),depth0))+"\"\n";},"19":function(depth0,helpers,partials,data){return"            onclick=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.cuwa_click_tag:depth0),depth0))+"\"\n          ";},"21":function(depth0,helpers,partials,data){return"            "+this.escapeExpression(this.lambda((depth0!=null?depth0.parent_title_desktop:depth0),depth0))+"\n";},"23":function(depth0,helpers,partials,data){return"            style=\"background-image:url("+this.escapeExpression(this.lambda((depth0!=null?depth0.menu_icon_url:depth0),depth0))+");\"\n          ";},"25":function(depth0,helpers,partials,data){var stack1;return"      <ul class=\"k4-submenu-list\">\n"+((stack1=helpers.each.call(depth0,(depth0!=null?depth0.children:depth0),{"name":"each","hash":{},"fn":this.program(26,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"      </ul>\n";},"26":function(depth0,helpers,partials,data){var stack1,alias1=this.lambda,alias2=this.escapeExpression;return"        <li class=\"k4-submenu-item\">\n          <a href=\""+alias2(alias1((depth0!=null?depth0.href:depth0),depth0))+"\"\n            class=\"k4-submenu-link\"\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.is_external_link:depth0),{"name":"if","hash":{},"fn":this.program(27,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.cuwa_click_tag:depth0),{"name":"if","hash":{},"fn":this.program(29,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.children:depth0),{"name":"if","hash":{},"fn":this.program(31,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"            >\n            "+alias2(alias1((depth0!=null?depth0.title:depth0),depth0))+"\n          </a>\n        </li>\n";},"27":function(depth0,helpers,partials,data){return"              target=\"_blank\"\n";},"29":function(depth0,helpers,partials,data){return"              onclick=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.cuwa_click_tag:depth0),depth0))+"\"\n";},"31":function(depth0,helpers,partials,data){return"              data-nav-id=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.id:depth0),depth0))+"\"\n";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1;return((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.overlay_mobile:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0),"inverse":this.program(3,data,0),"data":data}))!=null?stack1:"");},"useData":true});this["k4"]["templates"]["changeCity"]=Handlebars.template({"1":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"          <p><a href=\""+alias1(this.lambda((depth0!=null?depth0.geolocUrlHelp:depth0),depth0))+"\" target=\"_blank\">"+alias1(helpers.t.call(depth0,"La géolocalisation n'est pas activée",{"name":"t","hash":{},"data":data}))+"</a></p>\n";},"3":function(depth0,helpers,partials,data){return"          <p>"+this.escapeExpression(helpers.t.call(depth0,"La géolocalisation n'est pas activée",{"name":"t","hash":{},"data":data}))+"</p>\n";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1,alias1=this.escapeExpression;return"<form class=\"k4-form k4-change-city-form\" method=\"post\" action=\"#\">\n  <div class=\"k4-g-row\">\n    <p>\n    "+alias1(helpers.t.call(depth0,"Inform your city and...",{"name":"t","hash":{},"data":data}))+"\n    </p>\n  </div>\n  <div class=\"k4-g-row\">\n    <div class=\"k4-g-span_5 k4-form-group\">\n      <div class=\"k4-form-actions\">\n        <button type=\"button\" class=\"k4-btn k4-btn_alpha k4-btn_xtrem k4-btn_geoloc k4-text_uppercase k4-js-geolocate\" data-before=\"⌖\">"+alias1(helpers.t.call(depth0,"Me géolocaliser",{"name":"t","hash":{},"data":data}))+"</button>\n        <div class=\"k4-form-help k4-js-geolocate-denied k4-hide\">\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.geolocUrlHelp:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0),"inverse":this.program(3,data,0),"data":data}))!=null?stack1:"")+"        </div>\n      </div>\n    </div>\n    <div class=\"k4-g-span_7 k4-form-group\">\n      <div class=\"k4-form-field\">\n        <div class=\"k4-form-input k4-form-input_search\">\n          <label class=\"element-invisible\" for=\"store-locator-form-search\">"+alias1(helpers.t.call(depth0,"Inform your city",{"name":"t","hash":{},"data":data}))+"</label>\n          <input type=\"search\" name=\"search\"\n            placeholder=\""+alias1(helpers.t.call(depth0,"Zip code or city",{"name":"t","hash":{},"data":data}))+"\"\n            value=\"\" size=\"30\" maxlength=\"128\">\n          <div class=\"k4-form-input-after\">\n            <button class=\"k4-form-input_submit-btn\" type=\"submit\">"+alias1(helpers.t.call(depth0,"OK",{"name":"t","hash":{},"data":data}))+"</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>";},"useData":true});this["k4"]["templates"]["confirmFavStore"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1,alias1=this.escapeExpression;return"<div class=\"k4-storefav-logo\" ></div>\n<p class=\"k4-modal-question-description\">"+alias1(this.lambda((depth0!=null?depth0.fullname:depth0),depth0))+"</p>\n<p class=\"k4-modal-question-message\">"+((stack1=helpers.t.call(depth0,"Change your favorite store?",{"name":"t","hash":{},"data":data}))!=null?stack1:"")+"</p>\n<div class=\"k4-ctagroup\">\n  <button class=\"k4-cta2 k4-cta2_dark\">"+alias1(helpers.t.call(depth0,"Annuler",{"name":"t","hash":{},"data":data}))+"</button>\n  <button class=\"k4-cta k4-confirm\">"+alias1(helpers.t.call(depth0,"Confirmer",{"name":"t","hash":{},"data":data}))+"</button>\n</div>\n";},"useData":true});this["k4"]["templates"]["ecouponsAppRedirect"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"<p>"+alias1(helpers.t.call(depth0,"Use coupons on mobile app",{"name":"t","hash":{},"data":data}))+"</p>\n<div class=\"k4-ctagroup\">\n  <a href=\""+alias1(this.lambda((depth0!=null?depth0.confirmLink:depth0),depth0))+"\" class=\"k4-cta k4-confirm\">"+alias1(helpers.t.call(depth0,"Go",{"name":"t","hash":{},"data":data}))+"</a>\n  <button type=\"button\" class=\"k4-cta2 k4-cta2_dark ctools-close-modal\">"+alias1(helpers.t.call(depth0,"Annuler",{"name":"t","hash":{},"data":data}))+"</button>\n</div>";},"useData":true});this["k4"]["templates"]["oups"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"<div class=\"k4-g-row\">\n  <div class=\"k4-g-span_5 k4-g_s-span_12 k4-align_center\">\n    <svg width=\"200\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 423 389.5\" height=\"170\">\n      <ellipse opacity=\".1\" fill=\"#38A9E0\" cx=\"193.7\" cy=\"193.9\" rx=\"188.1\" ry=\"188.2\"></ellipse>\n      <path fill=\"none\" stroke=\"#3B60AA\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" d=\"M381.8 310c-46-21-113.1-25.1-187.8-25.1S52.1 289 6.1 310\"></path>\n      <path fill=\"#FFF\" stroke=\"#3B60AA\" stroke-width=\"10\" stroke-miterlimit=\"10\" d=\"M286.2 306H101.3l10-161h164.9z\"></path>\n      <path fill=\"none\" stroke=\"#3B60AA\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" d=\"M140.8 156c0-29.3 23.7-53 53-53s53 23.7 53 53M160 258s8-16.7 16.7-16.7 30.7 12.7 50.7 12.7\"></path>\n      <g fill=\"none\" stroke=\"#3B60AA\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-miterlimit=\"10\">\n        <path d=\"M173.8 206v13.3M213.7 206v13.3\"></path>\n      </g>\n      <path fill=\"#FFF\" stroke=\"#3B60AA\" stroke-width=\"5\" stroke-miterlimit=\"10\" d=\"M400.2 94.7c11.2 0 16.8-15 16.8-26.2 0-11.1-12.5-22-23.5-22.2 0-22.5-14.6-40.7-37.1-40.7-20.7 0-36 15.5-38.5 35.5-4.6-4-9.7-6.4-16.2-6.4-14.4 0-25.7 15.4-25.7 29.9s12.1 29.9 26.6 29.9h57.3l40.3.2z\"></path>\n    </svg>\n  </div>\n  <div class=\"k4-g-span_7 k4-g_s-span_12\">\n    <p class=\"k4-color_denim k4-mg-b_0\">"+alias1(helpers.t.call(depth0,"Oups",{"name":"t","hash":{},"data":data}))+"</p>\n    <p class=\"k4-modal-description\">"+alias1(this.lambda((depth0!=null?depth0.description:depth0),depth0))+"</p>\n  </div>\n</div>";},"useData":true});this["k4"]["templates"]["searchResultsSentence"]=Handlebars.template({"1":function(depth0,helpers,partials,data){return"<span class=\"k4-managesearch-nbresult_highlight\">"+this.escapeExpression(this.lambda((depth0!=null?depth0.nbResults:depth0),depth0))+"</span>";},"3":function(depth0,helpers,partials,data){return"<span>"+this.escapeExpression(helpers.fallback.call(depth0,(depth0!=null?depth0.locality:depth0),helpers.t.call(depth0,"your city",{"name":"t","hash":{},"data":data}),{"name":"fallback","hash":{},"data":data}))+"</span>";},"5":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"    "+alias1(helpers.tt.call(depth0,"n search results perso",{"name":"tt","hash":{"nb":(depth0!=null?depth0.nbResultsFormated:depth0)},"data":data}))+"<br /><a href=\"#votre-ville\" class=\"k4-managesearch-setcity\">"+alias1(helpers.tt.call(depth0,"n search results perso grey",{"name":"tt","hash":{"locality":(depth0!=null?depth0.localityFormated:depth0)},"data":data}))+"</a>\n";},"7":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"    "+alias1(helpers.tt.call(depth0,"n search results",{"name":"tt","hash":{"nb":(depth0!=null?depth0.nbResultsFormated:depth0)},"data":data}))+"\n    <br>\n    "+alias1(helpers.tt.call(depth0,"Personalize results",{"name":"tt","hash":{"locality":(depth0!=null?depth0.localityFormated:depth0)},"data":data}))+"\n";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1;return"<div class=\"k4-managesearch-cell k4-managesearch-nbresult k4-nbr-result\" data-result=\""+this.escapeExpression(this.lambda((depth0!=null?depth0.nbResults:depth0),depth0))+"\" >\n\n  "+((stack1=helpers.setvar.call(depth0,"nbResultsFormated",{"name":"setvar","hash":{},"fn":this.program(1,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n\n  "+((stack1=helpers.setvar.call(depth0,"localityFormated",{"name":"setvar","hash":{},"fn":this.program(3,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.locality:depth0),{"name":"if","hash":{},"fn":this.program(5,data,0),"inverse":this.program(7,data,0),"data":data}))!=null?stack1:"")+"\n</div>\n";},"useData":true});this["k4"]["templates"]["smartAppBanner"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var alias1=this.lambda,alias2=this.escapeExpression;return"<div class=\"k5-close k5-app-banner__close\" onclick=\"void(0)\"></div>\n<div class=\"k5-app-banner__icon\">\n  <img src=\""+alias2(alias1((depth0!=null?depth0.icon:depth0),depth0))+"\" alt=\"carrefour app banner icon\">\n</div>\n<div class=\"k5-app-banner__content\">\n  <div class=\"k5-app-banner__title\">"+alias2(alias1((depth0!=null?depth0.title:depth0),depth0))+"</div>\n  <div class=\"k5-app-banner__desc k5-ellipsis\">"+alias2(alias1((depth0!=null?depth0.description:depth0),depth0))+"</div>\n</div>\n<div class=\"k5-app-banner__btn\">\n  <a class=\"k5-cta-rectangle k5-cta--bggreen\" href=\""+alias2(alias1((depth0!=null?depth0.link:depth0),depth0))+"\">"+alias2(alias1((depth0!=null?depth0.buttonText:depth0),depth0))+"</a>\n</div>\n";},"useData":true});this["k4"]["templates"]["storelocatorInfowindow"]=Handlebars.template({"1":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"      <div class=\"k4-distance\">\n        <span class=\"k4-distance-value\">"+alias1(this.lambda((depth0!=null?depth0.distance:depth0),depth0))+"</span>\n        <abbr class=\"k4-distance-unit\" title=\""+alias1(helpers.t.call(depth0,"kilometers",{"name":"t","hash":{},"data":data}))+"\"> "+alias1(helpers.t.call(depth0,"km",{"name":"t","hash":{},"data":data}))+"</abbr>\n      </div>\n";},"3":function(depth0,helpers,partials,data){return this.escapeExpression(helpers.t.call(depth0,"C'est mon magasin préféré !",{"name":"t","hash":{},"data":data}));},"5":function(depth0,helpers,partials,data){return this.escapeExpression(helpers.t.call(depth0,"Ajouter comme magasin préféré ?",{"name":"t","hash":{},"data":data}));},"7":function(depth0,helpers,partials,data){return" is-favorite";},"9":function(depth0,helpers,partials,data){var stack1;return" \n    <div class=\"k4-storepopin-opening\">\n      <div class=\"k4-opening"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.is_open:depth0),{"name":"if","hash":{},"fn":this.program(10,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\">\n\n"+((stack1=this.invokePartial(partials.openhours,depth0,{"name":"openhours","data":data,"indent":"        ","helpers":helpers,"partials":partials}))!=null?stack1:"")+"\n      </div>\n    </div>\n";},"10":function(depth0,helpers,partials,data){return" is-open";},"12":function(depth0,helpers,partials,data){var alias1=this.lambda,alias2=this.escapeExpression;return"      <a class=\"k4-storepopin-drive-link\" href=\""+alias2(alias1((depth0!=null?depth0.drive_url:depth0),depth0))+"\" target=\"_blank\">\n        <img class=\"k4-storepopin-drive-icon\" src=\""+alias2(alias1((depth0!=null?depth0.drive_icon:depth0),depth0))+"\" alt=\""+alias2(helpers.t.call(depth0,"Carrefour Drive",{"name":"t","hash":{},"data":data}))+"\">\n      </a>\n";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1,alias1=this.lambda,alias2=this.escapeExpression;return"<div class=\"k4-storepopin\">\n  <div class=\"k4-storepopin-head\">\n    <div class=\"k4-storepopin-head-top\">\n      <img class=\"k4-storepopin-head-logo\"\n           src=\""+alias2(alias1((depth0!=null?depth0.typology_logo:depth0),depth0))+"\" alt=\""+alias2(alias1((depth0!=null?depth0.typology_name:depth0),depth0))+"\" />\n    </div>\n\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.distance:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n    <div class=\"k4-storepopin-head-extra\">\n      <form action=\""+alias2(alias1((depth0!=null?depth0.favoriteStoreURL:depth0),depth0))+"\" method=\""+alias2(alias1((depth0!=null?depth0.favoriteStoreMethod:depth0),depth0))+"\" >\n        <input type=\"hidden\" name=\"store_id\" value=\""+alias2(alias1((depth0!=null?depth0.store_id:depth0),depth0))+"\" />\n        <input type=\"hidden\" name=\"store_name\" value=\""+alias2(alias1((depth0!=null?depth0.name:depth0),depth0))+"\" />\n        <input type=\"hidden\" name=\"anabel_code\" value=\""+alias2(alias1((depth0!=null?depth0.code_anabel_store:depth0),depth0))+"\" />\n        <input type=\"hidden\" name=\"typology_name\" value=\""+alias2(alias1((depth0!=null?depth0.typology_name:depth0),depth0))+"\" />\n        <button type=\"submit\" title=\""+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.favorite:depth0),{"name":"if","hash":{},"fn":this.program(3,data,0),"inverse":this.program(5,data,0),"data":data}))!=null?stack1:"")+"\" class=\"k4-storefav k4-storefav_icon_s"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.favorite:depth0),{"name":"if","hash":{},"fn":this.program(7,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\" data-storefav-name=\""+alias2(alias1((depth0!=null?depth0.fullname:depth0),depth0))+"\">\n          <span class=\"element-invisible\">"+alias2(helpers.t.call(depth0,"Favorite",{"name":"t","hash":{},"data":data}))+"</span>\n        </button>\n      </form>\n    </div>\n    <button class=\"k4-close k4-js-closestorepopin\"><span class=\"element-invisible\">"+alias2(helpers.t.call(depth0,"Close",{"name":"t","hash":{},"data":data}))+"</span></button>\n  </div>\n\n  "+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.opening:depth0),{"name":"if","hash":{},"fn":this.program(9,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\n  <div class=\"k4-storepopin-name\">\n    <a href=\""+alias2(alias1((depth0!=null?depth0.link:depth0),depth0))+"\" class=\"k4-storepopin-name-link\">"+alias2(alias1((depth0!=null?depth0.fullname:depth0),depth0))+"</a>\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.drive_url:depth0),{"name":"if","hash":{},"fn":this.program(12,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"  </div>\n\n  <div class=\"k4-storepopin-address\">\n    "+alias2(alias1((depth0!=null?depth0.address:depth0),depth0))+"<br/>\n    "+alias2(alias1((depth0!=null?depth0.zipcode:depth0),depth0))+" "+alias2(alias1((depth0!=null?depth0.city:depth0),depth0))+"\n  </div>\n\n  <ul class=\"k4-storepopin-list\">\n    <li class=\"k4-storepopin-item\">\n      <a class=\"k4-cta2 k4-cta2_dark\" href=\""+alias2(alias1((depth0!=null?depth0.itineraire:depth0),depth0))+"\">"+alias2(helpers.t.call(depth0,"Get directions",{"name":"t","hash":{},"data":data}))+"</a>\n    </li>\n    <li class=\"k4-storepopin-item\">\n      <a class=\"k4-cta\" href=\""+alias2(alias1((depth0!=null?depth0.link:depth0),depth0))+"\">"+alias2(helpers.t.call(depth0,"See store infos",{"name":"t","hash":{},"data":data}))+"</a>\n    </li>\n  </ul>\n</div>\n";},"usePartial":true,"useData":true});this["k4"]["templates"]["storelocatorItem"]=Handlebars.template({"1":function(depth0,helpers,partials,data){var alias1=this.lambda,alias2=this.escapeExpression;return"    <a class=\"k4-storeitem-drive-link\" href=\""+alias2(alias1((depth0!=null?depth0.drive_url:depth0),depth0))+"\" target=\"_blank\">\n      <img class=\"k4-storeitem-drive-icon\" src=\""+alias2(alias1((depth0!=null?depth0.drive_icon:depth0),depth0))+"\" alt=\""+alias2(helpers.t.call(depth0,"Carrefour Drive",{"name":"t","hash":{},"data":data}))+"\">\n    </a>\n";},"3":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"        <div class=\"k4-distance\">\n          <span class=\"k4-distance-value\">"+alias1(this.lambda((depth0!=null?depth0.distance:depth0),depth0))+"</span>\n          <abbr class=\"k4-distance-unit\" title=\""+alias1(helpers.t.call(depth0,"kilometers",{"name":"t","hash":{},"data":data}))+"\"> "+alias1(helpers.t.call(depth0,"km",{"name":"t","hash":{},"data":data}))+"</abbr>\n        </div>\n";},"5":function(depth0,helpers,partials,data){var stack1;return" \n      <div class=\"k4-storeitem-opening\">\n        <div class=\"k4-opening"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.is_open:depth0),{"name":"if","hash":{},"fn":this.program(6,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\">\n\n"+((stack1=this.invokePartial(partials.openhours,depth0,{"name":"openhours","data":data,"indent":"          ","helpers":helpers,"partials":partials}))!=null?stack1:"")+"\n        </div>\n      </div>\n";},"6":function(depth0,helpers,partials,data){return" is-open";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1,alias1=this.lambda,alias2=this.escapeExpression;return"<li id=\"storeitem-"+alias2(alias1((depth0!=null?depth0.index:depth0),depth0))+"\">\n  <div class=\"k4-storeitem\">\n    <img class=\"k4-storeitem-pin\" src=\""+alias2(alias1((depth0!=null?depth0.style_url:depth0),depth0))+"\" alt=\"\">\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.drive_url:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"    <div class=\"k4-storeitem-head\">\n      <div class=\"k4-storeitem-head-logo\">\n        <img src=\""+alias2(alias1((depth0!=null?depth0.typology_logo:depth0),depth0))+"\" alt=\""+alias2(alias1((depth0!=null?depth0.typology_name:depth0),depth0))+"\">\n      </div>\n      <div class=\"k4-storeitem-head-extra\">\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.distance:depth0),{"name":"if","hash":{},"fn":this.program(3,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"      </div>\n    </div>\n    <div class=\"k4-storeitem-name\">\n      "+alias2(alias1((depth0!=null?depth0.fullname:depth0),depth0))+"\n    </div>\n    "+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.opening:depth0),{"name":"if","hash":{},"fn":this.program(5,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"  </div>\n</li>\n";},"usePartial":true,"useData":true});this["k4"]["templates"]["storelocatorTrioblock"]=Handlebars.template({"1":function(depth0,helpers,partials,data){return"      <p>"+this.escapeExpression(this.lambda((depth0!=null?depth0.errorText:depth0),depth0))+"</p>\n";},"3":function(depth0,helpers,partials,data){var stack1,alias1=this.lambda,alias2=this.escapeExpression;return"\n      <div class=\"k4-storeitem\">\n        <img class=\"k4-storeitem-pin\" src=\""+alias2(alias1((depth0!=null?depth0.style_url:depth0),depth0))+"\" alt=\"\">\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.drive_url:depth0),{"name":"if","hash":{},"fn":this.program(4,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"        <div class=\"k4-storeitem-head\">\n          <div class=\"k4-storeitem-head-logo\">\n            <img src=\""+alias2(alias1((depth0!=null?depth0.typology_logo:depth0),depth0))+"\" alt=\""+alias2(alias1((depth0!=null?depth0.typology_name:depth0),depth0))+"\">\n          </div>\n          <div class=\"k4-storeitem-head-extra\">\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.distance:depth0),{"name":"if","hash":{},"fn":this.program(6,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"          </div>\n        </div>\n        <div class=\"k4-storeitem-name\">\n          "+alias2(alias1((depth0!=null?depth0.fullname:depth0),depth0))+"\n        </div>\n        "+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.opening:depth0),{"name":"if","hash":{},"fn":this.program(8,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"      </div>\n";},"4":function(depth0,helpers,partials,data){var alias1=this.lambda,alias2=this.escapeExpression;return"        <a class=\"k4-storeitem-drive-link\" href=\""+alias2(alias1((depth0!=null?depth0.drive_url:depth0),depth0))+"\" target=\"_blank\">\n          <img class=\"k4-storeitem-drive-icon\" src=\""+alias2(alias1((depth0!=null?depth0.drive_icon:depth0),depth0))+"\" alt=\""+alias2(helpers.t.call(depth0,"Carrefour Drive",{"name":"t","hash":{},"data":data}))+"\">\n        </a>\n";},"6":function(depth0,helpers,partials,data){var alias1=this.escapeExpression;return"            <div class=\"k4-distance\">\n              <span class=\"k4-distance-value\">"+alias1(this.lambda((depth0!=null?depth0.distance:depth0),depth0))+"</span>\n              <abbr class=\"k4-distance-unit\" title=\"kilomètres\"> "+alias1(helpers.t.call(depth0,"km",{"name":"t","hash":{},"data":data}))+"</abbr>\n            </div>\n";},"8":function(depth0,helpers,partials,data){var stack1;return" \n          <div class=\"k4-storeitem-opening\">\n            <div class=\"k4-opening"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.is_open:depth0),{"name":"if","hash":{},"fn":this.program(9,data,0),"inverse":this.noop,"data":data}))!=null?stack1:"")+"\">\n\n"+((stack1=this.invokePartial(partials.openhours,depth0,{"name":"openhours","data":data,"indent":"              ","helpers":helpers,"partials":partials}))!=null?stack1:"")+"\n            </div>\n          </div>\n";},"9":function(depth0,helpers,partials,data){return" is-open";},"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var stack1;return"<div class=\"k4-trioblocks-block\">\n  <div class=\"k4-trioblocks-body\">\n\n    <h3 class=\"k4-trioblocks-title k4-text_none\">"+this.escapeExpression(this.lambda((depth0!=null?depth0.nearestText:depth0),depth0))+"</h3>\n\n"+((stack1=helpers['if'].call(depth0,(depth0!=null?depth0.errorText:depth0),{"name":"if","hash":{},"fn":this.program(1,data,0),"inverse":this.program(3,data,0),"data":data}))!=null?stack1:"")+"  </div>\n</div>\n";},"usePartial":true,"useData":true});this["k4"]["templates"]["videoPlayer"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(depth0,helpers,partials,data){var alias1=this.lambda,alias2=this.escapeExpression;return"<span class=\"k4-section_video-player LimelightEmbeddedPlayer\">\n  <span class=\"k4-section_video-player-inner\">\n    <object\n      type=\"application/x-shockwave-flash\"\n      id=\"limelight_player_"+alias2(alias1((depth0!=null?depth0.mediaId:depth0),depth0))+"\"\n      name=\"limelight_player_"+alias2(alias1((depth0!=null?depth0.mediaId:depth0),depth0))+"\"\n      class=\"LimelightEmbeddedPlayerFlash\"\n      width=\""+alias2(alias1((depth0!=null?depth0.width:depth0),depth0))+"\" height=\""+alias2(alias1((depth0!=null?depth0.height:depth0),depth0))+"\"\n      data=\""+alias2(alias1((depth0!=null?depth0.flashLoaderURL:depth0),depth0))+"\">\n        <param name=\"movie\" value=\""+alias2(alias1((depth0!=null?depth0.flashLoaderURL:depth0),depth0))+"\"/>\n        <param name=\"wmode\" value=\"transparent\"/>\n        <param name=\"allowScriptAccess\" value=\"always\"/>\n        <param name=\"allowFullScreen\" value=\"true\"/>\n        <param name=\"flashVars\" value=\"mediaId="+alias2(alias1((depth0!=null?depth0.mediaId:depth0),depth0))+"&amp;playerForm="+alias2(alias1((depth0!=null?depth0.playerForm:depth0),depth0))+"\"/>\n    </object>\n  </span>\n</span>\n";},"useData":true});;(function(Handlebars,Drupal){'use strict';Handlebars.registerHelper('t',function(key,options){var args={};if(options&&options.hash){Object.keys(options.hash).forEach(function(key){args['@'+key]=options.hash[key];});}
return Drupal.t(key,args);});Handlebars.registerHelper('tt',function(key,options){var args={};if(options&&options.hash){Object.keys(options.hash).forEach(function(key){args['@'+key]='%'+key+'%';});}
var result=Drupal.t(key,args);if(options&&options.hash){Object.keys(options.hash).forEach(function(key){result=result.replace('%'+key+'%',options.hash[key]);});}
return new Handlebars.SafeString(result);});Handlebars.registerHelper('imgurl',function(path){return Drupal.settings.basePath+Drupal.settings.pathToTheme+'/img/'+path;});Handlebars.registerHelper('debug',function(obj){window.console.debug(obj);});Handlebars.registerHelper('fallback',function(){var tests=[].splice.call(arguments,0);tests.splice(-1,1);for(var i=0;i<=tests.length;i++){if(tests[i]){return tests[i];}}
return'';});Handlebars.registerHelper('setvar',function(varname){var value;var tests=[].slice.call(arguments,1);var options=tests.splice(-1,1)[0];var context=options.hash.context||this;for(var i=0;i<=tests.length;i++){if(typeof value==='undefined'&&typeof tests[i]!=='undefined'&&tests[i]!==''){value=tests[i];if(value&&(value.dev||value.prod)){if(value.dev&&context.env&&context.env.dev){value=value.dev;}else if(value.prod&&context.env&&context.env.prod){value=value.prod;}else{value=undefined;}}}}
if(typeof value==='undefined'&&options.fn){value=new Handlebars.SafeString(options.fn(this));}
if(typeof value==='string'){if(context&&context.assets){value=value&&value.replace('{{assets}}',context.assets);}}
this[varname]=value;});})(window.Handlebars,window.Drupal);;(function($,k4,Logger,storage){'use strict';var stylemap={ERROR:'color: red',WARN:'color: orange',INFO:'color: blue',DEBUG:'color: green'};var level=storage.get('k4-logger-level');function getDefaultLogLevel(){return window.Drupal.settings.jslogs||'OFF';}
function nameToPrefix(name){return'['+name.split('.').join('][')+']';}
Logger.useDefaults({defaultLevel:Logger[level||getDefaultLogLevel()],formatter:function(messages,context){var prefix='[k4]';if(context.name){prefix+='['+context.name.split('.').join('][')+']';}
var firstMessage=messages[0];if(stylemap[context.level.name]){prefix='%c'+prefix;messages[0]=stylemap[context.level.name];}else{messages.slice(1);}
messages.unshift(prefix+' '+firstMessage);return messages;}});var screenLog=(function(){var wrapper,prevText;var log=function(text){wrapper=wrapper||$('<div id="k4-logger" style="padding:10px 5px;position:fixed;background:white;width:80%;top:50px;left:10%;z-index:1000;max-height:200px;overflow:scroll;"><div>').appendTo($('body'));text=Array.prototype.slice.call(arguments,0).join(' ');var addText=text===prevText?' +':(prevText?'<br/>':'')+text;wrapper.html(wrapper.html()+addText);prevText=text;};var getLog=function(name){var prefix=nameToPrefix(name);return function(text){log(prefix+' '+text);};};log.get=function(name){return{debug:getLog(name),info:getLog(name),warn:getLog(name),error:getLog(name),setLevel:function(){},enabledFor:function(){}};};log.setLevel=function(){};return log;})();function setLogLevel(level){if(!level){storage.remove('k4-logger-level');level=getDefaultLogLevel();}else{level=level.toUpperCase();if(['DEBUG','INFO','WARN','ERROR','OFF'].indexOf(level)===-1){window.console.warn('Wrong value. (debug || info || warn || error || off)');return;}
storage.set('k4-logger-level',level);}
Logger.setLevel(Logger.INFO);Logger.info('Log level set to %s',level);Logger.setLevel(Logger[level]);}
k4.Logger=Logger;k4.screenLog=screenLog;k4.setLogLevel=setLogLevel;})(jQuery,window.k4,window.Logger,window.store);;(function($,k4,store){'use strict';var prefix='k4-%name%-';function Storage(name){this.name=name;this.prefix=prefix.replace('%name%',name||'main');this.log=k4.Logger.get('storage.'+name);}
Storage.prototype.set=function(key,value){this.log.debug('set',key,value);store.set(this.prefix+key,value);};Storage.prototype.get=function(key){var result=store.get(this.prefix+key);this.log.debug('get',key,result);return result;};Storage.prototype.remove=function(key){this.log.debug('remove',key);store.remove(this.prefix+key);};function removeAll(){Object.keys(store.getAll()).forEach(function(key){store.remove(key);});}
var stores={};function getStore(name){if(!stores[name]){stores[name]=new Storage(name);}
return stores[name];}
k4=k4||{};k4.Storage={get:getStore,removeAll:removeAll};})(jQuery,window.k4,window.store);;(function($,k4,Drupal,moment){'use strict';var log=k4.Logger.get('helpers');moment.locale('fr',{months:'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_')});function isGlobalEvent(eventName){return/^k4-/.test(eventName);}
function implementPubSub(obj,options){var o=$({});options=options||{};obj.on=function(eventName){var pubsub=isGlobalEvent(eventName)?k4.pubsub:o;pubsub.on.apply(pubsub,arguments);return obj;};obj.one=function(eventName){var pubsub=isGlobalEvent(eventName)?k4.pubsub:o;pubsub.one.apply(pubsub,arguments);return obj;};obj.off=function(eventName){var pubsub=isGlobalEvent(eventName)?k4.pubsub:o;pubsub.off.apply(pubsub,arguments);return obj;};obj.trigger=function(eventName){if(options.log){options.log.debug('[trigger] '+eventName);}
var pubsub=isGlobalEvent(eventName)?k4.pubsub:o;var args=Array.prototype.slice.call(arguments[1]||[]);args.push(obj);pubsub.trigger(eventName,args);return obj;};obj.bindEvent=function(eventName){var args=Array.prototype.slice.call(arguments);args.shift();return function(){var parentsArgs=Array.prototype.slice.call(args);var _args=Array.prototype.slice.call(arguments);_args=parentsArgs.concat(_args);obj.trigger(eventName,_args);};};obj.addControls=function(controls){obj.controls=$.extend(obj.controls||{},controls);$.each(controls,function(eventName,actions){if(typeof actions==='string'){actions=[actions];}
obj.on(eventName,function(){var args=Array.prototype.slice.apply(arguments);obj.chain(actions,args);});});};obj.chain=function(actions,args){var deferred=$.when();$.each(actions,function(i,action){if(typeof action==='object'){obj.chain(action,args);return;}
var result=true;deferred=deferred.then(function(){if(action.indexOf(':')>0){var split=action.split(':');var queryLetter=split[0];action=split[1];if(window.k4.mq.isNot(queryLetter)){result=!!action;return;}else if(!action){return;}}
if(action.indexOf('=>')===0){result=obj.chain(obj.controls[action.slice(2)],args.slice(1));}else if(action.indexOf('->')===0){obj.trigger(action.slice(2),args.slice(1));}else if(action.indexOf('!')===0){result=!obj[action.slice(1)].apply(obj,args);}else{result=obj[action].apply(obj,args);}
return result;});return result;});return deferred;};}
if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');};}
$.defer=function(func){var args=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},0);};function getOrientation(){return k4.mq.is('portrait')?'portrait':'landscape';}
function getDeviceMode(){var device;if(k4.mq.is('M')||(k4.mq.is('S',{bigger:true})&&k4.mq.isNot('landscape'))){device='desktop';}else if(k4.mq.is('XS')||(k4.mq.is('S')&&k4.mq.is('landscape'))){device='mobile';}else{device='tablet';}
return device;}
function readStorevalCookie(){if(!$.cookie){log.debug('jQuery.cookie not found, cannot read storeval cookie');return false;}
var storeval=$.cookie('storeval');if(!storeval){return false;}
storeval=storeval.replace(/[\[\]"]/g,'').split(',');if(storeval.length<4){return false;}
return{id:storeval[0],name:storeval[1],anabel_code:storeval[2],type:storeval[3],uid:storeval[4]};}
function deleteStorevalCookie(){if(!$.cookie){log.debug('jQuery.cookie not found, cannot read storeval cookie');return false;}
return $.removeCookie('storeval',{path:'/'});}
function favStoreID(){var favstore=k4.helpers.readStorevalCookie();if(favstore&&favstore.id){return[favstore.id];}
return[];}
function onLoad(moduleName,func,detachFunc){if(typeof moduleName!=='string'){log.warn('onLoad - Wrong moduleName argument',moduleName);return;}
if(typeof func!=='function'){log.warn('onLoad - Wrong func argument',func);return;}
Drupal.behaviors['k4-'+moduleName]={attach:func};if(typeof detachFunc==='function'){Drupal.behaviors['k4-'+moduleName].detach=detachFunc;}
$(document).on('k4-ajaxloaded',function(e,container){if(container){func(container);}else{k4.Logger.get('helpers.onload').warn('ajaxloaded event received with no container');}});}
function unLoad(moduleName){if(typeof moduleName!=='string'){log.warn('unLoad - Wrong moduleName argument',moduleName);return;}
delete Drupal.behaviors['k4-'+moduleName];}
var getWindowHeight=(function(){var $window=$(window);return function(){if(document.readyState==='complete'){return window.innerHeight;}
return $window.height();};})();function domChanged(context,settings){Drupal.attachBehaviors(context,$.extend({},Drupal.settings,settings));}
function openModal(options){if(!options.content){log.error('openModal called without content');return;}
if(!Drupal.CTools||!Drupal.CTools.Modal){log.error('openModal called but Drupal.CTools.Modal not loaded');return;}
var choice=options.choice||(!options.noclose?'rsc-modal-fixed':'rsc-modal-fixed-noclose');Drupal.CTools.Modal.show(choice);if(options.title){$('#modal-title').text(options.title);}else{$('#modal-title').parent().remove();}
$('#modal-content').html(options.content);}
function closeModal(){Drupal.CTools.Modal.dismiss();}
function bindCustomResizeEvents(){var $window=$(window);var previousWidth=$window.width();var previousHeight=getWindowHeight();$window.on('resize',function(){var width=$window.width();var height=k4.helpers.getWindowHeight();$window.trigger('k4-resize',[{width:width,height:height}]);if(Math.abs(width-previousWidth)>3){$window.trigger('k4-resize.width',[{width:width,height:height}]);}
if(Math.abs(height-previousHeight)>3){$window.trigger('k4-resize.height',[{width:width,height:height}]);}
previousWidth=width;previousHeight=height;});}
bindCustomResizeEvents();var loadScript=(function(){var scripts={};return function(scriptPath){if(scripts[scriptPath]){return scripts[scriptPath];}else{var deferred=$.Deferred();var fullPath=Drupal.settings.basePath+Drupal.settings.pathToTheme+'/js/'+scriptPath;$.getScript(fullPath,function(){deferred.resolve();}).fail(function(){deferred.reject();});var promise=deferred.promise();scripts[scriptPath]=promise;return promise;}};})();function toPromise(fn){return $.Deferred().resolve().promise().then(fn);}
$.fn.toggleElement=function(options){var $element=$(this);if(!$element.length){return $.Deferred().resolve().promise();}
if($element.length>1){return $.when.apply($,$element.map(function(){return $(this).toggleElement(options);}).get());}
options=options||{};var $body=options.body?$(options.body,$element):$element;var openClass=options.openClass||'is-open';if(options.open){$body.css('height',$body.height()+'px');$element.addClass(openClass);var targetHeight=0;$body.children().each(function(){targetHeight+=$(this).outerHeight();});return $body.stop().animate({height:targetHeight+'px'},$.extend({},options,{complete:function(){$body.css('height','');if(options.complete){options.complete();}}})).promise();}else{return $body.stop().animate({height:'0'},$.extend({},options,{complete:function(){$element.removeClass(openClass);$body.css('height','');if(options.complete){options.complete();}}})).promise();}};$.fn.openElement=function(options){return $(this).toggleElement($.extend(options,{open:true}));};$.fn.closeElement=function(options){return $(this).toggleElement($.extend(options,{open:false}));};var debounceImagesLoaded=200;$.fn.k4ImagesLoaded=function(callback,options){var $this=this;if(!$this.length){return $this;}
if(!$.fn.imagesLoaded){log.warn('imagesLoaded plugin not found (display issues may occur)');callback();return;}
options=options||{};var debouncedCallback=$.debounce(debounceImagesLoaded,callback);$this.imagesLoaded().always(debouncedCallback);$this.on('lazybeforeunveil',options.elements,function(){$this.imagesLoaded().always(debouncedCallback);});};var headerIsStuck=(function(){var deferred=$.Deferred();var timeout=setTimeout(function(){deferred.reject('timeout');$(document).off('k4-stuck-init.helpers');},2000);$(document).one('k4-stuck-init.helpers',function(){deferred.resolve();clearTimeout(timeout);});return deferred.promise();})();var scrollContainer='.k4-main-body';function _scrollTo($target,options){if(typeof $target==='object'&&!$target.length){log.error('scrollTo: nothing to scroll to');return $.Deferred().reject('nothing to scroll to').promise();}
options=options||{};var targetPosition;if(typeof $target==='number'){targetPosition=$target;}else{targetPosition=$target.offset().top-$(scrollContainer).offset().top;}
return $('html, body').animate({scrollTop:targetPosition},options.scrollDuration||400,options.scrollTransition).promise();}
function scrollTo($target,options){return $.when(headerIsStuck).then(function(){return _scrollTo($target,options);},function(){return _scrollTo($target,options);});}
var getScrollbarSize=(function(){var scrollbarSize;return function(){if(scrollbarSize===undefined){var scrollDiv=document.createElement('div');scrollDiv.style.cssText='width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';document.body.appendChild(scrollDiv);scrollbarSize=scrollDiv.offsetWidth-scrollDiv.clientWidth;document.body.removeChild(scrollDiv);}
return scrollbarSize;};})();var i=0;var previousScrollTop;function toggleBodyScroll(toggle){if(toggle){i--;}else{i++;}
if(!toggle&&i!==1){return;}else if(toggle&&i!==0){return;}
if(!toggle){previousScrollTop=Math.max($('html').scrollTop(),$('body').scrollTop());}
$('html, body').css({overflow:toggle?'':'hidden',position:toggle?'':'fixed',height:toggle?'':k4.helpers.getWindowHeight()+'px',left:toggle?'':0,right:toggle?'':0});if(k4.mq.is('L')){$('body').css({'margin-right':toggle?'':getScrollbarSize()+'px'});}
setTimeout(function(){$('html, body').scrollTop(previousScrollTop);},0);}
$.fn.disableFields=function(key,options){return $(this).map(function(){var $this=$(this);if(!this.toggleLock&&$this.is('input[disabled]')){return;}
this.toggleLock=this.toggleLock||{};var currentLocks=Object.keys(this.toggleLock).length;this.toggleLock[key]=true;if(!currentLocks){$this.attr('disabled','disabled');if(options&&options.triggerEvent){$this.trigger(options.triggerEvent);}
return this;}});};$.fn.enableFields=function(key,options){return $(this).map(function(){var $this=$(this);if(!this.toggleLock&&$this.is('input')){return;}
this.toggleLock=this.toggleLock||[];delete this.toggleLock[key];var currentLocks=Object.keys(this.toggleLock).length;if(!currentLocks){$this.removeAttr('disabled');if(options&&options.triggerEvent){$this.trigger(options.triggerEvent);}
return this;}});};function ensureGoogleMaps(){if(!window.initMap){window.initMap=$.noop;}
return k4.helpers.toPromise(function(){if(!window.google||!window.google.maps){if(!Drupal.settings.storelocator_app||!Drupal.settings.storelocator_app.googlemapsapi){log.error('Drupal.settings.storelocator_app.googlemapsapi not found, can\'t geocode user location');return $.Deferred().reject().promise();}else{return $.getScript(Drupal.settings.storelocator_app.googlemapsapi);}}});}
function isNewNav(){return Drupal.settings.hasOwnProperty('rsc_header');}
function isNewNavGrid(){return isNewNav()&&$('.nav-v2-products-grid').length>0;}
function isHomepage(){return $('.page-home').length>0;}
function getOptionsFromData(container,jsModule){var options=container.getAttribute('data-'+jsModule+'-options')||'{}';return JSON.parse(options);}
window.k4=window.k4||{};window.k4.helpers={implementPubSub:implementPubSub,getOrientation:getOrientation,getDeviceMode:getDeviceMode,readStorevalCookie:readStorevalCookie,deleteStorevalCookie:deleteStorevalCookie,favStoreID:favStoreID,onLoad:onLoad,unLoad:unLoad,toPromise:toPromise,domChanged:domChanged,openModal:openModal,closeModal:closeModal,getWindowHeight:getWindowHeight,loadScript:loadScript,scrollTo:scrollTo,toggleBodyScroll:toggleBodyScroll,ensureGoogleMaps:ensureGoogleMaps,isNewNav:isNewNav,isNewNavGrid:isNewNavGrid,isHomepage:isHomepage,getOptionsFromData:getOptionsFromData};window.k4.pubsub=$(document);})(jQuery,window.k4,window.Drupal,window.moment);;(function($,k4){'use strict';var log=k4.Logger.get('hepers.google');function latLngToLiterals(latLng){if(latLng&&typeof latLng.lat&&typeof latLng.lat!=='function'){return latLng;}else if(!latLng||typeof latLng.lat!=='function'){log.error('latLngToLiterals function called with wrong argument',latLng);return{};}
return{lat:latLng.lat(),lng:latLng.lng()};}
function boundsToLiterals(bounds){if(bounds&&bounds.south){return bounds;}else if(!bounds||typeof bounds.getSouthWest!=='function'){log.error('boundsToLiterals function called with wrong argument',bounds);return{};}
return{south:bounds.getSouthWest().lat(),west:bounds.getSouthWest().lng(),north:bounds.getNorthEast().lat(),east:bounds.getNorthEast().lng()};}
function locationToLiterals(location){if(!location||!location.geometry){log.error('locationToLiterals function called with wrong argument',location);return{};}
var result={};if(location.geometry.bounds){result.bounds=boundsToLiterals(location.geometry.bounds);}else if(location.geometry.viewport){result.bounds=boundsToLiterals(location.geometry.viewport);}
if(location.geometry.location){result.position=latLngToLiterals(location.geometry.location);}
return result;}
window.k4=window.k4||{};window.k4.helpers=window.k4.helpers||{};window.k4.helpers.google={latLngToLiterals:latLngToLiterals,boundsToLiterals:boundsToLiterals,locationToLiterals:locationToLiterals};})(jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('mq');var mediaQueryAll='all';var mediaQuerySmaller='%q% and (max-width: %width%px)';var mediaQueryBigger='%q% and (min-width: %width%px)';var mediaQueryPortrait='%q% and (orientation:portrait)';var mediaQueryLandscape='%q% and (orientation:landscape)';var grid={XS:441,S:780,M:1025,L:1200,XL:1300,XXL:1500};function buildQuery(letter,options,query){options=options||{};query=query||mediaQueryAll;if(typeof letter==='object'){$.each(letter,function(i,l){query=buildQuery(l,options,query);});}else{if(letter==='portrait'){query=mediaQueryPortrait.replace('%q%',query);log.debug('built query',query);return query;}else if(letter==='landscape'){query=mediaQueryLandscape.replace('%q%',query);log.debug('built query',query);return query;}
if(typeof letter==='string'&&letter.indexOf('!')===0){options.negate=!options.negate;letter=letter.slice(1);}
var size=typeof letter==='number'?letter:grid[letter];if(typeof letter==='string'&&letter.indexOf('-')>0){var letters=letter.split('-');query=buildQuery(letters[0],{bigger:true},query);return buildQuery(letters[1],{bigger:false},query);}
if(typeof options.bigger==='undefined'){if(size<=grid.S){options.bigger=!!options.negate;}else{options.bigger=!options.negate;}}
var pattern=options.bigger?mediaQueryBigger:mediaQuerySmaller;if(!options.bigger){size--;}
query=pattern.replace('%q%',query).replace('%width%',size);}
log.debug('built query',query);return query;}
function getQuery(letter,options){var query=buildQuery(letter,options);return window.matchMedia(query);}
function is(letter,options){if(typeof letter==='undefined'){log.error('"is" function is called without letter');return false;}
return getQuery(letter,options).matches;}
function isNot(letter,options){return!is(letter,options);}
function filter(letter,fn,negate){return function(){if(negate?isNot(letter):is(letter)){fn.apply(this,arguments);}};}
function filterNot(letter,fn){return filter(letter,fn,true);}
function when(letter,callback,options){if(letter){options=options||{};var query=getQuery(letter,options);var listener=function(mediaQuery){if(mediaQuery.matches){callback();if(options.once){query.removeListener(listener);}}};query.addListener(listener);if(options.now&&query.matches){callback();if(options.once){query.removeListener(listener);}}}
return window.k4.mq;}
function whenNot(letter,callback,options){options=options||{};options.negate=true;return when(letter,callback,options);}
function isOrWhen(letter,callback,options){options=options||{};options.now=true;options.once=true;when.call(null,letter,callback,options);}
window.k4=window.k4||{};window.k4.config=window.k4.config||{};$.extend(window.k4.config,{grid:grid});window.k4.mq={is:is,isNot:isNot,filter:filter,filterNot:filterNot,when:when,whenNot:whenNot,isOrWhen:isOrWhen};})(jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('slider');var config=k4.config;if(!$.fn.slick){log.error('abort slider: slick plugin not loaded');return;}
var params={slick:{infinite:false,initialSlide:0,mobileFirst:true,respondTo:'window',responsive:undefined,slide:'',slidesToShow:1,slidesToScroll:1,speed:300,swipe:true,touchMove:true,touchThreshold:5,useCSS:true,dots:false,asNavFor:null,focusOnSelect:false}};var sliders=[{container:'.k4-catalogslider-list',slick:{dots:true,responsive:[{breakpoint:config.grid.M-1,settings:'unslick'}]}},{container:'.k4-landingslider-list',slick:{dots:true,arrows:true,infinite:true,slidesToShow:1,slidesToScroll:1}},{container:'.k4-sevenprodslider-list',slick:{dots:true,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.S-1,settings:'unslick'}]}},{container:'.k4-pinblockslider-list',slick:{dots:true,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.S-1,settings:'unslick'}]}},{container:'.k4-productslider-list',slick:{dots:true,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.S-1,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:config.grid.XL-1,settings:{slidesToShow:5,slidesToScroll:5}}]}},{container:'.k4-slidersmultiple_6to2 .k4-slidersmultiple-list, .k4-slidersmultiple_5to2 .k4-slidersmultiple-list',slick:{dots:false,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.M,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:config.grid.L,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:config.grid.XL,settings:'unslick'}]}},{container:'.k4-slidersmultiple_4to2 .k4-slidersmultiple-list',slick:{dots:false,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.M,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:config.grid.L,settings:'unslick'}]}},{container:'.k4-slidersmultiple_3to2 .k4-slidersmultiple-list',slick:{dots:false,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.M,settings:'unslick'}]}},{container:'.k4-slider4to1-list',slick:{dots:true,arrows:true,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.XS-1,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:config.grid.S-1,settings:{slidesToShow:4,slidesToScroll:4}}]}},{container:'.k4-slider3to1-list',slick:{dots:true,arrows:true,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.XS-1,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:config.grid.S-1,settings:{slidesToShow:3,slidesToScroll:3}}]}},{container:'.k4-slidersmultiple_0to1 .k4-slidersmultiple-list',slick:{dots:true,arrows:true,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.S-1,settings:'unslick'}]}},{container:'.k4-slidersmultiple_0to2 .k4-slidersmultiple-list',slick:{dots:true,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.S-1,settings:'unslick'}]}},{container:'.k4-slidersmultiple_3to1 .k4-slidersmultiple-list',slick:{dots:true,arrows:true,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.S-1,settings:{slidesToShow:3,slidesToScroll:3}}]}},{container:'.k4-slidersmultiple_4to1 .k4-slidersmultiple-list',slick:{dots:true,arrows:true,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.S-1,settings:{slidesToShow:4,slidesToScroll:4}}]}},{container:'.k4-slidersedge .k4-slidersedge-list',slick:{dots:true,arrows:true,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.XS-1,settings:{slidesToShow:2,slidesToScroll:2}},{dots:false,arrows:true,breakpoint:config.grid.S-1,settings:{slidesToShow:3,slidesToScroll:3}},{dots:false,arrows:true,breakpoint:config.grid.XXL-1,settings:{slidesToShow:4,slidesToScroll:4}}]}},{container:'.k4-productinfoslider-list',slick:{dots:true,arrows:true,slidesToShow:1,slidesToScroll:1,asNavFor:'.k4-productinfothumb-list',responsive:[{breakpoint:config.grid.S-1,settings:{dots:false,arrows:false}}]}},{container:'.k4-productinfothumb-list',slick:{asNavFor:'.k4-productinfoslider-list',dots:false,arrows:false,slidesToShow:6,slidesToScroll:1,focusOnSelect:true}},{container:'.k4-eventslider-list',slick:{dots:true,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.S-1,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:config.grid.XL-1,settings:{slidesToShow:5,slidesToScroll:5}}]}},{container:'.k4-expertslider-list',slick:{dots:true,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.XS-1,settings:{slidesToShow:3,slidesToScroll:3}}]}},{container:'.k4-sectionslider-list',slick:{dots:true,arrows:true,infinite:true}},{container:'.k4-pictureslider',slick:{dots:true,arrows:false,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.S-1,settings:{slidesToShow:4,slidesToScroll:4}}]}},{container:'.k4-storenewsslider-list',slick:{dots:true,arrows:true,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:config.grid.S-1,settings:{slidesToShow:4,slidesToScroll:4}}]}},{container:'.k4-diaposlider-list',slick:{dots:true,arrows:true,slidesToShow:1,slidesToScroll:1},navSlider:{mainContainer:'.k4-section-body',container:'.k4-diapothumbslider-list',slick:{mobileFirst:false,dots:false,arrows:false,slide:'.k4-diapothumbslider-item',slidesToShow:4,slidesToScroll:2,centerMode:false,focusOnSelect:true,responsive:[{breakpoint:config.grid.S-1,settings:'unslick'}]}}},{container:'.k4-postcardslider-list',slick:{dots:true,arrows:true,infinite:true}},{container:'.k4-fuel-content',slick:{dots:true,arrows:false,slide:'.k4-fuel-item',slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.XS-1,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:config.grid.S-1,settings:'unslick'}]}},{container:'.k4-giftgenerator-header_slider',slick:{dots:true,arrows:true,slide:'.k4-giftgenerator-header-slide',slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:config.grid.XS-1,settings:{slidesToShow:2,slidesToScroll:2}}]}}];$('.k4-fuel-container').on('init destroy',function(){$('.k4-fuel-container .k4-fuel-mention').appendTo('.k4-fuel-container');});function readBOSliderConfiguration($sliderContainer){var specificOptions={};if($sliderContainer.attr('data-slider-autoplay')==='true'){specificOptions.autoplay=true;}
var autoplayspeed=parseInt($sliderContainer.attr('data-slider-autoplayspeed'),10);if(!isNaN(autoplayspeed)){specificOptions.autoplaySpeed=autoplayspeed;}
return specificOptions;}
function buildResponsiveSliders($sliderContainer,slickOptions){if(!$sliderContainer.length){return;}
$sliderContainer.not('.slick-initialized').slick(slickOptions);$(slickOptions.responsive).each(function(i,responsive){if(responsive.settings==='unslick'){var bigger=!slickOptions.mobileFirst;k4.mq.when(responsive.breakpoint,function(){$sliderContainer.slick(slickOptions);},{bigger:bigger});}});}
function buildOptionsAndSliders(sliderOptions,container){$(sliderOptions.container,container).each(function(){var $sliderContainer=$(this);var specificOptions=readBOSliderConfiguration($sliderContainer);var slickOptions=$.extend({},params.slick,sliderOptions.slick,specificOptions);if($('[data-background-video], video',$sliderContainer).length&&slickOptions.infinite){slickOptions.infinite=false;log.warn('Background videos are not compatible with infinite option: desactivating infinite option');}
$('.k4-section-video').on('touchmove mousemove',function(e){e.stopPropagation();});if(!sliderOptions.navSlider){buildResponsiveSliders($sliderContainer,slickOptions);}else{var $currentSliderContainer=$(this);var navSliderOptions=$.extend(true,{},sliderOptions.navSlider);navSliderOptions.slick.asNavFor=$currentSliderContainer;navSliderOptions.container=$currentSliderContainer.closest(navSliderOptions.mainContainer).find(navSliderOptions.container);buildOptionsAndSliders(navSliderOptions,container);var specificSlickOptions=$.extend({},slickOptions);specificSlickOptions.asNavFor=navSliderOptions.container;specificSlickOptions.appendArrows=navSliderOptions.container;buildResponsiveSliders($currentSliderContainer,specificSlickOptions);}});}
k4.helpers.onLoad('slider',function(container){$(sliders).each(function(i,sliderOptions){buildOptionsAndSliders(sliderOptions,container);$('.slick-slide').on('touchstart',function(){});});});})(jQuery,window.k4);;(function($){'use strict';var defaultOptions={skipDirection:'vertical',timeout:500,items:'.item',enter:function(){},leave:function(){},hoverItem:function(){},leaveItem:function(){},mq:false,notMq:false};function checkMq(params){if(params.mq){if(!window.k4.mq.is(params.mq)){return false;}}
if(params.notMq){if(window.k4.mq.is(params.notMq)){return false;}}
return true;}
function getCoords(e){return{x:e.pageX,y:e.pageY};}
function DirectionHover($container,params){var prevPageCoords=false;var timer;var $hovered=false;var hoverMenu=false;var isOpen=false;params=$.extend({},defaultOptions,params);function enter(){if(!isOpen){isOpen=true;params.enter($container);}}
function leaveItem(){if(!$hovered){return;}
params.leaveItem($hovered,$container);$hovered=false;}
function hoverItem($navItem){enter();leaveItem();$hovered=$navItem;params.hoverItem($navItem,$container);}
function leave(){if(isOpen){isOpen=false;leaveItem();params.leave($container);}}
function isHovered($navItem){if(!$hovered){return false;}
return $hovered.is($navItem);}
function direction(e){var coords=getCoords(e);if(coords.x===prevPageCoords.x&&coords.y===prevPageCoords.y){return false;}
var delta={x:prevPageCoords.x-coords.x,y:prevPageCoords.y-coords.y};var vertical=Math.abs(delta.y)>Math.abs(delta.x);var horizontal=!vertical;return{vertical:vertical,horizontal:horizontal,right:horizontal&&delta.x<0,left:horizontal&&delta.x>=0,down:vertical&&delta.y<0,up:vertical&&delta.y>=0};}
$container.on('mousemove mouseenter mouseleave',function(e){if(!checkMq(params)){return;}
if(e.type==='mouseenter'){hoverMenu=true;}else if(e.type==='mouseleave'){prevPageCoords=false;hoverMenu=false;leave();}else if(e.type==='mousemove'){prevPageCoords=getCoords(e);}});$container.on('mouseenter mouseleave',params.items,function(e){if(!checkMq(params)){return;}
var $navItem=$(this);if(e.type==='mouseenter'){if(!prevPageCoords||!$hovered){hoverItem($navItem);}else{if(!direction(e)[params.skipDirection]&&!isHovered($navItem)){hoverItem($navItem);}else if(typeof params.timeout==='number'){timer=setTimeout(function(){hoverItem($navItem);},params.timeout);}}}else if(e.type==='mouseleave'){if(timer){clearTimeout(timer);}}});return{leave:leave};}
$.fn.directionHover=function(params){return this.each(function(){var $this=$(this);var directionHover=this.directionHover;if(typeof params==='string'&&directionHover){directionHover[params]();}else{this.directionHover=new DirectionHover($this,params);}});};})(jQuery);;(function($,k4,moment){'use strict';var log=k4.Logger.get('header');var eventsLog=k4.Logger.get('header.events');var helpers=k4.helpers;if(!moment){log.warn('moment.js not found, userconnect popin may not work properly');}
var config={menus:[{trigger:'.k4-allcatbtn',list:'.k4-allcatlist',listInner:'.k4-allcatlist-wrap'},{trigger:'.k4-allcatbtn-v2',list:'.k4-allcatlist-v2',listInner:'.k4-allcatlist-v2-wrap'},{trigger:'.k4-userinfos_account',list:'.k4-remote',listInner:'.k4-remote-body'},{list:'.k4-userconnect',listInner:'.k4-userconnect-wrap, .k4-popinarrow_account',openTimer:3000,beforeOpenTimer:2000,onceADay:true,mq:'!S'},{trigger:'.k4-userinfos_store',list:'.k4-storeoverlayer',listInner:'.k4-storeoverlayer-wrap, .k4-popinarrow_store',mq:'!S'}],classes:{open:'is-open',loaded:'is-loaded'}};function controller(menu){menu.addControls({'toggleMenu':'toggleMenu','openMenu':['openMenu','->k4-header-open'],'closeMenu':'closeMenu','k4-nav-open':'closeMenu','k4-header-open':['!ifMyEvent','closeMenu'],'k4-header-close':['closeMenu']});}
function Menu(params){var menu=this;$.extend(menu,{params:params,$list:$(params.list),$listInner:$(params.listInner),name:params.list.replace(/[\.# ]/g,'')});if(!menu.$list.length){log.debug('No menu: ',params.list);return;}
if(menu.$list[0].isMenu){log.debug('Menu already created: ',params.list);return;}
menu.$list[0].isMenu=true;helpers.implementPubSub(menu,{log:eventsLog});menu.init();}
$.extend(Menu.prototype,{init:function(){this.bindEvents();if(this.params.openTimer){this.openOnLoad();}
controller(this);},bindEvents:function(){if(this.params.trigger){var menu=this;$(document).on('click',this.params.trigger,function(e){if(menu.params.mq&&k4.mq.isNot(menu.params.mq)){log.debug('Popin %s prevented by mq',menu.params.list);return true;}
if(menu.$list.selector==='.k4-storeoverlayer'){if(!k4.helpers.favStoreID().length){return true;}
k4.store.getFavStore().then(function(storeAttributes){$(document).trigger('k4-store-overlayer',[storeAttributes]);},function(err){log.warn('Couldn\'t get favorite store:',err);});}
e.preventDefault();menu.trigger('toggleMenu');});menu.$list.on('click',function(e){var $target=$(e.target);if(!$target.closest(menu.params.listInner).length||$target.is('a')||$target.is(menu.params.listInner)){menu.trigger('closeMenu');}});if(menu.params.mq){k4.mq.whenNot(menu.params.mq,function(){menu.closeMenu();});}}},ifMyEvent:function(e,menu){return menu===this;},openOnLoad:function(){var menu=this;if(menu.params.mq&&k4.mq.isNot(menu.params.mq)){log.debug('Popin %s prevented by mq',menu.params.list);return;}
if(menu.params.onceADay){var today=moment().format('DD/MM/YYYY');var cookiename=menu.params.list.replace('.','menu-');if($.cookie(cookiename)===today){log.debug('Popin %s already shown for today',menu.params.list);return;}
$.cookie(cookiename,today,{expires:1,path:'/'});}
setTimeout(function(){menu.openMenu();var timeout=setTimeout($.proxy(menu.closeMenu,menu),menu.params.openTimer);menu.$listInner.on('mouseenter',function(){clearTimeout(timeout);});menu.$listInner.on('mouseleave',function(){timeout=setTimeout($.proxy(menu.closeMenu,menu),menu.params.openTimer);});},menu.params.beforeOpenTimer||0);}});$.extend(Menu.prototype,{toggleMenu:function(){var toggle=!this.$list.hasClass(this.params.classes.open);this.trigger(toggle?'openMenu':'closeMenu');},openMenu:function(){if(!this.$list.hasClass(this.params.classes.open)){this.$listInner=$(this.params.listInner);k4.helpers.toggleBodyScroll(false);$(this.params.trigger).addClass(this.params.classes.open);this.$list.addClass(this.params.classes.open);this.$listInner.addClass(this.params.classes.open);}},closeMenu:function(){if(this.$list.hasClass(this.params.classes.open)){k4.helpers.toggleBodyScroll(true);$(this.params.trigger).removeClass(this.params.classes.open);this.$list.removeClass(this.params.classes.open);this.$listInner.removeClass(this.params.classes.open);}}});$(document).on('k4-store-overlayer',function(e,storeAttributes){$('.k4-storeoverlayer-details').html(k4.templates.headerStoreOverlayer(storeAttributes)).addClass(config.classes.loaded);});k4.helpers.onLoad('header',function(container){config.menus.forEach(function(menu){if($(menu.list,container).length){new Menu($.extend({},menu,config));}});});})(jQuery,window.k4,window.moment);;(function($){'use strict';var config={sitemapTitle:'.k4-sitemap-title',sitemapSublist:'.k4-sitemap-sublist',classes:{open:'is-open'}};function Footer(params){var footer=this;$.extend(footer,{params:params,$sitemapTitles:$(params.sitemapTitle)});$.extend(footer,{toggleSitemapList:function(e){e.preventDefault();var $this=$(this);var doOpen=false;if(!$this.hasClass(footer.params.classes.open)){doOpen=true;}
footer.$sitemapTitles.find('a').removeClass(footer.params.classes.open);footer.$sitemapTitles.next(footer.params.sitemapSublist).removeClass(footer.params.classes.open);if(doOpen){$this.addClass(footer.params.classes.open);$this.parent(footer.params.sitemapTitle).next(footer.params.sitemapSublist).addClass(footer.params.classes.open);}}});footer.$sitemapTitles.find('a').on('click',footer.toggleSitemapList);}
$(function(){new Footer(config);});})(jQuery);;(function($,k4){'use strict';var log=k4.Logger.get('equalize');var $document=$(document);if(!$.fn.matchHeight){log.error('abort equalize: matchHeight plugin not loaded');return;}
$.fn.matchHeight._maintainScroll=true;var config={event:'k4-equalized',elements:[{container:'.k4-sectionslider',equalize:'.k4-section'},{container:'.k4-menupanel',elements:[{equalize:'.k4-encartmenu_simple'},{equalize:'.k4-encartmenu_double',options:{groupTarget:'.k4-encartmenu_simple'}},{equalize:'.k4-encartbrands, .k4-encartmenu_double'}]},{container:'.k4-infinite-list:not(.k4-giftgenerator_grid)',options:{byRow:true},listenTo:'k4-togglelist-grid.equalize',elements:[{equalize:'.k4-productitem_grid-card .k4-productitem_grid-link'},{equalize:'.k4-productitem_grid-card .k4-promo'},{equalize:'.k4-productitem_grid-card .k4-productitem-name'},{equalize:'.k4-productitem_grid-card .k4-productitem-sticker'},{equalize:'.k4-productitem_grid-card .k4-productitem-description'},{equalize:'.k4-productitem_grid-card'}]},{container:'.k4-accordion-section',elements:[{},{equalize:'.k4-productitem_ecoupons .k4-productitem-description'},{equalize:'.k4-productitem_ecoupons .k4-productitem-validity'}]},{container:'.k4-catalogslider',equalize:'.k4-catalogslider-item:gt(0)'},{container:'.k4-sitemap-list',equalize:'.k4-sitemap-title'},{container:'.k4-section_news, .k4-storenewsslider',options:{byRow:true},elements:[{equalize:'.k4-newsform-picture'},{equalize:'.k4-newsthumb-description'}]},{container:'.k4-store-body',equalize:'.k4-store-map_equalize'},{container:'.k4-sevenprodslider',elements:[{equalize:'.k4-sevenprodslider-item:gt(0)'},{equalize:'.k4-sevenprodslider-item:first .k4-productthumb-visuel',options:{groupTarget:'.k4-sevenprodslider-item:gt(0) .k4-productthumb-visuel'}}]},{container:'.k4-hub',options:{byRow:true},elements:[{equalize:'.k4-hubitem-img'},{equalize:'.k4-hubitem-title'},{equalize:'.k4-hubitem-content'},{equalize:'.k4-hubitem'}]},{container:'.k4-productslider, .k4-sevenprodslider, .k4-expertslider, .k4-slider3to1, .k4-slider4to1, .k4-slidersmultiple',options:{byRow:false},elements:[{equalize:'.k4-productthumb-promo'},{equalize:'.k4-productthumb-rating'},{equalize:'.k4-productthumb-title'},{equalize:'.k4-productthumb-desc'}]},{container:'.k4-diagnosticsprint .k4-productslider',options:{byRow:true},elements:[{equalize:'.k4-productthumb-promo'},{equalize:'.k4-productthumb-rating'},{equalize:'.k4-productthumb-title'},{equalize:'.k4-productthumb-desc'}]},{container:'.k4-pinblockslider',options:{mq:'S'},elements:[{equalize:'.k4-productthumb-promo'},{equalize:'.k4-productthumb-rating'},{equalize:'.k4-productthumb-title'},{equalize:'.k4-productthumb-desc'}]},{container:'.k4-slidersedge',elements:[{equalize:'.k4-dealthumb-title'},{equalize:'.k4-dealthumb-price'},{equalize:'.k4-dealthumb-action'},{equalize:'.k4-dealthumb'}]},{container:'.k4-eventslider',options:{byRow:false},elements:[{equalize:'.k4-eventthumb-title'},{equalize:'.k4-eventthumb-dist'},{equalize:'.k4-eventthumb-duration'},{equalize:'.k4-eventthumb-desc'},{equalize:'.k4-eventthumb-price'}]},{container:'.k4-trioblocks-line',elements:[{equalize:'.k4-trioblocks-title'},{equalize:'.k4-trioblocks-body'},{equalize:'.k4-storeitem-name'}]},{container:'.k4-section_news',options:{byRow:true},equalize:'.k4-section_news-new-body-description'},{container:'.k4-hobbies',elements:[{equalize:'.k4-hobbies-push-content'},{equalize:'.k4-hobbies-push-title'},{equalize:'.k4-hobbies-push-text'},{equalize:'.k4-hobbies-push-price'}]},{container:'.k4-fuel-container',options:{byRow:true},elements:[{equalize:'.k4-fuel-item'}]},{container:'.k4-section_products-filters_equalize',options:{byRow:true},elements:[{equalize:'.k4-togglefilter'}]},{container:'.k4-hubv2',options:{byRow:true},elements:[{equalize:'.k4-hubitemv2-desc'},{equalize:'.k4-hubitemv2-title'},{equalize:'.k4-hubitemv2-bloc'},{equalize:'.k4-hubitemv2-img'}]},{container:'.k4-services2-line',options:{byRow:true},elements:[{equalize:'.k4-services2-block'}]},{container:'.k4-landingslider',equalize:'.k4-landing_edito-visualtext .k4-g-row'},{container:'.k4-giftgenerator-header_slider',equalize:'.k4-giftgenerator-header-slide'},{container:'.k4-giftgenerator_grid',equalize:'.k4-productitem_grid-link'},{container:'.k4-sectionslider-list',options:{mq:'S'},elements:[{equalize:'.k4-section_edito_v2 .k4-section-title'},{equalize:'.k4-section_edito_v2 .k4-section-content'},{equalize:'.k4-section_edito_v2 .k4-section-body'}]}]};function groupAsOneTarget($elements){var $group=$('<div />');$group.outerHeight=function(){var top,bottom,min,max;$elements.each(function(){var $el=$(this);top=$el.offset().top;bottom=top+$el.outerHeight();if(min===undefined||top<min){min=top;}
if(max===undefined||bottom>max){max=bottom;}});return max-min;};return $group;}
function parseOptions(options,$container){if(typeof options==='undefined'){return{};}
var _options=$.extend({},options);if(options.target){_options.target=$(options.target,$container);}else if(options.groupTarget){_options.target=groupAsOneTarget($(options.groupTarget,$container));}
return _options;}
function equalize(element,$container){if(element.container){if(!$container){$container=$(element.container);}else{$container=$container.is(element.container)?$container:$(element.container,$container);}
if(!$container.length){return;}}
if($container.length>1){$container.each(function(){equalize(element,$(this));});return;}
if(element.elements){$(element.elements).each(function(i,child){if(element.options){child.options=$.extend({},element.options,child.options);}
equalize(child,$container);});}
if(element.equalize){var options=parseOptions(element.options,$container);var $elements=$(element.equalize,$container);if($elements.length){var first=true;$container.k4ImagesLoaded(function(){var matchHeight=function(){if(first){$elements.matchHeight(options);$elements.trigger(config.event);first=false;}else{$.fn.matchHeight._apply($elements,options);}};if(element.options&&element.options.mq){k4.mq.when(element.options.mq,function(){matchHeight();},{now:true}).whenNot(element.options.mq,function(){$elements.matchHeight({remove:true});first=true;});}else{matchHeight();}},{elements:element.equalize});}}}
function equalizeAll($container){$(config.elements).each(function(i,element){equalize(element,$container);if(element.listenTo){if(/\./.test(element.listenTo)){$document.off(element.listenTo).on(element.listenTo,function(){equalize(element,$container);});}else{log.error('listenTo attribute should be namespaced (%s)',element.listenTo);}}});}
var initialized=false;function init(){log.debug('Init equalize.');equalizeAll($document);initialized=true;}
k4.helpers.onLoad('equalize',function(container){init($(container));});$document.one('k4-fontsloaded',function(){if(initialized){log.debug('Fonts loaded after init: re applying equalize.');equalizeAll($document);}else{log.debug('Fonts loaded before init: no need to equalize yet.');}});$.fn.equalizeContent=function(){$(this).each(function(){equalizeAll($(this));});return this;};})(jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('extendedlink');var extended=[{containerAttr:'data-extend-link',extendedClass:'k4-section_edito-extendedlink'}];$.fn.extendedLink=function(params){return this.each(function(){var $extendedLink=$(this);var isExtended=false;var targetSelector=$extendedLink.attr(params.containerAttr);var $extendedLinkTarget=targetSelector.indexOf('#')===0?$(targetSelector):$extendedLink.find(targetSelector);if(!$extendedLinkTarget.length){log.warn('Target not found:',targetSelector);return;}
var href=$extendedLinkTarget.attr('href');if(!href){log.warn('Target has not href value:',targetSelector);return;}
function disableExtendedLink(){if(!isExtended){return;}
log.debug('Disable extended link');$extendedLink.find('.'+params.extendedClass).remove();isExtended=false;}
function enableExtendedLink(){if(isExtended){return;}
log.debug('Enable extended link',$extendedLinkTarget);var $newLink=$extendedLinkTarget.clone().removeAttr('id').removeAttr('style').attr('class',params.extendedClass).attr('target',$extendedLinkTarget.attr('target')).html('');$extendedLink.append($newLink);isExtended=true;}
function setupExtendedLink(){var extendLinkMq=$extendedLink.data('extend-link-mq');if(extendLinkMq&&k4.mq.is(extendLinkMq)){disableExtendedLink();}else{enableExtendedLink();}}
setupExtendedLink();$(window).on('k4-resize.width',setupExtendedLink);});};k4.helpers.onLoad('extended-link',function(container){$(extended).each(function(){$('['+this.containerAttr+']',container).extendedLink(this);});});})(jQuery,window.k4);;(function($,k4,BrowserDetect){'use strict';var log=k4.Logger.get('video.player');var eventsLog=k4.Logger.get('video.player.events');var helpers=k4.helpers;if(!$.fn.onScreen){log.error('abort video player: jquery.onscreen.js not loaded');return;}
var params={onscreen:{container:window,direction:'vertical',tolerance:-100,throttle:50}};function Player(playerId,options){options.autoplay=options.autoplay&&(BrowserDetect.platform.name!=='iOS');this.id=playerId;this.$el=$('#'+playerId);this.player=this.$el[0];this.options=options||{};this.init();return this;}
Player.prototype.ensureElements=function(){if(!this.$el.parent().length){this.$el=$('#'+this.id);this.player=this.$el[0];}};Player.prototype.init=function(){log.info('init',this.id);helpers.implementPubSub(this,{log:eventsLog});this.playerReady(function(){log.info('player ready',this.id);window.LimelightPlayer.registerPlayer(this.id);this.on('onError',function(err){log.error(err);});});this.mediaReady(function(){log.info('media ready',this.id);this.bindOnScreen();if(this.options.autoplay){this.autoplay();}
if(this.options.mute){this.mute();}
this.player.doSetQuality(this.options.startQuality);});};Player.prototype.bindOnScreen=function(){var player=this;var options=$.extend({},params.onscreen,{doIn:function(){player.whenOnScreen();},doOut:function(){player.whenOutOfScreen();}});this.$el.onScreen(options);};Player.prototype.whenOnScreen=function(){if(this.wasPlaying&&!this.isDisabled){log.info('scroll on screen -> play',this.id);this.play();}
this.$el.isOnScreen=true;};Player.prototype.whenOutOfScreen=function(){this.wasPlaying=this.isPlaying;if(this.isPlaying&&!this.isDisabled){log.info('scroll out of screen -> pause',this.id);this.pause();}
this.$el.isOnScreen=false;};Player.prototype.autoplay=function(){this.onceReady(function(){if(this.$el.isOnScreen){this.play();}else{this.wasPlaying=true;}});};Player.prototype.play=function(toggle,options){this.onceReady(function(){this._play(toggle,options);});};Player.prototype._play=function(toggle,options){options=options||{};if(toggle===false){log.debug('pause',this.id);if(!this.isDisabled){this.player.doPause();}
if(!options.silent){this.isPlaying=false;}}else{log.debug('play',this.id);if(!this.isDisabled){try{this.player.doPlay();}catch(err){log.warn('Error while calling `doPlay` on player API.');}}
if(!options.silent){this.isPlaying=true;}}};Player.prototype.pause=function(options){this.play(false,options);};Player.prototype.setVolume=function(volume){this.player.doSetVolume(volume);};Player.prototype.mute=function(){this.setVolume(0);};Player.prototype.playerReady=function(callback){var player=this;this.on('onPlayerLoad',function(){player.ensureElements();player.playerIsReady=true;callback.call(player);});};Player.prototype.mediaReady=function(callback,options){options=options||{};var player=this;this[options.once?'one':'on']('onMediaLoad',function(){player.ensureElements();player.mediaIsReady=true;callback.call(player);});};Player.prototype.onceReady=function(callback){if(this.mediaIsReady){callback.call(this);}else{this.mediaReady(function(){callback.call(this);},{once:true});}};Player.prototype.disable=function(){log.info('Disable player',this.id);if(this.isPlaying){log.info('disabling player -> pause',this.id);this.pause({silent:true});}
this.isDisabled=true;this.$el.hide();};Player.prototype.enable=function(){log.info('Enable player',this.id);this.isDisabled=false;this.$el.show();if(this.isPlaying){log.info('reenabling player -> play',this.id);this.play({silent:true});}};window.k4=window.k4||{};window.k4.Player=Player;})(jQuery,window.k4,window.BrowserDetect);;(function($,k4){'use strict';var log=k4.Logger.get('video.fit-background');var defaultOptions={ratio:16/9,extraZoom:1,debounceDuration:200,cssTarget:undefined};function _fitBackground($container,$player,options){var containerWidth=$container.width();var containerHeight=$container.height();log.debug('Container dimensions: ',containerWidth,'x',containerHeight);var blackBordersWidth=containerWidth-(containerHeight*options.ratio);var blacksBorderAreOnSides=true;if(blackBordersWidth<0){blacksBorderAreOnSides=false;blackBordersWidth=containerHeight-(containerWidth/options.ratio);}
var zoomToFit=containerWidth/(containerWidth-blackBordersWidth);if(!blacksBorderAreOnSides){zoomToFit=containerHeight/(containerHeight-blackBordersWidth);}
var zoomToApply=zoomToFit*options.extraZoom;var css={maxWidth:containerWidth*zoomToApply,width:containerWidth*zoomToApply,height:containerHeight*zoomToApply,left:'0px',top:'0px'};var xOffsetToApply,yOffsetToApply;if(blacksBorderAreOnSides){xOffsetToApply=zoomToApply*blackBordersWidth/2;yOffsetToApply=(containerHeight*zoomToApply-containerHeight)/2;}else{yOffsetToApply=zoomToApply*blackBordersWidth/2;xOffsetToApply=(containerWidth*zoomToApply-containerWidth)/2;}
css.left=-xOffsetToApply+'px';css.top=-yOffsetToApply+'px';log.debug('Applying css',css);var $target=$player;if(options.cssTarget){$target=$(options.cssTarget,$player);}
$target.css(css);}
function fitBackground($container,$player,options){options=$.extend({},defaultOptions,options);_fitBackground($container,$player,options);$(window).on('resize',$.debounce(options.debounceDuration,function(){_fitBackground($container,$player,options);}));$container.closest('.slick-slider').on('k4-equalized',$.debounce(10,function(){_fitBackground($container,$player,options);}));}
k4.video=k4.video||{};k4.video.fitBackground=fitBackground;})(jQuery,window.k4);;(function($,k4,Player,Drupal,BrowserDetect){'use strict';var log=k4.Logger.get('video');if(!Player){log.error('abort video: video.player.js not loaded');return;}
var params={playerURL:'//s.delvenetworks.com/deployments/embed-code/embed-code-1.6.1/embed.js',flashLoaderURL:'//video.limelight.com/player/loader.swf',playerSelector:'.k4-section_video-player',playerCssTarget:'.k4-section_video-player-inner',disabledClass:'k4-hide',slider:'.slick-slider',slide:'.slick-slide',activeSlideClass:'slick-active',indexDataAttr:'slick-index',mqAttr:'video-mq'};function getPlayerForm(type){return Drupal.settings&&Drupal.settings.video&&Drupal.settings.video.playerForm&&Drupal.settings.video.playerForm[type];}
$(function(){var configs={simple:{playerForm:getPlayerForm('simple')||'598a5127b5f84609b7b91112585ba7d5',mediaAttr:'video',background:false,playerOptions:{autoplay:false,mute:false,startQuality:1200},mq:'!S'},background:{playerForm:getPlayerForm('background')||'e2d03cb945454036b5952467e4f42149',mediaAttr:'background-video',background:true,playerOptions:{autoplay:true,mute:true,startQuality:1200},mq:'M'}};if(BrowserDetect.platform.name!=='iOS'){$('.k4-section[data-'+configs.background.mediaAttr+']').loadVideoBeforeUnveil(configs.background);}else{log.debug('Background autoplay disabled for iOS devices');}
$('.k4-playervideo[data-'+configs.simple.mediaAttr+']').loadVideoBeforeUnveil(configs.simple);});var players={};function limelightPlayerCallback(playerId,eventName,data){if(!players[playerId]){if(eventName==='onPlayerLoad'){log.warn('player '+playerId+' not registered (no control over embedded players)');}
return;}
players[playerId].trigger(eventName,[data]);}
var loadPlayerScript=(function(){var request;return function(){if(!request){request=$.ajax({url:params.playerURL,dataType:'script',cache:true});request.fail(function(err){log.error(err);});}
return request;};})();function Video($container,mediaId,options){var extendedId='limelight_player_'+mediaId;this.$container=$container;this.mediaId=mediaId;this.extendedId=extendedId;this.options=options;if(options.mq){var video=this;if(k4.mq.is(options.mq)){this.init();}else{log.debug('Video %s disabled by mq: "%s"',video.mediaId,options.mq);this.$container.addClass(params.disabledClass);}
k4.mq.when(options.mq,function(){if(!video.init()){video.enablePlayer();}}).whenNot(options.mq,function(){log.debug('Resize : video %s is going to be disabled by mq: "%s"',video.mediaId,options.mq);video.disablePlayer();});}else{this.init();}}
Video.prototype.init=function(){if(this.initialized){return false;}
var video=this;loadPlayerScript().done(function(){log.info('before loading player',video.extendedId);video.addToDOM();video.buildPlayerOptions();video.buildPlayerOptionsForSlider();video.create();video.addSliderBehavior();});this.initialized=true;return true;};Video.prototype.enablePlayer=function(){this.$container.removeClass(params.disabledClass);this.player.enable();};Video.prototype.disablePlayer=function(){this.$container.addClass(params.disabledClass);this.player.disable();};Video.prototype.buildPlayerOptions=function(){this.playerOptions=$.extend({},this.options.playerOptions);};Video.prototype.create=function(){window.LimelightPlayerUtil.initEmbed(this.extendedId);this.player=new Player(this.extendedId,this.playerOptions);players[this.extendedId]=this.player;};Video.prototype.addToDOM=function(){var playerHTML=window.k4.templates.videoPlayer({mediaId:this.mediaId,flashLoaderURL:params.flashLoaderURL,playerForm:this.options.playerForm,width:this.options.background?'100%':this.$container.parent().width(),height:this.options.background?'100%':this.$container.parent().height()});if(this.options.background){this.$container.prepend(playerHTML);if(k4.video.fitBackground){k4.video.fitBackground(this.$container,this.$container.find(params.playerSelector+':first'),{cssTarget:params.playerCssTarget});}else{log.warn('Fit background module not found (video.fitbackground.js)');}}else{this.$container.append(playerHTML);}};Video.prototype.buildPlayerOptionsForSlider=function(){var $parentSlide=this.$container.closest(params.slide);if($parentSlide.length&&this.options.autoplay){this.playerOptions.autoplay=$parentSlide.hasClass(params.activeSlideClass);}};Video.prototype.addSliderBehavior=function(){var video=this;var $parentSlide=this.$container.closest(params.slide);if($parentSlide.length){var index=$parentSlide.data(params.indexDataAttr);$parentSlide.closest(params.slider).on('beforeChange',function(e,slick,currentSlide,nextSlide){if(index===nextSlide){if(video.options.playerOptions.autoplay&&video.player.options.autoplay){log.info('slide on screen -> play',video.player.id);video.player.play();}else{log.info('slide on screen -> no autoplay',video.player.id);}}else if(index===currentSlide){log.info('slide out of screen -> pause',video.player.id);video.player.pause();}});}};$.fn.loadVideoBeforeUnveil=function(options){options=options||{};return $(this).each(function(){var $container=$(this);var mediaId=$container.data(options.mediaAttr||'video');if(mediaId){var mq=$container.data(params.mqAttr);var _options=$.extend({},options);if(mq){_options.mq=mq;}else if(mq===false){delete _options.mq;}
$container.addClass(window.lazySizesConfig.lazyClass).one('lazybeforeunveil',function(){new Video($container,mediaId,_options);});}});};window.limelightPlayerCallback=limelightPlayerCallback;})(jQuery,window.k4,window.k4.Player,window.Drupal,window.BrowserDetect);;(function($,k4,Modernizr){'use strict';var log=k4.Logger.get('sticky');var $window=$(window);var $mainHeader,headerHeight,$mainFooter,stuckToHeader=[],stuckToFooter=[],footerTop;var config={header:'.k4-main-header',stuckToHeader:['.k4-remote-body','.k4-nav','.k4-nav_v2','.k4-slidingpanel'],footer:'.k5-footer',stuckToFooter:['.k4-stickyblock'],throttleDuration:200,sticky_class:'is-stuck'};function stickToHeader(element){var $element=$(element);if(!$element.length){return;}
stuckToHeader.push(element);$element.css({position:'fixed',top:headerHeight+'px',height:k4.helpers.getWindowHeight()-headerHeight}).addClass(config.sticky_class);}
function unstickFromHeader(element){var $element=$(element);if(!$element.length){return;}
stuckToHeader.splice(stuckToHeader.indexOf(element),1);log.debug('Unstick element from Header',$element);$element.css({position:'absolute',top:0,height:'auto'}).removeClass(config.sticky_class);if(k4.helpers.isNewNavGrid()){var $filters=$('.k4-slidingpanel-group');var siteHierarchyHeight=$('.k4-nav-group-header').outerHeight()+$('.k4-submenu').outerHeight();$filters.css({top:siteHierarchyHeight+'px'});k4.mq.when('!M',function(){$filters.css('top','');});}}
function resetStickyElements(element){var $element=$(element);if(!$element.length){return;}
stuckToHeader.splice(stuckToHeader.indexOf(element),1);log.debug('Unstick element from Header',$element);$element.css({position:'',top:'',height:''}).removeClass(config.sticky_class);}
function stickToOrUnstickFromHeader(){$(config.stuckToHeader).each(function(index,elem){var isSideBar=(elem==='.k4-slidingpanel')||(elem==='.k4-nav'&&$('.k4-slidingpanel').length)||(elem==='.k4-nav'&&k4.helpers.isNewNav());if(isSideBar&&k4.mq.is('M')){unstickFromHeader(elem);log.debug('unstick sticky',elem);}else if(isSideBar&&k4.helpers.isNewNav()&&k4.mq.is('!M')){resetStickyElements(elem);log.debug('reset sticky',elem);}else{stickToHeader(elem);log.debug('stick sticky',elem);}});}
$(function(){$mainHeader=$(config.header).css({position:'fixed',top:0,width:'100%'}).addClass(config.sticky_class);headerHeight=$mainHeader.height();var $headerWrapper=$mainHeader.wrap($('<div>',{'class':'k4-sticky-spacer'})).parent();$headerWrapper.css('height',headerHeight+'px');stickToOrUnstickFromHeader();function fixHeaderHeight(){var newHeaderHeight=$mainHeader.height();if(newHeaderHeight!==headerHeight){headerHeight=newHeaderHeight;$headerWrapper.css('height',headerHeight+'px');$(stuckToHeader.join(',')).css('top',headerHeight+'px');}}
var scrollDelta=10;var searchBar={$elementToToggle:$('.k4-header-inner'),searchBarTogglerSelector:'.js-search-toggler',$inputSearch:$('.k4-form-input_search input'),searchBarClosedClass:'js-searchmobile-close',hasScrolledClass:'js-has-scrolled',isHidden:!k4.helpers.isHomepage(),isHomepage:k4.helpers.isHomepage(),init:function(){log.debug('init searchbar');k4.mq.when('S',function(){this.$inputSearch.val('');this.$inputSearch.blur();}.bind(this));$(document).on('click',this.searchBarTogglerSelector,function(event){event.preventDefault();this.toggleSearchBar();}.bind(this));k4.mq.whenNot('S',function(){if(this.isHidden){this.toggleSearchBar();}}.bind(this));},toggleSearchBar:function(){if($('.k4-searchautocomplete').length){return;}
this.$elementToToggle.toggleClass(this.searchBarClosedClass,!this.isHidden);this.isHidden=!this.isHidden;if(this.isHidden){log.debug('searchbar closed');$(document).trigger('k4-searchBarV2-close');}
$(document).trigger('k4-header-height-change');},toggleSearchBtn:function(scrollTop){if(!this.isHomepage){return;}
this.$elementToToggle.toggleClass(this.hasScrolledClass,scrollTop>scrollDelta);if(scrollTop<scrollDelta&&this.isHidden){this.toggleSearchBar();}}};var toggleOnScroll={scrollTop:$window.scrollTop(),lastScrollTop:0,newScrollTop:0,counter:0,handlePageLoadScroll:function(){this.counter++;if(this.counter>15){this.lastScrollTop=this.newScrollTop;}},onScroll:function(){this.newScrollTop=$window.scrollTop();if(this.scrollTop>this.lastScrollTop){this.handlePageLoadScroll();return;}
if(Math.abs(this.lastScrollTop-this.newScrollTop)<=scrollDelta){return;}
if(this.newScrollTop>this.lastScrollTop){this.onScrollDown();}else{this.onScrollUp();}
this.lastScrollTop=this.newScrollTop;this.scrollTop=this.lastScrollTop;},onScrollDown:function(){if(!searchBar.isHidden){if(k4.mq.is('S')){searchBar.toggleSearchBar();searchBar.toggleSearchBtn(this.newScrollTop);}}},onScrollUp:function(){searchBar.toggleSearchBtn(this.newScrollTop);},init:function(){log.debug('init scroll');$(window).on('scroll',this.onScroll.bind(this));}};$(document).on('k4-header-height-change',function(){fixHeaderHeight();stickToOrUnstickFromHeader();});k4.mq.isOrWhen('S',function(){searchBar.init();toggleOnScroll.init();}.bind(this));$window.on('k4-resize.width',function(){fixHeaderHeight();stickToOrUnstickFromHeader();}).on('k4-resize.height',function(){$(stuckToHeader.join(',')).css('height',k4.helpers.getWindowHeight()-headerHeight);});var lastScroll=$window.scrollTop();var $navMenu=$('.k4-nav-group_main, .k4-nav-group.is-main, .k4-nav-group_v2').find('.k4-nav-group-inner');if($navMenu.length){$window.on('scroll',function(){var scroll=$window.scrollTop();var delta=scroll-lastScroll;if(k4.mq.is('M')){$navMenu.each(function(){var $menu=$(this);var scrollTop=$menu.scrollTop()+delta;scrollTop=Math.max(scrollTop,0);scrollTop=Math.min(scrollTop,$menu.get(0).scrollHeight);$menu.scrollTop(scrollTop);});}
lastScroll=$window.scrollTop();});}});(function fixFixedHeader(){if(!Modernizr.touchevents){return;}
var inputElements='input,textarea,select';var $header=$('.k4-main-header');var prevCss;var $window=$(window);var applyFix=function(){if(!prevCss){prevCss={position:$header.css('position'),top:$header.css('top')};}
$header.css({position:'absolute',top:$window.scrollTop()});};var removeFix=function(){if(prevCss){$header.css({position:prevCss.position,top:prevCss.top});}};$(document).on('focus',inputElements,function(){setTimeout(function(){if($header.offset().top!==$window.scrollTop()){applyFix();$window.on('scroll.fixfixed touchmove.fixfixed',$.debounce(20,applyFix));}},0);}).on('blur',inputElements,function(){removeFix();$window.off('scroll.fixfixed touchmove.fixfixed');});})();function stickToFooter(){if(!stuckToFooter.length){return;}
log.debug('Stick elements to Footer',stuckToFooter);stuckToFooter.forEach(function(obj){if(obj.stuckToFooter){return;}
obj.$element.css({position:'fixed',bottom:'0'}).addClass(config.sticky_class);obj.$spacer=$('<div/>').css('height',obj.height);obj.$element.after(obj.$spacer);obj.stuckToFooter=true;});}
function unstickFromFooter(){if(!stuckToFooter.length){return;}
log.debug('Unstick elements to Footer',stuckToFooter);stuckToFooter.forEach(function(obj){if(!obj.stuckToFooter){return;}
obj.$element.css({position:'',bottom:''}).removeClass(config.sticky_class);if(obj.$spacer){obj.$spacer.remove();}
obj.stuckToFooter=false;});}
function footerShouldStick(){$mainFooter=$mainFooter||$(config.footer);if(!$mainFooter.length){return false;}
var windowBottom=$window.scrollTop()+k4.helpers.getWindowHeight();footerTop=$mainFooter.offset().top;return windowBottom<footerTop;}
var isStuckToFooter=footerShouldStick();function toggleStickToFooter(){if(!stuckToFooter.length){return;}
var shouldStick=footerShouldStick();if(isStuckToFooter&&!shouldStick){unstickFromFooter();isStuckToFooter=false;}else if(!isStuckToFooter&&shouldStick){stickToFooter();isStuckToFooter=true;}}
function updateFooterElements(){stuckToFooter.map(function(obj){obj.height=obj.$element.outerHeight();return obj;});$mainFooter=$mainFooter||$(config.footer);}
function initStickToFooter($elements){if($elements&&$elements.length){$elements.each(function(){stuckToFooter.push({$element:$(this)});});updateFooterElements();if(isStuckToFooter){stickToFooter();}else{unstickFromFooter();}}}
k4.helpers.onLoad('stickToFooter',function(container){initStickToFooter($(config.stuckToFooter.join(','),container));},function detach(container){if($(config.stuckToFooter.join(','),container).length){stuckToFooter=stuckToFooter.filter(function(obj){return!obj.$element.closest(container).length;});}});$window.on('k4-resize.width',updateFooterElements);$window.on('scroll',toggleStickToFooter);})(jQuery,window.k4,window.Modernizr);;(function($,k4){'use strict';var log=k4.Logger.get('tabs');var params={tabs:[{container:'.k4-section',tabs:'.k4-togglefilter',contents:'.k4-togglezone-item'},{container:'.k4-locator',tabs:'.k4-locator-tabs-link',contents:'#k4-locator-result, #k4-locator-map'},{container:'.k5-cols',tabs:'.k5-store-tab_header_item',contents:'#k5-store-tab_item_car, #k5-store-tab_item_transport, #k5-store-tab_item_bike'},{container:'.k5-openings-js-tabs',tabs:'.k5-openings__tabs__item',contents:'#lun, #mar, #mer, #jeu, #ven, #sam, #dim'},{container:'.k5-js-wrapper-tabs',tabs:'.k5-js-wrapper-tabs__link',contents:'.k5-js-wrapper-tabs__item'}],classes:{active:'is-active'}};function Tabs($container,conf){this.conf=conf;this.$container=$container;this.$tabs=$(conf.tabs,$container);this.$contents=$(conf.contents,$container);this.init();}
Tabs.prototype.init=function(){this.bindAccordion();if(this.isAccordion){log.debug('Tabs are loaded in accordion mode');this.resetTabs();}else{this.defaultSelect();}
this.bindEvents();};Tabs.prototype.bindAccordion=function(){this.isAccordion=false;if(this.conf.accordionMq){var tabs=this;this.isAccordion=k4.mq.is(this.conf.accordionMq);k4.mq.when(this.conf.accordionMq,function(){log.debug('Tabs switch to accordion mode');tabs.isAccordion=true;}).whenNot(this.conf.accordionMq,function(){log.debug('Accordion switch back to tabs mode');tabs.isAccordion=false;tabs.defaultSelect();});}};Tabs.prototype.bindEvents=function(){var tabs=this;this.$container.on('click',this.conf.tabs,function(e){e.preventDefault();tabs.selectTab($(this));});this.$container.on('k4-tab-focus',this.conf.contents,function(){var $content=$(this);var $tab=tabs.getTabFromContent($content);if($tab&&$tab.length){log.debug('Tab opening triggered by event: k4-tab-focus');tabs.selectTab($tab);}else{log.warn('Couldn\'t find tab from content');}});};Tabs.prototype.defaultSelect=function(){var $active=this.getActiveTab();if(!$active.length){$active=this.$tabs.first();}
this.selectTab($active);};Tabs.prototype.resetTabs=function(){this.$tabs.each(function(i,tab){tab.isActive=false;});this.getActiveTab().removeClass(params.classes.active);this.getActiveContent().removeClass(params.classes.active);};Tabs.prototype.getActiveTab=function(){return this.$tabs.filter('.'+params.classes.active);};Tabs.prototype.getActiveContent=function(){return this.$contents.filter('.'+params.classes.active);};Tabs.prototype.getTabFromContent=function($content){var tabs=this;var $resultTab=false;this.$tabs.each(function(i,tab){var $tab=$(tab);var link=$tab.attr('href');if(link.indexOf('#')!==0){log.error('tab is not a link with anchor: '+link);return;}
var $testContent=tabs.$contents.filter(link);if($testContent.is($content)){$resultTab=$tab;}});return $resultTab;};Tabs.prototype.selectTab=function($tab){if($tab[0].isActive){if(this.isAccordion){this.resetTabs();}else{log.debug('Tab already active (skipped)');}
return;}
this.resetTabs();var link=$tab.attr('href');if(link.indexOf('#')!==0){log.error('tab is not a link with anchor: '+link);return;}
var $content=this.$contents.filter(link);if(!$content.length){log.error('content not found: '+link);return;}
log.debug('open tab: '+link);$tab.addClass(params.classes.active);$content.addClass(params.classes.active);$tab[0].isActive=true;};k4.helpers.onLoad('tabs',function(container){$.each(params.tabs,function(i,conf){$(conf.container,container).filter(':has('+conf.tabs+')').each(function(){new Tabs($(this),conf);});});});})(jQuery,window.k4);;(function($,k4,moment){'use strict';var log=(k4.Logger&&k4.Logger.get('cookie-banner'))||{debug:$.noop,warn:$.proxy(window.console.warn,window.console),enabledFor:$.noop};var config={container:'.k4-cookie',close:'.k4-close'};if(!moment){log.warn('moment.js not found, cookies expiration may not work properly');}
var validity={months:13};$(function(){var $container=$(config.container);var timestamp=$.cookie('cookies-accepted');if(moment){if(timestamp===true){log.warn('Cookie was not set properly: reseting it as a timestamp');timestamp=moment().unix();$.cookie('cookies-accepted',timestamp,{expires:validity.months*30,path:'/'});}else if(timestamp){var expired=moment().isAfter(moment.unix(timestamp).add(moment.duration(validity)));if(log.enabledFor(k4.Logger&&k4.Logger.DEBUG)){log.debug('Now is',moment().format('dddd, MMMM Do YYYY, h:mm:ss a'));log.debug('Cookie was set on',moment.unix(timestamp).format('dddd, MMMM Do YYYY, h:mm:ss a'));log.debug('Cookie expiration date is',moment.unix(timestamp).add(moment.duration(validity)).format('dddd, MMMM Do YYYY, h:mm:ss a'));log.debug(expired?'Cookies use have expired':'Cookies use is still valid');}
if(expired){log.info('Cookie validity expired');timestamp=false;$.removeCookie('cookies-accepted');}}}
if(!timestamp){$container.show();$container.one('click',config.close,function(){$.cookie('cookies-accepted',moment?moment().unix():true,{expires:validity.months*30,path:'/'});$container.hide();});}});})(jQuery,window.k4,window.moment);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('store');var params={headerStoreContainer:'.k4-userinfos_store',menuStoreLink:'.k4-js-menu-store > a',favClass:'is-favorite'};var $document=$(document);var getStoreByUid=(function(){var stores={};function getStoreByUid(store_id){return k4.storelocator.helpers.proxyQuery({url:'/stores/js-api/store.json',data:{'uid':store_id}}).then(function(data){var store=new k4.storelocator.Store(data[Object.keys(data)[0]]);return store.attributes;});}
return function(store_id){if(!store_id){log.error('getStore call without the required store_id parameter');return $.Deferred().reject().promise();}
if(!stores[store_id]){stores[store_id]=getStoreByUid(store_id);}
return stores[store_id];};})();var getFavStore=(function(){var deferred;function getFavStoreFromCookie(){var storeval=k4.helpers.readStorevalCookie();if(storeval.id&&!storeval.uid){log.error('storeval cookie does not contain uid');return $.Deferred().reject('cookie-has-no-uid').promise();}
if(storeval.uid){return getStoreByUid(storeval.uid);}else{return $.Deferred().reject().promise();}}
$document.on('k4-store-replacefavorite',function(e,storeAttributes,toggle){if(!toggle){if(k4.helpers.favStoreID()){log.warn('JS fix: deleting storeval cookie (should be done by Drupal WS)');k4.helpers.deleteStorevalCookie();}
return $.Deferred().resolve({}).promise();}else if(storeAttributes.fullname){deferred=$.Deferred().resolve(storeAttributes).promise();}else{deferred=getFavStoreFromCookie();}});return function(){if(!deferred){deferred=getFavStoreFromCookie();}
return deferred;};})();function toggleFavButton($button,toggle){if($button.hasClass(params.favClass)===toggle){return;}
$button.toggleClass(params.favClass,toggle);if($.trim($button.text())!==''){var $span=$button.find('span');$span=$span.length?$span:$button;$span.html(toggle?Drupal.t('This store is my favorite'):Drupal.t('Add to favorites'));}}
function updateFavButtons(favStoreId){var favButtons=$(document).find('.k4-storefav[data-store-id]');favButtons.filter('[data-store-id][data-store-id!='+favStoreId+']').each(function(){toggleFavButton($(this),false);});if(favStoreId){favButtons.filter('[data-store-id='+favStoreId+']').each(function(){toggleFavButton($(this),true);});}}
function onFavSuccess(storeid,toggle){return function(data){if(data==='1'){$document.trigger('k4-store-favorite',[{store_id:storeid},toggle]);}else{log.warn('Webservice for favorite store didn\'t succeed',data);}};}
function submitFavStore($button,$form){var storeid=$form.find('[name=store_id]').val();if(!storeid){log.warn('Store ID value is empty (input[name=store_id])');return;}
var toggle=!$button.hasClass(params.favClass);$form.ajaxSubmit({success:onFavSuccess(storeid,toggle)});}
function clickFavStore($button){var storeid=$button.data('store-id')+'';if(!storeid){log.warn('Store ID value is empty (attribute: data-store-id)');return;}
if(!Drupal.settings.favoriteStore){log.warn('Drupal.settings.favoriteStore is not defined');Drupal.settings.favoriteStore={setURL:'/set_favorite_store',unsetURL:'/store/favorite_store_delete',setMethod:'POST'};}
var toggle=!$button.hasClass(params.favClass);$.ajax({url:toggle?Drupal.settings.favoriteStore.setURL:Drupal.settings.favoriteStore.unsetURL,type:Drupal.settings.favoriteStore.setMethod,data:{store_id:storeid,store_name:'store-name',anabel_code:'store-anabel',typology_name:'Carrefour City'}}).done(onFavSuccess(storeid,toggle));}
function confirmFavStore($button){var deferred=$.Deferred();var toggle=!$button.hasClass(params.favClass);if(!toggle){deferred.resolve();}else{var storeval=k4.helpers.readStorevalCookie();if(storeval.id){var storeName=$button.data('storefav-name')||'';if(!storeName){log.error('.k4-storefav button has no data-storevfav-name attribute');deferred.resolve();}else if(!Drupal.CTools||!Drupal.CTools.Modal){log.error('ctools modal not loaded: cannot show confirmation popin');deferred.resolve();}else{Drupal.CTools.Modal.show('rsc-modal-fixed');$('.k4-modal-header').html('');var $modalContent=$('.k4-modal-body').addClass('k4-modal-body_centered');$modalContent.html(k4.templates.confirmFavStore({fullname:storeName}));$modalContent.one('click.k4-confirm-favstore','.k4-confirm',function(){deferred.resolve();});$modalContent.one('click.k4-confirm-favstore',function(){Drupal.CTools.Modal.dismiss();});$(document).one('k4-modal-close.k4-confirm-favstore',function(){deferred.reject();$modalContent.off('click.k4-confirm-favstore');});}}else{deferred.resolve();}}
return deferred.promise();}
$document.on('click','.k4-storefav',function(e){e.preventDefault();var $button=$(this),$form=$button.closest('form');confirmFavStore($button).then(function(){if($form.length){submitFavStore($button,$form);}else{clickFavStore($button);}});});$document.on('k4-store-favorite.init',function(e,favStore,toggle){$document.trigger('k4-store-replacefavorite',[favStore,toggle]);});$document.on('k4-store-replacefavorite',function(e,storeAttr,toggle){$.when((function(){if(toggle){return getFavStore();}else{return{};}})()).then(function(storeAttributes){var $headerStoreContainer=$(params.headerStoreContainer);$headerStoreContainer.html(k4.templates.headerStore(storeAttributes));storeAttributes.storesURL=Drupal.settings.favoriteStore.storelocatorURL||'/magasin';var storeURL=storeAttributes.link||storeAttributes.storesURL;$headerStoreContainer.closest('a').attr('href',storeURL);$(params.menuStoreLink).attr('href',storeURL);var $myFavStore=$('.k4-favorite-store-block, .k4-account-body-content');if($myFavStore.length){var prevHeight=$myFavStore.outerHeight();$myFavStore.toggleClass('k4-favorite-store-block',toggle).toggleClass('k4-account-body-content',!toggle).html(k4.templates.accountStore(storeAttributes));var deltaHeight=$myFavStore.outerHeight()-prevHeight;var $body=$('body');$body.scrollTop($body.scrollTop()+deltaHeight);var $accountBody=$('.k4-account-body:first');if($accountBody.length&&toggle){var $myFavStoreAnimate=$myFavStore.find('.k4-storestable-line:first');$myFavStoreAnimate.addClass('is-highlight');k4.helpers.scrollTo($accountBody).then(function(){$myFavStoreAnimate.removeClass('is-highlight');});}}
updateFavButtons(toggle&&storeAttributes.store_id);$document.trigger('k4-store-overlayer',[storeAttributes]);});});$(function(){var favStoreID=k4.helpers.favStoreID();if(favStoreID){updateFavButtons(favStoreID);}});k4=k4||{};k4.store={getFavStore:getFavStore};})(jQuery,window.k4,window.Drupal);;(function($,k4){'use strict';var log=k4.Logger.get('accordion');var defaultConfig={pageHeader:'.k4-header',openCloseSpeed:400,scrollDuration:400,scrollOnClose:false,accordionMq:undefined,classes:{open:'is-open'},events:{opening:'k4-accordion-opening',open:'k4-accordion-open'},lazyInit:'[data-is-open]'};var configs=[{accordionContainer:'.k4-accordion',accordionSection:'.k4-accordion-section',accordionButton:'.k4-accordion-section-btn',accordionContent:'.k4-accordion-section-content',accordionMq:'S'},{accordionContainer:'.k4-filters',accordionSection:'.k4-g_s-span_12',accordionButton:'.k4-filters-toggle-link',accordionContent:'.k4-filters-toggle',scrollOnClose:true,accordionMq:'S'},{accordionContainer:'.k4-slidingpanel',accordionSection:'.k4-filterslidingpanel',accordionButton:'.k4-filterslidingpanel-top',accordionContent:'.k4-filterslidingpanel-content',scrollDuration:false}];function Accordion(container,_config){var $accordionContainer=$(container);var $accordionButtons=$(_config.accordionButton,container);var $accordionContents=$(_config.accordionContent,container);$.extend(this,{$accordionContainer:$accordionContainer,$accordionButtons:$accordionButtons,$accordionContents:$accordionContents,config:_config});this.init();}
Accordion.prototype.init=function(){var accordion=this;this.$accordionContainer.on('click',accordion.config.accordionButton,function(e){e.preventDefault();var $button=$(this);var $content=$button.closest(accordion.config.accordionSection).children(accordion.config.accordionContent);accordion.toggleContent($button,$content);});if(this.config.accordionMq){k4.mq.when(this.config.accordionMq,function(){accordion.closeAllItems();});}
var anchored=false;if(location.hash){anchored=accordion.openAnchor(location.hash);}
if(!anchored){accordion.lazyInit();}
this.bindExternalClicks();};Accordion.prototype.bindExternalClicks=function(){var accordion=this;$(document).on('click',function(e){var link=e.target.href;if(link){var origin=(location.origin||location.protocol+'//'+location.host);var match=link.match(new RegExp('^(?:'+origin.replace(/\//g,'\\/')+')?'+'(?:'+location.pathname.replace(/\//g,'\\/')+')?'+'(?:\\?'+location.search+')?(#.+)$'));if(match&&match.length===2&&!$(e.target).is(accordion.config.accordionButton)&&accordion.openAnchor(match[1])){e.preventDefault();k4.pubsub.trigger('k4-header-close');}}});};Accordion.prototype.openAnchor=function(hash){var $anchoredContent=this.$accordionContainer.find('[id="'+hash.substring(1)+'"]').filter(this.config.accordionContent);if($anchoredContent.length){var $anchoredContentButton=this.$accordionContainer.find('a[href="'+hash+'"]');this.toggleContent($anchoredContentButton,$anchoredContent,true);return true;}
return false;};Accordion.prototype.lazyInit=function(){var accordion=this;var $contents=this.$accordionContainer.find(this.config.lazyInit).filter(this.config.accordionContent);$contents.each(function(){var $content=$(this);var contentId=$content.attr('id');var $button=accordion.$accordionContainer.find('[href=#'+contentId+']');accordion.toggleContent($button,$content,true,{noScroll:true,noHash:true});});};Accordion.prototype.toggleContent=function($button,$content,toggle,options){options=options||{};var accordion=this;var $parent=$button.closest(accordion.config.accordionSection);log.debug('toggleContent',$button,$content,$parent);if(typeof toggle==='undefined'){toggle=!$button.hasClass(this.config.classes.open);}
var anchor=!options.noHash&&$button.attr('href');if(toggle){if(anchor){k4.helpers.url.setLocationHash(anchor);}
if(this.config.accordionMq&&k4.mq.is(this.config.accordionMq)){accordion.closeAllItems().then(function(){if(!options.noScroll){return accordion.scrollToItem($button,$content);}}).then(function(){return accordion.openItem($button,$content,$parent);});}else{$.when((function(){if(!options.noScroll){return accordion.scrollToItem($button,$content);}})()).then(function(){return accordion.openItem($button,$content,$parent);});}}else{if(anchor){k4.helpers.url.setLocationHash('');}
accordion.closeItem($button,$content,$parent);if(!options.noScroll&&accordion.config.scrollOnClose){accordion.scrollToItem($button,$content);}}};Accordion.prototype.closeItem=function($button,$content,$parent){log.debug('closeItem',$button,$content,$parent);$button.removeClass(this.config.classes.open);$parent.removeClass(this.config.classes.open);return $content.closeElement({openClass:this.config.classes.open,duration:this.config.openCloseSpeed});};Accordion.prototype.closeAllItems=function(){log.debug('closeAllItems');var accordion=this;var $openButtons=accordion.$accordionButtons.filter('.'+accordion.config.classes.open);if(!$openButtons.length){return $.Deferred().resolve().promise();}
return accordion.$accordionContents.filter('.'+accordion.config.classes.open).closeElement({duration:this.config.openCloseSpeed}).then(function(){$openButtons.removeClass(accordion.config.classes.open);});};Accordion.prototype.openItem=function($button,$content,$parent){var accordion=this;log.debug('openItem',$button,$content,$parent);$button.addClass(accordion.config.classes.open);$parent.addClass(accordion.config.classes.open);$content.trigger(accordion.config.events.opening);return $content.openElement({openClass:accordion.config.classes.open,duration:accordion.config.openCloseSpeed}).then(function(){$content.trigger(accordion.config.events.open);});};Accordion.prototype.scrollToItem=function($button,$content){if(this.config.scrollDuration!==false){var accordion=this;log.debug('scrollToItem',$button,$content);return k4.helpers.scrollTo($button.closest(accordion.config.accordionSection),accordion.config).promise();}};k4.helpers.onLoad('accordion',function(container){configs.forEach(function(config){config=$.extend({},defaultConfig,config);$(config.accordionContainer,container).each(function(){new Accordion(this,config);});});});})(jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('button-toggle-drawer');var defaultParams={speed:800,closeWhenOpening:'.k4-toggledrawer.is-open',closeWhenClickOutside:'.k4-dropdownlist'};var buttons=[{button:'.k4-toggledrawer, [data-toggle-drawer]',params:{speed:800,classes:{open:'is-open',close:'is-close'}}}];function closeAll(){if(defaultParams.closeWhenOpening){$(defaultParams.closeWhenOpening).each(function(){var $button=$(this);var $drawerTarget=$($button.attr('data-toggle-drawer'));var $drawer=$drawerTarget.length===1?$drawerTarget:$($button.attr('href'));$drawer.trigger('k4-toggledrawer',[false]);});}}
$.fn.buttonToggleDrawer=function(config){config=$.extend({},defaultParams,config);return this.each(function(){var $button=$(this);var $drawerTarget=$($button.attr('data-toggle-drawer'));var $drawer=$drawerTarget.length===1?$drawerTarget:$($button.attr('href'));var speed=config.speed;var drawer_height=0;var isOverlay=$button.is('[data-toggledrawer-overlay]');var closeWhenClickOutside=$drawer.is(config.closeWhenClickOutside)||isOverlay;var animate=!isOverlay;var toggleDrawer=function(e,toggle){if(e){e.preventDefault();}
if(typeof toggle!=='boolean'){toggle=!$button.hasClass(config.classes.open);}
if(!toggle){log.info('Toggle : Close',drawer_height,speed);$button.removeClass(config.classes.open);if(!animate){$drawer.removeClass(config.classes.open);}else{$drawer.stop().animate({height:0},speed,function(){$drawer.removeClass(config.classes.open);$drawer.removeAttr('style');});}
if(closeWhenClickOutside){$(document).off('click.toggleDrawer');}
if(isOverlay){k4.pubsub.off('k4-nav-open.toggleDrawer k4-header-open.toggleDrawer');}}else{closeAll();log.info('Toggle : Open');$button.addClass(config.classes.open);drawer_height=$drawer.css({'height':'auto','max-height':'none','visibility':'hidden','position':'absolute'}).outerHeight();$drawer.removeAttr('style');if(!animate){$drawer.addClass(config.classes.open);$drawer.focus();}else{$drawer.stop().animate({'height':drawer_height+'px'},speed,function(){$drawer.addClass(config.classes.open);$drawer.css('height','');$drawer.focus();});}
if(closeWhenClickOutside){setTimeout(function(){$(document).on('click.toggleDrawer',function(ev){if(!$(ev.target).closest($drawer).length||$drawer.is(ev.target)){log.debug('closeWhenClickOutside');toggleDrawer(null,false);}});},0);}
if(isOverlay){$button.trigger('k4-header-open');k4.pubsub.on('k4-nav-open.toggleDrawer k4-header-open.toggleDrawer',function(e){log.debug('overlay close ',e.type);toggleDrawer(undefined,false);});}}};$button.on('click',toggleDrawer);$drawer.on('k4-toggledrawer',toggleDrawer);});};$(document).on('click','[data-toggledrawer-close]',function(){$(this).trigger('k4-toggledrawer',[false]);});$(function(){$(buttons).each(function(){$(this.button).buttonToggleDrawer(this.params);});});})(jQuery,window.k4);;(function($,k4){'use strict';var config={dotClass:'k4-js-dotdotdot',dotOptions:{watch:'window',ellipsis:'… '}};$(document).on('lazybeforeunveil.dotdotdot',function(e){if(e.target.className.indexOf(config.dotClass)!==-1){$(e.target).dotdotdot(config.dotOptions);}});k4.helpers.onLoad('dotdotdot',function(container){if($('body').is('.page-admin')){$('.'+config.dotClass,container).dotdotdot(config.dotOptions);}
else{$('.'+config.dotClass,container).addClass('k4-lazyload');}});function fixNavPanelWhenOpens(){$('.k4-menupanel').off('nav-openitem.dotdotdot').one('nav-openitem.dotdotdot',function(){var self=this;setTimeout(function(){$('.'+config.dotClass,self).trigger('destroy').dotdotdot(config.dotOptions);},0);});}
function fixPinProductThumbDesc(){if(k4.mq.is('S')){$('.k4-pinblock .k4-productthumb-desc').trigger('destroy.dot').dotdotdot(config.dotOptions);}}
$(function(){fixNavPanelWhenOpens();});$(window).on('resize',function(){fixPinProductThumbDesc();fixNavPanelWhenOpens();});})(window.jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('list-expander');var params={defaultShowCount:4};var lists=[{listClass:'.k4-listexpander',params:{button:'.k4-listexpander-btn',list:'.k4-listexpander-list',children:'li',classes:{open:'is-open',close:'is-close'}}}];$.fn.listExpander=function(config){return this.each(function(){var $listExpander=$(this);var $button=$listExpander.find(config.button);var $list=$listExpander.find(config.list);var $listItems=$list.children(config.children);var listItemsToShow=$button.attr('data-show-count')||params.defaultShowCount;var $listItemsHidden=$listItems.filter(function(i){return i>=listItemsToShow;});$listExpander.init=function(){$listExpander.toggle();$button.on('click',$listExpander.toggleList);};$listExpander.toggle=function(){log.debug('Toggle');[$list,$button,$listItemsHidden].map(function(o){var element=$(o);if(element.hasClass(config.classes.close)){element.removeClass(config.classes.close).addClass(config.classes.open);}else{element.removeClass(config.classes.open).addClass(config.classes.close);}});$button.attr('data-after',$button.hasClass(config.classes.close)?'+':'-');};$listExpander.toggleList=function(e){e.preventDefault();$listExpander.toggle();};$listExpander.init();});};$(function(){$(lists).each(function(){$(this.listClass).listExpander(this.params);});});})(jQuery,window.k4);;(function($,Drupal){'use strict';$(document).on('click','[data-printelement]',function(e){e.preventDefault();var selector=$(this).data('printelement');$(selector).printThis({debug:false,importCSS:false,importStyle:false,printContainer:true,loadCSS:[Drupal.settings.basePath+Drupal.settings.pathToTheme+'/css/reset.css',Drupal.settings.basePath+Drupal.settings.pathToTheme+'/css/styles-noRWD.css',Drupal.settings.basePath+Drupal.settings.pathToTheme+'/css/print.css'],pageTitle:'',removeInline:false,printDelay:333,header:$('.k4-header-logo').clone(),formValues:true});$('iframe[id^=printThis-]').css({width:'1024px',left:'-1600px'});});$.fn.printIframe=function(){setTimeout(function(){window.frames['k4-coupons-printable-area'].focus();window.frames['k4-coupons-printable-area'].print();},1000);};$.fn.printInvisibleArea=function(){var $container=$('#'+this.attr('id'));$container.imagesLoaded().always(function(){$container.printThis({loadCSS:[Drupal.settings.basePath+Drupal.settings.pathToTheme+'/css/reset.css',Drupal.settings.basePath+Drupal.settings.pathToTheme+'/css/styles.css',Drupal.settings.basePath+Drupal.settings.pathToTheme+'/css/ecoupons.css',Drupal.settings.basePath+'sites/all/modules/custom/rsc_ecoupons/css/print.css']});});};})(jQuery,window.Drupal);;(function($){'use strict';if(!window.lazySizes){$(function(){$('img.k4-lazyload').each(function(){var $img=$(this);$img.attr('src',$img.data('src'));});});}})(jQuery);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('analytics');var storage=k4.Storage.get('analytics');var debug=!!storage.get('debug');if(debug){log.setLevel(k4.Logger.DEBUG);}
var prefix='tag-';var noDelegationSuffix='-immediate';var devices={mobile:'Smartphone',tablet:'Tablette',desktop:'Desktop'};var orientations={portrait:'vertical',landscape:'horizontal'};var cookies={'uid':'Drupal.visitor.cuwa_cuid','loyaltycard_id':'Drupal.visitor.cuwa_lcn'};var defaultEventData={type:'form',group:'[group]',title:'[form]::[value]'};var eventsTracking=[{type:'focus',ev:'focus.analytics',data:{}},{type:'submit',selector:'form[data-'+prefix+'submit]',ev:'k4-form-success.analytics',data:{}},{type:'submit',selector:'.k4-step[data-'+prefix+'submit]',ev:'k4-step-success.analytics',data:{}},{type:'click',ev:'click.analytics',data:{}},{type:'mouseup',ev:'mouseup.analytics',data:{}},{type:'mousedown',ev:'mousedown.analytics',data:{}}];$(document).on('click.analytics','button[data-'+prefix+'submit]',function(){var $button=$(this);if(!$button.is('.k4-step-nextbtn')){$button.closest('form').attr('data-'+prefix+'submit',$button.data(prefix+'submit'));}});function pushDataToGTM(){if(!window.dataLayer){log.warn('GTM (Google Tag Manager) not loaded');return;}
var _data=$.extend({},k4.EA_data);window.dataLayer.push(_data);}
function hashToArray(hash){var array=[];Object.keys(hash).forEach(function(key){array.push(key);array.push(hash[key]);});return array;}
function getArrayData(){return hashToArray(k4.EA_data);}
function get(attr){return k4.EA_data[attr];}
function set(attr,value){k4.EA_data[attr]=value;}
var hooks={setDynamicData:function(){set('env_device',devices[k4.helpers.getDeviceMode()]);set('env_screenOrientation',orientations[k4.helpers.getOrientation()]);},readStorevalCookie:function(){var storeval=k4.helpers.readStorevalCookie();if(storeval){set('user_storeID',storeval.anabel_code);set('user_storeType',storeval.type);set('user_storeName',storeval.name);}},readCookies:function(){if(!$.cookie){log.debug('jQuery.cookie not found, cannot read storeval cookie');return;}
Object.keys(cookies).forEach(function(key){var cookieValue=$.cookie(cookies[key]);if(cookieValue){set(key,cookieValue);}});},updateSearchResults:function(){if(get('search_keywords')){set('search_resultsNumber',($('.k4-nbr-result').data('result')||'')+'');}}};function setDebug(bool){bool=bool!==false;storage.set('debug',bool);log.setLevel(k4.Logger.INFO);log.info('Analytics log level set to %s',bool?'DEBUG':'OFF');log.setLevel(bool?k4.Logger.DEBUG:k4.Logger.OFF);debug=bool;}
function buildData(){Object.keys(hooks).forEach(function(hook){hooks[hook]();});window.EA_data=getArrayData();}
function trackClick(data){if(window.cw_click){try{window.cw_click(hashToArray(data));}catch(err){log.error(err.message);}}else{log.warn('cw_click function is not defined: no event tracking');}}
function keyParse(attrValue,data,extraData){var keys=attrValue.replace(/'/g,'').split(',');for(var i=0;i<keys.length;i=i+2){data[keys[i]]=(data[keys[i]]&&extraData)?(data[keys[i]]+'|'+keys[i+1]):keys[i+1];}
return data;}
function whenEvent(e){var $target=$(e.currentTarget);var config=e.data.config;var attrValue=$target.data(prefix+config.type);if(!attrValue){log.warn('Element has no value in attribute data-'+prefix+config.type,$target);return;}
var data=$.extend({},defaultEventData,config.data);if(attrValue.indexOf(',')>-1){data=keyParse(attrValue,data,false);}
$target.find('[data-'+prefix+'extradata]').each(function(index,el){var $el=$(el),filled=false;if($el.is('input')){if((el.type==='text'||el.type==='tel'||el.type==='email')&&$el.val()){filled=true;}else if((el.type==='radio'||el.type==='checkbox')&&$el.is(':checked')){filled=true;}}
if(filled){data=keyParse($el.data(prefix+'extradata'),data,true);}});Object.keys(data).forEach(function(key){data[key]=(data[key]||'').replace(/\[([^\]]*)\]/gi,function myFunction(text,type){if(type==='value'){return attrValue;}else{return $target.closest('[data-'+prefix+type+']').data(prefix+type)||'';}}).replace(/^::/,'');});if(log.enabledFor(k4.Logger.DEBUG)){log.debug('tracked '+config.ev,data);}
trackClick(data);}
function loadEventsConfigurations(configs,container){configs.forEach(function(config){var selector=config.selector?config.selector:'[data-'+prefix+config.type+']';if(!container){$(document).on(config.ev,selector,{config:config},whenEvent);}else{if(selector.indexOf(']')!==-1){selector=selector.replace(']',noDelegationSuffix+']');config=$.extend({},config,{type:config.type+noDelegationSuffix});$(selector).off(config.ev).on(config.ev,{config:config},whenEvent);}}});}
function setPositions(){$('.field-item:not(:has(.field-item))').each(function(i){$(this).attr('data-'+prefix+'pos',i+1);});}
$(function(){if(k4.EA_data){buildData();log.debug('init - k4.EA_data:',k4.EA_data);log.debug('init - window.EA_data:',window.EA_data);pushDataToGTM();}else{log.warn('No analytics data found on page. Please specify data in k4.EA_data');}
setPositions();});k4.helpers.onLoad('analytics',function(container){loadEventsConfigurations(eventsTracking,container);});$(window).on('resize.analytics',function(){buildData();if(log.enabledFor(k4.Logger.DEBUG)){log.debug('resize -> device: '+devices[k4.helpers.getDeviceMode()]+', orientation: '+orientations[k4.helpers.getOrientation()]);}});loadEventsConfigurations(eventsTracking);function tagCommanderEvent($element,scriptIndex,eventType,data){var functionName='tc_events_'+scriptIndex;var tcFunction=window[functionName];if(typeof tcFunction==='function'){if(log.enabledFor(k4.Logger.DEBUG)){log.debug('Tracked '+functionName+' '+eventType,data);}
tcFunction($element,eventType,data);}else{log.warn('Function '+functionName+' is not defined: no event tracking');}}
Drupal.ajax.prototype.commands.rsc_analytics_pagination_tracking=function(ajax,response){if(response.type==='products'){if(typeof window.tc_vars!=='undefined'){window.tc_vars.page_productsList=response.data;}
if(typeof k4.EA_data!=='undefined'){k4.EA_data.page_productsList=response.data;}}else if(response.type==='coupons'){tagCommanderEvent($(ajax.element),3,'couponsList',{coupons_list:response.data});}};k4.analytics={setDebug:setDebug,tagCommanderEvent:tagCommanderEvent};})(jQuery,window.k4,window.Drupal);;(function($,k4){'use strict';var log=k4.Logger.get('placeholder');var config={container:'form.k4-form',selector:'input:text, input[type=email], input[type=search], input:password',altDataAttr:'placeholder-alt',altMqDataAttr:'placeholder-alt-mq'};function restorePlaceHolder($input){var placeholder=$input.data('placeholder');var altPlaceholder=$input.data(config.altDataAttr);if(altPlaceholder){var mq=$input.data(config.altMqDataAttr);if(mq){if(k4.mq.is(mq)){placeholder=altPlaceholder;}}else{log.warn('Alternative placeholder has not mq associated');}}
$input.attr('placeholder',placeholder);}
function updateResponsivePlaceholders(){$(config.selector,config.container).filter('[data-'+config.altMqDataAttr+']').each(function(){restorePlaceHolder($(this));});}
function init(container){$(config.container+' '+config.selector,container).each(function(){var $input=$(this);var placeholder=$input.attr('placeholder');$input.data('placeholder',placeholder);});updateResponsivePlaceholders();}
k4.helpers.onLoad('input-placeholder',function(container){init(container);$(config.container,container).on('focusin',config.selector,function(){var $input=$(this);var placeholder=$input.attr('placeholder');if(!$input.val()){$input.data('placeholder',placeholder);$input.attr('placeholder','');}});$(config.container,container).on('focusout',config.selector,function(){restorePlaceHolder($(this));});});$(window).on('resize',function(){updateResponsivePlaceholders();});})(jQuery,window.k4);;(function($,k4,BrowserDetect){'use strict';var log=k4.Logger.get('iframe-resizer');var options={log:false,heightCalculationMethod:'max',autoResize:false};$(function(){var iframesSelector=['#newsletter_registration_iframe','.ecoupons_cbc_iframe','.k4-iframe-box'].join(', ');if(BrowserDetect.browser==='Explorer'&&BrowserDetect.version<=8){$(iframesSelector).css({height:'1500px',overflow:'hidden'});log.info('iframe resizer is desactivated for this browser version');return;}
$(iframesSelector).iFrameResize(options).each(function(){var iframe=this;var targetOrigin=iframe.src.split('/').slice(0,3).join('/');$(window).on('k4-resize.width',function(){$(this).css('height','');iframe.contentWindow.postMessage('[iFrameSizer]resize',targetOrigin);});});});})(jQuery,window.k4,window.BrowserDetect);;(function($,k4){'use strict';var log=k4.Logger.get('fontloader');if(window.WebFont){log.error('Wrong script loading order: please load webfontloader.js AFTER fontloader.js');return;}
window.WebFontConfig={custom:{families:['robotoblack','robotobold','roboto','fontello']},loading:function(){log.debug('Fonts are loading');},active:function(){log.debug('Fonts are active');$(document).trigger('k4-fontsloaded');},inactive:function(){log.debug('Fonts are inactive');},fontloading:function(familyName){log.debug('Font %s loading',familyName);},fontactive:function(familyName){log.debug('Font %s active',familyName);},fontinactive:function(familyName){log.debug('Font %s inactive',familyName);}};})(jQuery,window.k4);;(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.m=b||a;this.c=this.m.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}
function w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}
function z(a){if("string"===typeof a.f)return a.f;var b=a.m.location.protocol;"about:"==b&&(b=a.a.location.protocol);return"https:"==b?"https:":"http:"}function ea(a){return a.m.location.hostname||a.a.location.hostname}
function A(a,b,c){function d(){k&&e&&f&&(k(g),k=null)}b=t(a,"link",{rel:"stylesheet",href:b,media:"all"});var e=!1,f=!0,g=null,k=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error("Stylesheet failed to load");d()}):setTimeout(function(){e=!0;d()},0);u(a,"head",b)}
function B(a,b,c,d){var e=a.c.getElementsByTagName("head")[0];if(e){var f=t(a,"script",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,"HEAD"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},d||5E3);return f}return null};function C(){this.a=0;this.c=null}function D(a){a.a++;return function(){a.a--;E(a)}}function F(a,b){a.c=b;E(a)}function E(a){0==a.a&&a.c&&(a.c(),a.c=null)};function G(a){this.a=a||"-"}G.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.a)};function H(a,b){this.c=a;this.f=4;this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return I(a)+" "+(a.f+"00")+" 300px "+J(a.c)}function J(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function K(a){return a.a+a.f}function I(a){var b="normal";"o"===a.a?b="oblique":"i"===a.a&&(b="italic");return b}
function ga(a){var b=4,c="n",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.m.document.documentElement;this.h=b;this.a=new G("-");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c("wf","loading")]);L(a,"loading")}function M(a){if(a.g){var b=y(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive"));w(a.f,c,d)}L(a,"inactive")}function L(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,K(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function N(a,b){this.c=a;this.f=b;this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function O(a){u(a.c,"body",a.a)}function P(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+J(a.c)+";"+("font-style:"+I(a)+";font-weight:"+(a.f+"00")+";")};function Q(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}Q.prototype.start=function(){var a=this.c.m.document,b=this,c=q(),d=new Promise(function(d,e){function k(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(k,25)},function(){e()})}k()}),e=new Promise(function(a,d){setTimeout(d,b.f)});Promise.race([e,d]).then(function(){b.g(b.a)},function(){b.j(b.a)})};function R(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||"BESbswy";this.f={};this.w=e||3E3;this.u=f||null;this.o=this.j=this.h=this.g=null;this.g=new N(this.c,this.s);this.h=new N(this.c,this.s);this.j=new N(this.c,this.s);this.o=new N(this.c,this.s);a=new H(this.a.c+",serif",K(this.a));a=P(a);this.g.a.style.cssText=a;a=new H(this.a.c+",sans-serif",K(this.a));a=P(a);this.h.a.style.cssText=a;a=new H("serif",K(this.a));a=P(a);this.j.a.style.cssText=a;a=new H("sans-serif",K(this.a));a=P(a);this.o.a.style.cssText=a;O(this.g);O(this.h);O(this.j);O(this.o)}var S={D:"serif",C:"sans-serif"},T=null;function U(){if(null===T){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);T=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return T}R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f["sans-serif"]=this.o.a.offsetWidth;this.A=q();la(this)};function ma(a,b,c){for(var d in S)if(S.hasOwnProperty(d)&&b===a.f[S[d]]&&c===a.f[S[d]])return!0;return!1}function la(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f["sans-serif"])||(d=U()&&ma(a,b,c));d?q()-a.A>=a.w?U()&&ma(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):na(a):V(a,a.v)}function na(a){setTimeout(p(function(){la(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.o.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.o=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c("wf",a.c,K(a).toString(),"active")],[b.a.c("wf",a.c,K(a).toString(),"loading"),b.a.c("wf",a.c,K(a).toString(),"inactive")]);L(b,"fontactive",a);this.o=!0;oa(this)};W.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c("wf",a.c,K(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,K(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,K(a).toString(),"inactive"));w(b.f,d,e)}L(b,"fontinactive",a);oa(this)};function oa(a){0==--a.f&&a.j&&(a.o?(a=a.a,a.g&&w(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),L(a,"active")):M(a.a))};function pa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}pa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;qa(this,new ha(this.c,a),a)};function ra(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,k=d||null||{};if(0===c.length&&f)M(b.a);else{b.f+=c.length;f&&(b.j=f);var h,m=[];for(h=0;h<c.length;h++){var l=c[h],n=k[l.c],r=b.a,x=l;r.g&&w(r.f,[r.a.c("wf",x.c,K(x).toString(),"loading")]);L(r,"fontloading",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),ya=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);X=x?42<parseInt(x[1],10):ya?!1:!0}else X=!1;X?r=new Q(p(b.g,b),p(b.h,b),b.c,l,b.s,n):r=new R(p(b.g,b),p(b.h,b),b.c,l,b.s,a,n);m.push(r)}for(h=0;h<m.length;h++)m[h].start()}},0)}function qa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){ra(a,f,b,d,c)})};function sa(a,b){this.c=a;this.a=b}function ta(a,b,c){var d=z(a.c);a=(a.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return d+"//"+a+"/"+b+".js"+(c?"?v="+c:"")}
sa.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var c=f["__mti_fntLst"+d](),e=[],h;if(c)for(var m=0;m<c.length;m++){var l=c[m].fontfamily;void 0!=c[m].fontStyle&&void 0!=c[m].fontWeight?(h=c[m].fontStyle+c[m].fontWeight,e.push(new H(l,h))):e.push(new H(l))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.m;B(this.c,ta(c,d,e),function(e){e?a([]):(f["__MonotypeConfiguration__"+d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+d}else a([])};function ua(a,b){this.c=a;this.a=b}ua.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new C;b=0;for(c=d.length;b<c;b++)A(this.c,d[b],D(g));var k=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),m=0;m<h.length;m+=1)k.push(new H(d[0],h[m]));else k.push(new H(d[0]));F(g,function(){a(k,f)})};function va(a,b,c){a?this.c=a:this.c=b+wa;this.a=[];this.f=[];this.g=c||""}var wa="//fonts.googleapis.com/css";function xa(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":");a.a.push(e.join(f))}}
function za(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit="))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,"+"));b=a.c+"?family="+c.join("%7C");0<a.f.length&&(b+="&subset="+a.f.join(","));0<a.g.length&&(b+="&text="+encodeURIComponent(a.g));return b};function Aa(a){this.f=a;this.a=[];this.c={}}
var Ba={latin:"BESbswy","latin-ext":"\u00e7\u00f6\u00fc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Ca={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Da={i:"i",italic:"i",n:"n",normal:"n"},Ea=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Fa(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var g;var k=d[1];g=[];if(k)for(var k=k.split(","),h=k.length,m=0;m<h;m++){var l;l=k[m];if(l.match(/^[\w-]+$/)){var n=Ea.exec(l.toLowerCase());if(null==n)l="";else{l=n[2];l=null==l||""==l?"n":Da[l];n=n[1];if(null==n||""==n)n="4";else var r=Ca[n],n=r?r:isNaN(n)?"4":n.substr(0,1);l=[l,n].join("")}}else l="";l&&g.push(l)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(","):g,0<d.length&&(d=Ba[d[0]])&&(a.c[e]=d))}a.c[e]||(d=Ba[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new H(e,f[d]))}};function Ga(a,b){this.c=a;this.a=b}var Ha={Arimo:!0,Cousine:!0,Tinos:!0};Ga.prototype.load=function(a){var b=new C,c=this.c,d=new va(this.a.api,z(c),this.a.text),e=this.a.families;xa(d,e);var f=new Aa(e);Fa(f);A(c,za(d),D(b));F(b,function(){a(f.a,f.c,Ha)})};function Ia(a,b){this.c=a;this.a=b}Ia.prototype.load=function(a){var b=this.a.id,c=this.c.m;b?B(this.c,(this.a.api||"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],k=b[f+1],h=0;h<k.length;h++)e.push(new H(g,k[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(m){}a(e)}},2E3):a([])};function Ja(a,b){this.c=a;this.f=b;this.a=[]}Ja.prototype.load=function(a){var b=this.f.id,c=this.c.m,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,k=c.fonts.length;g<k;++g){var h=c.fonts[g];d.a.push(new H(h.name,ga("font-weight:"+h.weight+";font-style:"+h.style)))}a(d.a)},B(this.c,z(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+ea(this.c)+"/"+b+".js",function(b){b&&a([])})):a([])};var Y=new pa(window);Y.a.c.custom=function(a,b){return new ua(b,a)};Y.a.c.fontdeck=function(a,b){return new Ja(b,a)};Y.a.c.monotype=function(a,b){return new sa(b,a)};Y.a.c.typekit=function(a,b){return new Ia(b,a)};Y.a.c.google=function(a,b){return new Ga(b,a)};var Z={load:p(Y.load,Y)};"function"===typeof define&&define.amd?define(function(){return Z}):"undefined"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());;(function($,k4){'use strict';var log=k4.Logger.get('scroll-arrow');var defaultconfig={mainContainer:'.k4-main-body',triggerContainer:'.k4-scrollarrow',trigger:'.k4-scrollarrow-btn',classes:{down:'k4-scrollarrow-btn_arrowdown'},fadeDuration:500,scrollDuration:500,scrollTransition:'easeInOutCubic',down:true,show:function(){return false;},getTargetPosition:$.noop};var configs=[{trigger:'.k4-scrollarrow-btn.k4-scrollarrow-btn_arrowdown',down:true,show:function(){var scrollTop=window.pageYOffset||document.documentElement.scrollTop;return scrollTop<=10;},getTargetPosition:function(){return $('.k4-box:not(:has(.k4-box)), .k5-container, .k5-slider-container').not(':has(.k4-scrollarrow)').eq(1);}},{trigger:'.k4-scrollarrow-btn:not(.k4-scrollarrow-btn_arrowdown)',down:false,show:(function(){var $target=$('.k5-footer');return function(){var scrollTop=window.pageYOffset||document.documentElement.scrollTop;return scrollTop+window.innerHeight>=$target.offset().top+100;};})(),getTargetPosition:function(){return 0;}}];function Arrow($trigger,config){this.$trigger=$trigger;this.$triggerContainer=$trigger.closest(config.triggerContainer);this.config=config;this.isVisible=true;this.init();}
Arrow.prototype.init=function(){var arrow=this;this.checkDisplay();this.$trigger.on('click',function(e){e.preventDefault();arrow.scrollToBlock();});if(this.config.show){k4.mq.when('M',function(){$(window).on('scroll.scroll-arrow',$.debounce(30,$.proxy(arrow.checkDisplay,arrow)));},{now:true}).whenNot('M',function(){$(window).off('scroll.scroll-arrow');});}};Arrow.prototype.checkDisplay=function(){if(typeof this.config.show==='function'){var show=this.config.show();if(show){this.show();}else{this.hide();}}};Arrow.prototype.show=function(){if(this.shown===true){return;}
this.shown=true;log.debug('show arrow');this.$trigger.stop().css('display','').animate({opacity:1});};Arrow.prototype.hide=function(){if(this.shown===false){return;}
this.shown=false;log.debug('hide arrow');var arrow=this;this.$trigger.stop().animate({opacity:0},this.config.fadeDuration,function(){arrow.$trigger.css('display','none');});};Arrow.prototype.scrollToBlock=function(){var $target=this.config.getTargetPosition(this.$triggerContainer);log.debug('scrolling to element',$target);k4.helpers.scrollTo($target,this.config);};$(function(){$(configs).each(function(i,conf){var config=$.extend({},defaultconfig,conf);$(config.trigger).each(function(){new Arrow($(this),config);});});});})(jQuery,window.k4);;(function($){'use strict';$(document).on('state:required',function(e){if(e.trigger){if(e.value){var $label=$(e.target).closest('.k4-form-field').find('label:not(.k4-form-radio)');if(!$label.find('.k4-required').length){$label.append('<span class="k4-required">*</span>');}}
else{$(e.target).closest('.k4-form-field, .form-wrapper').find('label .k4-required').remove();}}});})(jQuery);;(function($,k4,Parsley,ParsleyUI,moment,Drupal){'use strict';var log=k4.Logger.get('form.validation');var dateFormat='DD-MM-YYYY';var config={formSelector:'.k4-form',formExcludeSelector:'.k4-form-multisubmit',componentExcludeSelector:'.webform-component-managed_file',steps:{selector:'.k4-step[data-step-type=form]',submitButton:'.k4-step-nextbtn',successEvent:'k4-valid-form-section',errorEvent:'k4-error-form-section',enableEvent:'k4-enable-step',disableEvent:'k4-disable-step',disableClass:'is-disabled'},formFieldSelector:'.k4-form-field',formInputSelector:'.k4-form-input',formErrorSelector:'.k4-form-error'};var parsleyConfig={namespace:'data-validate-',inputs:'input, textarea, select',excluded:'input[type=button], input[type=submit], input[type=reset], input[type=hidden], [disabled]',priorityEnabled:true,multiple:null,group:null,uiEnabled:true,validationThreshold:3,focus:'first',trigger:'change',errorClass:'is-error',successClass:'is-valid',classHandler:function(parsleyField){var $input=parsleyField.$element.closest(config.formInputSelector);var $field=parsleyField.$element.closest(config.formFieldSelector);return $input.add($field);},errorsContainer:function(parsleyField){var $field=parsleyField.$element.closest(config.formFieldSelector);var $errorsContainer=$field.find(config.formErrorSelector);if(!$errorsContainer.length){$errorsContainer=$('<div/>').addClass(config.formErrorSelector.slice(1)).attr('role','alert');$field.append($errorsContainer);}
return $errorsContainer;},errorsWrapper:'<ul></ul>',errorTemplate:'<li></li>'};ParsleyUI.manageFailingFieldTrigger=$.noop;var validators={name:{fn:function(value){return/^[a-zàâçéèêëîïôûùüÿñæœ -]*$/i.test(value);}},date:{fn:function(value,selector){var $inputs=$(selector);var notComplete=false;var date=$inputs.map(function(){notComplete=notComplete||!this.value;var value=this.value+'';if(value.length===1){value='0'+value;}
return value;}).get();if(notComplete){return true;}
var valid=moment(date.join(''),dateFormat).isValid();$inputs.each(function(){var $input=$(this);parsleyConfig.classHandler({$element:$input}).toggleClass(parsleyConfig.successClass,valid).toggleClass(parsleyConfig.errorClass,!valid);});if(valid){$.defer(function(){var $container=parsleyConfig.classHandler({$element:$inputs.first()});var errorMassageIsDisplayed=!!$('.parsley-date',$container).length;if(errorMassageIsDisplayed){$inputs.each(function(){$(this).parsley().validate({});});}});}
return valid;}},tel:{fn:function(value){return/^\d{10}$/.test(value)||/^\d\d \d\d \d\d \d\d \d\d$/.test(value)||/^\d\d\.\d\d\.\d\d\.\d\d\.\d\d$/.test(value);}}};$.each(validators,function(name,validator){window.Parsley.addValidator(name,validator.fn,validator.priority,validator.requirementsTransformer);});function disableFields($inputs){$inputs.disableFields('validation',{triggerEvent:'k4-input-modified'});}
function enableFields($inputs){$inputs.enableFields('validation',{triggerEvent:'k4-input-modified'});}
function ValidateForm($form,options){this.$form=$form;this.options=options;this.init();}
ValidateForm.prototype.init=function(){var self=this;this.datesHack();this.parsley=this.$form.parsley(parsleyConfig);this.bindEvents();this.preventDuplicateErrorMessages();if(this.options.steps){this.groupSteps();this.bindStepValidationEvents();}
if(this.parsley.fields){this.parsley.fields.forEach(function(parsleyField){parsleyField.$element.on('k4-input-modified',function(){parsleyField.reset();});});}
this.parsley.on('form:validate',function(formInstance){var $fieldsToFocus=self.testRequiredUnless();if($fieldsToFocus.length){setTimeout(function(){parsleyConfig.classHandler({$element:$fieldsToFocus}).addClass(parsleyConfig.errorClass);$fieldsToFocus.first().focus();var $errorsContainer=$('<p/>').addClass(config.formErrorSelector.slice(1)).attr('role','alert').text($fieldsToFocus.attr(parsleyConfig.namespace+'requiredunless-message'));self.$form.prepend($errorsContainer);},0);}
formInstance.validationResult=!$fieldsToFocus.length;});};ValidateForm.prototype.isValid=function(group){if(!this.parsley.isValid({group:group})){return false;}
if(this.testRequiredUnless(group).length){return false;}
return true;};ValidateForm.prototype.testRequiredUnless=function(group){var self=this;var $fieldsToFocus=$();var groupSelector=group?'[data-validate-group='+group+']':'';var isValid=false;self.$form.find('['+parsleyConfig.namespace+'requiredunless]:not(:disabled)'+groupSelector).each(function(){var $input=$(this);if($input.val()){return;}
var otherInputsSelector=$input.attr(parsleyConfig.namespace+'requiredunless');var $otherInputs=self.$form.find(otherInputsSelector);$otherInputs.not(':disabled').filter(groupSelector||'*').each(function(){if($(this).val()){isValid=true;return false;}});if(!isValid){$fieldsToFocus=$fieldsToFocus.add($input).add($otherInputs);return false;}});return $fieldsToFocus;};ValidateForm.prototype.datesHack=function(){var dateAttribute=parsleyConfig.namespace+'date';var dateSelector='['+dateAttribute+']';this.$form.find(dateSelector).each(function(){var $this=$(this);var $formField=$this.closest(config.formFieldSelector);var selectors=$formField.find(dateSelector).map(function(){var id=this.id;if(!id){log.warn('Date elements should have an id in order to be validated properly ('+dateSelector+' elements)');return'';}
return'#'+id;}).get().join(', ');$this.attr(dateAttribute,selectors);$this.find('[value=0]').each(function(){$(this).val('');});});};ValidateForm.prototype.bindEvents=function(){this.parsley.on('form:success',function(form){form.$element.trigger('k4-form-success');});};ValidateForm.prototype.preventDuplicateErrorMessages=function(){this.parsley.on('field:error',function(field){var $errorsContainer=parsleyConfig.errorsContainer(field);setTimeout(function(){var errorClasses=[];$($('li',$errorsContainer).get().reverse()).each(function(){var $error=$(this);var errorClass=$error.attr('class');if(errorClasses.indexOf(errorClass)>-1){$error.remove();}else{errorClasses.push(errorClass);}},0);});});};ValidateForm.prototype.bindStepValidationEvents=function(){if(!this.$steps.length){return;}
var doNotSendEvents=false;var self=this;this.parsley.on('field:validated',function(field){if(!doNotSendEvents){var group=field.options.group;field.$element.trigger(self.isValid(group)?self.options.steps.successEvent:self.options.steps.errorEvent);}});this.$form.on('click',this.options.steps.submitButton,function(){var group=$(this).attr(parsleyConfig.namespace+'group');self.parsley.validate({group:group});});this.$form.on('keyup',function(e){var code=e.keyCode||e.which;if(code===13){var $target=$(e.target);if($target.is(self.options.steps.submitButton)){return;}
var group=$target.attr(parsleyConfig.namespace+'group');if(group){e.preventDefault();doNotSendEvents=true;self.parsley.validate({group:group});doNotSendEvents=false;$target.trigger(self.isValid(group)?self.options.steps.successEvent:self.options.steps.errorEvent);}}});};ValidateForm.prototype.getFields=function(){return $.map(this.parsley.fields,function(parsleyField){return parsleyField.$element[0];});};ValidateForm.prototype.groupSteps=function(){this.$steps=$(this.options.steps.selector,this.$form);if(!this.$steps.length){return;}
var formFields=this.getFields();var self=this;var disabledGroup=false;this.$steps.each(function(i){var step=i+1,$step=$(this),group='step-'+step,$fields=$step.find(formFields),$submit=$(self.options.steps.submitButton,$step);if($fields.length){$fields.attr(parsleyConfig.namespace+'group',group);}
if($submit.length){$submit.attr(parsleyConfig.namespace+'group',group);}
$step.on(self.options.steps.enableEvent,function(){enableFields($fields);self.toggleSubmitButton();setTimeout(function(){$fields.first().focus();},100);}).on(self.options.steps.disableEvent,function(){disableFields($fields);self.toggleSubmitButton();});if($step.hasClass(self.options.steps.disableClass)){$step.attr('disabled','disabled');disableFields($fields);disabledGroup=true;}});$.each(this.parsley.fields,function(k,parsleyField){parsleyField.refreshConstraints();});this.toggleSubmitButton();};ValidateForm.prototype.toggleSubmitButton=function(){var disable=this.$steps.prop('disabled');if(this.submitDisabled===disable){return;}
this.submitDisabled=disable;if(this.submitDisabled){this.disableSubmit();}else{this.enableSubmit();}};ValidateForm.prototype.disableSubmit=function(){this.$form.on('keydown.validate.submit',function(event){if(event.keyCode===13){event.preventDefault();}});$(':submit',this.$form).attr('disabled','disabled').addClass('is-disabled');};ValidateForm.prototype.enableSubmit=function(){this.$form.off('keydown.validate.submit');$(':submit',this.$form).removeAttr('disabled').removeClass('is-disabled');};k4.helpers.onLoad('forms-validation',function(context){$(config.formSelector,context).each(function(){new ValidateForm($(this),config);});});$(document).on('keyup','[data-validate-equalto]',function(){var $inputConfirm=$(this);var $input=$($inputConfirm.data('validate-equalto'));if(!$input.length){return;}
if(this.changeOnKeyup||$input.val().length===$inputConfirm.val().length){$(this).trigger('change');this.changeOnKeyup=true;}});k4.helpers.onLoad('forms-validation-drupal',function(context){if(Drupal.settings.ajax){Object.keys(Drupal.settings.ajax).forEach(function(id){var ajaxSettings=Drupal.settings.ajax[id];var $submitButton=$(ajaxSettings.element,context);if(!$submitButton.length){return;}
if(!($submitButton.is('button')&&$submitButton.attr('type')==='submit')||$submitButton.closest(config.componentExcludeSelector).length){return;}
var $form=$submitButton.closest('form');if($form.is(config.formExcludeSelector)){log.warn(config.formExcludeSelector+' is deprecated');}
else if($form.is(config.formSelector)&&!$submitButton[0].clone){var $cloneButton=$submitButton.clone();$cloneButton.insertBefore($submitButton);$submitButton.hide();$submitButton[0].clone=$cloneButton[0];$cloneButton.attr('id',$submitButton.attr('id')+'-cloned');$form.on('submit',function(e){if(!$submitButton.isDisabled){e.preventDefault();}}).parsley().on('form:submit',function(){$submitButton.isDisabled=$submitButton.is(':disabled');if(!$submitButton.isDisabled){$submitButton.trigger(ajaxSettings.event);}});}});}});})(window.jQuery,window.k4,window.Parsley,window.ParsleyUI,window.moment,window.Drupal);;(function($,k4,Parsley){'use strict';var log=k4.Logger.get('form.password');var config={selector:'.k4-form-input_password_new',noCopyPasteSelector:'.k4-form-input_password:has([data-validate-equalto])',input:'[type=password],[type=text]',classes:{strong:'is-strong',medium:'is-medium',weak:'is-weak'}};var rules=[{name:'minLength',regex:/^.{8,256}$/},{name:'digit',regex:/\d+/},{name:'maj',regex:/[A-ZÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÐÒÓÔÕÖÙÚÛÜÝŸ]/}];function getStrength(value){var matchedRules=[];var strength='';$.each(rules,function(i,rule){if(rule.regex.test(value)){matchedRules.push(rule.name);}});log.debug('matched rules: ',matchedRules);if(matchedRules.length===rules.length){strength='strong';}else if(matchedRules.length>=2&&matchedRules.indexOf('minLength')!==-1){strength='medium';}else if(matchedRules.length>=1){strength='weak';}
log.debug('strength: ',strength||'none');return strength;}
function displayStrength(strength,$container){$.each(config.classes,function(key,strengthClass){$container.toggleClass(strengthClass,key===strength);});}
function formValidator(value){return getStrength(value)==='strong';}
k4.helpers.onLoad('forms-password',function(container){$(config.selector,container).on('keyup',function(){var $container=$(this);var value=$container.find(config.input).val();var strength=getStrength(value);displayStrength(strength,$container);});$(config.noCopyPasteSelector,container).on('cut copy paste',function(e){e.preventDefault();});if(!Parsley._validatorRegistry.validators.strength){Parsley.addValidator('strength',{fn:formValidator});}});})(jQuery,window.k4,window.Parsley);;(function($,k4){'use strict';var config={container:'form.k4-form',inputs:[{selector:':radio[data-optional],:checkbox[data-optional]',event:'change'},{selector:'input[data-optional]:not(:radio):not(:checkbox)',event:'keyup'}],resetDataAttr:'optional-reset',inputFields:'input, select, textarea, button',oldPWSelector:'input[name="current_pass"]',oldPWWrapper:'.k4-form-field'};var $oldPWOriginalParent;var $oldPWOriginalFieldset;function isOriginalFieldset($fieldset){return $fieldset.is($oldPWOriginalFieldset);}
function visibleFieldsetsExist(type){if(type==='original'){return $oldPWOriginalFieldset.filter(':visible').length;}
else{return $oldPWOriginalFieldset.closest('form').find('fieldset.k4-form-optional').not($oldPWOriginalFieldset).filter(':visible').length;}}
function moveOriginalPassword($fieldset){var passwordWrapper=$fieldset.closest('form').find(config.oldPWSelector).closest(config.oldPWWrapper).detach();$fieldset.find(config.oldPWWrapper).last().after(passwordWrapper);}
function putBackOriginalPassword(){var passwordWrapper=$oldPWOriginalFieldset.closest('form').find(config.oldPWSelector).closest(config.oldPWWrapper).detach();$oldPWOriginalParent.find(config.oldPWWrapper).last().after(passwordWrapper);}
function disableFieldSet($fieldset,$input){if($input&&typeof $input.data(config.resetDataAttr)!=='undefined'&&$input.data(config.resetDataAttr)!==false){$fieldset.find('input:not([disabled])').val('');}
$fieldset.disableFields('optional').find(config.inputFields).disableFields('optional',{triggerEvent:'k4-input-modified'});if(!isOriginalFieldset($fieldset)&&!visibleFieldsetsExist('original')){putBackOriginalPassword();}
else if(isOriginalFieldset($fieldset)&&visibleFieldsetsExist('other')){var $otherFieldset=$oldPWOriginalFieldset.closest('form').find('fieldset.k4-form-optional').not($oldPWOriginalFieldset).filter(':visible').last();moveOriginalPassword($otherFieldset);$otherFieldset.find(config.oldPWSelector).enableFields('optional');}}
function enableFieldSet($fieldset){if(!isOriginalFieldset($fieldset)&&!visibleFieldsetsExist('original')){moveOriginalPassword($fieldset);}
else if(isOriginalFieldset($fieldset)&&visibleFieldsetsExist('other')){putBackOriginalPassword();}
$fieldset.enableFields('optional').find(config.inputFields).enableFields('optional',{triggerEvent:'k4-input-modified'});}
k4.helpers.onLoad('forms-optional',function(pageContainer){$oldPWOriginalParent=$(config.oldPWSelector).closest(config.oldPWWrapper).parent();$oldPWOriginalFieldset=$oldPWOriginalParent.closest('fieldset');config.inputs.forEach(function(input){$(config.container,pageContainer).on(input.event,input.selector,function(){var $input=$(this);var $form,$optionalFieldSet;if($input.is(':checked')){$form=$input.closest('form');var $otherInputs=$(input.selector+'[name="'+this.name+'"]',$form).not($input);$optionalFieldSet=$($input.data('optional'),$form);$otherInputs.each(function(){var $input=$(this);var selector=$input.data('optional');var $otherFieldset=$(selector);disableFieldSet($otherFieldset,$input);});enableFieldSet($optionalFieldSet);}else if($input.is(':checkbox')){$optionalFieldSet=$($input.data('optional'),$form);disableFieldSet($optionalFieldSet);}else if(!$input.is('[type=radio],[type=checkbox]')){var filled=$input.val().length;if((filled&&!this.wasFilled)||(!filled&&this.wasFilled)){$form=$input.closest('form');$optionalFieldSet=$($input.data('optional'),$form);if(filled){enableFieldSet($optionalFieldSet);}else{disableFieldSet($optionalFieldSet);}}
this.wasFilled=filled;}}).find(input.selector).each(function(){var $input=$(this);var $form=$input.closest('form');var $optionalFieldSet=$($input.data('optional'),$form);if($input.is('[type=radio],[type=checkbox]')){if(!$input.is(':checked')&&$optionalFieldSet.is('[disabled]')){disableFieldSet($optionalFieldSet,$input);}else{enableFieldSet($optionalFieldSet);}}else{var filled=$input.val().length;if(filled){enableFieldSet($optionalFieldSet);}else{disableFieldSet($optionalFieldSet,$input);}
this.wasFilled=filled;}});});});})(jQuery,window.k4);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('form.steps');var selectors={step:'.k4-step[data-step-type]',toggler:'.k4-step-header',body:'.k4-step-body',nav:'',validateStep:'.k4-step-nextbtn, :submit',mainContent:'.k4-main-content'};var events={successEvent:'k4-valid-form-section',errorEvent:'k4-error-form-section',enableEvent:'k4-enable-step',disableEvent:'k4-disable-step'};var classes={valid:'is-valid',open:'is-open',disabled:'is-disabled',unlocked:'is-unlocked'};var options={beforeScrollDuration:1000,scrollDuration:500};var steps={};var scrollToFirstError='.k4-form-field.is-error';function getScrollOffset(){return $(selectors.mainContent).offset().top;}
function Step(elem,options){this.$elem=$(elem);this.$body=$(selectors.body,this.$elem);this.index=options.index;this.isFirst=options.isFirst;this.isLast=options.isLast;this.type=this.$elem.data('step-type')||'click';if(selectors.nav){this.$nav=$(selectors.nav+' '+'[data-step-nb='+this.index+']');}
var includeElements=this.$elem.data('step-include');this.$elemAndIncluded=includeElements?this.$elem.add(includeElements):this.$elem;this.addButtonsIfDrupalIsNotEvenAbleToDoSo();this.init();}
Step.prototype.init=function(){log.debug('init step',this.index,this.type);if(!Step.prototype[this.type]){log.error('step type "%s" does not exists',this.type);}
$.extend(this,Step.prototype[this.type]);this.syncNav();this.bindEvents();this.bindResolution();this.bindToggle();this.scrollToFirstError();if(this.isDisabled()){this.disable();}};Step.prototype.addButtonsIfDrupalIsNotEvenAbleToDoSo=function(){if(!this.$elem.find('.k4-step-actions').length&&!this.isLast){var $button=$('<button/>').attr('type','button').addClass('k4-cta k4-step-nextbtn').text(Drupal.t('Etape suivante')).wrap('<div/>').addClass('k4-step-actions');this.$elem.find('.k4-form-field:last').after($button);}
if(this.isFirst&&this.isDisabled()){this.activate();}
if(this.isFirst&&!this.isOpen()){this.open();}};Step.prototype.syncNav=function(){if(!selectors.nav){return;}
if(this.isDisabled()){this.disable();}else if(this.isValid()){this.validate();}};Step.prototype.whenValid=function(){log.debug('whenValid',this.index,this.isValid());if(!this.isValid()){this.validate();}};Step.prototype.whenError=function(){log.debug('whenError',this.index);this.invalidate();this.lock();};Step.prototype.openNext=function(){var step=this;if(step.isValid()){log.debug('openNext',step.index);var next=step.getNext();if(next){next.activate();next.open();}}};Step.prototype.goToNext=function(){var step=this;if(step.isValid()){log.debug('goToNext',step.index);var next=step.getNext();if(next){next.delayedScrollTop();}}};Step.prototype.isValid=function(){return this.$elem.hasClass(classes.valid);};Step.prototype.isUnlocked=function(){return this.$elem.hasClass(classes.unlocked);};Step.prototype.isDisabled=function(){return this.$elem.hasClass(classes.disabled);};Step.prototype.isOpen=function(){return this.$elem.hasClass(classes.open);};Step.prototype.validate=function(){log.info('validate step',this.index);if(selectors.nav){this.$nav.addClass(classes.valid);}
this.$elem.addClass(classes.valid);return this;};Step.prototype.invalidate=function(){log.info('invalidate step',this.index);this.$elem.removeClass(classes.valid);if(selectors.nav){this.$nav.removeClass(classes.valid);}
return this;};Step.prototype.unlock=function(){log.debug('unlock step',this.index);this.$elem.addClass(classes.unlocked);return this;};Step.prototype.lock=function(){log.debug('lock step',this.index);this.$elem.removeClass(classes.unlocked);return this;};Step.prototype.activate=function(){log.debug('activate step',this.index);if(selectors.nav){this.$nav.removeClass(classes.disabled);}
this.$elemAndIncluded.removeClass(classes.disabled).enableFields('steps');this.$elem.trigger(events.enableEvent);return this;};Step.prototype.disable=function(){log.debug('disable step',this.index);if(selectors.nav){this.$nav.addClass(classes.disabled);}
this.$elemAndIncluded.addClass(classes.disabled).disableFields('steps');this.$elem.trigger(events.disableEvent);return this;};Step.prototype.open=function(){log.debug('open step',this.index);this.$elem.openElement({body:this.$body,openClass:classes.open});return this;};Step.prototype.close=function(){this.$elem.closeElement({body:this.$body,openClass:classes.open});return this;};Step.prototype.toggle=function(){var toggle=!this.$elem.hasClass(classes.open);this[toggle?'open':'close']();return this;};Step.prototype.scrollTop=function(){log.debug('scrollTop',this.index);$('html, body').animate({scrollTop:this.$elem.offset().top-getScrollOffset()},options.scrollDuration);return this;};Step.prototype.scrollToFirstError=function(){if(!scrollToFirstError||!this.$elem.find(scrollToFirstError).length){return;}
scrollToFirstError=false;log.info('scrollToFirstError - step',this.index);this.$elem.closest('form').trigger('submit');var i;for(i=1;i<this.index;i++){var step=steps[i];if(step){step.activate();if(!step.isValid()){log.info('step '+i+' failed front validation');step.open();step.scrollTop();return;}}}
this.activate();this.open();this.scrollTop();return this;};Step.prototype.delayedScrollTop=function(){setTimeout($.proxy(this.scrollTop,this),options.beforeScrollDuration);};Step.prototype.bindEvents=function(){if(selectors.nav){this.$nav.on('click',$.proxy(this.scrollTop,this));}};Step.prototype.click={bindResolution:function(){var self=this;this.$elem.on('click',selectors.validateStep,function(e){e.preventDefault();if(self.isValid()){self.$elem.trigger('k4-step-success');self.whenValid();self.unlock();self.openNext();self.goToNext();}});this.$elem.on('keyup',function(e){if(e.keyCode===13&&self.isValid()){self.$elem.trigger('k4-step-success');self.unlock();self.openNext();self.goToNext();}});}};Step.prototype.form={bindResolution:function(){var self=this;this.$elem.on(events.successEvent,$.proxy(this.whenValid,this));this.$elem.on(events.errorEvent,$.proxy(this.whenError,this));this.$elem.on('click',selectors.validateStep,function(e){if(!self.isLast){e.preventDefault();}
$.defer(function(){if(self.isValid()){self.$elem.trigger('k4-step-success');self.unlock();self.openNext();self.goToNext();}});});this.$elem.on('keyup',function(e){if(e.keyCode===13){if(self.$elem.find(':submit').length>1){e.preventDefault();return;}
if($(e.target).is(selectors.validateStep)){return;}
$.defer(function(){if(self.isValid()){self.$elem.trigger('k4-step-success');self.unlock();self.openNext();self.goToNext();}});}});}};Step.prototype.getNext=function(){return steps[this.index+1]||false;};Step.prototype.getPrev=function(){return steps[this.index-1]||false;};Step.prototype.bindToggle=function(){var step=this;this.$elem.on('click',selectors.toggler,function(){if(step.isUnlocked()){step.toggle();}});};k4.helpers.onLoad('forms-steps',function(container){var $steps=$(selectors.step,container);if(!$steps.length){return;}
$steps.each(function(i,step){var options={isFirst:i===0,isLast:i===$steps.length-1,index:i+1};steps[i+1]=new Step(step,options);});});})(jQuery,window.k4,window.Drupal);;(function($){'use strict';$(document).on('click','[data-relay-click]',function(){var selector=$(this).data('relay-click');$(selector).trigger('click');});})(jQuery);;(function($,k4){'use strict';var log=k4.Logger.get('map-store');var config={container:'.k4-store-map, .k4-eventlocate-map-inner-content',zoom:15,storeCoordsDataAttr:'store-coords',storeIconDataAttr:'store-icon',eventCoordsDataAttr:'event-coords',eventIconDataAttr:'event-icon',listenEvents:'k4-equalized',debounceResize:200};function parseCoords(coords){if(!coords||coords.indexOf(',')===-1){return false;}
var split=coords.split(',');return{lat:parseFloat(split[0]),lng:parseFloat(split[1])};}
$(function(){var $containers=$(config.container);if(!$containers.length){return;}
if(!window.google||!window.google.maps){log.error('Google maps API is not loaded');return;}
log.debug('store map init');$containers.each(function(){var $container=$(this);var storeCoords=$container.data(config.storeCoordsDataAttr);var storeIcon=$container.data(config.storeIconDataAttr);if(!storeCoords){log.error('attribute data-store-coords not found');return;}
if(!storeIcon){log.error('attribute data-store-icon not found');}
if(storeCoords.indexOf(',')===-1){log.error('attribute data-store-coords has a wrong format: %s (expected: "lat,lng")',storeCoords);return;}
var storePosition=parseCoords(storeCoords);if(isNaN(storePosition.lat)||isNaN(storePosition.lng)){log.error('attribute data-store-coords has a wrong format: %s (expected: "lat,lng")',storeCoords);return;}
var eventCoords=$container.data(config.eventCoordsDataAttr);var eventIcon=$container.data(config.eventIconDataAttr);var eventPosition;if(!eventCoords){log.debug('attribute data-event-coords not found');}else{if(eventCoords.indexOf(',')===-1){log.error('attribute data-event-coords has a wrong format: %s (expected: "lat,lng")',eventCoords);eventCoords=false;}else if(!eventIcon){log.error('attribute data-event-icon not found (but data-event-coords set)');}
eventPosition=parseCoords(eventCoords);if(isNaN(eventPosition.lat)||isNaN(eventPosition.lng)){log.error('attribute data-event-coords-coords has a wrong format: %s (expected: "lat,lng")',eventCoords);eventPosition=false;}}
var center=storePosition;if(eventPosition){center={lat:(storePosition.lat+eventPosition.lat)/2,lng:(storePosition.lng+eventPosition.lng)/2};}
var map=new window.google.maps.Map($container[0],{center:center,zoom:config.zoom});var storeMarker=new window.google.maps.Marker({icon:storeIcon,position:storePosition});storeMarker.setMap(map);var bounds;if(eventPosition){var eventMarker=new window.google.maps.Marker({icon:eventIcon,position:eventPosition});eventMarker.setMap(map);bounds=new window.google.maps.LatLngBounds(storePosition,storePosition).extend(new window.google.maps.LatLng(eventPosition));window.google.maps.event.addListenerOnce(map,'idle',function(){map.fitBounds(bounds);});}
function refreshMap(){log.debug('refreshMap');window.google.maps.event.trigger(map,'resize');map.setCenter(center);if(bounds){map.fitBounds(bounds);}}
function fixedRefreshMap(){if($container.width()&&$container.height()){refreshMap();}else{log.debug('inteval fix');var interval=setInterval(function(){if($container.width()&&$container.height()){refreshMap();clearInterval(interval);}},100);}}
$container.on(config.listenEvents,fixedRefreshMap);$container.closest('.k4-accordion-section-content').on('k4-accordion-open',fixedRefreshMap);$(window).on('resize',$.debounce(config.debounceResize,refreshMap));});});})(jQuery,window.k4);;(function($,k4,Drupal,moment){'use strict';var log=k4.Logger.get('storelocator.helpers');function getLang(){if(typeof Drupal.settings.storelocator_app==='object'&&!k4.storelocator.lang){k4.storelocator.lang=Drupal.settings.storelocator_app.storelocator_user_language||Drupal.settings.storelocator_app.storelocator_language;}
return k4.storelocator.lang;}
function proxyQuery(options){var deferred=$.Deferred();if(!options||!options.url){log.error('proxyQuery function: options.url is a mandatory parameter');return deferred.reject('invalid-request').promise();}
if(!Drupal.settings.storelocator_app||!Drupal.settings.storelocator_app.storelocator_ws_url){log.error('proxyQuery function: Drupal.settings.storelocator_app.storelocator_ws_url is mandatory');return deferred.reject('missing-settings').promise();}
var queryString=(typeof Drupal.settings.storelocator_app==='object'?Drupal.settings.storelocator_app.storelocator_ws_url:'')+options.url;if(!/\?$/.test(queryString)){queryString=queryString+'?';}
var params=[];$.each(options.data||{},function(key,value){params.push('parameters['+key+']'+'='+value);});queryString+=params.join('&');var xhr=$.ajax({url:(typeof Drupal.settings.storelocator_app==='object'?Drupal.settings.storelocator_app.storelocator_ws:false)||'/store/ws-request/',type:(typeof Drupal.settings.storelocator_app==='object'?Drupal.settings.storelocator_app.storelocator_ws_method:false)||'post',data:{query:queryString}}).done(function(data){if(typeof data!=='object'){log.error('WS returned wrong data format ('+typeof data+')',queryString);deferred.reject('wrong data format');return;}
if(data&&data.length&&data[0].command){try{data=JSON.parse(data[1].data);}catch(err){deferred.reject('failed to parse data');return;}
log.debug('parsedData',data);}
deferred.resolve(data);}).fail(function(err){deferred.reject(err);});var promise=deferred.promise();promise.xhr=xhr;return promise;}
var drupalDateFormat='MM/DD/YYYY';function formatDate(date){return moment(date).format(drupalDateFormat);}
function parseDate(string){return moment(string,drupalDateFormat).toDate();}
function getNextSunday(){var d=new Date();d.setDate(d.getDate()-d.getDay()+7);return d;}
function getToday(){return new Date();}
function getOpenDay(key){if(key==='now'){return getToday();}else if(key==='sunday'){return getNextSunday();}}
var filtersMapping=(function(){var mapping;return function(){if(mapping){return mapping;}else{mapping={keys:{}};$('[data-url-filter]').each(function(){var data=$(this).data();if(data.urlFilter){mapping.keys[data.filter]=data.urlFilter;}
if(data.urlValue){mapping[data.filter]=mapping[data.filter]||{};mapping[data.filter][data.value]=data.urlValue;}});return mapping;}};})();var urlDateFormat='DDMMYYYY';function encodeURLFilters(filters){var convertedFilters={};Object.keys(filters).forEach(function(key){var mapping=filtersMapping();var newkey=mapping.keys[key]||key;if(key==='opendate'){var date=k4.storelocator.helpers.getOpenDate(filters[key])[0];convertedFilters[newkey]=[moment(date).format(urlDateFormat)];return;}
var newvalues=filters[key];if(mapping[key]){newvalues=newvalues.map(function(newvalue){return mapping[key][newvalue]||newvalue;});}
convertedFilters[newkey]=newvalues;});return k4.helpers.url.encode(convertedFilters);}
function decodeURLFilters(url){var filters=k4.helpers.url.decode(url);var convertedFilters={};Object.keys(filters).forEach(function(key){if(key==='ouvert'&&/\d/.test(filters[key])){var date=moment(filters[key],urlDateFormat).toDate();convertedFilters.opendate=[formatDate(date)];return;}
var newkey=key;var mapping=filtersMapping();Object.keys(mapping.keys).find(function(k){if(mapping.keys[k]===newkey){newkey=k;return true;}});var newvalues=Array.isArray(filters[key])?filters[key]:[filters[key]];if(mapping[newkey]){newvalues=newvalues.map(function(newvalue){Object.keys(mapping[newkey]).find(function(k){if(mapping[newkey][k]===newvalue){newvalue=k;return true;}});return newvalue;});}
convertedFilters[newkey]=newvalues;});return convertedFilters;}
function getOpenDate(opendateFilter){return $(opendateFilter).map(function(i,opendate){var $target=$(opendate);if($target.length>0){var date=$target.datepicker('getDate');if(typeof date==='object'&&date!==null){return date;}else{return false;}}
return opendate;}).get();}
k4.storelocator=k4.storelocator||{};k4.storelocator.helpers=k4.storelocator.helpers||{};k4.storelocator.helpers.getLang=getLang;k4.storelocator.helpers.proxyQuery=proxyQuery;k4.storelocator.helpers.getOpenDate=getOpenDate;k4.storelocator.helpers.formatDate=formatDate;k4.storelocator.helpers.parseDate=parseDate;k4.storelocator.helpers.getOpenDay=getOpenDay;k4.storelocator.helpers.encodeURLFilters=encodeURLFilters;k4.storelocator.helpers.decodeURLFilters=decodeURLFilters;})(jQuery,window.k4,window.Drupal,window.moment);;(function($,k4,Drupal,moment){'use strict';var log=k4.Logger.get('storelocator.stores');var helpers=k4.helpers;var onlyOneFavorite=true;var namePrefix='Carrefour ';if(!Drupal.settings.storelocator_app){Drupal.settings.storelocator_app={};}
var favStores=k4.helpers.favStoreID();function Store(attributes){this.attributes=attributes;helpers.implementPubSub(this,{log:log});this.lang=k4.storelocator.helpers.getLang();this.attributes.lang=this.lang;if(Drupal.settings.favoriteStore){this.attributes.favoriteStoreURL=Drupal.settings.favoriteStore.setURL;this.attributes.favoriteStoreMethod=Drupal.settings.favoriteStore.setMethod;}else{log.warn('Drupal.settings.favoriteStore object is missing');}
if(favStores.indexOf(this.attributes.store_id)>-1){this.attributes.favorite=true;if(Drupal.settings.favoriteStore){this.attributes.favoriteStoreURL=Drupal.settings.favoriteStore.unsetURL;}}
this.attributes.drive_icon=Drupal.settings.storelocator_app.storelocator_drive_icon;this.parseAttributes();this.buildLink();this.prefixName();this.fixHTTPS();}
Store.prototype.prefixName=function(){if(this.attributes.typology_name==='NONE'){this.attributes.namePrefix='';}else if(!this.attributes.typology_name){this.attributes.namePrefix=namePrefix;}else{this.attributes.namePrefix=Drupal.settings.storelocator_app.storelocator_brands_flag[this.attributes.typology_name]!=='0'?namePrefix:'';}
this.attributes.fullname=this.attributes.namePrefix?this.attributes.namePrefix+this.attributes.name:this.attributes.name;};Store.prototype.parseAttributes=function(){if(this.attributes.opening){var parsedOpenHours=k4.storelocator.helpers.parseOpenHours(this.attributes);this.attributes.opentoday=parsedOpenHours.opentoday;}
this.closestFormat();};Store.prototype.closestFormat=function(){var endOfToday=moment().endOf('day');if(this.attributes.closest_exceptional_open){var closestExceptionalOpen=this.attributes.closest_exceptional_open.date;if(this.attributes.closest_exceptional_open.date_DateTimeFormat){var formatedOpen=moment(this.attributes.closest_exceptional_open.date_DateTimeFormat,'DD/MM/YYYY');if(formatedOpen.isAfter(endOfToday)){closestExceptionalOpen=formatedOpen.format('dddd DD MMMM YYYY');}else{log.debug('%s: closest_exceptional_open is not after today (skipping)',this.attributes.name);closestExceptionalOpen=false;}}
if(closestExceptionalOpen){this.attributes.nextspecialopen={day:closestExceptionalOpen,open:k4.storelocator.helpers.formatHourFR(k4.storelocator.helpers.formatHourFR(this.attributes.closest_exceptional_open.begin_hours)),close:k4.storelocator.helpers.formatHourFR(k4.storelocator.helpers.formatHourFR(this.attributes.closest_exceptional_open.end_hours))};}}
if(this.attributes.closest_exceptional_close){if(this.attributes.closest_exceptional_close.date_DateTimeFormat){var formatedClose=moment(this.attributes.closest_exceptional_close.date_DateTimeFormat,'DD/MM/YYYY');if(formatedClose.isAfter(endOfToday)){this.attributes.nextspecialclose={day:formatedClose.format('dddd DD MMMM YYYY')};}else{log.debug('%s: closest_exceptional_close is not after today (skipping)',this.attributes.name);}}}};Store.prototype.whenMoreInfo=function(){this.parseAttributes();this.trigger('moreinfo');};Store.prototype.buildLink=function(){this.attributes.link=[Drupal.settings.storelocator_app.storelocator_base_url,'/',Drupal.t('store',this.lang),'/',this.attributes.clean_url].join('');};Store.prototype.bindToList=function(stores){var store=this;store.on('toggle',function(e,options){store.trigger(stores.focused===store?'blur':'focus',[options]);}).on('focus',function(e,options){store.isFocused=true;stores.trigger('focus',[store,options]);}).on('blur',function(e,options){store.isFocused=false;stores.trigger('blur',[store,options]);});};Store.prototype.setFavorite=function(toggle){var favorite=!!this.attributes.favorite;if(favorite!==toggle){this.attributes.favorite=toggle;if(Drupal.settings.favoriteStore){this.attributes.favoriteStoreURL=toggle?Drupal.settings.favoriteStore.unsetURL:Drupal.settings.favoriteStore.setURL;}
log.info(toggle?'Favorite store':'Unfavorite store',this.attributes.store_id);if(toggle){favStores.push(this.attributes.store_id);}else{for(var i=favStores.length-1;i>=0;i--){if(favStores[i]===this.attributes.store_id){favStores.splice(i,1);}}}
this.trigger('updated');}};Store.prototype.fixHTTPS=function(){if(window.location.protocol==='https:'){this.attributes.typology_logo=this.attributes.typology_logo.replace('http:','https:');if(typeof this.attributes.style_url!=='undefined'){this.attributes.style_url=this.attributes.style_url.replace('http:','https:');}
if(typeof this.attributes.drive_url!=='undefined'){this.attributes.drive_url=this.attributes.drive_url.replace('http:','https:');}}};function Group(attributes){this.attributes=attributes;helpers.implementPubSub(this,{log:log});}
function Stores(options){this.map=options.map;this.list=options.list;this.directionsURL=options.directionsURL;this.groups=[];this.stores=[];helpers.implementPubSub(this,{log:log});this.eventsController();this.lastSearch=null;}
Stores.prototype.eventsController=function(){var stores=this;stores.on('focus',function(e,store){if(stores.focused){stores.focused.trigger('blur');}
stores.focused=store;}).on('blur',function(){stores.focused=undefined;});$(document).off('k4-store-favorite.init').on('k4-store-favorite.stores',function(e,storeInfo,toggle){toggle=typeof toggle==='undefined'?true:toggle;var store=stores.get(storeInfo);if(store){if(toggle&&store.attributes.favorite){log.info('Store is already favorite',store.attributes.store_id);return;}
if(!toggle&&!store.attributes.favorite){log.info('Store is not favorite yet',store.attributes.store_id);return;}
if(toggle&&onlyOneFavorite){stores.resetFavorite();}
store.setFavorite(toggle);if(onlyOneFavorite){$(document).trigger('k4-store-replacefavorite',[store.attributes,toggle]);}}else{log.debug('Favorited store not found in loaded stores list.',storeInfo);if(onlyOneFavorite){$(document).trigger('k4-store-replacefavorite',[storeInfo,toggle]);}}});};Stores.prototype.set=function(stores,options){this.empty(stores,options);this.add(stores,options);};Stores.prototype.get=function(testStore){var foundStore=false;if(testStore&&testStore.store_id){$(this.stores).each(function(i,store){if(store.attributes.store_id===testStore.store_id){foundStore=store;return false;}});}
return foundStore;};Stores.prototype.empty=function(stores,options){log.debug('emptying stores',stores,options);var _stores=[];var newIds=$(stores).map(function(i,store){return store.store_id;}).get();$(this.groups).each(function(i,group){if((options&&options.resetAll)||!group.keep){group.trigger('destroy');}});this.groups=[];$(this.stores).each(function(i,store){var storeStillInMap=newIds.indexOf(store.attributes.store_id)>-1;if(!(options&&options.resetAll)&&(store.keep||storeStillInMap)){_stores.push(store);if(store.$container){store.trigger('destroy.list');}}else{log.debug('Removing '+store.attributes.name);store.trigger('destroy');}});this.stores=_stores;};function sortStores(stores){return stores.sort(function(s1,s2){if(typeof s1.attributes.distance==='number'&&typeof s2.attributes.distance==='number'){return s1.attributes.distance-s2.attributes.distance;}
return String(s1.name).localeCompare(String(s2.name));});}
Stores.prototype.add=function(stores,options){var self=this,_stores=this.stores,_groups=this.groups;var resultStores=[];var newStores=[];log.debug('adding stores',stores);$(stores).each(function(i,store){if(!Object.keys(store).length){return;}
if(store.nb_item>1){store=new Group(store);_groups.push(store);}else{var createdStore=self.get(store);if(!createdStore&&store.typology_name!=='NONE'){var distanceInKm=false;var itineraire=self.directionsURL.replace('$fromAddr',encodeURIComponent('')).replace('$toAddr',encodeURIComponent(store.name+', '+store.address+', '+store.zipcode+' '+store.city));if(self.lastSearch!=null){var fromPos=new window.google.maps.LatLng(self.lastSearch.position);var toPos=new window.google.maps.LatLng({lat:parseFloat(store.position.lat),lng:parseFloat(store.position.lng)});var distanceInMeters=window.google.maps.geometry.spherical.computeDistanceBetween(fromPos,toPos);distanceInKm=Math.round(distanceInMeters/100)/10;itineraire=self.directionsURL.replace('$fromAddr',encodeURIComponent(self.lastSearch.fullAddress)).replace('$toAddr',encodeURIComponent(store.name+', '+store.address+', '+store.zipcode+' '+store.city));}
createdStore=new Store($.extend(store,{distance:distanceInKm,itineraire:itineraire}));_stores.push(createdStore);createdStore.bindToList(self);log.debug('Adding '+createdStore.attributes.name);newStores.push(createdStore);}else{log.debug('Keeping '+createdStore.attributes.name);}
if(createdStore){if(options.keep){createdStore.keep=true;}
$.extend(createdStore.attributes,store);resultStores.push(createdStore);}}});sortStores(_stores);sortStores(resultStores);if($.isArray(stores)){this.map.addGroups(_groups);}
this.map.addStores(newStores);if(!options.excludeList){this.list.addStores(resultStores);}
return resultStores;};Stores.prototype.resetFavorite=function(){$(this.stores).each(function(i,store){store.setFavorite(false);});};k4.storelocator=k4.storelocator||{};k4.storelocator.Store=Store;k4.storelocator.Stores=Stores;})(jQuery,window.k4,window.Drupal,window.moment);(function($,k4){'use strict';function formatHourFR(hour){return hour.toLowerCase().replace(/[:h]/,'h').replace(/h00/,'h');}
function parseOpenHours(attributes){var hours_today=attributes.hours_today;if(!hours_today||!hours_today.length||hours_today[0].length<2){return{opentoday:false};}
var opentoday={};opentoday.open=formatHourFR(hours_today[0][0]);opentoday.close=formatHourFR(hours_today[0][1]);if(hours_today.length>1&&hours_today[1].length>1){opentoday.open2=formatHourFR(hours_today[1][0]);opentoday.close2=formatHourFR(hours_today[1][1]);}
return{opentoday:opentoday};}
k4.storelocator.helpers=k4.storelocator.helpers||{};k4.storelocator.helpers.parseOpenHours=parseOpenHours;k4.storelocator.helpers.formatHourFR=formatHourFR;})(jQuery,window.k4);;(function($,k4,Drupal,BrowserDetect){'use strict';if(!Drupal.settings.storelocator_app){return;}
var log=k4.Logger.get('storelocator.autocomplete');var suggestions_options={types:['(cities)'],componentRestrictions:{country:Drupal.settings.storelocator_app.storelocator_country_code||'FR'}};var config={minLetters:Drupal.settings.storelocator_app.autocomplete_min_letters||3,debounce:Drupal.settings.storelocator_app.autocomplete_debounce||200};var service;function Autocomplete($container,options){this.options=$.extend({},suggestions_options,options);this.$container=$container;this.callbacks=[];this.init();}
Autocomplete.prototype.init=function(){var autocomplete=this;k4.helpers.ensureGoogleMaps().then(function(){autocomplete._init();});};Autocomplete.prototype._init=function(){service=service||new window.google.maps.places.AutocompleteService();var autocomplete=this;log.debug('init',this.$container[0],this.options);this.$container.autocomplete({containerClass:'k4-autocomplete-locator',appendTo:BrowserDetect.isMobile?this.$container.parent():document.body,lookup:$.debounce(config.debounce,function(input,done){if(!input||input.length<config.minLetters){done({suggestions:[]});return;}
var options=$.extend({input:input},autocomplete.options);service.getPlacePredictions(options,function(predictions,status){var items=[];if(status===window.google.maps.places.PlacesServiceStatus.OK){items=$.map(predictions,function(prediction){return{value:prediction.description};});}else if(status==='ZERO_RESULTS'){log.debug('No result for `getPlacePredictions` with input: ',input);}else{log.error('Something went wrong with `getPlacePredictions`, status: ',status);}
done({suggestions:items});});}),onSelect:function(suggestion){log.debug('selected suggestion:',suggestion.value);if(!k4.storelocator.geocode){log.error('storelocator.geocode.js not loaded: cannot get place informations');return;}
k4.storelocator.geocode(suggestion.value).then(function(place){log.info('geocoded place',place);place.displayMarker=true;$.each(autocomplete.callbacks,function(i,callback){callback(place);});});}});};Autocomplete.prototype.destroy=function(){this.$container.autocomplete('dispose');};Autocomplete.prototype.whenLocation=function(callback){this.callbacks.push(callback);};k4.storelocator=k4.storelocator||{};k4.storelocator.Autocomplete=Autocomplete;})(jQuery,window.k4,window.Drupal,window.BrowserDetect);;(function($,k4,Drupal){'use strict';if(!Drupal.settings.storelocator_app){return;}
var log=k4.Logger.get('storelocator.geocode');var geocodeParams={address:Drupal.settings.storelocator_app.storelocator_default_address||'France',componentRestrictions:{country:Drupal.settings.storelocator_app.storelocator_country_code||'FR'}};var addressMapping={street_number:'number',route:'street',postal_code:'zip',locality:'locality',country:'country'};var getGeocoder=(function(){var _geocoder;return function(){if(!_geocoder){_geocoder=k4.helpers.ensureGoogleMaps().then(function(){return new window.google.maps.Geocoder();});}
return _geocoder;};})();function formatResults(data){var result={};data.address_components.forEach(function(component){Object.keys(addressMapping).forEach(function(key){if(component.types.indexOf(key)!==-1){result[addressMapping[key]]=component.long_name;}});});result.formatted_address=data.formatted_address;if(!k4.helpers.google){throw'k4.helpers.google.js not loaded, cannot format location';}
result.location=k4.helpers.google.locationToLiterals(data);return result;}
function geocode(address){var defer=$.Deferred();var params;if(typeof address==='object'){params=address;}else{params={address:address};params=$.extend({},geocodeParams,params);}
log.debug('searching',address);getGeocoder().then(function(geocoder){geocoder.geocode(params,function(results,status){if(status!==window.google.maps.GeocoderStatus.OK){defer.reject('geoloc.google.status: '+status);return;}
if(results&&results.length){defer.resolve(formatResults(results[0]));}else{defer.reject('geoloc.google: no result found');}});});return defer.promise();}
k4.storelocator=k4.storelocator||{};k4.storelocator.geocode=geocode;})(jQuery,window.k4,window.Drupal);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('search-infinite');var container='.k4-infinite:has(.k4-productitem)';var itemsClass='.k4-productitem';var formIds='#facets-slidingpanel-form, #rsc-product-promo-gift-filters-form';var buttonContainer='.gd-infinite-scroll-load-more';var button='.k4-infinite-btn';var totalInfo='.k4-nbr-result';var pagingInfo='.k4-nbr-result';var updateTotal='.k4-infinite-result';k4.helpers.onLoad('search',function(context){var $context=$(context);if(!$context.has(itemsClass).length&&!$context.is(itemsClass)&&!$context.is(formIds)){log.debug('not search');return;}
if(!$(container).length){if($(buttonContainer).length){$(buttonContainer).hide();}
return;}
if(Drupal.settings.rsc_analytics&&typeof Drupal.settings.rsc_analytics.ea_data!=="undefined"&&Drupal.settings.rsc_analytics.ea_data){k4.analytics.tagCommanderEvent(this,3,'productsList',{page_productsList:Drupal.settings.rsc_analytics.ea_data});}
$(container).each(function(){var $container=$(this);var $buttonContainer=$(buttonContainer,$container);var $button=$(button,$buttonContainer);var $updateTotal=$(updateTotal,$container);var total=$(totalInfo,$container).attr('data-result');if(!total){total=$(totalInfo).attr('data-result');}
if(!total){log.error('data-result attribute not found on %s',totalInfo);return;}
var paging=$(pagingInfo,$container).data('paging');if(!paging){paging=$(pagingInfo).data('paging');}
if(!paging){log.error('data-paging attribute not found %s',pagingInfo);return;}
$updateTotal.html(Drupal.t('n total results',{'@nb':total}));var current=$(itemsClass,$container).filter(':visible').length;var next=Math.min(total-current,paging);log.debug('TOTAL: %s, CURRENT: %s, PAGING: %s, NEXT: %s',total,current,paging,next);if(next){$('span',$button).html(Drupal.t('View <b>@nb</b> next results',{'@nb':next}));$buttonContainer.show();}else{$buttonContainer.hide();}});});})(jQuery,window.k4,window.Drupal);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('search');var config={filtersContainer:'.k4-filterresults',filters:'.k4-filterresults-link',sortContainer:'.k4-managesearch',sortLink:'.k4-dropdownlist-link',resetFilters:'.k4-search-filters-main',listContainer:'.k4-infinite-list',activeClass:'is-active',resultsCount:'.k4-nbr-result',drupalFilters:'.k4-filterslidingpanel-body .k4-form-field',closeDrawerAfterClick:false,slidingPannel:'.k4-slidingpanel-inner'};function ajaxifyURL(link){return link.replace('search/site','search-ajax/site');}
function isSearchPage(url){return/search(:?-ajax)?\/site\//.test(url);}
$(function(){var $filtersContainer=$(config.filtersContainer),$sortContainer=$(config.sortContainer),$sorts=$(config.sortLink,$sortContainer),activeSort=$sorts.first().data('sort');if(!$filtersContainer.length){return;}
function showLoader(){$(config.listContainer).html('<div class="k4-spinloader-container"><div class="k4-spinloader-wrapper k4-spinloader-icon_aligncenter"><div class="k4-spinloader-anim"><div class="k4-spinloader-icon k4-spinloader-icon_top"></div><div class="k4-spinloader-icon k4-spinloader-icon_bottom"></div></div></div></div>');}
function hideLoader(){}
function closeDrawer(){$(config.filtersContainer).trigger('k4-toggledrawer',[false]);}
function formatFilterURL(url,tids,sort){return url+(tids.length?'/'+tids.join(','):'')+(sort?'?sort='+sort:'');}
function getTidsFromURL(url){return k4.helpers.url.parseDrupalArgs(4,url);}
function updateFilters(options){$(config.filtersContainer).find(config.filters).each(function(){var tids=options.tids.slice();var $filter=$(this);var tid=$filter.attr('data-tid');$filter.closest('li').show();if((typeof options.hideOoshopTid!=='undefined')&&options.hideOoshopTid){if(tid===options.hideOoshopTid){$filter.closest('li').hide();}}
var isActive=tids.indexOf(tid)!==-1;if($filter.is(config.resetFilters)){isActive=tids.length===0;tids=[];}else{if(!isActive){tids.push(tid);}else{tids.splice(tids.indexOf(tid),1);}}
var url=formatFilterURL(options.search_url,tids,activeSort);$filter.attr('href',url);$filter.toggleClass(config.activeClass,isActive);});$(config.filtersContainer).find(config.resetFilters).toggleClass(config.activeClass,!options.tids||!options.tids.length);}
function addOoshopFilter(options){var $filters=$(config.filtersContainer).find(config.filters);if(!$filters.filter('[data-tid="'+options.ooshopTid+'"]').length){$filters.filter('[data-tid="'+options.previousTid+'"]').closest('li').after('<li>'+options.ooshopLink+'</li>');}
else{$filters.filter('[data-tid="'+options.ooshopTid+'"]').closest('li').show();}}
function updateSorts(options){$sorts.each(function(){var tids=options.tids.slice();var $sort=$(this);var sort=$sort.data('sort');var isActive=!!(sort&&sort===activeSort);var oldTids=getTidsFromURL($sort.attr('href'));if(decodeURIComponent(tids)!==decodeURIComponent(oldTids)){var url=formatFilterURL(options.search_url,tids,sort);$sort.attr('href',url);}
$sort.toggleClass(config.activeClass,isActive);});$(config.filtersContainer).find(config.resetFilters).toggleClass(config.activeClass,!options.tids||!options.tids.length);}
$.fn.updateSortsWithFacetParameters=function(sortCriteriaList){$(this).find('li a').each(function(){var $sort=$(this);var sort=$sort.data('sort');if(sortCriteriaList[sort]){var newUrl=sortCriteriaList[sort].url;$sort.attr('href',newUrl);}});log.debug('Drupal invoke updateSortsWithFacetParameters');};$.fn.searchResultsFiltered=function(){$(config.slidingPannel+', body').scrollTop(0);log.debug('Drupal invoke searchResultsFiltered');};function executeActions(actions){$.each(actions,function(i,action){if(action.command==='insert'){$(action.selector)[action.method](action.data);k4.helpers.domChanged($(action.selector));}else if(action.command==='data'){$(action.selector).attr('data-'+action.name,action.value);$(action.selector).data(action.name,action.value);}else if(action.command==='rsc_search_update_filters'){updateFilters(action);updateSorts(action);}else if(action.command==='rsc_search_add_ooshop_filter'){addOoshopFilter(action);}else if(action.command==='settings'){$.extend(true,Drupal.settings,action.settings);}});}
function beforeCall(){showLoader();if(config.closeDrawerAfterClick){closeDrawer();}}
function call(link){return $.ajax({url:link});}
function onResponse(data){executeActions(data);hideLoader();}
function afterCall(link){if(window.location.href!==link){var filtersNew=k4.helpers.url.decode(link);var sortParameter='';Object.keys(filtersNew).forEach(function(key){if(key==='sort'){sortParameter=filtersNew[key];}});var canonicalFilters=sortParameter?{sort:sortParameter}:{};var canonicalQueryString=k4.helpers.url.encode(canonicalFilters);var nonCanonicalQueryString=k4.helpers.url.encode(filtersNew);var canonicalLink=link.replace(nonCanonicalQueryString,canonicalQueryString);if(window.location.href!==canonicalLink){log.debug('updating URL',canonicalLink);k4.helpers.url.updateURL(canonicalLink);}}
$(config.slidingPannel+', body').scrollTop(0);}
function loadPage(link){var ajaxLink=ajaxifyURL(link);var promise=call(ajaxLink);promise.done(onResponse).done($.proxy(afterCall,null,link)).fail(function(jqXHR,textStatus){log.error('Couldn\'t get ajax search results:',textStatus);});beforeCall();return promise;}
window.k4.search.loadPage=loadPage;$(document).on('click.filters',config.filtersContainer+' '+config.filters,function(e){e.preventDefault();var $filter=$(this);var link=$filter.attr('href');if(!link){log.error('Filter has no link',this);return;}
loadPage(link);});function activateSort($sortLink){var link=$sortLink.attr('href');activeSort=$sortLink.data('sort');if(!link){log.error('Sorting has no link',$sortLink);return;}
loadPage(link);}
$sortContainer.on('click.sort',config.sortLink,function(e){e.preventDefault();var $sort=$(this);var $ul=$sort.closest('ul');var $validate=$ul.find('.k4-cta_dropvalid');if($validate.length&&$validate.is(':visible')){var $cancel=$ul.find('.k4-cta_dropdelete');$ul.find(config.sortLink+'.'+config.activeClass).removeClass(config.activeClass);$sort.addClass(config.activeClass);$validate.off('click.sort').on('click.sort',function(){activateSort($sort);$sort.trigger('k4-toggledrawer');$validate.off('click.sort');$cancel.off('click.sort');});$cancel.off('click.sort').on('click.sort',function(){$sort.removeClass(config.activeClass);var $previousSort=$ul.find('[data-sort='+activeSort+']');if(!$previousSort.length){$previousSort=$ul.find(config.sortLink).first();}
$previousSort.addClass(config.activeClass);$sort.trigger('k4-toggledrawer');$validate.off('click.sort');$cancel.off('click.sort');});return;}
activateSort($sort);});var searchURLPattern=/search\/site/;if(searchURLPattern.test(window.location.href)){k4.helpers.url.onPopStateIgnoreHash(function(){var url=window.location.href;if(searchURLPattern.test(url)){log.debug('popstate detected:',url);loadPage(url);}});}});$(function(){var $managesearch=$('.k4-managesearch-view');if(!$managesearch.length){return;}
var displayMode;function toggleSearchDisplay(mode){var $gridButton=$('.k4-managesearch-view-btn:has(.k4-managesearch-view-btn-grid)');var $listButton=$('.k4-managesearch-view-btn').not($gridButton);var $target=$('#k4-search-results');$target.toggleClass('k4-productitem_grid',mode==='grid').toggleClass('k4-productitem_inline',mode==='list');$listButton.toggleClass('is-active',mode==='list');$gridButton.toggleClass('is-active',mode==='grid');displayMode=mode;$.cookie('search-display',mode,{expires:24*30,path:'/'});$target.trigger('k4-togglelist-'+mode);}
displayMode=$.cookie('search-display');if(displayMode){toggleSearchDisplay(displayMode);}
$managesearch.on('click','.k4-managesearch-view-btn',function(e){e.preventDefault();var $button=$(this);var mode=$button.is(':has(.k4-managesearch-view-btn-grid)')?'grid':'list';toggleSearchDisplay(mode);});k4.helpers.onLoad('search-toggle',function(container){if(displayMode){var $list=$(config.listContainer,container).addBack(config.listContainer);if($list.length){$list.toggleClass('k4-productitem_grid',displayMode==='grid').toggleClass('k4-productitem_inline',displayMode==='list');}}});});function notReady(key){return function(){log.warn('function '+key+' is not ready');};}
$(document).on('click','.k4-searchmobile-form .k4-form-input_reset',function(e){e.preventDefault();$(this).closest('form').find('input[type=text],input[type=search]').val('');});window.k4.search={loadPage:notReady('loadPage'),isSearchPage:isSearchPage,ajaxifyURL:ajaxifyURL};})(jQuery,window.k4,window.Drupal);;(function($,k4){'use strict';var log=k4.Logger.get('scroll-to-target');$(document).on('click','.k4-scroll-to',function(e){var $el=$(e.currentTarget);if($el.is('a')){e.preventDefault();}
var selector=$el.data('href')||$el.attr('href');if(selector&&selector.indexOf('#')!==0){log.warn('.k4-scroll-to element\'s target is not an anchor: %s',selector);return;}
var $target=selector?$(selector):$el;if(!$target.length){log.error('target not found: %s',selector);return;}
setTimeout(function(){k4.helpers.scrollTo($target);},0);});})(jQuery,window.k4);;(function($,k4,Drupal,BrowserDetect){'use strict';var log=k4.Logger.get('smart-app-banner');if(!Drupal.settings.smartAppBanner){log.error('Missing settings: Drupal.settings.smartAppBanner');return;}else if(!Drupal.settings.smartAppBanner.iosEnabled&&BrowserDetect.platform.name==='iOS'){log.debug('Smart app banner disabled for iOS');return;}else if(!Drupal.settings.smartAppBanner.androidEnabled&&BrowserDetect.platform.name==='Android'){log.debug('Smart app banner disabled for Android');return;}
var userLangAttribute=navigator.language||navigator.userLanguage||navigator.browserLanguage;var userLang=userLangAttribute.slice(-2)||'fr';var mixins={ios:{appMeta:'apple-itunes-app',iconRels:['apple-touch-icon-precomposed','apple-touch-icon'],getStoreLink:function(){return this.options.iosLink||'https://itunes.apple.com/'+this.options.appStoreLanguage+'/app/id'+this.appId;}},android:{appMeta:'google-play-app',iconRels:['android-touch-icon','apple-touch-icon-precomposed','apple-touch-icon'],getStoreLink:function(){return this.options.androidLink||'http://play.google.com/store/apps/details?id='+this.appId;}}};function setCookie(key,value,minutes,suffix){$.cookie(key,value,{path:'/',expires:new Date(+new Date()+minutes*1000*60)});if(suffix){setCookie(key+suffix,value,minutes);}}
var SmartBanner=function(options){this.options=$.extend({},{daysClosed:15,daysOpened:90,showEvery:24*60,appStoreLanguage:userLang,buttonText:'Installer',store:{ios:'',android:''},iosLink:'https://app.appsflyer.com/id378305156?pid=Carrefour_portal&c=SmartAppBanner',androidLink:'https://app.appsflyer.com/com.carrefour.fid.android?pid=Carrefour_portal&c=SmartAppBanner',ignoreNative:false,specialPage:''},options||{});log.debug('Platform is %s %s',BrowserDetect.platform.name,BrowserDetect.platform.version);this.suffix=this.options.specialPage?'-'+this.options.specialPage:'';if($.cookie('smartbanner-shown'+this.suffix)){log.debug('Banner was already shown during the last %s minutes',this.options.showEvery);return;}else if($.cookie('smartbanner-closed'+this.suffix)){log.debug('Banner was closed by user: skip');return;}else if($.cookie('smartbanner-opened'+this.suffix)){log.debug('User previously clicked the install link: skip');return;}
if(this.options.showEvery){setCookie('smartbanner-shown','true',this.options.showEvery,this.suffix);}
if(BrowserDetect.platform.name==='iOS'){if(BrowserDetect.platform.version>=6&&BrowserDetect.browser==='Safari'&&!this.options.ignoreNative){log.debug('iOS >= 6 : smart banner should be native');}else{this.type='ios';}}else if(BrowserDetect.platform.name==='Android'){this.type='android';}
if(!this.type||navigator.standalone){return;}
$.extend(this,mixins[this.type]);if(!this.parseAppId()){log.warn('Meta with application id not found');}
this.create();};SmartBanner.prototype={constructor:SmartBanner,create:function(){var link=this.getStoreLink();var inStore=this.options.store[this.type];var icon;for(var i=0;i<this.iconRels.length;i++){var $rel=$('link[rel="'+this.iconRels[i]+'"]');if($rel.length){icon=$rel.attr('href');break;}}
this.$sb=$('<div></div>').addClass('k5-app-banner k5-app-banner--'+this.type);var sbHTML=k4.templates.smartAppBanner({icon:this.options.icon||icon,title:this.options.title,description:this.options.description,author:this.options.author,inStore:inStore,link:link,buttonText:this.options.buttonText});this.$sb.html(sbHTML);$('.k4-main-header').prepend(this.$sb);$(window).trigger('k4-resize.width');this.$sb.one('click.smartbanner.install','.k5-app-banner__btn',this.install.bind(this)).one('click.smartbanner.close','.k5-app-banner__close',this.close.bind(this));},hide:function(){this.$sb.animate({height:0},400,function(){$(this).remove();$(window).trigger('k4-resize.width');});},close:function(){this.hide();setCookie('smartbanner-closed','true',this.options.daysClosed*60*24,this.suffix);this.destroy();},install:function(){this.hide();setCookie('smartbanner-opened','true',this.options.daysOpened*60*24,this.suffix);this.destroy();},parseAppId:function(){var $meta=$('meta[name="'+this.appMeta+'"]');if(!$meta.length){return;}
this.appId=/app-id=([^\s,]+)/.exec($meta.attr('content'))[1];return this.appId;},destroy:function(){this.$sb.off('click.smartbanner.install').off('click.smartbanner.close');$(document).off('click.smartbanner.close');}};$(function(){new SmartBanner(Drupal.settings.smartAppBanner);});})(jQuery,window.k4,window.Drupal,window.BrowserDetect);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('search-autocomplete');var config=$.extend({minLetters:1,debounce:300,elasticsearch:true},Drupal.settings.search&&Drupal.settings.search.autocomplete);var request=(function(){var xhr;return{send:function(url,query){url=url+'/'+Drupal.encodePath(query);if(k4.searchContext){url=k4.searchContext.contextualizeURL(url);}
request.abort();xhr=$.ajax({type:'get',url:url});return xhr;},abort:function(){if(!xhr){return;}
xhr.abort();}};})();$(function(){$('input.k4-autocomplete').each(function(){var $input=$(this);var url=$input.data('autocomplete-ws');if(config.elasticsearch){var context=$('.k4-header');var $container=$('.k4-searchmobile',context);var wrapper='.k4-searchautocomplete';var lastQuery,$lastResults;var hideResults=function(){if(!$(wrapper).length){return;}
request.abort();$container.find(wrapper).remove();$(document).off('click.search.autocomplete');k4.helpers.toggleBodyScroll(true);};var showResults=function($results){$container.append($results);k4.helpers.domChanged($container);k4.helpers.toggleBodyScroll(false);$(document).on('click.search.autocomplete',function(e){var $target=$(e.target);if(!$target.closest($container).length||$target.is(wrapper)||$target.is('.k4-cta3_back')){hideResults();}});};$input.attr('autocomplete','off').on('keydown',$.debounce(config.debounce,function(){var query=this.value;if(query===lastQuery){hideResults();showResults($lastResults);return;}
if(query.length>=config.minLetters){request.send(url,query).done(function(results){lastQuery=query;$lastResults=$('<div>').html(results).find(wrapper);hideResults();showResults($lastResults);});}else{hideResults();}})).on('focus',function(){k4.pubsub.trigger('k4-header-open');if(this.value===lastQuery&&$lastResults&&$lastResults.length){showResults($lastResults);}});k4.mq.when('S',function(){hideResults();});$(document).on('k4-searchBarV2-close',function(){log.debug('triggered k4-searchBarV2-close, hiding search results');hideResults();});}else{$input.autocomplete({containerClass:'k4-autocomplete-main',deferRequestBy:config.debounce,maxHeight:false,lookup:function(query,done){if(!query||query.length<config.minLetters){done({suggestions:[]});return;}
var suggestions=[];request.send(url,query).done(function(results){Object.keys(results).forEach(function(key){suggestions.push({value:key});});}).always(function(){done({suggestions:suggestions});});},onSelect:function(){$input.closest('form').submit();}});}});});})(jQuery,window.k4,window.Drupal);;(function($,k4,noUiSlider,wNumb){'use strict';function nouisliderPlugin(el){var rangeMin=Number(el.dataset.rangeMin),rangeMax=Number(el.dataset.rangeMax),startMax=Number(el.dataset.startMax),startMin=Number(el.dataset.startMin),$slider=$('.k4-rangeslider_multiple',el),slider=$slider[0],postfix='€';noUiSlider.create(slider,{cssPrefix:'k4-rangeslider-',behaviour:'tap',connect:true,start:[startMin,startMax],range:{'min':[rangeMin],'max':[rangeMax]},format:wNumb({decimals:2,mark:',',postfix:postfix})});var $minValue=$('.k4-rangeslider-min',el),$maxValue=$('.k4-rangeslider-max',el),$fromValue=$('.k4-rangeslider-from',el),$toValue=$('.k4-rangeslider-to',el);slider.noUiSlider.on('change',function(values,handle){if(handle){$toValue.trigger('change');}else{$fromValue.trigger('change');}});slider.noUiSlider.on('update',function(values,handle){var value=values[handle];var numericValue=value.slice(0,-1*postfix.length);if(handle){$maxValue.html(value);$toValue.val(numericValue);}else{$minValue.html(value);$fromValue.val(numericValue);}});}
k4.helpers.onLoad('filterslidingpanel',function(container){$('.k4-filterslidingpanel-range',container).each(function(){if(this.dataset.noUiSliderInit){return;}
this.dataset.noUiSliderInit=true;nouisliderPlugin(this);});});})(jQuery,window.k4,window.noUiSlider,window.wNumb);;(function($){'use strict';var paramsSeparator='+';var currentURL=window.location.href;function encode(obj){if(!obj){return'';}
var args=[];Object.keys(obj).forEach(function(key){var value=obj[key];if(Array.isArray(value)){value=value.join(paramsSeparator);}
args.push(key+(value?'='+value:''));});return args.join('&');}
function decode(string){if(!string){return{};}
if(/\?/.test(string)){string=string.replace(/^[^\?]*\?/,'');}else if(/http/.test(string)){return{};}
var split=string.split('&');var obj={};split.forEach(function(s){var keyval=s.split('=');obj[keyval[0]]=keyval[1]===undefined?true:keyval[1];if(keyval[1]&&keyval[1].indexOf(paramsSeparator)!==-1){obj[keyval[0]]=keyval[1].split(paramsSeparator);}});return obj;}
function getBaseURL(url){return url.replace(/(^[^\?#]*)\??.*#?.*$/,'$1');}
function appendDataToURL(url,data){if(!data||!Object.keys(data).length){return url;}
var baseURL=getBaseURL(url);url=baseURL+'?'+encode($.extend(decode(url),data));return url;}
function parseDrupalArgs(index,path){if(path.substr(0,1)==='/'){path=path.substr(1);}
path=path.split('?');var args=path[0].split('/');if(index===null){return args;}
if(args[index]){return args[index];}
return'';}
function setLocationHash(hash){var scr=window.pageYOffset||document.documentElement.scrollTop;location.hash=hash;window.scrollTo(0,scr);}
function updateURL(url){window.history.pushState(null,null,url);currentURL=url;}
function replaceURL(url){window.history.replaceState(null,null,url);currentURL=url;}
function onPopState(callback){$(window).on('popstate',callback);}
function onPopStateIgnoreHash(callback){$(window).on('popstate',function(){var url=window.location.href;if(currentURL.replace(/#.*$/,'')!==url.replace(/#.*$/,'')){callback();}
setTimeout(function(){currentURL=url;});});}
function sendBeacon(url,data){if(navigator.sendBeacon&&false){navigator.sendBeacon(url,data);}else{$.ajax({method:'get',url:url,data:data});}}
window.k4=window.k4||{};window.k4.helpers=window.k4.helpers||{};window.k4.helpers.url={encode:encode,decode:decode,getBaseURL:getBaseURL,appendDataToURL:appendDataToURL,parseDrupalArgs:parseDrupalArgs,setLocationHash:setLocationHash,updateURL:updateURL,replaceURL:replaceURL,onPopState:onPopState,onPopStateIgnoreHash:onPopStateIgnoreHash,sendBeacon:sendBeacon};})(window.jQuery);;(function($,k4){'use strict';var log=k4.Logger.get('datepicker');var config={selector:'.k4-js-datepicker',scrollableParents:'.k4-slidingpanel-inner'};function fixStickyParents(options){options.beforeShow=function(input,datepicker){var $datepicker=datepicker.input;var $scrollableParent=$datepicker.closest(config.scrollableParents);if($scrollableParent.length){$scrollableParent.on('scroll.datepicker',function(){log.info('scrolling a stuck element -> force close date picker');$datepicker.trigger('blur').datepicker('hide');});}};options.onClose=function(date,datepicker){var $datepicker=datepicker.input;var $scrollableParent=$datepicker.closest(config.scrollableParents);if($scrollableParent.length){$scrollableParent.off('scroll.datepicker');}};return options;}
if($.fn.datepicker){$.datepicker.setDefaults($.datepicker.regional.fr);k4.helpers.onLoad('datepicker',function(container){$(config.selector,container).each(function(){var $datepicker=$(this);var options=$datepicker.data();options=fixStickyParents(options);$datepicker.datepicker(options);});});}else{log.warn('Datepicker plugin is not loaded');}})(jQuery,window.k4);;(function($,k4,Drupal,BrowserDetect){'use strict';var log=k4.Logger.get('ecoupons');if(!Drupal.settings.ecoupons){log.error('Drupal.settings.ecoupons missing: ecoupons cannot work');return;}
var config={mainContainer:'.k4-main-content',container:'.k4-productitem_ecoupons',selectSelector:':checkbox',selectEvent:'click',selectedForm:'#ecoupons-selector-selected-form',selectedEmptyScreen:'#ecoupons-selector-selected-empty-screen',modalEvent:'click',countSelector:'.k4-stickyblock-link strong',countSelectorText:'.k4-stickyblock-link span:last',countSelectorAnim:'.k4-stickyblock-link-animation',buttonUseEcoupons:'#coupon-personal-code-popin',appModalTrigger:'.k4-modaltrigger_ecoupons-app',selectURL:Drupal.settings.ecoupons.selectURL,selectedCount:Drupal.settings.ecoupons.couponsSelectedCount,maxSelected:Drupal.settings.ecoupons.maxSelected||50,syncUrl:Drupal.settings.ecoupons.synchronizationUrl,syncInterval:Drupal.settings.ecoupons.synchronizationInterval*1000,ecouponsInAppAndroid:Drupal.settings.ecoupons.ecouponsInAppAndroid||'com.carrefour.mobile.fid://coupons',ecouponsInAppIos:Drupal.settings.ecoupons.ecouponsInAppIos||'com.carrefour.mobile.fid://coupons',slidingPannel:'.k4-slidingpanel-inner'};var needSync=false;function getCheckboxes(id){return $(config.container+' '+config.selectSelector).filter('[data-ecoupon-id='+id+'],[value='+id+']');}
function toggleCheckboxes($checkboxes,toggle){$checkboxes.prop('checked',toggle);if(toggle){$checkboxes.attr('checked','checked');}else{$checkboxes.removeAttr('checked');}}
function updateCount(count){var str;if(count>1){str='sélectionnés';}
else{str='sélectionné';}
$(config.countSelectorText).text(str);$(config.countSelector).text(count);if(count===0){$('.page-mes-coupons-selection .k4-managesearch-title').hide();}}
var $document=$(document);$document.on(config.selectEvent,config.container+' '+config.selectSelector,function(e){e.preventDefault();var checkbox=e.currentTarget;if(checkbox.inProgress){return;}
checkbox.inProgress=true;var $checkbox=$(checkbox);var id=$checkbox.data('ecoupon-id')||$checkbox.val();var toggle=$checkbox.is(':checked');if(config.selectedCount>=config.maxSelected&&toggle){log.info('Maximum of coupons reached, cannot selector more than '+config.maxSelected,' - you have '+config.selectedCount);k4.helpers.openModal({title:' ',content:k4.templates.oups({description:Drupal.t('Max coupons exceeded',{'@max':config.maxSelected})})});checkbox.inProgress=false;return;}
config.selectedCount=config.selectedCount+(toggle?1:-1);var action=toggle?'add':'remove';var url=config.selectURL.replace('%id%',id).replace('%action%',action);$checkbox=getCheckboxes(id);$(config.countSelectorAnim).removeClass('is-animated');setTimeout(function(){toggleCheckboxes($checkbox,toggle);updateCount(config.selectedCount);if(toggle){$(config.countSelectorAnim).addClass('is-animated');}
if(config.selectedCount>0){$('div.k4-managesearch-cell_sreverse > a').removeClass('k4-hide');$('form#rsc-ecoupons-coupons-selector-form a.k4-cta3').removeClass('k4-hide');}
else{$('div.k4-managesearch-cell_sreverse > a').addClass('k4-hide');$('#rsc-ecoupons-coupons-selector-form a.k4-cta3').addClass('k4-hide');if($('body').hasClass('page-mes-coupons-selection')){$('#rsc-ecoupons-coupons-selector-form .k4-stickyblock').addClass('k4-hide');}}
var $buttonUseEcoupons=$(config.buttonUseEcoupons);if($buttonUseEcoupons.length){var strToReplace=$(config.buttonUseEcoupons).attr('href').split('/').pop();if($.isNumeric(strToReplace)){var newUrl=$(config.buttonUseEcoupons).attr('href').replace(strToReplace,config.selectedCount);$(config.buttonUseEcoupons).attr('href',newUrl).removeClass('ajax-processed').unbind('click');}}
Drupal.behaviors.AJAX.attach('.k4-stickyblock',Drupal.settings);});$.ajax({url:url}).then(function(data){if(data.error){log.error(data.error,url);toggle=!toggle;config.selectedCount=config.selectedCount+(toggle?1:-1);updateCount(config.selectedCount);}
$checkbox=getCheckboxes(id);toggleCheckboxes($checkbox,toggle);},function(error){log.error(error.statusText,url);}).always(function(){needSync=true;checkbox.inProgress=false;var $selectedSelectorCheckbox=$(config.selectedForm+' '+config.container+' '+config.selectSelector).filter('[data-ecoupon-id='+id+'],[value='+id+']');if($selectedSelectorCheckbox&&!$checkbox.is(':checked')){$selectedSelectorCheckbox.closest(config.container).hide();if(!config.selectedCount){$(config.selectedForm).hide();$(config.selectedEmptyScreen).fadeIn(1200);}}});}).on(config.modalEvent,config.mainContainer+' '+config.container,function(e){if($(e.target).is(config.selectSelector)||$(e.target).closest('label').length){return;}
var $originalContent=$(e.currentTarget);var $content=$originalContent.clone().attr('class','k4-productitem k4-productitem_ecoupons').removeAttr('style');var $label=$content.find('label');var $input=$content.find(':checkbox');var id=$input.attr('id')+'_modal';$input.attr('id',id);$label.attr('for',id);var $equalized=$content.find('[style]');$equalized.removeAttr('style');if(window.location.pathname!=='/personal-space'){if($originalContent.find('.k4-js-dotdotdot').length){var originalText=$originalContent.find('.k4-js-dotdotdot').triggerHandler('originalContent')[0];$content.find('.k4-js-dotdotdot').removeClass('k4-js-dotdotdot').html(originalText);}
k4.helpers.openModal({content:$content[0].outerHTML});}});if(BrowserDetect.device&&['iPhone','Android'].indexOf(BrowserDetect.device)!==-1){var confirmLink=BrowserDetect.device==='Android'?config.ecouponsInAppAndroid:config.ecouponsInAppIos;$document.on('click',config.appModalTrigger,function(e){e.preventDefault();var link=$(e.target).attr('href');k4.helpers.openModal({title:Drupal.t('My Coupons'),content:k4.templates.ecouponsAppRedirect({confirmLink:confirmLink,cancelLink:link})});$document.one('click.confirm-ecoupons-redirect-to-app','.k4-modal .k4-confirm',function(){setTimeout(function(){if(BrowserDetect.device==='Android'&&Drupal.settings.smartAppBanner.androidLink){window.location=Drupal.settings.smartAppBanner.androidLink;}else if(BrowserDetect.device==='iPhone'&&Drupal.settings.smartAppBanner.iosLink){window.location=Drupal.settings.smartAppBanner.iosLink;}},500);}).one('k4-modal-close',function(){$document.off('click.confirm-ecoupons-redirect-to-app');});});}
function sync(){if(needSync){$.ajax({url:config.syncUrl}).then(function(data){needSync=false;if(data.error){log.error(data.error,config.syncUrl);}},function(error){log.error(error.statusText,config.syncUrl);});}}
$(function(){if(Drupal.settings.ecoupons.synchronizationInterval){setInterval(function(){sync();},config.syncInterval);}});$(window).on('unload',function(){if(needSync){k4.helpers.url.sendBeacon(config.syncUrl);}});$.fn.ecouponsFiltered=function(){$(config.slidingPannel+', body').scrollTop(0);log.debug('Drupal invoke ecouponsFiltered callback');};$.fn.ecouponsReset=function(){$(config.slidingPannel+', body').scrollTop(0);log.debug('Drupal invoke ecouponsReset callback');};})(jQuery,window.k4,window.Drupal,window.BrowserDetect);;(function($,k4){'use strict';var log=k4.Logger.get('form-masks');var prefix='data-mask-';var masks={tel:function(value){var simplifiedValue=value.replace(/\s+/g,'');return/^0\d{0,9}$/.test(simplifiedValue);}};Object.keys(masks).forEach(function(key){$(document).on('keydown','['+prefix+key+']',function(e){if(!e.key||e.key.length>1||e.ctrlKey){return;}
var pos=this.selectionStart;var value=this.value.slice(0,pos)+e.key+this.value.slice(pos,this.value.length);if(!masks[key](value)){log.debug('Key '+e.key+' doesn\'t match the phone pattern: skip');e.preventDefault();}});});})(jQuery,window.k4);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('search-context');var cacheHours=1;var cookiesPrefix='search-';var cookiesParamsPrefix='params-';var config={cityModalSelector:'.k4-managesearch-setcity',contextualizeURL:true,contextualizeURLOnLoad:false,contextualizeCityOnLoad:true,contextualizeAjaxURL:true,removeURLFilters:true};var defaultContext={hideooshop:'false'};if(!Drupal.settings.search||!Drupal.settings.search.personalization||!Drupal.settings.search.personalization.defaultContext){if(Drupal.settings.search&&Drupal.settings.search.personalization&&Drupal.settings.search.personalization.needed){log.warn('Drupal.settings.search.personalization.defaultContext not found');}}else{defaultContext=$.extend({},Drupal.settings.search.personalization.defaultContext);}
function setCookie(key,value){var options={expires:cacheHours/24,path:'/'};var domain=(typeof Drupal.settings.cookie_domain!=='undefined')?Drupal.settings.cookie_domain:'';if(domain){options.domain=domain;}
$.cookie(cookiesPrefix+key,value,options);}
function getCookie(key){return $.cookie(cookiesPrefix+key);}
function set(key,value){setCookie(cookiesParamsPrefix+key,value);}
function get(key){if(key){return getCookie(cookiesParamsPrefix+key);}else{var cookies=$.cookie();var searchCookies={};var prefix=cookiesPrefix+cookiesParamsPrefix;Object.keys(cookies).forEach(function(key){if(key.indexOf(prefix)===0){searchCookies[key.replace(prefix,'')]=cookies[key];}});return searchCookies;}}
function removeDefault(data){Object.keys(data).forEach(function(key){if(data[key]===defaultContext[key]){delete data[key];}});return data;}
function getUserPosition(){var deferred=$.Deferred();if(navigator.geolocation&&Drupal.settings.storelocator_app&&Drupal.settings.storelocator_app.googlemapsapi){navigator.geolocation.getCurrentPosition(function onSuccess(position){var coords={lat:position.coords.latitude,lng:position.coords.longitude};log.debug('Granted position access',coords);k4.storelocator.geocode({location:coords}).then(function(place){log.debug('geocoded place',place);deferred.resolve(place);});},function onError(err){log.warn('Error on getting user position: ',err.message);deferred.reject(err);});}else{if(!navigator.geolocation){log.warn('Can\'t access navigator.geolocation');deferred.reject('not-supported');}else{log.warn('Drupal.settings.storelocator_app.googlemapsapi not found: skipping geoloc.');deferred.reject('Drupal.settings.storelocator_app.googlemapsapi not found');}}
return deferred.promise();}
function setPlace(place){if(place&&place.zip){log.debug('Setting zip cookie',place.zip);setCookie('zip',place.zip);setCookie('locality',place.locality);}
return place;}
function getPlace(){return k4.helpers.toPromise(function(){var zip=getCookie('zip');if(zip){log.debug('Zip cookie found',zip);return{zip:zip,locality:getCookie('locality')};}
return getUserPosition().then(setPlace);});}
function getPersonalization(place){if(getCookie('perso')===place.zip){log.debug('Perso cookie found');k4.pubsub.trigger('k4-search-context-unchanged');return true;}else{log.debug('Perso cookie NOT found');}
if(!Drupal.settings.search||!Drupal.settings.search.personalization||!Drupal.settings.search.personalization.getInfo){log.error('Drupal.settings.search.personalization.getInfo not found: can\'t personalize search.');return false;}
var url=Drupal.settings.search.personalization.getInfo;url=url.replace('%zip%',place.zip.replace('000','001'));return $.ajax({url:url,dataType:'json'}).then(function(data){if(data){var contextHasChanged=false;log.debug('Perso data received',data);Object.keys(data).forEach(function(key){if(data[key]===get(key)){log.debug('Cookie unchanged','search-'+key,data[key]);}else{log.debug('Setting cookie','search-'+key,data[key]);contextHasChanged=true;set(key,data[key]);}});setCookie('perso',place.zip);if(contextHasChanged){k4.pubsub.trigger('k4-search-context-changed');}}},function onError(xhr,err){log.error('Error while getting search context: ',err,url);return false;});}
function contextualizeURL(url,data){data=data||get();var urlData=k4.helpers.url.decode(url);$.extend(urlData,data);urlData=removeDefault(urlData);var baseURL=k4.helpers.url.getBaseURL(url);log.debug('contextualizeURL',baseURL,urlData);var removeFiltersRegexp=/(\/search\/site\/[^\/]*\/\d+)\/.*/;if(config.removeURLFilters&&removeFiltersRegexp.test(baseURL)){baseURL=baseURL.replace(removeFiltersRegexp,'$1');log.debug('removing filters from baseURL: ',baseURL);}
return k4.helpers.url.appendDataToURL(baseURL,urlData);}
function contextualizeForm($form,data){data=data||get();Object.keys(data).forEach(function(key){var $input=$('[name='+key+']',$form);if(!$input.length){$input=$('<input />').attr('type','hidden').attr('name',key).appendTo($form);}
$input.val(data[key]);});}
function changeContext(options){var currentURL=window.location.href;options=options||{};if(!k4.search.isSearchPage(currentURL)){return;}
currentURL=k4.helpers.url.appendDataToURL(currentURL,{contextualized:1});var hash=window.location.hash;var contextURL=contextualizeURL(currentURL);if(options.noRequest){if(config.contextualizeURL&&currentURL!==contextURL){log.debug('Changing URL of search page in order to match context');k4.helpers.url.replaceURL(contextURL+hash);}else{log.debug('Current URL is matching the context');}}else{log.debug('Changing context of search page');k4.search.loadPage(config.contextualizeAjaxURL?contextURL:currentURL).then(function(){if(config.contextualizeURL&&currentURL!==contextURL){k4.helpers.url.replaceURL(contextURL+hash);}});}}
function contextualizeResultsSentence(place){if(!k4.search.isSearchPage(window.location.href)){return;}
var locality=getCookie('locality');var $resultsSentence=$('.k4-managesearch-nbresult');var nbResults=$resultsSentence.data('result');var data={nbResults:nbResults,locality:locality};var $newResultsSentence=$(k4.templates.searchResultsSentence(data));$resultsSentence.html($newResultsSentence.html());return place;}
var zipMap=[{search:/^paris$/i,locality:'Paris',zip:'75000'},{search:/^marseille$/i,locality:'Marseille',zip:'13000'},{search:/^lyon$/i,locality:'Lyon',zip:'69000'},{search:/^toulouse$/i,locality:'Toulouse',zip:'31000'},{search:/^nice$/i,locality:'Nice',zip:'06000'},{search:/^nantes$/i,locality:'Nantes',zip:'44000'},{search:/^strasbourg$/i,locality:'Strasbourg',zip:'67000'},{search:/^montpellier$/i,locality:'Montpellier',zip:'34000'},{search:/^bordeaux$/i,locality:'Bordeaux',zip:'33000'},{search:/^lille$/i,locality:'Lille',zip:'59000'}];function searchPlaceInZipMap(locality){return zipMap.find(function(z){if(z.search.test(locality)){log.debug('local zip found',z.zip);return true;}else if(z.zip.substring(0,2)===locality.substring(0,2)&&/^\d{5}$/.test(locality)){log.debug('local locality found',z.locality);z.zip=locality;return true;}});}
function searchPlaceWithZip(locality){return k4.helpers.toPromise(function(){var place=searchPlaceInZipMap(locality);if(place){return place;}
return k4.storelocator.geocode(locality).then(function(place){if(place.zip){log.debug('geocoded place has a zip',place.zip);return place;}
return k4.storelocator.geocode({location:place.location.position}).then(function(place){if(place.zip){log.debug('geocoded coordinates of the geocoded place has a zip',place.zip);return place;}else{throw'No zip found for place: '+locality;}});});});}
$(document).on('click',config.cityModalSelector,function(e){e.preventDefault();if(!k4.storelocator||!k4.storelocator.Autocomplete){log.error('storelocator.autocomplete.js not loaded: cannot change city');return;}
k4.helpers.openModal({choice:'rsc-modal-fixed-page-head',title:Drupal.t('Inform your city'),content:k4.templates.changeCity({geolocUrlHelp:Drupal.settings.search.personalization.geolocUrlHelp||false})});var $modal=$('.k4-modal');var $form=$('form',$modal);var $input=$('input',$form);var $geoloc=$('.k4-js-geolocate',$modal);$form.on('submit.change-city',function(e){e.preventDefault();var locality=$input.val().trim();searchPlaceWithZip(locality).then(setPlace).then(contextualizeResultsSentence).then(getPersonalization).then(function(){k4.helpers.closeModal();});});var autocomplete=new k4.storelocator.Autocomplete($input);autocomplete.whenLocation(function(place){k4.helpers.toPromise(function(){if(!place.zip){log.warn('No zip given for locality: ',place.locality);return searchPlaceWithZip(place.locality);}
return place;}).then(setPlace).then(contextualizeResultsSentence).then(getPersonalization).then(function(){k4.helpers.closeModal();});});$geoloc.on('click.geoloc',function(){getUserPosition().then(function(place){$input.val(place.locality);zipMap.push({search:new RegExp('^'+place.locality+'$'),locality:place.locality,zip:place.zip});});});getUserPosition().then($.noop,function(){$('.k4-modal .k4-js-geolocate-denied').removeClass('k4-hide');});$(document).one('k4-modal-before-close',function(){$form.off('submit.change-city');$geoloc.off('click.geoloc');autocomplete.destroy();});$geoloc.on('click.geoloc',function(){getUserPosition().then(function(place){$input.val(place.locality);zipMap.push({search:new RegExp('^'+place.locality+'$'),locality:place.locality,zip:place.zip});});});getUserPosition().then($.noop,function(){$('.k4-modal .k4-js-geolocate-denied').removeClass('k4-hide');});$(document).one('k4-modal-close',function(){$form.off('submit.change-city');$geoloc.off('click.geoloc');autocomplete.destroy();});$geoloc.on('click.geoloc',function(){getUserPosition().then(function(place){$input.val(place.locality);zipMap.push({search:new RegExp('^'+place.locality+'$'),locality:place.locality,zip:place.zip});});});getUserPosition().then($.noop,function(){$('.k4-modal .k4-js-geolocate-denied').removeClass('k4-hide');});$(document).one('k4-modal-close',function(){$form.off('submit.change-city');$geoloc.off('click.geoloc');});});k4.pubsub.one('k4-search-context-unchanged',function(){var $headerForm=$('#rsc-search-form');if($headerForm.length){contextualizeForm($headerForm);}
if(k4.search.isSearchPage(window.location.href)){if(config.contextualizeURLOnLoad){log.debug('Making sure that URL matches the context');changeContext({noRequest:true});}
if(k4.search.isSearchPage(window.location.href)&&config.contextualizeCityOnLoad){log.debug('Making sure that the city name is up to date');contextualizeResultsSentence();}}});k4.pubsub.on('k4-search-context-changed',function(){var $headerForm=$('#rsc-search-form');if($headerForm.length){contextualizeForm($headerForm);}
if(k4.search.isSearchPage(window.location.href)){changeContext();}});if(Drupal.settings.search&&Drupal.settings.search.personalization&&Drupal.settings.search.personalization.needed){getPlace().then(getPersonalization);}
window.k4.searchContext={get:get,contextualizeURL:contextualizeURL};})(jQuery,window.k4,window.Drupal);;(function($,k4){'use strict';var config={selector:'.k4-form-unique-checkboxes',forceOneSelector:'.k4-form-unique-checkboxes-required'};k4.helpers.onLoad('forms-unique-checkboxes',function(container){$(config.selector,container).find(':checkbox').on('click',function(){var $self=$(this);var $group=$self.closest(config.selector);if($group.is(config.forceOneSelector)){$group.find(':checkbox').prop('checked',false);$self.prop('checked',true);}
else{$group.find(':checkbox').not(this).prop('checked',false);}});});})(jQuery,window.k4);;(function($){'use strict';var config={target:'.k4-context_close',close:'.k4-close'};function closeTarget(){var $target=$(config.target);$target.on('click',config.close,function(){$(this).closest($target).hide();});}
$(function(){closeTarget();});})(jQuery);;(function($){'use strict';var config={lettersIndexContainer:'.k4-storelistalpha',lettersIndex:'.k4-storelistalpha-item-link',activeClass:'is-active'};$(function(){var $lettersIndexContainer=$(config.lettersIndexContainer);if(!$lettersIndexContainer.length){return;}
$lettersIndexContainer.on('click',config.lettersIndex,function(e){e.preventDefault();$lettersIndexContainer.find(config.lettersIndex+'.'+config.activeClass).removeClass(config.activeClass);$(this).addClass(config.activeClass);});});})(jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('css-fixes');k4.helpers.onLoad('css-fixes',function(context){$('.k4-hobbies-push-poster',context).each(function(){var $this=$(this);var $container=$this.closest('.k4-hobbies-push-content');var $img=$this.find('img');var fix=$.debounce(100,function(){var height=$container.height();log.debug('fixing img max-height',$img,height);$img.css({maxHeight:height});});fix();$container.on('k4-equalized',fix);$(window).on('resize',fix);});});})(jQuery,window.k4);;(function($,k4,BrowserDetect){'use strict';var log=k4.Logger.get('video.background');var eventsLog=k4.Logger.get('video.background.events');var helpers=k4.helpers;if(!$.fn.onScreen){log.error('abort video player: jquery.onscreen.js not loaded');return;}
var params={onscreen:{container:window,direction:'vertical',tolerance:-100,throttle:50}};function Player(el,options){options.autoplay=options.autoplay&&(BrowserDetect.platform.name!=='iOS');this.el=el;this.$el=$(el);this.options=options;this.mediaId=this.$el.data('media-id');if(options.mq){var video=this;if(k4.mq.is(options.mq)){this.init();}else{video.disable();log.debug('Video %s disabled by mq: "%s"',video.mediaId,options.mq);}
k4.mq.when(options.mq,function(){video.init();video.enable();}).whenNot(options.mq,function(){log.debug('Resize : video %s is going to be disabled by mq: "%s"',video.mediaId,options.mq);video.disable();});}else{this.init();}
return this;}
Player.prototype.init=function(){if(this.initialized){return false;}
log.info('init',this.mediaId);helpers.implementPubSub(this,{log:eventsLog});this.bindOnScreen();if(this.options.autoplay){this.autoplay();}
if(this.options.mute){this.mute();}
if(this.options.loop){this.loop();}
return true;};Player.prototype.bindOnScreen=function(){var player=this;var options=$.extend({},params.onscreen,{doIn:function(){player.whenOnScreen();},doOut:function(){player.whenOutOfScreen();}});this.$el.onScreen(options);};Player.prototype.whenOnScreen=function(){if(this.wasPlaying&&!this.isDisabled){log.info('scroll on screen -> play',this.mediaId);this.play();}
this.$el.isOnScreen=true;};Player.prototype.whenOutOfScreen=function(){this.wasPlaying=this.isPlaying;if(this.isPlaying&&!this.isDisabled){log.info('scroll out of screen -> pause',this.mediaId);this.pause();}
this.$el.isOnScreen=false;};Player.prototype.autoplay=function(){if(this.$el.isOnScreen){this.play();}else{this.wasPlaying=true;}};Player.prototype.play=function(toggle,options){this._play(toggle,options);};Player.prototype._play=function(toggle,options){options=options||{};if(toggle===false){log.debug('pause',this.mediaId);if(!this.isDisabled){this.el.pause();}
if(!options.silent){this.isPlaying=false;}}else{log.debug('play',this.mediaId);if(!this.isDisabled){try{this.el.play();}catch(err){log.warn('Error while calling `play` on player API.');}}
if(!options.silent){this.isPlaying=true;}}};Player.prototype.pause=function(options){this.play(false,options);};Player.prototype.setVolume=function(volume){this.el.volume=volume;};Player.prototype.mute=function(toggle){this.el.muted=toggle!==false;};Player.prototype.loop=function(toggle){this.el.loop=toggle!==false;};Player.prototype.disable=function(){log.info('Disable player',this.mediaId);if(this.isPlaying){log.info('disabling player -> pause',this.mediaId);this.pause({silent:true});}
this.isDisabled=true;this.$el.hide();};Player.prototype.enable=function(){log.info('Enable player',this.mediaId);this.isDisabled=false;this.$el.show();if(this.isPlaying){log.info('reenabling player -> play',this.mediaId);this.play({silent:true});}};k4.helpers.onLoad('video-background',function(context){$('video.k4-section_video-player-inner',context).each(function(i,video){var $video=$(video);var $container=$video.parent();new Player(video,{autoplay:true,loop:true,mute:true,mq:$video.data('video-mq')});if(k4.video.fitBackground){k4.video.fitBackground($container,$video,{ratio:$video.data('ratio')});}else{log.warn('Fit background module not found (video.fitbackground.js)');}});});})(jQuery,window.k4,window.BrowserDetect);;(function($,k4){'use strict';var log=k4.Logger.get('form-inactive');var formSelector='.k4-form_inactive';var submitSelector='.k4-cta';var inactiveClass='k4-cta_inactive';function disable($submits){$submits.each(function(){var $submit=$(this);$submit.addClass(inactiveClass);if($submit.is('button')){$submit.attr('disabled','disabled');}else if($submit.is('a')){$submit.on('mousedown.form-inactive click.form-inactive',function(e){e.preventDefault();});}
if($submit.is(':visible')){this.inlineStyle=$submit.attr('style');$submit.removeAttr('style');}});}
function enable($submits){$submits.each(function(){var $submit=$(this);log.debug('Enabling submit',$submit);$submit.removeClass(inactiveClass);if($submit.is('button')){$submit.removeAttr('disabled');}else if($submit.is('a')){$submit.off('mousedown.form-inactive click.form-inactive');}
if(this.inlineStyle){$submit.attr('style',this.inlineStyle);}});}
k4.helpers.onLoad('form-inactive',function(context){$(formSelector,context).each(function(){var $form=$(this);var $submit=$(submitSelector,this);if($submit.length){log.debug('Using inactive button feature',$submit);disable($submit);$form.one('change',function(){enable($submit);});}});});})(jQuery,window.k4);;(function($,Drupal,k4){'use strict';var log=k4.Logger.get('autopopin');var settings=$.extend({url:''},Drupal.settings.autopopin);$(function(){if(settings.url){log.debug('Triggering popin: ',settings.url);var element_settings={};element_settings.url=settings.url;element_settings.event='click';var base='autopopin';var element=document.createElement('div');element.className='ctools-use-modal ctools-modal-rsc-modal-fixed';Drupal.ajax[base]=new Drupal.ajax(base,element,element_settings);Drupal.ajax[base].eventResponse(element);}});})(jQuery,window.Drupal,window.k4);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('form-autosubmit');k4.helpers.onLoad('form-autosubmit',function(context){var $context=$(context);var $forms=$context.is('form')?$context.filter('[data-autosubmit]'):$('form[data-autosubmit]',context);$forms.each(function(){if(!this.autosubmit){this.autosubmit=true;var $form=$(this);$form.on('change.autosubmit',function(){log.debug('submiting form',$form);var ajaxDrupal=false;if(Drupal.settings.ajax){Object.keys(Drupal.settings.ajax).forEach(function(base){var ajaxSettings=Drupal.settings.ajax[base];if($form[0].contains(ajaxSettings.element)&&$(ajaxSettings.element).is('[data-autosubmit-trigger]')){$(ajaxSettings.element).trigger(ajaxSettings.event);ajaxDrupal=true;}});}
if(!ajaxDrupal){$form.trigger('submit');}});}});});})(jQuery,window.k4,window.Drupal);;(function($){'use strict';$(document).on('click','.k4-more-cta',function(){var $button=$(this);var $span=$button.find('span:visible');var $otherSpan=$span.siblings('span:not(visible)');var $container=$button.siblings('.k4-more');var toggle=$span.is('.k4-more-cta-more');var currentHeight=$container.height();$container.toggleClass('is-open',toggle);var targetHeight=$container.height();$container.css({height:currentHeight});$container.animate({height:targetHeight},{duration:300,start:function(){$container.toggleClass('is-open',true);},complete:function(){$container.toggleClass('is-open',toggle).css({height:''});$otherSpan.show();$span.hide();}});});})(jQuery);;(function($,k4){'use strict';var log=k4.Logger.get('pins');var pinClasses={top:{left:'k4-pinblock-tooltip_l_top',right:'k4-pinblock-tooltip_r_top'},middle:{left:'k4-pinblock-tooltip_l_middle',right:'k4-pinblock-tooltip_r_middle'},bottom:{left:'k4-pinblock-tooltip_l_bottom',right:'k4-pinblock-tooltip_r_bottom'}};var defaultPosition={vertical:'bottom',horizontal:'left'};var selectors={container:'.k4-pinblock',tooltipContainer:'.k4-pinblock-tooltip',pin:'.k4-pinblock-pin',tooltip:'.k4-productthumb'};var activeClass='is-active';var pinBlocks=[];function setTooltipPosition($tooltipContainer,position){Object.keys(pinClasses).forEach(function(verticalKey){Object.keys(pinClasses[verticalKey]).forEach(function(horizontalKey){var className=pinClasses[verticalKey][horizontalKey];$tooltipContainer.toggleClass(className,verticalKey===position.vertical&&horizontalKey===position.horizontal);});});}
function PinBlock($container){this.$container=$container;log.debug('init',$container);this.init();}
PinBlock.prototype.init=function(){var self=this;this.$container.on('click',selectors.pin,function(e){var $pin=$(e.target);var $tooltipContainer=$pin.closest(selectors.tooltipContainer);var toggle=!$tooltipContainer.hasClass(activeClass);self.reset();if(toggle){$tooltipContainer.addClass(activeClass);self.bindCloseClick();}});this.adjustTooltipPositions();};PinBlock.prototype.adjustTooltipPositions=function(){var self=this;self.$container.find(selectors.tooltipContainer).each(function(){self.adjustTooltipPosition($(this));});};PinBlock.prototype.adjustTooltipPosition=function($tooltipContainer){if(!$tooltipContainer.length){return;}
var position=$.extend({},defaultPosition);var $pin=$(selectors.pin,$tooltipContainer);var $tooltip=$tooltipContainer.find(selectors.tooltip);if(this.$container.height()<$tooltipContainer.position().top+$pin.outerHeight()+$tooltip.outerHeight()){position.vertical='top';if(this.$container.height()>$tooltipContainer.position().top+($pin.outerHeight()/2+$tooltip.outerHeight()/2)){position.vertical='middle';}
if($tooltipContainer.position().top<$tooltip.outerHeight()){position.vertical='middle';}}
if($tooltipContainer.position().left-this.$container.position().left<$tooltip.outerWidth()){position.horizontal='right';}
setTooltipPosition($tooltipContainer,position);};PinBlock.prototype.reset=function(){this.$container.find(selectors.tooltipContainer+'.'+activeClass).removeClass(activeClass);this.unbindCloseClick();};PinBlock.prototype.bindCloseClick=function(){var self=this;$(document).on('click.pinblock',function(e){if(!$(e.target).closest(selectors.tooltipContainer).length){log.debug('click outside tooltip: closing tooltip');self.reset();}});};PinBlock.prototype.unbindCloseClick=function(){$(document).off('click.pinblock');};k4.helpers.onLoad('k4-pinblock',function(context){$(selectors.container,context).each(function(){var $container=$(this);pinBlocks.push(new PinBlock($container));});});$(window).on('resize.pinblock',$.debounce(100,function(){pinBlocks.forEach(function(pinBlock){pinBlock.adjustTooltipPositions();});}));k4.mq.when('S',function(){pinBlocks.forEach(function(pinBlock){pinBlock.reset();});});})(jQuery,window.k4);;(function($,k4,Drupal){'use strict';var log=k4.Logger.get('gift-generator');var config={selectBoxClass:'.k4-giftgenerator_selectwrapper',infiniteContainer:'#k4-giftgenerator-search-results'};function Select(){return{checkBoxClass:'.k4-giftgenerator_check',isCheckedClass:'k4-giftgenerator_checked',mobileThreshold:5,desktopThreshold:7,init:function(selectWrapper){this.$selectWrapper=$(selectWrapper);this.$select=this.$selectWrapper.find('select');this.$items=this.$select.find('option');this.inputs=[];this.setLayout();},createInputs:function(){this.$items.each(function(index,value){this.inputs.push('<label class="k4-cta2 k4-giftgenerator_check">'+$(value).text()+'<input type="checkbox" data-label="item-'+(index+1)+'">'+'</label>');}.bind(this));var $checkboxes=$(this.inputs.join('')).insertBefore(this.$selectWrapper);this.onSelect($checkboxes);},setLayout:function(){var length=this.$items.length;if(length<this.mobileThreshold){this.$selectWrapper.hide();this.createInputs();}else if(k4.mq.isNot('S')&&length<this.desktopThreshold){this.$selectWrapper.hide();this.createInputs();}},onSelect:function($checkboxes){var selectVal=[];$checkboxes.on('change',function(event){var $checkbox=$(event.currentTarget),dataValue=$checkbox.find('input').data('label'),optionVal=this.$select.find('[data-option="'+dataValue+'"]').val(),indexVal=selectVal.indexOf(optionVal);$checkbox.toggleClass(this.isCheckedClass);if(indexVal===-1){selectVal.push(optionVal);}else{selectVal.splice(indexVal,1);}
this.$select.val(selectVal);log.debug('select val',this.$select.val());}.bind(this));}};}
$(config.selectBoxClass).each(function(){var select=new Select();select.init(this);});k4.helpers.onLoad('gift-generator',function(){if($('#gift-generator').length&&Drupal.settings.rsc_product_promo&&typeof Drupal.settings.rsc_product_promo.pager_init!=='undefined'&&Drupal.settings.rsc_product_promo.pager_init==1){log.debug('Init Pager',Drupal.settings.rsc_product_promo.pager_init);Drupal.behaviors.gd_infinite_scroll.setUrl(1,$(config.infiniteContainer));}});})(jQuery,window.k4,window.Drupal);;(function($,k4,Drupal){'use strict';var Logger=k4.Logger;var log=Logger.get('nav.section');var eventsLog=Logger.get('nav.section.events');var helpers=k4.helpers;var config={container:'.k4-nav_v2',menu:'.k4-nav-group_v2',subMenu:'.k4-nav-group',togglingBtn:'.js-nav-toggler',isHomepage:k4.helpers.isHomepage(),classes:{opened:'is-open'}};function controller(nav){nav.addControls({'setupMenu':['isNotDesktopHomepage','toggleMenu'],'closeMenu':['hideOverlay','closeMenu','closeTogglingBtn'],'openMenu':['showOverlay','openMenu','openTogglingBtn','->k4-nav-open'],'clickOverlay':'toggleMenu','k4-header-open':'->closeIfOpen','closeIfOpen':['ifNavOpen','toggleMenu']});}
function browseSections(nav){$.extend(nav,{sectionsData:Drupal.settings.rsc_header.menu_rayon_navigation||{},$browsingContainer:$('.js-nav-section'),listClass:'k4-nav_v2-panel',listItemClass:'k4-nav_v2-item',rootListClass:'k4-nav_v2-root',linkClass:'k4-nav_v2-link k4-nav_v2-link_bg',linkClassBgMobile:'k4-nav_v2-link_bg--mobile',linkClassBgDesktop:'k4-nav_v2-link_bg--desktop',backBtnClass:'k4-nav_v2-backbtn',backBtnCtaClass:'k4-cta3 k4-cta3_dark k4-cta3_back',categoryClass:'k4-nav_v2-category',hasChildrenClass:'js-nav-section-has-children',listOpenedClass:'js-is-collapsed',listItemActiveClass:'js-is-active',backBtnTextAttr:'data-nav-section-backBtnText',itemUidAttr:'data-nav-section-uid',setupBrowsing:function(){var $container=$('.'+this.listClass);this.backBtnText=$container.attr(this.backBtnTextAttr);$container.find('.'+this.listItemClass).each(function(index,elem){var $elem=$(elem);var uid=$elem.attr(this.itemUidAttr);$elem.find('a:first-child').on('click',this.onMenuLinkClick.bind(this,$elem,this.sectionsData[uid]));}.bind(this));},createChildrenList:function($panel,entry){var childPanel=$('<ul class="'+this.listClass+'"></ul>');var $backBtnWrapper=$('<li class="'+this.backBtnClass+'"></li>');var $backBtn=$('<a href="#" class="'+this.backBtnCtaClass+' '+this.linkClass+'">'+this.backBtnText+'</a>');var $panelTitle=$('<li class="'+this.categoryClass+'"><a href="'+entry.url+'" class="'+this.linkClass+'"><span>'+entry.name+'</span></a></li>');childPanel.append($backBtnWrapper.append($backBtn),$panelTitle);$panel.append(childPanel);var children=entry.children;$backBtn.on('click',this.onBackBtnClick.bind(this,$panel));for(var key in children){var child=children[key];var childItemClass=(child.children&&child.collapsed)?this.listItemClass+' '+this.hasChildrenClass:this.listItemClass;var $childItem=$('<li class="'+childItemClass+'"></li>').attr(this.itemUidAttr,child.tid);var linkTarget=child.blank?'target="_blank"':'';var linkClasses=this.linkClass;linkClasses+=child.style.background_image_mobile?' '+this.linkClassBgMobile:'';linkClasses+=child.style.background_image_desktop?' '+this.linkClassBgDesktop:'';var dataTracking=entry.data_tag_click?'data-tag-click="'+entry.data_tag_click+'"':'';var $childItemLink=$('<a href="'+child.url+'" class="'+linkClasses+'" '+linkTarget+' '+dataTracking+'>'+child.name+'</a>');var bgImage=k4.mq.is('!S')?child.style.background_image_desktop:child.style.background_image_mobile;$childItemLink.css({'background-image':'url('+bgImage||''+')','background-color':child.style.background_color,'color':child.style.text_color});(function($childItemLink,child){return k4.mq.when('!S',function(){log.debug('above S, switched to desktop background image');var bgImgDesktop=child.style.background_image_desktop||'';$childItemLink.css({'background-image':'url('+bgImgDesktop+')'});});})($childItemLink,child);(function($childItemLink,child){return k4.mq.when('S',function(){log.debug('below S, switched to mobile background image');var bgImgMobile=child.style.background_image_mobile||'';$childItemLink.css({'background-image':'url('+bgImgMobile+')'});});})($childItemLink,child);childPanel.append($childItem);$childItem.append($childItemLink);$childItemLink.on('click',this.onMenuLinkClick.bind(this,$childItem,children[key]));}},resetMenuDisplay:function(){$('.'+this.listOpenedClass,this.$browsingContainer).removeClass(this.listOpenedClass).find('.'+this.listItemActiveClass).removeClass(this.listItemActiveClass);},toggleSubMenuPanel:function($panel,toggle){setTimeout(function(){$panel.parent('.'+this.listClass).toggleClass(this.listOpenedClass,toggle);$panel.toggleClass(this.listItemActiveClass,toggle);}.bind(this),0);},onMenuLinkClick:function($panel,entry,event){if(entry&&entry.children&&entry.collapsed){event.preventDefault();if(!entry.isCreated){this.createChildrenList($panel,entry);this.toggleSubMenuPanel($panel,true);entry.isCreated=true;}else{this.toggleSubMenuPanel($panel,true);}}},onBackBtnClick:function($panel,event){event.preventDefault();this.toggleSubMenuPanel($panel,false);}});}
function view(nav){$.extend(nav,{isNotDesktopHomepage:function(){return!(k4.mq.is('M')&&nav.params.isHomepage);},ifNavOpen:function(){if(nav.isNotDesktopHomepage()){return nav.$menu.hasClass(nav.params.classes.opened);}else{return false;}},toggleOverlay:function(){nav.$container.toggleClass(nav.params.classes.opened,!nav.params.overlayIsVisible);nav.params.overlayIsVisible=!nav.params.overlayIsVisible;k4.helpers.toggleBodyScroll(!nav.params.overlayIsVisible);},showOverlay:function(){nav.params.overlayIsVisible=false;nav.toggleOverlay();},hideOverlay:function(){nav.params.overlayIsVisible=true;nav.toggleOverlay();},toggleMenu:function(){nav.trigger(nav.params.isVisible?'closeMenu':'openMenu');nav.params.isVisible=!nav.params.isVisible;},openMenu:function(){nav.$menu.addClass(nav.params.classes.opened);nav.resetMenuDisplay();log.debug('open menu');},closeMenu:function(){nav.$menu.removeClass(nav.params.classes.opened);log.debug('close menu');},openTogglingBtn:function(){nav.$togglingBtn.addClass(nav.params.classes.opened);log.debug('button opened state');},closeTogglingBtn:function(){nav.$togglingBtn.removeClass(nav.params.classes.opened);log.debug('button closed state');}});}
function Nav(params){var nav=this;nav.$container=$(params.container);$.extend(nav,{params:params,$menu:$(params.menu,nav.$container),$togglingBtn:$(params.togglingBtn),$closeBtn:$(params.closeBtn,nav.$container),overlayIsVisible:false,isVisible:false});helpers.implementPubSub(this,{log:eventsLog});$.extend(nav,{init:function(){log.debug('init menu');view(nav);controller(nav);browseSections(nav);nav.bindEvents();},bindEvents:function(){nav.setupBrowsing();if(!nav.isNotDesktopHomepage()){nav.openMenu();nav.params.isVisible=true;}else{nav.params.isVisible=false;}
k4.mq.when('M',function(){log.debug('switched above M');if(!nav.isNotDesktopHomepage()){nav.openMenu();nav.closeTogglingBtn();nav.params.isVisible=true;if(nav.params.overlayIsVisible){nav.hideOverlay();}}});k4.mq.whenNot('M',function(){log.debug('switched below M');if(nav.params.isHomepage){nav.closeMenu();nav.closeTogglingBtn();nav.params.isVisible=false;}});nav.$container.on('click touchstart',function(event){if(nav.$container.is(event.target)){event.preventDefault();nav.trigger('clickOverlay');}});nav.$togglingBtn.on('click',nav.bindEvent('setupMenu'));}});nav.init();}
k4.helpers.onLoad('nav-section',function(container){if(!k4.helpers.isNewNav()){return;}
var $container=$(container);if($container.length&&$(config.menu,$container).length){k4.nav=new Nav(config);k4.helpers.unLoad('nav');}});})(jQuery,window.k4,window.Drupal);;(function($,k4){'use strict';var log=k4.Logger.get('toggable-panel');var config={wrapperSelector:'.k4-toggable-panel-wrapper'};function ToggablePanel($panelWrapper){this.activeClass='is-active';this.$panel=$panelWrapper.find('.k4-toggable-panel');this.$panelContent=this.$panel.find('.k4-toggable-panel-content');this.$container=$panelWrapper.parents('.k4-toggable-panel-container');this.$togglingBtn=$panelWrapper.find('.k4-toggable-panel-button');this.$closeBtn=$panelWrapper.find('[data-toggable-panel-close]');this.mq=$panelWrapper.attr('data-toggable-panel-mq')||'';this.isVisible=$panelWrapper.is('[data-toggable-panel-opened]');this.morphing=$panelWrapper.is('[data-toggable-panel-morphing]');this.animationDelay=510;this.init();}
ToggablePanel.prototype.init=function(){log.debug('init');if(this.morphing){this.transition=this.getTransitionCompatibility();}
this.bindEvents();};ToggablePanel.prototype.bindEvents=function(){this.$togglingBtn.on('click',function(event){event.preventDefault();if(this.mq&&k4.mq.isNot(this.mq)){return;}
$(window).scrollTop(this.$container.offset().top-$('.k4-sticky-spacer').height()-$('.k5-subheader').height());this.togglePanel();}.bind(this));if(this.$closeBtn.length){this.$closeBtn.on('click',function(event){event.preventDefault();if(this.isVisible){this.togglePanel();}}.bind(this));}
$(document).on('k4-nav-open k4-header-open k4-toggable-panel-opened',function(){if(this.isVisible){this.togglePanel();}}.bind(this));$(document).on('k4-header-height-change',function(){if(this.isVisible){setTimeout(function(){this.setPanelHeight();this.$panel.css({'top':Math.round(this.$togglingBtn.offset().top-$(window).scrollTop())+'px'});}.bind(this),15);}}.bind(this));if(this.mq){k4.mq.whenNot(this.mq,function(){if(this.isVisible){this.togglePanel();}}.bind(this));}};ToggablePanel.prototype.togglePanel=function(){if(this.isAnimating){return;}
$(document).trigger(!this.isVisible?'k4-toggable-panel-opened':'k4-toggable-panel-closed');setTimeout(function(){}.bind(this),0);if(this.morphing){this.isAnimating=true;this.positionMorphingPanel();this.transition=false;if(this.transition){this.$panel.on(this.transition,function(event){if(event.target!==this.$panel[0]&&event.target!==this.$panelContent[0]){return;}
if(!this.isVisible){this.$container.removeClass(this.activeClass);}
this.isAnimating=false;}.bind(this));}else{setTimeout(function(){if(!this.isVisible){this.$container.removeClass(this.activeClass);}
this.isAnimating=false;}.bind(this),this.animationDelay);}
if(!this.isVisible){this.$container.addClass(this.activeClass);setTimeout(function(){this.toggleClasses();this.setPanelHeight();k4.helpers.toggleBodyScroll(this.isVisible);this.isVisible=!this.isVisible;}.bind(this),50);}else{this.toggleClasses();k4.helpers.toggleBodyScroll(this.isVisible);this.isVisible=!this.isVisible;}}else{this.toggleClasses();this.isVisible=!this.isVisible;}};ToggablePanel.prototype.toggleClasses=function(){this.$panel.toggleClass(this.activeClass,!this.isVisible);this.$togglingBtn.toggleClass(this.activeClass,!this.isVisible);this.$closeBtn.toggleClass(this.activeClass,!this.isVisible);};ToggablePanel.prototype.setPanelHeight=function(){this.$panel.height(k4.helpers.getWindowHeight()-Math.round(this.$togglingBtn.offset().top-$(window).scrollTop()));};ToggablePanel.prototype.positionMorphingPanel=function(){setTimeout(function(){var buttonPos=this.$togglingBtn.offset();this.$panel.css({left:Math.round(buttonPos.left),top:buttonPos.top-$(window).scrollTop(),width:this.$togglingBtn.outerWidth(),height:this.$togglingBtn.outerHeight()});}.bind(this),10);};ToggablePanel.prototype.getTransitionCompatibility=function(){var transitions={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd','msTransition':'MSTransitionEnd','transition':'transitionend'};var elem=document.createElement('div');for(var t in transitions){if(typeof elem.style[t]!=='undefined'){return transitions[t];}}};k4.helpers.onLoad('toggable-panel',function(){$(config.wrapperSelector).each(function(index,elem){new ToggablePanel($(elem));});});})(jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('move');var movableElements=[{element:'#js-slidingpanel',parent:'#js-move-slidingpanel',mq:'!M',isDisabled:!k4.helpers.isNewNavGrid()},{element:'#nav',parent:'#js-move-nav',mq:'!M',isDisabled:!k4.helpers.isNewNav()},{element:'#dropdownlist',parent:'#subnav',mq:'!M',isDisabled:!k4.helpers.isNewNav()}];function Move($movableElement,$parent,movableElementOptions){if(movableElementOptions.isDisabled){return;}
this.$movableElement=$movableElement;this.$newParent=$parent;this.mq=movableElementOptions.mq;this.bindEvents();}
Move.prototype.bindEvents=function(){if(k4.mq.is(this.mq)){this.moveElement();}
k4.mq.when(this.mq,function(){this.moveElement();}.bind(this));k4.mq.whenNot(this.mq,function(){this.restoreElement();}.bind(this));};Move.prototype.moveElement=function(){this.$placeholder=$('<span style="display: none;" />');this.$placeholder.insertAfter(this.$movableElement);this.$movableElement.appendTo(this.$newParent);this.elementGotMoved=true;};Move.prototype.restoreElement=function(){if(!this.elementGotMoved){return;}
log.debug('restore elem',this.$movableElement);this.$movableElement.insertAfter(this.$placeholder);this.$placeholder.remove();this.elementGotMoved=false;};var ajaxAssumed=false;k4.helpers.onLoad('move',function(){movableElements.forEach(function(movableElement){var $movableElement=$(movableElement.element);if($movableElement.data('instantiated')){return;}
var $parent=$(movableElement.parent);if($movableElement.length&&$parent.length){if(ajaxAssumed){log.info('Elements Ajax loaded');}
new Move($movableElement,$parent,movableElement);$movableElement.data('instantiated',true);}else{log.debug('Elements DOM not found (ajax loaded?)');ajaxAssumed=true;}});});})(jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('scroller');function Scroller(container,options){$.extend(true,this.settings,k4.helpers.getOptionsFromData(container,'scroller'),options);this.slider=container;this.slides=container.querySelectorAll(this.settings.selectors.slide);if(!this.slides.length){return;}
this.prevBtn=document.querySelector(this.settings.selectors.prevBtn);if(!this.prevBtn){return;}
this.nextBtn=document.querySelector(this.settings.selectors.nextBtn);if(!this.nextBtn){return;}
log.debug('init');this.scrolledClass=this.settings.classes.hasScrolled;this.endClass=this.settings.classes.isEnd;this.averageItemWidth=this.settings.averageSlideWidth;this.scrollAnimationDuration=this.settings.scrollAnimationDuration;this.init();}
Scroller.prototype.settings={selectors:{slide:'.k5-js-scroller-item',prevBtn:'.k5-js-scroller-btn-prev',nextBtn:'.k5-js-scroller-btn-next'},classes:{hasScrolled:'k5-js-scroller-scrolled',isEnd:'k5-js-scroller-end',},averageSlideWidth:150,scrollAnimationDuration:200,onStartup:function(context){if(window.matchMedia("(min-width: 640px)").matches){return;}
setTimeout(function(){context.updateView(context.averageItemWidth/2,1500);context.updateView(0,1500);}.bind(context),1500);}};Scroller.prototype.init=function(){if(this.settings.onStartup&&typeof this.settings.onStartup==='function'){this.settings.onStartup(this);}
this.bindEvents();};Scroller.prototype.bindEvents=function(){this.prevBtn.addEventListener('click',this.prev.bind(this));this.nextBtn.addEventListener('click',this.next.bind(this));this.slider.addEventListener('scroll',this.toggleScrollingArrows.bind(this));};Scroller.prototype.prev=function(){var newScrollLeft=this.slider.scrollLeft-this.averageItemWidth;this.updateView(newScrollLeft);log.debug('prev');};Scroller.prototype.next=function(){var newScrollLeft=this.slider.scrollLeft+this.averageItemWidth;this.updateView(newScrollLeft);log.debug('next');};Scroller.prototype.updateView=function(scrollLeft,animationDelay){$(this.slider).animate({scrollLeft:scrollLeft},animationDelay||this.scrollAnimationDuration,function(){this.toggleScrollingArrows();}.bind(this));};Scroller.prototype.toggleScrollingArrows=function(){$(this.prevBtn).toggleClass(this.scrolledClass,this.slider.scrollLeft>0);$(this.nextBtn).toggleClass(this.endClass,this.isSliderEnd());};Scroller.prototype.isSliderEnd=function(){var lastSlide=this.slides[this.slides.length-1];var left=lastSlide.getBoundingClientRect().left;var right=left+lastSlide.offsetWidth+this.getScrollBarWidth();return Math.abs(right-window.innerWidth)<=5;};Scroller.prototype.getScrollBarWidth=function(){var inner=document.createElement('p');inner.style.width='100%';inner.style.height='200px';var outer=document.createElement('div');outer.style.position='absolute';outer.style.top='0px';outer.style.left='0px';outer.style.visibility='hidden';outer.style.width='200px';outer.style.height='150px';outer.style.overflow='hidden';outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow='scroll';var w2=inner.offsetWidth;if(w1===w2){w2=outer.clientWidth;}
document.body.removeChild(outer);return(w1-w2);};var scrollers=document.querySelectorAll('.k5-js-scroller');for(var i=0;i<scrollers.length;i++){new Scroller(scrollers[i]);}})(jQuery,window.k4);;(function($,k4){'use strict';var log=k4.Logger.get('k5.slider');if(!$.fn.flexslider){log.error('flexslider plugin not loaded');return;}
var defaultSettings={animation:'slide',selector:'.k5-slider > .k5-slide',controlNav:false,prevText:"&#8592;",nextText:"&#8594;",animationLoop:false,useCSS:true,allowOneSlide:false,pauseOnHover:true};var sliders=[{container:'.k5-slider-container--fuel',options:{itemWidth:205,itemMargin:15,directionNav:false}},{container:'.k5-slider-container--store-actu',options:{itemWidth:(window.matchMedia("(min-width: 640px)").matches)?555:320,itemMargin:0,slideshow:false}},{container:'.k5-slider-container--cards',options:{itemWidth:(window.matchMedia("(min-width: 640px)").matches)?175:135,itemMargin:15,slideshow:false,controlNav:true,noMobile:true}},{container:'.k5-slider-container--one-item',options:{maxItems:1,itemMargin:0,directionNav:false,controlNav:true}},{container:'.k5-block-content-slider-container',options:{maxItems:1,itemMargin:0,directionNav:true,controlNav:true,animationLoop:true}},{container:'.k5-js-slider-mega',options:{itemMargin:15,itemWidth:(window.matchMedia("(min-width: 640px)").matches)?365:285,directionNav:true,controlNav:true,slideshow:false,noMobile:true}},{container:'.k5-slider-slick-actu',options:{itemMargin:15,itemWidth:600,maxItems:(window.matchMedia("(min-width: 640px)").matches)?2:1,minItems:(window.matchMedia("(min-width: 640px)").matches)?2:1,directionNav:false,controlNav:true}},{container:'.k5-js-slider-services',options:{itemMargin:(window.matchMedia("(min-width: 640px)").matches)?15:0,itemWidth:(window.matchMedia("(min-width: 640px)").matches)?775:380,minItems:(window.matchMedia("(min-width: 640px)").matches)?2:1,directionNav:false,controlNav:false,animationLoop:true}},{container:'.k5-js-slider-global',options:{slideshow:false,itemMargin:15,itemWidth:(window.matchMedia("(min-width: 640px)").matches)?175:135,controlNav:true,noMobile:true}},{container:'.k5-js-slider-zone-perso',options:{itemWidth:(window.matchMedia("(min-width: 640px)").matches)?520:300,slideshow:false,controlNav:true}}];function getWidthFromMQ(defaultWidth,mqWidths){for(var i=0;i<mqWidths.length;i++){var elem=mqWidths[i];if(window.matchMedia('(min-width: '+elem.mq+'px)').matches){if(typeof elem.width==='function'){return elem.width();}
return elem.width;}}
return defaultWidth;}
k4.helpers.onLoad('flexslider',function(container){sliders.forEach(function(slider){if(!slider.container){log.warn('No container specified to initialized the slider');return;}
if(slider.options.noMobile&&k4.mq.isNot('M')){log.debug('Slider '+slider.container+' is not handled via JS on touch devices');return;}
var $slider=$(slider.container);if(!$slider.length){return;}
var options=$.extend({},defaultSettings,slider.options||{});$($slider,container).flexslider(options);});$(window).trigger('resize');});})(jQuery,window.k4);;(function($,k4){'use strict';function More($container){this.$container=$container;this.toggleBtnSelector='.k5-js-more--btn';this.$toggleBtn=$container.find(this.toggleBtnSelector);this.classToToggle='k5-more--show-items';this.checkHashAttribute='data-more-hash';this.isExpanded=$container.hasClass(this.classToToggle);this.scrollDuration=300;this.init();}
More.prototype.init=function(){this.checkHash();this.bindEvents();};More.prototype.bindEvents=function(){this.$container.on('click',this.toggleBtnSelector,this.showMoreOrLess.bind(this));};More.prototype.checkHash=function(){var hashToCheck=this.$toggleBtn.attr(this.checkHashAttribute);if(!hashToCheck){return;}
if(window.location.hash===hashToCheck){this.showMoreOrLess();k4.helpers.scrollTo(this.$container,this.scrollDuration);}};More.prototype.showMoreOrLess=function(){this.$container.toggleClass(this.classToToggle,!this.isExpanded);this.isExpanded=!this.isExpanded;var $text=this.$toggleBtn.text();if($text.indexOf('Voir plus')>=0){this.$toggleBtn.text('Voir moins')}else if($text.indexOf('Voir moins')>=0){this.$toggleBtn.text('Voir plus')}};$('.k5-js-more').each(function(index,elem){new More($(elem));});})(jQuery,window.k4);;(function($,k4,BrowserDetect){'use strict';var log=k4.Logger.get('k5.video.background');var eventsLog=k4.Logger.get('k5.video.background.events');var helpers=k4.helpers;if(!$.fn.onScreen){log.error('abort video player: jquery.onscreen.js not loaded');return;}
var params={onscreen:{container:window,direction:'vertical',tolerance:-100,throttle:50}};function Player(el,options){options.autoplay=options.autoplay&&(BrowserDetect.platform.name!=='iOS');this.el=el;this.$el=$(el);this.options=options;this.mediaId=this.$el.data('media-id');if(window.matchMedia("(min-width: "+options.mq+"px)").matches){this.init();this.enable();}else{this.disable();}
return this;}
Player.prototype.init=function(){if(this.initialized){return false;}
log.info('init',this.mediaId);helpers.implementPubSub(this,{log:eventsLog});this.bindOnScreen();if(this.options.autoplay){this.autoplay();}
if(this.options.mute){this.mute();}
if(this.options.loop){this.loop();}
return true;};Player.prototype.bindOnScreen=function(){var player=this;var options=$.extend({},params.onscreen,{doIn:function(){player.whenOnScreen();},doOut:function(){player.whenOutOfScreen();}});this.$el.onScreen(options);};Player.prototype.whenOnScreen=function(){if(this.wasPlaying&&!this.isDisabled){log.info('scroll on screen -> play',this.mediaId);this.play();}
this.$el.isOnScreen=true;};Player.prototype.whenOutOfScreen=function(){this.wasPlaying=this.isPlaying;if(this.isPlaying&&!this.isDisabled){log.info('scroll out of screen -> pause',this.mediaId);this.pause();}
this.$el.isOnScreen=false;};Player.prototype.autoplay=function(){if(this.$el.isOnScreen){this.play();}else{this.wasPlaying=true;}};Player.prototype.play=function(toggle,options){this._play(toggle,options);};Player.prototype._play=function(toggle,options){options=options||{};if(toggle===false){log.debug('pause',this.mediaId);if(!this.isDisabled){this.el.pause();}
if(!options.silent){this.isPlaying=false;}}else{log.debug('play',this.mediaId);if(!this.isDisabled){try{this.el.play();}catch(err){log.warn('Error while calling `play` on player API.');}}
if(!options.silent){this.isPlaying=true;}}};Player.prototype.pause=function(options){this.play(false,options);};Player.prototype.setVolume=function(volume){this.el.volume=volume;};Player.prototype.mute=function(toggle){this.el.muted=toggle!==false;};Player.prototype.loop=function(toggle){this.el.loop=toggle!==false;};Player.prototype.disable=function(){log.info('Disable player',this.mediaId);if(this.isPlaying){log.info('disabling player -> pause',this.mediaId);this.pause({silent:true});}
this.isDisabled=true;this.$el.hide();};Player.prototype.enable=function(){log.info('Enable player',this.mediaId);this.isDisabled=false;this.$el.show();if(this.isPlaying){log.info('reenabling player -> play',this.mediaId);this.play({silent:true});}};k4.helpers.onLoad('k5.video.background',function(context){$('video.k5-block--video-bg__file',context).each(function(i,video){var $video=$(video);var $container=$video.parent();new Player(video,{autoplay:true,loop:true,mute:true,mq:$video.data('video-mq')});if(k4.video.fitBackground){k4.video.fitBackground($container,$video,{ratio:$video.data('ratio')});}else{log.warn('Fit background module not found (video.fitbackground.js)');}});});})(jQuery,window.k4,window.BrowserDetect);;(function($,k4){'use strict';var log=k4.Logger.get('form-password-toggle');k4.helpers.onLoad('form-password-toggle',function(context){$('form',context).on('click','.k5-password-helper',function(){var $this=$(this),$icon=$this.children('.k5-icon'),$helptxt=$this.children('.k5-password-helper-hide , .k5-password-helper-show'),$pwd=$this.siblings('div').children('input[type]');$icon.toggleClass('k5-icon-eye k5-icon-eye-off');$helptxt.toggle();var $pwdType=($pwd.attr('type')==='password')?'text':'password';$pwd.prop('type',$pwdType);});});})(jQuery,window.k4);;